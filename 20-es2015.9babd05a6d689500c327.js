(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"9u+z":function(t,e,s){"use strict";s.r(e);var n=s("ofXK"),i=s("3Pt+"),a=s("dlKe"),r=s("PCNd"),c=s("crCf"),o=s("5cNS"),l=s("tyNb"),u=s("fXoL"),d=s("paXB"),b=s("7/bn"),m=s("oMXN"),h=s("EiG8"),p=s("aZ8m");let S=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Kb({type:t,selectors:[["j-history"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"]],template:function(t,e){1&t&&(u.Wb(0,"j-layout-home"),u.Wb(1,"j-aside"),u.Rb(2,"j-nav-main"),u.Vb(),u.Wb(3,"j-main"),u.Wb(4,"section",0),u.Wb(5,"section",1),u.Rb(6,"j-header"),u.Rb(7,"router-outlet"),u.Vb(),u.Vb(),u.Vb(),u.Vb())},directives:[d.a,b.a,m.a,h.a,p.a,l.h],styles:[""]}),t})();var g=s("mrSG"),T=s("quSY"),f=s("itXk"),v=s("VRyK"),y=s("z6cu"),R=s("lJxs"),I=s("IzEk"),O=s("vkgz"),E=s("eIep"),A=s("JIr8"),C=s("nYR2"),F=s("9N4E"),L=s("y5b2"),V=s("TwVa"),_=s("+/Tu"),D=s("1kSV"),N=s("sYmb"),H=s("e8Ap");let P=(()=>{class t{constructor(t){this.modal=t}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}get failedText(){switch(this.failedCount%20){case 1:return"HISTORY.DELETE.FAILED.ONE";case 2:case 3:case 4:return"HISTORY.DELETE.FAILED.FEW";default:return"HISTORY.DELETE.FAILED.OTHER"}}get failedParams(){return{transactionsCount:this.failedCount}}get successText(){switch(this.successCount%10){case 1:return"HISTORY.DELETE.SUCCESS.ONE";case 2:case 3:case 4:return"HISTORY.DELETE.SUCCESS.FEW";default:return"HISTORY.DELETE.SUCCESS.OTHER"}}get successParams(){return{transactionsCount:this.successCount}}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-delete-partial"]],inputs:{failedCount:"failedCount",successCount:"successCount"},decls:17,vars:15,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","/assets/img/history/modals/partial.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"mt-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.DELETE.PARTIAL"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Rb(11,"p",7),u.nc(12,"translate"),u.Vb(),u.Wb(13,"div",8),u.Wb(14,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(15," HISTORY.BACK_TO_HISTORY "),u.Rb(16,"span",10),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,5,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,7,"HISTORY.DELETE.PARTIAL")),u.Ab(4),u.uc("innerHTML",u.pc(10,9,e.successText,e.successParams),u.Jc),u.Ab(2),u.uc("innerHTML",u.pc(12,12,e.failedText,e.failedParams),u.Jc),u.Ab(5),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"))},directives:[N.a,H.a],pipes:[N.d],styles:[""]}),t})(),W=(()=>{class t extends P{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-delete-error"]],features:[u.xb],decls:17,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","px-4","pt-0","pb-4","text-center"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.DELETE.FAILED.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"button",8),u.ic("click",(function(t){return e.closeModal()})),u.Tc(13," SHARED.TRY_AGAIN "),u.Vb(),u.Wb(14,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(15," HISTORY.BACK_TO_HISTORY "),u.Rb(16,"span",10),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,6,"HISTORY.DELETE.FAILED.TITLE")),u.Ab(4),u.uc("innerHTML",u.pc(10,8,e.failedText,e.failedParams),u.Jc),u.Ab(7),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"))},directives:[N.a,H.a],pipes:[N.d],styles:[""]}),t})(),k=(()=>{class t extends P{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-delete-success"]],features:[u.xb],decls:15,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.DELETE.SUCCESS.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"button",8),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(13," HISTORY.BACK_TO_HISTORY "),u.Rb(14,"span",9),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,6,"HISTORY.DELETE.SUCCESS.TITLE")),u.Ab(4),u.uc("innerHTML",u.pc(10,8,e.successText,e.successParams),u.Jc),u.Ab(5),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"))},directives:[N.a,H.a],pipes:[N.d],styles:[""]}),t})();function M(t,e){1&t&&(u.Wb(0,"span"),u.Tc(1,", "),u.Vb())}function j(t,e){if(1&t&&(u.Wb(0,"span"),u.Tc(1),u.Rc(2,M,2,0,"span",12),u.Vb()),2&t){const t=e.$implicit,n=e.index,i=u.mc().$implicit;var s;const a=n<(null==(s=u.mc().retrieveErrors(i))?null:s.length)-1;u.Ab(1),u.Vc(" ",t,""),u.Ab(1),u.uc("ngIf",a)}}function x(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Tc(2),u.Vb(),u.Rc(3,j,3,2,"span",11),u.Vb()),2&t){const t=e.$implicit,s=u.mc();u.Ab(2),u.Vc("\u2116",t.documentNumber,": "),u.Ab(1),u.uc("ngForOf",s.retrieveErrors(t))}}let w=(()=>{class t{constructor(t){this.modal=t}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}retrieveErrors(t){let e;return e=t.errorData?Object.entries(t.errorData).map(t=>t[1]):t.errorMsg?[t.errorMsg]:[],e}get failedText(){switch(this.signResult&&this.signResult.numberOfFailed%20){case 1:return"HISTORY.PARTIAL.FAILED.ONE";case 2:case 3:case 4:return"HISTORY.PARTIAL.FAILED.FEW";default:return"HISTORY.PARTIAL.FAILED.OTHER"}}get failedParams(){return{transactionsCount:this.signResult&&this.signResult.numberOfFailed}}get failedTransactions(){var t;return null===(t=this.signResult)||void 0===t?void 0:t.results}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-multiple-sign-partial-error"]],inputs:{signResult:"signResult"},decls:17,vars:12,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.FAILED.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Wb(11,"button",7),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(12," HISTORY.BACK_TO_HISTORY "),u.Rb(13,"span",8),u.Vb(),u.Vb(),u.Wb(14,"div",9),u.Rb(15,"h5",10),u.Rc(16,x,4,2,"div",11),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,5,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,7,"HISTORY.FAILED.TITLE")),u.Ab(4),u.uc("innerHTML",u.pc(10,9,e.failedText,e.failedParams),u.Jc),u.Ab(4),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"),u.Ab(3),u.uc("ngForOf",e.failedTransactions))},directives:[N.a,H.a,n.t,n.u],pipes:[N.d],styles:[""]}),t})();var Y=s("Kx/q");function G(t,e){if(1&t&&(u.Wb(0,"div",16),u.Tc(1),u.nc(2,"lowercase"),u.nc(3,"translate"),u.Wb(4,"strong"),u.Rb(5,"j-money",17),u.Vb(),u.Vb()),2&t){const t=e.$implicit,s=u.mc();u.Ab(1),u.Wc(" ",t.count," ",u.oc(2,3,u.oc(3,5,s.mapCountLabel(t.count)))," \u2013 "),u.Ab(4),u.uc("money",t.money)}}function B(t,e){1&t&&(u.Wb(0,"span"),u.Tc(1,", "),u.Vb())}function $(t,e){if(1&t&&(u.Wb(0,"span"),u.Tc(1),u.Rc(2,B,2,0,"span",18),u.Vb()),2&t){const t=e.$implicit,n=e.index,i=u.mc().$implicit;var s;const a=n<(null==(s=u.mc().retrieveErrors(i))?null:s.length)-1;u.Ab(1),u.Vc(" ",t,""),u.Ab(1),u.uc("ngIf",a)}}function K(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Tc(2),u.Vb(),u.Rc(3,$,3,2,"span",15),u.Vb()),2&t){const t=e.$implicit,s=u.mc();u.Ab(2),u.Vc("\u2116",t.documentNumber,": "),u.Ab(1),u.uc("ngForOf",s.retrieveErrors(t))}}let U=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){this.generateGroups()}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}retrieveErrors(t){let e;return e=t.errorData?Object.entries(t.errorData).map(t=>t[1]):t.errorMsg?[t.errorMsg]:[],e}get successText(){switch(this.result&&this.result.numberOfSuccess%10){case 1:return"HISTORY.PARTIAL.SUCCESS.ONE";case 2:case 3:case 4:return"HISTORY.PARTIAL.SUCCESS.FEW";default:return"HISTORY.PARTIAL.SUCCESS.OTHER"}}get totalBalance(){return this.result&&this.result.totalBalance}get successCount(){return this.result&&this.result.numberOfSuccess}get totalCount(){return this.result&&this.result.results.length}get successParams(){return{transactionsCount:this.successCount}}get failedText(){switch(this.result&&this.result.numberOfFailed%10){case 1:return"HISTORY.PARTIAL.FAILED.ONE";case 2:case 3:case 4:return"HISTORY.PARTIAL.FAILED.FEW";default:return"HISTORY.PARTIAL.FAILED.OTHER"}}get failedParams(){return{transactionsCount:this.result&&this.result.numberOfFailed}}get failedTransactions(){return this.result&&this.result.results&&this.result.results.filter(t=>t.status===V.b.FAILED)}mapCountLabel(t){switch(t%20){case 1:return"HISTORY.OPERATION.ONE";case 2:case 3:case 4:return"HISTORY.OPERATION.FEW";default:return"HISTORY.OPERATION.OTHER"}}generateGroups(){let t={};this.result.results.forEach(e=>{const s=e.result.amount;t[s.currency]?(t[s.currency].money.amount+=s.amount,t[s.currency].count++):t[s.currency]={money:{currency:s.currency,amount:s.amount},count:1}}),this.groups=Object.values(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-multiple-sign-partial-success"]],inputs:{result:"result"},decls:26,vars:19,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","/assets/img/history/modals/partial.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted"],["translate",""],["class","result-group",4,"ngFor","ngForOf"],[1,"m-0","text-muted",3,"innerHTML"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],[1,"result-group"],[3,"money"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.PARTIAL.TITLE"),u.Vb(),u.Wb(9,"p",6),u.Wb(10,"span",7),u.Tc(11,"HISTORY.OPERATION.FEW"),u.Vb(),u.Tc(12,": "),u.Wb(13,"strong"),u.Tc(14),u.Vb(),u.Vb(),u.Rc(15,G,6,7,"div",8),u.Rb(16,"p",9),u.nc(17,"translate"),u.Rb(18,"p",10),u.nc(19,"translate"),u.Wb(20,"button",11),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(21," HISTORY.BACK_TO_HISTORY "),u.Rb(22,"span",12),u.Vb(),u.Vb(),u.Wb(23,"div",13),u.Rb(24,"h4",14),u.Rc(25,K,4,2,"div",15),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,9,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,11,"HISTORY.PARTIAL.TITLE")),u.Ab(9),u.Wc("",e.successCount,"/",e.totalCount,""),u.Ab(1),u.uc("ngForOf",e.groups),u.Ab(1),u.uc("innerHTML",u.pc(17,13,e.successText,e.successParams),u.Jc),u.Ab(2),u.uc("innerHTML",u.pc(19,16,e.failedText,e.failedParams),u.Jc),u.Ab(4),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"),u.Ab(3),u.uc("ngForOf",e.failedTransactions))},directives:[N.a,n.t,H.a,Y.a,n.u],pipes:[N.d,n.q],styles:[""]}),t})();function Q(t,e){if(1&t&&(u.Wb(0,"p",13),u.Tc(1),u.Vb()),2&t){const t=u.mc();u.Ab(1),u.Vc(" ",t.errorText," ")}}let J=(()=>{class t{constructor(t){this.modal=t}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-multiple-sign-error"]],inputs:{errorText:"errorText"},decls:19,vars:8,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","px-4","pt-0","pb-4","text-center"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted"],["translate",""],["class","mt-3 mb-0 text-danger",4,"ngIf"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"mt-3","mb-0","text-danger"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.FAILED.TITLE"),u.Vb(),u.Wb(9,"p",6),u.Wb(10,"span",7),u.Tc(11,"HISTORY.FAILED.DESCRIPTION"),u.Vb(),u.Vb(),u.Rc(12,Q,2,1,"p",8),u.Vb(),u.Wb(13,"div",9),u.Wb(14,"button",10),u.ic("click",(function(t){return e.closeModal()})),u.Tc(15," SHARED.TRY_AGAIN "),u.Vb(),u.Wb(16,"button",11),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(17," HISTORY.BACK_TO_HISTORY "),u.Rb(18,"span",12),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,6,"HISTORY.FAILED.TITLE")),u.Ab(7),u.uc("ngIf",e.errorText),u.Ab(6),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"))},directives:[N.a,n.u,H.a],pipes:[N.d],styles:[""]}),t})();function z(t,e){if(1&t&&(u.Wb(0,"div",10),u.Tc(1),u.nc(2,"lowercase"),u.nc(3,"translate"),u.Wb(4,"strong"),u.Rb(5,"j-money",11),u.Vb(),u.Vb()),2&t){const t=e.$implicit,s=u.mc();u.Ab(1),u.Wc(" ",t.count," ",u.oc(2,3,u.oc(3,5,s.mapCountLabel(t.count)))," \u2013 "),u.Ab(4),u.uc("money",t.money)}}let X=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){this.generateGroups()}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}mapCountLabel(t){switch(t%20){case 1:return"HISTORY.OPERATION.ONE";case 2:case 3:case 4:return"HISTORY.OPERATION.FEW";default:return"HISTORY.OPERATION.OTHER"}}generateGroups(){let t={};this.result.results.forEach(e=>{const s=e.result.amount;t[s.currency]?(t[s.currency].money.amount+=s.amount,t[s.currency].count++):t[s.currency]={money:{currency:s.currency,amount:s.amount},count:1}}),this.groups=Object.values(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-multiple-sign-success"]],inputs:{result:"result"},decls:14,vars:8,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["class","result-group",4,"ngFor","ngForOf"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"result-group"],[3,"money"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.SIGNED"),u.Vb(),u.Rc(9,z,6,7,"div",6),u.Vb(),u.Wb(10,"div",7),u.Wb(11,"button",8),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(12," HISTORY.BACK_TO_HISTORY "),u.Rb(13,"span",9),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,6,"HISTORY.SIGNED")),u.Ab(4),u.uc("ngForOf",e.groups),u.Ab(4),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"))},directives:[N.a,n.t,H.a,Y.a],pipes:[N.d,n.q],styles:[""]}),t})();function q(t,e){1&t&&(u.Wb(0,"span"),u.Tc(1,", "),u.Vb())}function Z(t,e){if(1&t&&(u.Wb(0,"span"),u.Tc(1),u.Rc(2,q,2,0,"span",13),u.Vb()),2&t){const t=e.$implicit,n=e.index,i=u.mc().$implicit;var s;const a=n<(null==(s=u.mc().retrieveErrors(i))?null:s.length)-1;u.Ab(1),u.Vc(" ",t,""),u.Ab(1),u.uc("ngIf",a)}}function tt(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Tc(2),u.Vb(),u.Rc(3,Z,3,2,"span",12),u.Vb()),2&t){const t=e.$implicit,s=u.mc();u.Ab(2),u.Vc("\u2116",t.documentNumber,": "),u.Ab(1),u.uc("ngForOf",s.retrieveErrors(t))}}let et=(()=>{class t{constructor(t){this.modal=t}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}retrieveErrors(t){let e;return e=t.errorData?Object.entries(t.errorData).map(t=>t[1]):t.errorMsg?[t.errorMsg]:[],e}get failedCount(){var t;return(null===(t=this.signResult)||void 0===t?void 0:t.numberOfFailed)||0}get successCount(){var t;return(null===(t=this.signResult)||void 0===t?void 0:t.numberOfSuccess)||0}get failedText(){switch(this.failedCount%20){case 1:return"HISTORY.SEND_TO_SIGNED.FAILED.ONE";case 2:case 3:case 4:return"HISTORY.SEND_TO_SIGNED.FAILED.FEW";default:return"HISTORY.SEND_TO_SIGNED.FAILED.OTHER"}}get failedParams(){return{transactionsCount:this.failedCount}}get failedTransactions(){return this.signResult&&this.signResult.results&&this.signResult.results.filter(t=>t.status===V.b.FAILED)}get successText(){switch(this.successCount%10){case 1:return"HISTORY.SEND_TO_SIGNED.SUCCESS.ONE";case 2:case 3:case 4:return"HISTORY.SEND_TO_SIGNED.SUCCESS.FEW";default:return"HISTORY.SEND_TO_SIGNED.SUCCESS.OTHER"}}get successParams(){return{transactionsCount:this.successCount}}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-send-to-signed-partial"]],inputs:{signResult:"signResult"},decls:19,vars:16,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","/assets/img/history/modals/partial.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.SEND_TO_SIGNED.PARTIAL"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Rb(11,"p",7),u.nc(12,"translate"),u.Wb(13,"button",8),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(14," HISTORY.BACK_TO_HISTORY "),u.Rb(15,"span",9),u.Vb(),u.Vb(),u.Wb(16,"div",10),u.Rb(17,"h4",11),u.Rc(18,tt,4,2,"div",12),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,6,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,8,"HISTORY.SEND_TO_SIGNED.PARTIAL")),u.Ab(4),u.uc("innerHTML",u.pc(10,10,e.successText,e.successParams),u.Jc),u.Ab(2),u.uc("innerHTML",u.pc(12,13,e.failedText,e.failedParams),u.Jc),u.Ab(4),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"),u.Ab(3),u.uc("ngForOf",e.failedTransactions))},directives:[N.a,H.a,n.t,n.u],pipes:[N.d],styles:[""]}),t})(),st=(()=>{class t extends et{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-send-to-signed-success"]],features:[u.xb],decls:15,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.SEND_TO_SIGNED.SUCCESS.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"button",8),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(13," HISTORY.BACK_TO_HISTORY "),u.Rb(14,"span",9),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,6,"HISTORY.SEND_TO_SIGNED.SUCCESS.TITLE")),u.Ab(4),u.uc("innerHTML",u.pc(10,8,e.successText,e.successParams),u.Jc),u.Ab(5),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"))},directives:[N.a,H.a],pipes:[N.d],styles:[""]}),t})(),nt=(()=>{class t extends et{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-send-to-signed-error"]],features:[u.xb],decls:17,vars:11,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","px-4","pt-0","pb-4","text-center"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"m-0","text-muted",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.SEND_TO_SIGNED.FAILED.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"button",8),u.ic("click",(function(t){return e.closeModal()})),u.Tc(13," SHARED.TRY_AGAIN "),u.Vb(),u.Wb(14,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(15," HISTORY.BACK_TO_HISTORY "),u.Rb(16,"span",10),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,4,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,6,"HISTORY.SEND_TO_SIGNED.FAILED.TITLE")),u.Ab(4),u.uc("innerHTML",u.pc(10,8,e.failedText,e.failedParams),u.Jc),u.Ab(7),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"))},directives:[N.a,H.a],pipes:[N.d],styles:[""]}),t})();function it(t,e){1&t&&(u.Wb(0,"span"),u.Tc(1,", "),u.Vb())}function at(t,e){if(1&t&&(u.Wb(0,"span"),u.Tc(1),u.Rc(2,it,2,0,"span",12),u.Vb()),2&t){const t=e.$implicit,n=e.index,i=u.mc().$implicit;var s;const a=n<(null==(s=u.mc().retrieveErrors(i))?null:s.length)-1;u.Ab(1),u.Vc(" ",t,""),u.Ab(1),u.uc("ngIf",a)}}function rt(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Tc(2),u.Vb(),u.Rc(3,at,3,2,"span",11),u.Vb()),2&t){const t=e.$implicit,s=u.mc();u.Ab(2),u.Vc("\u2116",t.documentNumber,": "),u.Ab(1),u.uc("ngForOf",s.retrieveErrors(t))}}let ct=(()=>{class t extends et{constructor(t){super(t),this.modal=t}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-send-to-signed-partial-error"]],features:[u.xb],decls:17,vars:12,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rb(5,"img",4),u.nc(6,"translate"),u.Wb(7,"h3",5),u.Tc(8,"HISTORY.FAILED.TITLE"),u.Vb(),u.Rb(9,"p",6),u.nc(10,"translate"),u.Wb(11,"button",7),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(12," HISTORY.BACK_TO_HISTORY "),u.Rb(13,"span",8),u.Vb(),u.Vb(),u.Wb(14,"div",9),u.Rb(15,"h5",10),u.Rc(16,rt,4,2,"div",11),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,5,"SHARED.CLOSE")),u.Ab(3),u.vc("alt",u.oc(6,7,"HISTORY.FAILED.TITLE")),u.Ab(4),u.uc("innerHTML",u.pc(10,9,e.failedText,e.failedParams),u.Jc),u.Ab(4),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"),u.Ab(3),u.uc("ngForOf",e.failedTransactions))},directives:[N.a,H.a,n.t,n.u],pipes:[N.d],styles:[""]}),t})();function ot(t,e){1&t&&(u.Rb(0,"img",14),u.nc(1,"translate")),2&t&&u.vc("alt",u.oc(1,1,"HISTORY.VALIDATION.ERROR"))}function lt(t,e){1&t&&(u.Rb(0,"img",15),u.nc(1,"translate")),2&t&&u.vc("alt",u.oc(1,1,"HISTORY.VALIDATION.ERROR"))}function ut(t,e){if(1&t&&(u.Wb(0,"p",16),u.Wb(1,"span",17),u.Tc(2,"HISTORY.OPERATION.FEW"),u.Vb(),u.Tc(3,": "),u.Wb(4,"strong"),u.Tc(5),u.Vb(),u.Vb()),2&t){const t=u.mc();u.Ab(5),u.Wc("",t.successCount,"/",t.totalCount,"")}}function dt(t,e){if(1&t&&(u.Wb(0,"div",18),u.Tc(1),u.nc(2,"lowercase"),u.nc(3,"translate"),u.Wb(4,"strong"),u.Rb(5,"j-money",19),u.Vb(),u.Vb()),2&t){const t=e.$implicit,s=u.mc();u.Ab(1),u.Wc(" ",t.count," ",u.oc(2,3,u.oc(3,5,s.mapCountLabel(t.count)))," \u2013 "),u.Ab(4),u.uc("money",t.money)}}function bt(t,e){1&t&&(u.Wb(0,"span"),u.Tc(1,", "),u.Vb())}function mt(t,e){if(1&t&&(u.Wb(0,"span"),u.Tc(1),u.Rc(2,bt,2,0,"span",20),u.Vb()),2&t){const t=e.$implicit,n=e.index,i=u.mc().$implicit;var s;const a=n<(null==(s=u.mc().retrieveErrors(i.errorData))?null:s.length)-1;u.Ab(1),u.Vc(" ",t,""),u.Ab(1),u.uc("ngIf",a)}}function ht(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Tc(2),u.Vb(),u.Rc(3,mt,3,2,"span",13),u.Vb()),2&t){const t=e.$implicit,s=u.mc();u.Ab(2),u.Vc("\u2116",t.documentNumber,": "),u.Ab(1),u.uc("ngForOf",s.retrieveErrors(t.errorData))}}let pt=(()=>{class t{constructor(t){this.modal=t}ngOnInit(){this.generateGroups()}dismissModal(){this.modal.dismiss()}closeModal(){this.modal.close()}retrieveErrors(t){return Object.entries(t).map(t=>t[1])}get totalBalance(){return this.result&&this.result.totalBalance}get successCount(){return this.result&&this.result.numberOfSuccess}get totalCount(){return this.result&&this.result.results.length}get successParams(){return{transactionsCount:this.successCount}}get failedText(){if(!this.result)return"HISTORY.VALIDATION.ERROR";switch(this.result&&this.result.numberOfFailed%10){case 1:return"HISTORY.VALIDATION.ONE";case 2:case 3:case 4:return"HISTORY.VALIDATION.FEW";default:return"HISTORY.VALIDATION.OTHER"}}get failedParams(){return{transactionsCount:this.result&&this.result.numberOfFailed}}get failedTransactions(){return this.result&&this.result.results&&this.result.results.filter(t=>t.status===V.b.FAILED)}mapCountLabel(t){switch(t%20){case 1:return"HISTORY.OPERATION.ONE";default:return"HISTORY.OPERATION.OTHER"}}generateGroups(){let t={};this.result.results.forEach(e=>{var s;const n=null===(s=e.result)||void 0===s?void 0:s.amount;n&&(t[n.currency]?(t[n.currency].money.amount+=n.amount,t[n.currency].count++):t[n.currency]={money:{currency:n.currency,amount:n.amount},count:1})}),this.groups=Object.values(t)}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(D.a))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-validation-error"]],inputs:{result:"result"},decls:17,vars:13,consts:[[1,"modal-header","j-modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","j-modal-body","text-center","pb-3"],["src","/assets/img/history/modals/partial.svg",3,"alt",4,"ngIf"],["src","/assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["class","m-0 text-muted",4,"ngIf"],["class","result-group",4,"ngFor","ngForOf"],[1,"mt-0","text-muted",3,"innerHTML"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"],[3,"inlineSVG"],[1,"modal-footer","bg-main","p-4","d-block","justify-content-start"],["translate","HISTORY.PARTIAL.SUBTITLE"],[4,"ngFor","ngForOf"],["src","/assets/img/history/modals/partial.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],[1,"m-0","text-muted"],["translate",""],[1,"result-group"],[3,"money"],[4,"ngIf"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"button",1),u.ic("click",(function(t){return e.dismissModal()})),u.Rb(2,"img",2),u.nc(3,"translate"),u.Vb(),u.Vb(),u.Wb(4,"div",3),u.Rc(5,ot,2,3,"img",4),u.Rc(6,lt,2,3,"img",5),u.Rc(7,ut,6,2,"p",6),u.Rc(8,dt,6,7,"div",7),u.Rb(9,"p",8),u.nc(10,"translate"),u.Wb(11,"button",9),u.ic("click",(function(t){return e.dismissModal()})),u.Tc(12," HISTORY.BACK_TO_HISTORY "),u.Rb(13,"span",10),u.Vb(),u.Vb(),u.Wb(14,"div",11),u.Rb(15,"h4",12),u.Rc(16,ht,4,2,"div",13),u.Vb()),2&t&&(u.Ab(2),u.vc("alt",u.oc(3,8,"SHARED.CLOSE")),u.Ab(3),u.uc("ngIf",e.successCount>0),u.Ab(1),u.uc("ngIf",0===e.successCount),u.Ab(1),u.uc("ngIf",e.totalCount&&e.successCount),u.Ab(1),u.uc("ngForOf",e.groups),u.Ab(1),u.uc("innerHTML",u.pc(10,10,e.failedText,e.failedParams),u.Jc),u.Ab(4),u.uc("inlineSVG","/assets/icons/shared/arrow-right.svg"),u.Ab(3),u.uc("ngForOf",e.failedTransactions))},directives:[n.u,n.t,N.a,H.a,Y.a],pipes:[N.d,n.q],styles:[""]}),t})();var St=s("tk/3"),gt=s("p6Hd"),Tt=s("KWy3"),ft=s("YMfE"),vt=s("4wRv"),yt=s("LRne"),Rt=s("rEgK"),It=s("VnnJ"),Ot=s("jZlK"),Et=s("mR7B"),At=s("7rOj");let Ct=(()=>{class t{constructor(t,e,s,n,i,a,r,c,o,l){this.config=t,this.statementService=e,this.companyService=s,this.api=n,this.http=i,this.translateService=a,this.filterService=r,this.maskedService=c,this.curSymbolPipe=o,this.featureFlagsService=l,this.baseUrl=t.baseUrl}getTransactionGroup(t=V.h.DOMESTIC,e,s=1,n=50){if(this.cashedCategory===t&&this.cashedTransactionGroup&&this.cashedFilter===e&&this.cashedPageNumber===s&&this.cashedPageSize===n)return Object(yt.a)(this.cashedTransactionGroup);const i=this.cashedFilter===e&&s>this.cashedPageNumber;return this.getHistoryListObservable(t,e,s,n).pipe(Object(R.a)(a=>{this.cashedCategory=t,this.cashedFilter=e,this.cashedPageNumber=s,this.cashedPageSize=n;const r=this.mapHistoryPayments(a.body);let c=i?this.cashedTransactionGroup.transactions.concat(r):r;return e.paymentStatus===L.d.FOR_SIGN&&(c=c.sort(this.compareBySignature),c=c.sort(this.compareByDate)),e.paymentStatus===L.d.FAILED&&this.markFailedAsRead(),this.cashedTransactionGroup={title:this.generateGroupTitle(e.paymentStatus),creditSum:null,debitSum:this.getTotalAmount(c),hasLargeTransactions:this.statementService.checkListForLargeTransactions(c),transactionsCount:c.length,transactions:c},this.cashedTransactionGroup}))}getHistoryList(t,e,s=1,n=50){return Object(g.a)(this,void 0,void 0,(function*(){const i=`companies/${this.companyService.currentId}/payments`,a=new St.g;let r=new St.h;return r=this.appendCategoryParams(t,r),r=r.append("page",`${s}`),r=r.append("pageSize",`${n}`),r=this.appendFilterParams(e,r),this.api.get(i,a,r,{observe:"response"})}))}getHistoryListObservable(t,e,s=1,n=50){const i=`${this.baseUrl}/companies/${this.companyService.currentId}/payments`,a=new St.g;let r=new St.h;return r=this.appendCategoryParams(t,r),r=r.append("page",`${s}`),r=r.append("pageSize",`${n}`),r=this.appendFilterParams(e,r),this.http.get(i,{params:r,headers:a,observe:"response"})}sendMultipleTransactionsForSign(t){const e=`companies/${this.companyService.currentId}/payments:to-created`;let s=new St.h;return t.forEach(t=>{s=s.append("paymentId",t)}),this.api.patch(e,null,null,s)}validateTransactionsByPaymentId(t,e){return Object(g.a)(this,void 0,void 0,(function*(){const s=`companies/${t}/payments/signatures/validate`;let n=new St.h;e.forEach(t=>{n=n.append("paymentId",t)});const i=(new St.g).append("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");return this.api.post(s,n,i)}))}signMultipleTransactions(t,e,s){return Object(g.a)(this,void 0,void 0,(function*(){const n=`companies/${t}/payments/signatures`;let i=new St.g;return i=i.set(e.type===V.q.OTP?gt.c.OTP:gt.c.PHONE,e.signature),this.api.post(n,{itemIds:s},i)}))}deleteTransaction(t,e){return Object(g.a)(this,void 0,void 0,(function*(){const s=`companies/${t}/payments`,n=new St.g;let i=(new St.h).set("id",e.id);return this.api.delete(s,n,i)}))}revokePayment(t,e){return Object(g.a)(this,void 0,void 0,(function*(){return this.api.patch(`companies/${t}/payments/${e.paymentId}:to-revoked`)}))}deleteMultipleTransactions(t,e){return Object(g.a)(this,void 0,void 0,(function*(){const s=`companies/${t}/payments`,n=new St.g;let i=new St.h;return e.forEach(t=>{i=i.append("id",t.id)}),this.api.delete(s,n,i)}))}isRemovable(t){return t.status.code===V.i.CREATED||t.status.code===V.i.DRAFT}isEditable(t){return!(t.type===V.j.CONVERSION&&t.status.code!==V.i.CREATED||t.status.code!==V.i.DRAFT&&t.status.code!==V.i.CREATED)}isRevokable(t){return t.status.code===V.i.READY_TO_SEND}getSignsCountText(t){return`${t.signatures&&t.signatures.length||0}/${this.companyService.isMultipleSignScheme(t.signatureScheme)?2:1}`}appendCategoryParams(t,e){switch(t){case V.h.ALL:e=(e=(e=e.append("category",V.h.DOMESTIC)).append("category",V.h.FOREIGN)).append("category",V.h.CONVERSION);break;default:e=e.append("category",t)}return e}appendFilterParams(t,e){switch(e=this.appendStatusToParams(t.paymentStatus,e),t.documentNumber&&(e=e.append("documentNumber",t.documentNumber)),t.periodFrom&&(e=e.append("dateFrom",Object(ft.convertDateToApiFormat)(t.periodFrom))),t.periodTo&&(e=e.append("dateTo",Object(ft.convertDateToApiFormat)(t.periodTo))),t.amountFrom&&(e=e.append("amountFrom",`${t.amountFrom}`)),t.amountTo&&(e=e.append("amountTo",`${t.amountTo}`)),t.recipientIban&&(e=e.append("correspondentAccount",t.recipientIban)),t.recipientBin&&(e=e.append("correspondentBin",t.recipientBin)),t.type&&(e=e.append("type",t.type)),t.sortBy){case L.f.AMOUNT_ASC:e=e.append("sortBy","AMOUNT");break;case L.f.AMOUNT_DESC:e=e.append("sortBy","-AMOUNT")}return e}appendStatusToParams(t,e){switch(t){case L.d.ALL:e=(e=(e=(e=(e=(e=(e=(e=e.append("status",V.i.DRAFT)).append("status",V.i.CREATED)).append("status",V.i.REJECTED)).append("status",V.i.BANK_COMPLETED)).append("status",V.i.BANK_PROCESSING)).append("status",V.i.BANK_SENT)).append("status",V.i.READY_TO_SEND)).append("status",V.i.IN_BANK);break;case L.d.DRAFT:e=e.append("status",V.i.DRAFT);break;case L.d.FOR_SIGN:e=e.append("status",V.i.CREATED);break;case L.d.FAILED:e=e.append("status",V.i.REJECTED);break;case L.d.SUCCESS:e=e.append("status",V.i.BANK_COMPLETED);break;case L.d.IN_PROGRESS:e=(e=(e=(e=e.append("status",V.i.BANK_PROCESSING)).append("status",V.i.BANK_SENT)).append("status",V.i.READY_TO_SEND)).append("status",V.i.IN_BANK)}return e}compareByDate(t,e){return t.paymentStatus.timestamp<e.paymentStatus.timestamp?1:t.paymentStatus.timestamp>e.paymentStatus.timestamp?-1:0}updateForSignCount(t=null,e){var s;return Object(g.a)(this,void 0,void 0,(function*(){if(this.filterService.updateForSignCount(null),!t){const s=yield this.retrivePaymentsByStatus(L.d.FOR_SIGN,e);t=s.payments}let n=0,i=0;null===(s=t)||void 0===s||s.forEach(t=>{var e;this.companyService.isSignable(t.status.code,t.signatureScheme,this.companyService.currentAuthority.authority,null===(e=t.signatures)||void 0===e?void 0:e.length)?n++:i++}),0==n&&0==i?this.filterService.updateForSignCount(0):n>0?this.filterService.updateForSignCount(n,!0):this.filterService.updateForSignCount(i)}))}retrivePaymentsByStatus(t,e){return Object(g.a)(this,void 0,void 0,(function*(){let s=0,n=null;const i=`companies/${this.companyService.currentId}/payments`,a=new St.g;let r=new St.h;r=this.appendStatusToParams(t,r),r=this.appendCategoryParams(e,r),r=r.append("pageSize","100000");try{const t=yield this.api.get(i,a,r,{observe:"response"});n=t.body,s=+t.headers.get("X-Total-Count")}catch(c){}finally{return{payments:n,count:s}}}))}updateStatusCounts(t){this.updateForSignCount(null,t),this.updateCountsByBadges(t)}isSignable(t){var e;const s=this.companyService.isSignable(t.status.code,t.signatureScheme,this.companyService.currentAuthority.authority,null===(e=t.signatures)||void 0===e?void 0:e.length);return t.status.code===V.i.DRAFT?s&&this.isCorrectlyFullfilled(t):s}isSignableByOthers(t){var e;return this.companyService.isSignableByOthers(t.status.code,t.signatureScheme,this.companyService.currentAuthority.authority,null===(e=t.signatures)||void 0===e?void 0:e.length)}isSendableForSign(t){const e=this.isSignableByOthers(t),s=this.companyService.isSendableForSign(t.status.code,t.signatureScheme,this.companyService.currentAuthority.authority);return!e&&s}isCorrectlyFullfilled(t){return!0}markFailedAsRead(){return Object(g.a)(this,void 0,void 0,(function*(){const t=`companies/${this.companyService.currentId}/payments/badges:mark-read-rejected`;try{yield this.api.put(t)}catch(e){}finally{this.filterService.updateFailedCount(0)}}))}updateCountsByBadges(t){return Object(g.a)(this,void 0,void 0,(function*(){this.filterService.updateInProgressCount(null),this.filterService.updateFailedCount(null);let e=0,s=0;const n=`companies/${this.companyService.currentId}/payments/badges`;let i=new St.h;i=this.appendCategoryParams(t,i);try{(yield this.api.get(n,null,i)).forEach(t=>{switch(t.statusCode){case V.i.READY_TO_SEND:case V.i.IN_BANK:case V.i.BANK_PROCESSING:case V.i.BANK_SENT:e+=t.count;break;case V.i.REJECTED:s+=t.count}})}catch(a){}finally{this.filterService.updateInProgressCount(e),this.filterService.updateFailedCount(s)}}))}getTotalAmount(t){let e=0,s=null;return t.forEach(t=>{t.balance&&(t.balance.currency&&!s&&(s=t.balance.currency),e+=t.balance.amount)}),{currency:s,amount:e}}mapDescription(t){var e,s,n,i,a,r,c;switch(t.type){case V.j.CONVERSION:const o=this.maskedService.getMaskedAmount(null===(e=t.details.exchangeRate)||void 0===e?void 0:e.calculatedSum),l=this.curSymbolPipe.transform(null===(s=t.details.exchangeRate)||void 0===s?void 0:s.currencyTo);let u;return u=o&&l?this.translateService.instant("CONVERSION.DESCRIPTION",{money:`${o} ${l}`,iban:t.paymentRecipient.recipientAccount.iban}):(null===(n=t.details)||void 0===n?void 0:n.description)||null,u?`${u} ${(null===(i=t.details.conversionPurpose)||void 0===i?void 0:i.description)||""}`:(null===(a=t.details.conversionPurpose)||void 0===a?void 0:a.description)?`${null===(r=t.details.conversionPurpose)||void 0===r?void 0:r.description}`:null;default:return(null===(c=t.details)||void 0===c?void 0:c.description)||null}}mapHistoryPayments(t){return t.map((t,e)=>{var s,n,i,a,r,c,o,l,u,d,b,m,h,p,S,g,T,f,v,y,R,I;const O={id:t.id||null,iban:(null===(s=t.details)||void 0===s?void 0:s.payerIban)||null,reference:t.id||null,documentNumber:(null===(n=t.details)||void 0===n?void 0:n.documentId)||null,correspondentBankBic:(null===(a=null===(i=t.paymentRecipient)||void 0===i?void 0:i.recipientAccount)||void 0===a?void 0:a.bic)||null,correspondentAccount:(null===(c=null===(r=t.paymentRecipient)||void 0===r?void 0:r.recipientAccount)||void 0===c?void 0:c.iban)||null,correspondentName:(null===(o=t.paymentRecipient)||void 0===o?void 0:o.name)||null,kbe:(null===(l=t.paymentRecipient)||void 0===l?void 0:l.kbe)||null,correspondentBin:(null===(u=t.paymentRecipient)||void 0===u?void 0:u.iinOrBin)||null,debit:(null===(d=t.details)||void 0===d?void 0:d.paymentAmount)||null,credit:null,description:this.mapDescription(t),documentDate:(null===(b=t.details)||void 0===b?void 0:b.issueDate)||null,valueDate:(null===(m=t.details)||void 0===m?void 0:m.valueDate)||null,knp:(null===(h=t.details)||void 0===h?void 0:h.knp)||null,kbk:(null===(p=t.details)||void 0===p?void 0:p.kbk)||null,signHead:null,signBuch:null,isPayment:!0,paymentId:t.id,paymentStatus:t.status||null,paymentType:t.type||null,paymentEmployees:t.paymentEmployees,createDate:(null===(S=t.details)||void 0===S?void 0:S.createDate)||null,foreignPaymentDetails:t.details.foreignPaymentDetails||null,foreignRecipient:{country:null===(g=t.paymentRecipient)||void 0===g?void 0:g.country,countryCode:null===(T=t.paymentRecipient)||void 0===T?void 0:T.countryCode,cityName:null===(f=t.paymentRecipient)||void 0===f?void 0:f.cityName,bic:null===(y=null===(v=t.paymentRecipient)||void 0===v?void 0:v.recipientAccount)||void 0===y?void 0:y.bic,bankName:null===(I=null===(R=t.paymentRecipient)||void 0===R?void 0:R.recipientAccount)||void 0===I?void 0:I.bankName},emailOnSuccess:t.emailOnSuccess||null,signatureScheme:t.signatureScheme||null,signatures:t.signatures||[]},E=new Tt.c(O,this.translateService);return this.isFeatureDisabled(t.type)?(E.isExportable=!1,E.isRepeatable=!1,E.isEditable=!1,E.isRemovable=!1,E.isSignable=!1,E.isSendableForSign=!1,E.isRevokable=!1):(E.isExportable=this.isExportable(t),E.isRepeatable=this.isRepeatable(t),E.isEditable=this.isEditable(t),E.isRemovable=this.isRemovable(t),E.isSignable=this.isSignable(t),E.isSendableForSign=this.isSendableForSign(t),E.isRevokable=this.isRevokable(t)),E.hasTour=E.isRepeatable&&0==e&&1==this.cashedPageNumber,E.isSignableByOthers=this.isSignableByOthers(t),E.signsCountText=this.getSignsCountText(E),E})}isFeatureDisabled(t){const e=t==V.j.CONVERSION&&this.featureFlagsService.isDisabled(vt.a.CONVERSION),s=t==V.j.FOREIGN&&this.featureFlagsService.isDisabled(vt.a.FOREIGN_PAYMENT);return e||s||!1}isRepeatable(t){return(t.status.state!=V.d.MIGRATED||t.category!==V.h.CONVERSION)&&t.status.code!=V.i.DRAFT}isExportable(t){return(t.status.state!==V.d.MIGRATED||t.category!==V.h.CONVERSION)&&t.status.code!==V.i.CREATED}generateGroupTitle(t){switch(t){case L.d.ALL:return"HISTORY.LISTS.ALL";case L.d.FOR_SIGN:return"HISTORY.LISTS.FOR_SIGN";case L.d.FOR_SIGN_OTHERS:return"HISTORY.LISTS.FOR_SIGN_OTHERS";case L.d.SUCCESS:return"HISTORY.LISTS.SUCCESS";case L.d.FAILED:return"HISTORY.LISTS.FAILED";case L.d.IN_PROGRESS:return"HISTORY.LISTS.IN_PROGRESS";case L.d.DRAFT:return"HISTORY.LISTS.DRAFT"}}compareBySignature(t,e){return t.isSignable&&e.isSignable?0:t.isSignable&&e.isSignableByOthers?-1:1}}return t.\u0275fac=function(e){return new(e||t)(u.ec("config"),u.ec(Rt.a),u.ec(It.a),u.ec(gt.a),u.ec(St.c),u.ec(N.e),u.ec(Ot.a),u.ec(Et.a),u.ec(At.c),u.ec(vt.b))},t.\u0275prov=u.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ft=s("1ua0"),Lt=s("yZrb"),Vt=s("ZF+8"),_t=s("iCQh"),Dt=s("VO+5"),Nt=s("THGi"),Ht=s("/68H"),Pt=s("QiVB");function Wt(t,e){if(1&t&&(u.Wb(0,"a",10),u.Tc(1),u.Vb()),2&t){const t=e.$implicit;u.uc("routerLink",t.url),u.Ab(1),u.Uc(t.label)}}function kt(t,e){1&t&&(u.Wb(0,"div",11),u.Rb(1,"j-statement-loading"),u.Vb())}function Mt(t,e){if(1&t&&(u.Wb(0,"div",25),u.Wb(1,"div"),u.Wb(2,"span",26),u.Tc(3,"HISTORY.OPERATION.OTHER"),u.Vb(),u.Tc(4,": "),u.Wb(5,"strong"),u.Tc(6),u.Vb(),u.Vb(),u.Wb(7,"div"),u.Wb(8,"span",26),u.Tc(9,"HISTORY.FOR_AMOUNT"),u.Vb(),u.Tc(10,": "),u.Wb(11,"strong"),u.Rb(12,"j-money",27),u.Vb(),u.Vb(),u.Vb()),2&t){const t=u.mc(3);u.Ab(6),u.Vc(" ",t.totalCount," "),u.Ab(6),u.uc("money",t.totalBalance)}}function jt(t,e){if(1&t&&(u.Wb(0,"div",25),u.Wb(1,"strong"),u.Rb(2,"j-money",27),u.Vb(),u.Tc(3),u.Vb()),2&t){const t=e.$implicit;u.Ab(2),u.uc("money",t.balance),u.Ab(1),u.Vc(" (",t.count,") ")}}function xt(t,e){if(1&t&&u.Rc(0,jt,4,2,"div",28),2&t){const t=u.mc(3);u.uc("ngForOf",t.currencies)}}function wt(t,e){if(1&t&&(u.Wb(0,"div",25),u.Wb(1,"strong"),u.Rb(2,"j-money",27),u.Vb(),u.Tc(3),u.Vb()),2&t){const t=e.$implicit;u.Ab(2),u.uc("money",t.balance),u.Ab(1),u.Vc(" (",t.count,") ")}}function Yt(t,e){if(1&t&&(u.Rc(0,wt,4,2,"div",28),u.Wb(1,"div",29),u.Tc(2,"+ "),u.Vb()),2&t){u.mc();const t=u.Fc(10),e=u.mc(2);u.uc("ngForOf",e.currencies.splice(0,4)),u.Ab(1),u.uc("ngbTooltip",t)}}function Gt(t,e){if(1&t&&(u.Wb(0,"div"),u.Wb(1,"strong"),u.Rb(2,"j-money",27),u.Vb(),u.Tc(3),u.Vb()),2&t){const t=e.$implicit;u.Ab(2),u.uc("money",t.balance),u.Ab(1),u.Vc(" (",t.count,") ")}}function Bt(t,e){if(1&t&&u.Rc(0,Gt,4,2,"div",30),2&t){const t=u.mc(3);u.uc("ngForOf",t.currencies.splice(3,t.currencies.length))}}function $t(t,e){if(1&t){const t=u.Xb();u.Wb(0,"a",32),u.ic("click",(function(e){return u.Ic(t),u.mc(4).exportSelectedTransactions(e)})),u.nc(1,"translate"),u.Vb()}2&t&&u.uc("ngbTooltip",u.oc(1,2,"HISTORY.DOWNLOAD_SELECTED"))("inlineSVG","/assets/icons/transaction/pdf.svg")}function Kt(t,e){if(1&t&&(u.Ub(0),u.Rc(1,$t,2,4,"a",31),u.Tb()),2&t){const t=u.mc(3);u.Ab(1),u.uc("ngIf",t.isSelectableForExport&&t.selectedCount>0)}}function Ut(t,e){if(1&t){const t=u.Xb();u.Ub(0),u.Wb(1,"a",33),u.ic("click",(function(e){return u.Ic(t),u.mc(4).signAll(e)})),u.Wb(2,"span",34),u.Tc(3,"HISTORY.SIGN_ALL"),u.Vb(),u.Rb(4,"span",35),u.Vb(),u.Tb()}2&t&&(u.Ab(4),u.uc("inlineSVG","/assets/icons/transaction/sign.svg"))}function Qt(t,e){if(1&t){const t=u.Xb();u.Ub(0),u.Wb(1,"a",33),u.ic("click",(function(e){return u.Ic(t),u.mc(4).sendAllForSign(e)})),u.Wb(2,"span",34),u.Tc(3,"HISTORY.SEND_ALL_FOR_SIGN"),u.Vb(),u.Rb(4,"span",35),u.Vb(),u.Tb()}2&t&&(u.Ab(4),u.uc("inlineSVG","/assets/icons/transaction/for-sign.svg"))}function Jt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"a",37),u.ic("click",(function(e){return u.Ic(t),u.mc(5).signSelected(e)})),u.nc(1,"translate"),u.Vb()}2&t&&u.uc("ngbTooltip",u.oc(1,2,"HISTORY.SIGN_SELECTED"))("inlineSVG","/assets/icons/transaction/sign.svg")}function zt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"a",37),u.ic("click",(function(e){return u.Ic(t),u.mc(5).sendForSignSelected(e)})),u.nc(1,"translate"),u.Vb()}2&t&&u.uc("ngbTooltip",u.oc(1,2,"HISTORY.SEND_FOR_SIGN_SELECTED"))("inlineSVG","/assets/icons/transaction/for-sign.svg")}function Xt(t,e){if(1&t){const t=u.Xb();u.Ub(0),u.Wb(1,"a",32),u.ic("click",(function(e){return u.Ic(t),u.mc(4).deleteSelectedTransactions(e)})),u.nc(2,"translate"),u.Vb(),u.Rc(3,Jt,2,4,"a",36),u.Rc(4,zt,2,4,"a",36),u.Tb()}if(2&t){const t=u.mc(4);u.Ab(1),u.uc("ngbTooltip",u.oc(2,4,"HISTORY.DELETE_SELECTED"))("inlineSVG","/assets/icons/transaction/delete.svg"),u.Ab(2),u.uc("ngIf",t.isSignable),u.Ab(1),u.uc("ngIf",t.isSendableForSign)}}function qt(t,e){if(1&t&&(u.Ub(0),u.Rc(1,Ut,5,1,"ng-container",24),u.Rc(2,Qt,5,1,"ng-container",24),u.Rc(3,Xt,5,6,"ng-container",24),u.Tb()),2&t){const t=u.mc(3);u.Ab(1),u.uc("ngIf",0==t.selectedCount&&t.isAllSignable),u.Ab(1),u.uc("ngIf",0==t.selectedCount&&t.isAllSendableForSign),u.Ab(1),u.uc("ngIf",t.selectedCount>0)}}function Zt(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",17),u.ic("click",(function(e){return u.Ic(t),e.stopPropagation()})),u.Wb(2,"input",18),u.ic("ngModelChange",(function(e){return u.Ic(t),u.mc(2).isAllSelected=e}))("click",(function(e){return u.Ic(t),e.stopPropagation()}))("change",(function(e){return u.Ic(t),u.mc(2).selectAll()})),u.Vb(),u.Wb(3,"label",19),u.Tc(4,"HISTORY.SELECT_ALL"),u.Vb(),u.Vb(),u.Wb(5,"div",20),u.Rc(6,Mt,13,2,"ng-template",21),u.Rc(7,xt,1,1,"ng-template",21),u.Rc(8,Yt,3,2,"ng-template",21),u.Rc(9,Bt,1,1,"ng-template",null,22,u.Sc),u.Wb(11,"div",23),u.Rc(12,Kt,2,1,"ng-container",24),u.Rc(13,qt,4,3,"ng-container",24),u.Vb(),u.Vb(),u.Vb()}if(2&t){const t=u.mc(2);u.Ab(2),u.uc("ngModel",t.isAllSelected),u.Ab(4),u.uc("ngIf",!t.currencies||(null==t.currencies?null:t.currencies.length)<=1),u.Ab(1),u.uc("ngIf",(null==t.currencies?null:t.currencies.length)>1&&(null==t.currencies?null:t.currencies.length)<=3),u.Ab(1),u.uc("ngIf",(null==t.currencies?null:t.currencies.length)>3),u.Ab(4),u.uc("ngIf",t.isSelectableForExport),u.Ab(1),u.uc("ngIf",t.isSelectable)}}function te(t,e){1&t&&(u.Wb(0,"div",38),u.Tc(1," ACCOUNTS.STATEMENT.ALL_LOADED "),u.Vb())}function ee(t,e){if(1&t){const t=u.Xb();u.Wb(0,"div",12),u.Rc(1,Zt,14,6,"div",13),u.Wb(2,"j-statement",14),u.ic("signed",(function(e){return u.Ic(t),u.mc().onSign(e)}))("sentForSign",(function(e){return u.Ic(t),u.mc().onSentForSign(e)}))("deleted",(function(e){return u.Ic(t),u.mc().onDelete(e)}))("revoked",(function(e){return u.Ic(t),u.mc().onRevoke(e)}))("selected",(function(e){return u.Ic(t),u.mc().onSelect()})),u.Vb(),u.Rc(3,te,2,0,"div",15),u.Vb()}if(2&t){const t=u.mc();u.Hb("list-statement--scrollable",t.hasMorePages),u.Ab(1),u.uc("ngIf",t.totalCount&&(t.isSelectable||t.isSelectableForExport)),u.Ab(1),u.uc("statement",t.statement)("isTotalsShown",!1)("hasExtraPadding",!0)("isSelectable",t.isSelectable||t.isSelectableForExport),u.Ab(1),u.uc("ngIf",!t.hasMorePages&&(null==t.statement?null:t.statement.totalTransactionsCount)>0)}}let se=(()=>{class t{constructor(t,e,s,n,i,a,r,c,o,l,u,d){this.company=t,this.filterService=e,this.historyService=s,this.route=n,this.router=i,this.datePipe=a,this.modalService=r,this.filesService=c,this.maskedService=o,this.statementService=l,this.tourService=u,this.notifierService=d,this.filterScheme={periodTo:null,periodFrom:null},this.filterCurrency=_.a.KZT,this.filterMode=F.a.HISTORY,this.modalConfigSmall={backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0},this.modalConfigMedium={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},this.historyTypes=[{label:"HISTORY.ALL",url:"/history/all"},{label:"HISTORY.TENGE_PAYMENTS",url:"/history/tenge"},{label:"HISTORY.CURRENCY_PAYMENTS",url:"/history/foreign"},{label:"HISTORY.CONVERSION",url:"/history/conversion"}],this.subscription=new T.a,this.pageNumber=1,this.pageSize=25,this.pageSizeForSign=1e5,this.hasMorePages=!0,this.isLoading=!0,this.isLoadingExtra=!0,this.isReady=!1,this.isTourShown=!1,this.tourStep=null,this.hasSignableSelected=!1,this.isAllSelected=!1,this.selectedTransactions=[],this.selectedCount=0,this.SESSION_ROUTE_KEY="historyRouteQuery",this.cashedRouteQuery=JSON.parse(sessionStorage.getItem(this.SESSION_ROUTE_KEY)),this.canBeNavigatedToForSign=!0;const b=this.route.paramMap.pipe(Object(R.a)(()=>window.history.state)).subscribe(t=>{this.tourStep=t.tourStep,this.tourService.onTourStart$.next(null)});this.subscription.add(b);const m=Object(f.a)([this.route.queryParams,this.route.data]).pipe(Object(I.a)(1)).subscribe(([t,e])=>{Object.keys(t).length>0&&(this.canBeNavigatedToForSign=!1),this.paymentCategory=e.category,this.cashedRouteQuery&&!t&&(t=this.cashedRouteQuery),this.updateCashedRouteQuery(t);const s=this.mapQueryParams(t);this.filterScheme=s,this.filterService.updateExtra(this.filterScheme)});this.subscription.add(m);const h=this.company.refresh$.pipe(Object(O.a)(()=>this.historyService.updateStatusCounts(this.paymentCategory))),p=this.filterService.getScheme(),S=Object(v.a)(p,h).pipe(Object(E.a)(t=>this.init(Array.isArray(t)?this.filterScheme:t))).subscribe(()=>{}),g=this.filesService.onImport().subscribe(()=>{this.init(this.filterScheme).toPromise(),this.historyService.updateStatusCounts(this.paymentCategory)}),y=this.filterService.getStatuses().subscribe(t=>{const e=t.find(t=>t.value==L.d.FOR_SIGN);if(e.count>0&&e.classList.includes("badge-primary")&&this.canBeNavigatedToForSign){this.canBeNavigatedToForSign=!1;const t=Object.assign(this.filterScheme,{paymentStatus:L.d.FOR_SIGN});this.filterService.updateExtra(t)}});this.subscription.add(S),this.subscription.add(g),this.subscription.add(y)}init(t=this.filterService.getDefaults(this.filterMode)){return this.filterScheme=Object.assign({},t),this.pageNumber=1,this.hasMorePages=!1,this.isLoading=!0,this.updateQueryParams(),this.loadStatement().pipe(Object(O.a)(()=>this.updateSelectable()))}ngOnDestroy(){this.subscription.unsubscribe()}onScroll(){this.hasMorePages&&(this.pageNumber++,this.loadStatement().toPromise())}validateTransactionsByPaymentId(t){return Object(g.a)(this,void 0,void 0,(function*(){try{const e=yield this.historyService.validateTransactionsByPaymentId(this.company.currentId,t);return e.status!==V.b.SUCCESS&&this.showValidationError(e),e.status}catch(e){return this.showValidationError(e),V.b.FAILED}}))}onSign(t){return Object(g.a)(this,void 0,void 0,(function*(){const e={transactionIds:[t.id],totalBalance:t.balance,transactionsCount:1};try{if(t.paymentStatus.code===V.i.DRAFT&&(yield this.validateTransactionsByPaymentId(e.transactionIds))===V.b.FAILED)return;yield this.showSignModal(e),this.historyService.updateForSignCount(null,this.paymentCategory)}catch(s){}}))}onSentForSign(t){return Object(g.a)(this,void 0,void 0,(function*(){this.sendToSigned([t])}))}onSelect(){this.updateSelectable()}selectAll(){this.currentTransactions.forEach(t=>{t.isSelected=this.isAllSelected}),this.updateSelectable(),this.isAllSelected=!0}selectSignable(){this.currentTransactions.forEach(t=>{t.isSelected=!!t.isSignable&&this.hasSignableSelected}),this.updateSelectable(),this.hasSignableSelected=!0}get isAllSignable(){return this.currentTransactions.length>0&&(this.filterScheme.paymentStatus===L.d.FOR_SIGN||this.filterScheme.paymentStatus===L.d.DRAFT)&&this.hasSignableInList(this.currentTransactions)}get isAllSendableForSign(){return!this.isAllSignable&&this.currentTransactions.length>0&&this.filterScheme.paymentStatus===L.d.DRAFT&&this.hasSendableForSignInList(this.currentTransactions)}get isSignable(){return this.currentTransactions&&(this.filterScheme.paymentStatus===L.d.FOR_SIGN||this.filterScheme.paymentStatus===L.d.DRAFT)&&this.isAllSignableInList(this.selectedTransactions)}get isSendableForSign(){return!this.isSignable&&this.currentTransactions&&this.filterScheme.paymentStatus===L.d.DRAFT&&this.isAllSendableForSignInList(this.selectedTransactions)}get isSelectable(){return this.currentTransactions&&(this.filterScheme.paymentStatus===L.d.FOR_SIGN||this.filterScheme.paymentStatus===L.d.DRAFT)}get isSelectableForExport(){return this.filterScheme.paymentStatus===L.d.SUCCESS||this.filterScheme.paymentStatus===L.d.FAILED||this.filterScheme.paymentStatus===L.d.IN_PROGRESS||this.filterScheme.paymentStatus===L.d.DRAFT}get isAllSelectableForExport(){return this.filterScheme.paymentStatus===L.d.IN_PROGRESS}get totalBalance(){return this.selectedCount>0?this.selectedBalance:this.countTotalBalanceFromTransactionsList(this.currentTransactions)}get totalCount(){return this.selectedCount>0?this.selectedCount:this.currentTransactionsCount}get currentTransactionsCount(){var t;return(null===(t=this.statement)||void 0===t?void 0:t.totalTransactionsCount)||0}get currentTransactions(){var t,e,s;return(null===(s=null===(e=null===(t=this.statement)||void 0===t?void 0:t.transactionGroups)||void 0===e?void 0:e.map(t=>t.transactions))||void 0===s?void 0:s.flat())||[]}get hasAnySelected(){return this.selectedCount>0}get currencies(){const t={};return(this.selectedCount>0?this.selectedTransactions:this.currentTransactions).forEach(e=>{var s,n,i,a,r,c,o,l;(null===(s=e.balance)||void 0===s?void 0:s.currency)&&(t[null===(n=e.balance)||void 0===n?void 0:n.currency]?(t[null===(i=e.balance)||void 0===i?void 0:i.currency].count++,t[null===(a=e.balance)||void 0===a?void 0:a.currency].balance.amount+=null===(r=e.balance)||void 0===r?void 0:r.amount):t[null===(c=e.balance)||void 0===c?void 0:c.currency]={count:1,balance:{amount:null===(o=e.balance)||void 0===o?void 0:o.amount,currency:null===(l=e.balance)||void 0===l?void 0:l.currency}})}),Object.values(t)}signAll(t){return Object(g.a)(this,void 0,void 0,(function*(){t.preventDefault();const e={paymentStatus:this.filterScheme.paymentStatus},s=(yield this.historyService.getHistoryList(this.paymentCategory,e,1,this.pageSizeForSign)).body.filter(t=>this.historyService.isSignable(t)),n={transactionIds:this.retrieveIdsFromList(s),totalBalance:this.countTotalBalanceFromPaymentsList(s),transactionsCount:s.length};this.filterScheme.paymentStatus===L.d.DRAFT&&(yield this.validateTransactionsByPaymentId(n.transactionIds))===V.b.FAILED||this.showSignModal(n)}))}sendAllForSign(t){return Object(g.a)(this,void 0,void 0,(function*(){t.preventDefault();const e={paymentStatus:L.d.DRAFT},s=(yield this.historyService.getHistoryList(this.paymentCategory,e,1,this.pageSizeForSign)).body.filter(t=>this.historyService.isSendableForSign(t));this.sendToSigned(s)}))}signSelected(t){return Object(g.a)(this,void 0,void 0,(function*(){t.preventDefault();const e={transactionIds:this.retrieveIdsFromList(this.selectedTransactions),totalBalance:this.countTotalBalanceFromTransactionsList(this.selectedTransactions),transactionsCount:this.selectedTransactions.length};this.filterScheme.paymentStatus===L.d.DRAFT&&(yield this.validateTransactionsByPaymentId(e.transactionIds))!==V.b.SUCCESS||this.showSignModal(e)}))}sendForSignSelected(t){return Object(g.a)(this,void 0,void 0,(function*(){t.preventDefault(),this.sendToSigned(this.selectedTransactions)}))}deleteSelectedTransactions(t=null){return Object(g.a)(this,void 0,void 0,(function*(){t&&t.preventDefault(),this.deleteTransactions(this.selectedTransactions)}))}exportSelectedTransactions(t=null){return Object(g.a)(this,void 0,void 0,(function*(){t&&t.preventDefault();const e=yield this.statementService.exportTransactions(this.selectedTransactions);this.filesService.downloadFile(e,`${this.selectedCount}_operations.pdf`)}))}onDelete(t){return Object(g.a)(this,void 0,void 0,(function*(){yield this.deleteTransactions([t])}))}onRevoke(t){return Object(g.a)(this,void 0,void 0,(function*(){t.isLoading=!0;try{yield this.historyService.revokePayment(this.company.currentId,t),yield this.init(this.filterScheme).toPromise()}catch(e){this.notifierService.notify("error",e.description||e.code)}finally{this.historyService.updateForSignCount(null,this.paymentCategory),this.historyService.updateStatusCounts(this.paymentCategory),this.resetSelectable(),this.updateSelectable()}}))}deleteTransactions(t){return Object(g.a)(this,void 0,void 0,(function*(){t.forEach(t=>{t.isLoading=!0});try{const e=yield this.historyService.deleteMultipleTransactions(this.company.currentId,t);yield this.init(this.filterScheme).toPromise();const s=e.length,n=t.length-s;0===s?this.showDeleteError(t):0===n?this.showDeleteSuccess(s):this.showDeletePartial(s,n)}catch(e){this.showDeleteError(t)}finally{this.historyService.updateForSignCount(null,this.paymentCategory),this.resetSelectable(),this.updateSelectable()}}))}sendToSigned(t){return Object(g.a)(this,void 0,void 0,(function*(){try{const e=yield this.historyService.sendMultipleTransactionsForSign(t.map(t=>t.id));switch(e.status){case V.b.SUCCESS:this.showSendToSignedSuccess(e),yield this.init(this.filterScheme).toPromise();break;case V.b.PARTLY_SUCCESS:this.showSendToSignedPartial(e),yield this.init(this.filterScheme).toPromise();break;case V.b.FAILED:this.showSendToSignedPartialError(e)}}catch(e){console.error(e),this.showSendToSignedError(t)}finally{this.resetSelectable(),this.updateSelectable(),this.historyService.updateForSignCount(null,this.paymentCategory)}}))}showSignModal(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(Ft.b,this.modalConfigMedium);Object.assign(e.componentInstance,{additionalParams:{actionIds:t.transactionIds}}),Object.assign(e.componentInstance,{headerParams:{smsHeader:Lt.c.SIGNING_PAYMENT}}),e.componentInstance.submitted.subscribe(s=>{this.signMultipleTransactions(s,t).then(()=>{localStorage.setItem("preferredSignatureType",s.type===V.q.OTP?Ft.a.OTP:Ft.a.SMS)}).catch(e=>{this.showMultipleSignError(e.description||e.code,t)}).finally(()=>{this.historyService.updateForSignCount(null,this.paymentCategory),e.close()})}),e.componentInstance.sentForRevision.subscribe(()=>{this.init(this.filterScheme).toPromise(),e.close()})}))}signMultipleTransactions(t,e){return Object(g.a)(this,void 0,void 0,(function*(){try{const s=yield this.historyService.signMultipleTransactions(this.company.currentId,t,e.transactionIds);switch(s.status){case V.b.SUCCESS:this.showMultipleSignSuccess(s),yield this.init(this.filterScheme).toPromise();break;case V.b.PARTLY_SUCCESS:this.showMultipleSignPartialSuccess(s),yield this.init(this.filterScheme).toPromise();break;case V.b.FAILED:this.showMultipleSignPartialError(s)}}catch(s){this.showMultipleSignError(s,e)}finally{this.updateSelectable(),this.historyService.updateForSignCount(null,this.paymentCategory)}}))}loadStatement(){return this.isLoadingExtra=!0,1===this.pageNumber&&(this.statement=null),this.historyService.getTransactionGroup(this.paymentCategory,this.filterScheme,this.pageNumber,this.filterScheme.paymentStatus===L.d.FOR_SIGN?this.pageSizeForSign:this.pageSize).pipe(Object(O.a)(t=>{this.hasMorePages=this.pageSize*this.pageNumber<=t.transactionsCount,this.statement={totalTransactionsCount:t.transactionsCount,transactionGroups:this.filterScheme.paymentStatus===L.d.FOR_SIGN?this.destructureForSignGroups(t):[t]},this.startHistoryTour()}),Object(A.a)(t=>(console.log(t),this.statement=null,Object(y.a)(t))),Object(C.a)(()=>{this.isReady=!0,this.isLoading=!1,this.isLoadingExtra=!1}))}startHistoryTour(){var t,e,s;this.isTourShown||(this.isTourShown=!0,("HISTORY_LIST.REPEAT"==this.tourStep||"HISTORY_HOME.NAV"==this.tourStep)&&(null===(s=null===(e=null===(t=this.statement)||void 0===t?void 0:t.transactionGroups[0])||void 0===e?void 0:e.transactions[0])||void 0===s?void 0:s.hasTour)&&setTimeout(()=>{this.tourService.startTour(Vt.e.HISTORY_LIST)},500))}destructureForSignGroups(t){const e=t.transactions.filter(t=>t.isSignable),s=t.transactions.filter(t=>t.isSignableByOthers);return[{title:this.historyService.generateGroupTitle(L.d.FOR_SIGN),creditSum:null,debitSum:this.historyService.getTotalAmount(e),hasLargeTransactions:this.statementService.checkListForLargeTransactions(e),transactionsCount:e.length,transactions:e},{hasTour:!0,title:this.historyService.generateGroupTitle(L.d.FOR_SIGN_OTHERS),creditSum:null,debitSum:this.historyService.getTotalAmount(s),hasLargeTransactions:this.statementService.checkListForLargeTransactions(s),transactionsCount:s.length,transactions:s}]}showValidationError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(pt,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.result=t}))}showMultipleSignPartialSuccess(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(U,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.result=t}))}showMultipleSignPartialError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(w,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.signResult=t}))}showMultipleSignSuccess(t){return Object(g.a)(this,void 0,void 0,(function*(){this.modalService.open(X,this.modalConfigSmall).componentInstance.result=t}))}showMultipleSignError(t=null,e){return Object(g.a)(this,void 0,void 0,(function*(){const s=this.modalService.open(J,this.modalConfigSmall);s.componentInstance.errorText=t;try{yield s.result,this.showSignModal(e)}catch(n){}}))}showDeleteSuccess(t){return Object(g.a)(this,void 0,void 0,(function*(){this.modalService.open(k,this.modalConfigSmall).componentInstance.successCount=t}))}showDeletePartial(t,e){return Object(g.a)(this,void 0,void 0,(function*(){const s=this.modalService.open(P,this.modalConfigMedium);s.componentInstance.successCount=t,s.componentInstance.failedCount=e}))}showDeleteError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(W,this.modalConfigSmall);e.componentInstance.failedCount=t.length;try{yield e.result,this.deleteTransactions(t)}catch(s){}}))}showSendToSignedSuccess(t){return Object(g.a)(this,void 0,void 0,(function*(){this.modalService.open(st,this.modalConfigSmall).componentInstance.signResult=t}))}showSendToSignedPartial(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(et,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.signResult=t}))}showSendToSignedPartialError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(ct,this.modalConfigMedium);t.results=t.results.map(t=>(t.documentNumber=this.getDocumentNumberById(t.itemId),t)),e.componentInstance.signResult=t}))}showSendToSignedError(t){return Object(g.a)(this,void 0,void 0,(function*(){const e=this.modalService.open(nt,this.modalConfigSmall);e.componentInstance.signResult={numberOfFailed:t.length,numberOfSuccess:0,status:V.b.FAILED};try{yield e.result,this.sendToSigned(t)}catch(s){}}))}resetSelectable(){this.selectedTransactions=[],this.selectedCount=0,this.selectedBalance={amount:0,currency:null},this.isAllSelected=!1,this.hasSignableSelected=!1}updateSelectable(){this.resetSelectable(),this.updateSelectedValues()}retrieveIdsFromList(t){return t.map(t=>t.id)}updateSelectedValues(){this.currentTransactions.forEach(t=>{t.isSelected&&(this.selectedTransactions.push(t),this.selectedCount++)}),this.selectedBalance=this.countTotalBalanceFromTransactionsList(this.selectedTransactions)}countTotalBalanceFromPaymentsList(t){const e={amount:0,currency:null};return t.forEach(t=>{var s,n;e.currency||(e.currency=null===(s=t.details.paymentAmount)||void 0===s?void 0:s.currency),e.amount+=null===(n=t.details.paymentAmount)||void 0===n?void 0:n.amount}),e}countTotalBalanceFromTransactionsList(t){const e={amount:0,currency:null};return t.forEach(t=>{t.debit&&(!e.currency&&t.debit.currency&&(e.currency=t.debit.currency),e.amount+=t.debit.amount)}),e}isAllSignableInList(t){let e=!0;return t.forEach(t=>{if(!1===e)return e;t.isSignable||(e=!1)}),e}isAllSendableForSignInList(t){let e=!0;return t.forEach(t=>{if(!1===e)return e;t.isSendableForSign||(e=!1)}),e}hasSignableInList(t){return!!t.find(t=>t.isSignable)}hasSendableForSignInList(t){return!!t.find(t=>t.isSendableForSign)}mapQueryParams(t){let e=Object.assign({},this.filterService.getDefaults(this.filterMode));for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];if(!n)continue;e[s]="periodFrom"==s||"periodTo"==s?new Date(n):n}return e}updateQueryParams(){const t=Object.assign({},this.filterScheme),e={};for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];n&&null!=n&&"null"!=n&&(e[s]="periodFrom"==s||"periodTo"==s?this.datePipe.transform(n,"yyyy-MM-dd"):n,"amountFrom"!=s&&"amountTo"!=s||(e[s]=this.maskedService.getNumberedAmount(n)))}this.updateCashedRouteQuery(e),this.router.navigate([],{queryParams:e,relativeTo:this.route,skipLocationChange:!1})}updateCashedRouteQuery(t){sessionStorage.setItem(this.SESSION_ROUTE_KEY,JSON.stringify(t))}getDocumentNumberById(t){const e=this.currentTransactions.find(e=>e.id==t);return e&&e.documentNumber||null}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(It.a),u.Qb(F.c),u.Qb(Ct),u.Qb(l.a),u.Qb(l.c),u.Qb(n.f),u.Qb(D.q),u.Qb(_t.a),u.Qb(Et.a),u.Qb(Tt.b),u.Qb(Vt.g),u.Qb(Dt.c))},t.\u0275cmp=u.Kb({type:t,selectors:[["j-history-list"]],decls:10,vars:9,consts:[[1,"j-list"],[1,"j-list__header"],[1,"j-tabs"],[1,"j-tabs__list"],["class","j-tabs__item","routerLinkActive","active","translate","",3,"routerLink",4,"ngFor","ngForOf"],[1,"j-list__filter"],[3,"currency","mode"],["class","j-list__statement j-list__loading",4,"ngIf"],["infiniteScroll","",3,"scrollWindow","alwaysCallback","infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["class","j-list__statement",3,"list-statement--scrollable",4,"ngIf"],["routerLinkActive","active","translate","",1,"j-tabs__item",3,"routerLink"],[1,"j-list__statement","j-list__loading"],[1,"j-list__statement"],["class","total",4,"ngIf"],[3,"statement","isTotalsShown","hasExtraPadding","isSelectable","signed","sentForSign","deleted","revoked","selected"],["class","text-center text-muted mt-5 mb-3 text-small","translate","",4,"ngIf"],[1,"total"],[1,"total__select","custom-control","custom-checkbox",3,"click"],["type","checkbox","id","checkboxAll",1,"custom-control-input",3,"ngModel","ngModelChange","click","change"],["for","checkboxAll","translate","",1,"custom-control-label"],[1,"total__content"],[3,"ngIf"],["leftCurrencies",""],[1,"total__actions"],[4,"ngIf"],[1,"total__text"],["translate",""],[3,"money"],["class","total__text",4,"ngFor","ngForOf"],[1,"total__text",3,"ngbTooltip"],[4,"ngFor","ngForOf"],["href","#","class","total__action","tooltipClass","tooltip-light",3,"ngbTooltip","inlineSVG","click",4,"ngIf"],["href","#","tooltipClass","tooltip-light",1,"total__action",3,"ngbTooltip","inlineSVG","click"],["href","#",1,"total__action","total__action--sign",3,"click"],["translate","",1,"mr-2"],[3,"inlineSVG"],["href","#","class","total__action total__action--sign","tooltipClass","tooltip-light",3,"ngbTooltip","inlineSVG","click",4,"ngIf"],["href","#","tooltipClass","tooltip-light",1,"total__action","total__action--sign",3,"ngbTooltip","inlineSVG","click"],["translate","",1,"text-center","text-muted","mt-5","mb-3","text-small"]],template:function(t,e){1&t&&(u.Wb(0,"section",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Wb(3,"nav",3),u.Rc(4,Wt,2,2,"a",4),u.Vb(),u.Vb(),u.Wb(5,"div",5),u.Rb(6,"j-filter",6),u.Vb(),u.Vb(),u.Rc(7,kt,2,0,"div",7),u.Wb(8,"div",8),u.ic("scrolled",(function(t){return e.onScroll()})),u.Rc(9,ee,4,8,"div",9),u.Vb(),u.Vb()),2&t&&(u.Ab(4),u.uc("ngForOf",e.historyTypes),u.Ab(2),u.uc("currency",e.filterCurrency)("mode",e.filterMode),u.Ab(1),u.uc("ngIf",e.isLoading),u.Ab(1),u.uc("scrollWindow",!0)("alwaysCallback",!0)("infiniteScrollDistance",2)("infiniteScrollThrottle",500),u.Ab(1),u.uc("ngIf",!e.isLoading))},directives:[n.t,Nt.a,n.u,a.a,l.f,l.e,N.a,Ht.a,Pt.a,i.a,i.t,i.w,Y.a,D.E,H.a],pipes:[N.d],styles:['[_nghost-%COMP%]{margin:1rem 0;display:block}.total[_ngcontent-%COMP%]{min-height:60px;position:relative;font-size:.875rem;color:#666c72;padding-bottom:1rem}@media(min-width:960px){.total[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex}}.total[_ngcontent-%COMP%]:after{content:"";display:block;background:#eceef1;height:1px;position:absolute;bottom:0;left:-1.5rem;right:-1.5rem}.total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1c1f}.total__select[_ngcontent-%COMP%]{margin-bottom:1rem}@media(min-width:960px){.total__select[_ngcontent-%COMP%]{margin-right:1.5rem;margin-bottom:0}}.total__select[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{line-height:1.5rem}.total__actions[_ngcontent-%COMP%]{margin-left:auto;display:-webkit-box;display:flex}.total__text[_ngcontent-%COMP%]{margin-right:1rem}@media(min-width:960px){.total__text[_ngcontent-%COMP%]{text-align:right}}.total__action[_ngcontent-%COMP%]{display:block;margin-left:.5rem;color:#b7bec5}.total__action[_ngcontent-%COMP%]:hover{color:#ef5630}.total__action--sign[_ngcontent-%COMP%]{color:#1586bb}.total__content[_ngcontent-%COMP%]{margin-left:auto;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}@media(min-width:960px){.total__content[_ngcontent-%COMP%]{-webkit-box-pack:end;justify-content:flex-end}}']}),t})();const ne=[{path:"",component:S,data:{title:"HISTORY.TITLE"},children:[{path:"all",component:se,data:{category:V.h.ALL}},{path:"tenge",component:se,data:{category:V.h.DOMESTIC}},{path:"foreign",component:se,data:{category:V.h.FOREIGN}},{path:"conversion",component:se,data:{category:V.h.CONVERSION}},{path:"**",redirectTo:"all"}]},{path:"**",redirectTo:""}];let ie=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[l.g.forChild(ne)],l.g]}),t})();var ae=s("xJkR");s.d(e,"HistoryModule",(function(){return re}));let re=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[n.c,r.a,o.a,i.n,c.a,ie,a.b,N.c,ae.b]]}),t})()}}]);