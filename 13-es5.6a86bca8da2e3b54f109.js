function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=_superPropBase(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(s){r=!0,a=s}finally{try{o||null==c.return||c.return()}finally{if(r)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"E+oP":function(e,t,n){var o=n("A90E"),r=n("QqLw"),a=n("03A+"),i=n("Z0cm"),c=n("MMmD"),s=n("DSRE"),l=n("6sVZ"),u=n("c6wG"),b=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||u(e)||a(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!o(e).length;for(var n in e)if(b.call(e,n))return!1;return!0}},T9EB:function(e,t,n){"use strict";n.r(t);var o=n("ofXK"),r=n("3Pt+"),a=n("tmjD"),i=n("1kSV"),c=n("sYmb"),s=n("xJkR"),l=n("4Nuw"),u=n("Rreu"),b=n("PCNd"),m=n("ObZ0"),d=n("ebvF"),p=n("tyNb"),f=n("gzBp"),h=n("YMfE"),v=n("FSxY"),y=n("gm23"),g=n("eEJz"),A=n("lJxs"),T=n("fXoL"),R=n("bsP8"),C=n("0mgW"),E=n("S1F0"),k=n("oKsb"),S=n("fvpk"),V=n("mrSG"),N=n("2Vo4"),I=n("XNiG"),O=n("itXk"),j=n("LRne"),P=n("EY2u"),W=n("Cfvw"),M=n("/uUt"),_=n("Kj3r"),x=n("JX91"),w=n("zp1y"),D=n("3E0/"),Y=n("eIep"),U=n("JIr8"),L=n("pLZG"),F=n("vkgz"),$=n("IzEk"),B=n("TwVa"),K=n("+/Tu"),H=n("S09V"),Q=n("SMdK"),G=n("Xrnt"),q=n("4wRv"),X=n("B1Ao"),z=n("4oqK"),J=n("Kcpt"),Z=n("oa9T"),ee=n("2aJj"),te=n("zN9f"),ne=n("Eajh");function oe(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div",19),T.ic("click",(function(e){T.Ic(n);var o=t.$implicit,r=T.mc().$implicit;return T.mc().closeModal(r,o)})),T.Wb(1,"div",20),T.Rb(2,"j-entity-logo",21),T.nc(3,"bankFromAccount"),T.Vb(),T.Wb(4,"div",22),T.Wb(5,"p",23),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"p",24),T.Tc(9),T.nc(10,"bankFromAccount"),T.nc(11,"bankFromAccount"),T.Vb(),T.Vb(),T.Vb()}if(2&e){var o=t.$implicit;T.Ab(2),T.uc("name",T.oc(3,5,o.iban)),T.Ab(4),T.Wc("",T.oc(7,7,"PAYMENTS.DICTIONARY.IBAN"),": ",o.iban,""),T.Ab(3),T.Wc(" ",T.oc(10,9,o.iban),": ",T.pc(11,11,o.iban,"name")," ")}}function re(e,t){if(1&e&&(T.Wb(0,"li"),T.Wb(1,"div",15),T.Wb(2,"p",16),T.Tc(3),T.Vb(),T.Wb(4,"p",17),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Rc(7,oe,12,14,"div",18),T.Vb(),T.Vb()),2&e){var n=t.$implicit;T.Ab(3),T.Uc(n.name),T.Ab(2),T.Wc("",T.oc(6,4,"PAYMENTS.DICTIONARY.IIN"),": ",n.iinOrBin,""),T.Ab(2),T.uc("ngForOf",n.accounts)}}function ae(e,t){1&e&&(T.Wb(0,"div"),T.Wb(1,"p",25),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.DICTIONARY.RECIPIENT_NOT_FOUND")))}var ie,ce=((ie=function(){function e(t,n,o){_classCallCheck(this,e),this.paymentsS=t,this.recipients=n,this.modal=o,this.collectionSize$=new N.a(0),this.currentPage$=new N.a(0),this.pageSize=10}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.recipients.getRecipients(),this.search=new r.h(""),this.list$=Object(O.a)([this.recipients.store.items$.pipe(Object(A.a)((function(e){return e.filter((function(e){return!!e.accounts}))}))),this.search.valueChanges.pipe(Object(_.a)(100),Object(M.a)(),Object(x.a)(this.search.value)),this.currentPage$]).pipe(Object(A.a)((function(t){var n=_slicedToArray(t,3),o=n[0],r=n[1],a=n[2],i=e.recipients.filterRecipients(o,r);return e.collectionSize$.next(i.length>e.pageSize?i.length-e.pageSize:i.length),i.slice(a>1?a*e.pageSize:0,(a+1)*e.pageSize)})))}},{key:"onClose",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(e,t){this.modal.close({recipient:e,account:t})}},{key:"page",get:function(){return this.currentPage$.getValue()},set:function(e){this.currentPage$.next(e)}}]),e}()).\u0275fac=function(e){return new(e||ie)(T.Qb(C.c),T.Qb(X.a),T.Qb(i.a))},ie.\u0275cmp=T.Kb({type:ie,selectors:[["j-recipients-dictionary"]],decls:23,vars:23,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","viewBox","0 0 24 24","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"page","maxSize","rotate","pageSize","collectionSize","pageChange"],[1,"recipient-dict-item"],[1,"recipient-title"],[1,"small","text-gray","mb-2"],["class","account-pill account-pill_gray account-pill_fill",3,"click",4,"ngFor","ngForOf"],[1,"account-pill","account-pill_gray","account-pill_fill",3,"click"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"text-center","text-light","light"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"button",1),T.ic("click",(function(e){return t.modal.dismiss()})),T.Rb(2,"img",2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"div",3),T.Wb(5,"h5"),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"div",4),T.Wb(9,"j-form-field",5),T.Rb(10,"j-icon",6),T.Rb(11,"input",7),T.nc(12,"translate"),T.Vb(),T.Vb(),T.Wb(13,"div",8),T.Wb(14,"div",9),T.Wb(15,"div",10),T.Wb(16,"ul",11),T.Rc(17,re,8,6,"li",12),T.nc(18,"async"),T.Vb(),T.Rc(19,ae,4,3,"div",13),T.nc(20,"async"),T.Wb(21,"ngb-pagination",14),T.ic("pageChange",(function(e){return t.page=e})),T.nc(22,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.vc("alt",T.oc(3,11,"SHARED.CLOSE")),T.Ab(4),T.Uc(T.oc(7,13,"PAYMENTS.DICTIONARY.TITLE")),T.Ab(5),T.uc("placeholder",T.oc(12,15,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",t.search),T.Ab(6),T.uc("ngForOf",T.oc(18,17,t.list$)),T.Ab(2),T.uc("ngIf",0===T.oc(20,19,t.list$).length),T.Ab(2),T.uc("page",t.page)("maxSize",5)("rotate",!0)("pageSize",t.pageSize)("collectionSize",T.oc(22,21,t.collectionSize$)))},directives:[z.a,J.a,Z.a,ee.a,r.c,r.t,r.i,o.t,o.u,i.u,te.a],pipes:[c.d,o.b,ne.a],styles:[".recipient-dict-item{padding:1rem 0}.recipient-dict-item .recipient-title{font-weight:500;font-size:16px}.recipient-dict-item .account-pill{margin-top:.5rem}.recipient-dict-item p{margin-bottom:.5em;line-height:1.4}"],encapsulation:2}),ie),se=n("bHA9");function le(e,t){if(1&e){var n=T.Xb();T.Wb(0,"li",14),T.ic("click",(function(e){T.Ic(n);var o=t.$implicit;return T.mc().closeModal(o)})),T.Wb(1,"div",15),T.Tc(2),T.Vb(),T.Vb()}if(2&e){var o=t.$implicit;T.Ab(2),T.Uc(o.label)}}function ue(e,t){1&e&&(T.Wb(0,"div"),T.Wb(1,"p",16),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.DICTIONARY.KNP_NOT_FOUND")))}var be,me=((be=function(){function e(t,n,o){_classCallCheck(this,e),this.paymentsS=t,this.dictionaries=n,this.modal=o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.search=new r.h(""),this.list$=Object(O.a)([this.dictionaries.KNPDictionary.items$,this.search.valueChanges.pipe(Object(_.a)(100),Object(M.a)(),Object(x.a)(this.search.value))]).pipe(Object(A.a)((function(t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return e.paymentType?e.dictionaries.selectByPaymentType(o,{type:e.paymentType}).filter((function(t){return e.paymentsS.genericSearchTerm(r,t)})).sort((function(e,t){return e.code>t.code?1:-1})):o.filter((function(t){return e.paymentsS.genericSearchTerm(r,t)})).sort((function(e,t){return e.code>t.code?1:-1}))})))}},{key:"closeModal",value:function(e){this.modal.close(e)}}]),e}()).\u0275fac=function(e){return new(e||be)(T.Qb(C.c),T.Qb(se.a),T.Qb(i.a))},be.\u0275cmp=T.Kb({type:be,selectors:[["j-knp-dictionary"]],inputs:{paymentType:"paymentType"},decls:20,vars:13,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label ",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,""],[1,"text-center","text-light","light"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"button",1),T.ic("click",(function(e){return t.modal.dismiss()})),T.Rb(2,"img",2),T.Vb(),T.Wb(3,"div",3),T.Wb(4,"h5"),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Wb(7,"div",4),T.Wb(8,"j-form-field",5),T.Rb(9,"j-icon",6),T.Rb(10,"input",7),T.nc(11,"translate"),T.Vb(),T.Vb(),T.Wb(12,"div",8),T.Wb(13,"div",9),T.Wb(14,"div",10),T.Wb(15,"ul",11),T.Rc(16,le,3,1,"li",12),T.nc(17,"async"),T.Vb(),T.Rc(18,ue,4,3,"div",13),T.nc(19,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(5),T.Uc(T.oc(6,5,"PAYMENTS.DICTIONARY.TITLE")),T.Ab(5),T.uc("placeholder",T.oc(11,7,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",t.search),T.Ab(6),T.uc("ngForOf",T.oc(17,9,t.list$)),T.Ab(2),T.uc("ngIf",0===T.oc(19,11,t.list$).length))},directives:[z.a,J.a,Z.a,ee.a,r.c,r.t,r.i,o.t,o.u],pipes:[c.d,o.b],styles:[""],encapsulation:2}),be);function de(e,t){if(1&e){var n=T.Xb();T.Wb(0,"li",14),T.ic("click",(function(e){T.Ic(n);var o=t.$implicit;return T.mc().closeModal(o)})),T.Wb(1,"p",15),T.Tc(2),T.Vb(),T.Wb(3,"p",16),T.Tc(4),T.nc(5,"translate"),T.Vb(),T.Vb()}if(2&e){var o=t.$implicit;T.Ab(2),T.Uc(o.label),T.Ab(2),T.Wc("",T.oc(5,3,"PAYMENTS.DICTIONARY.BIN"),": ",o.bin,"")}}function pe(e,t){1&e&&(T.Wb(0,"div"),T.Wb(1,"p",17),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.DICTIONARY.UGD_NOT_FOUND")))}var fe,he=((fe=function(){function e(t,n,o){_classCallCheck(this,e),this.paymentsS=t,this.dictionaries=n,this.modal=o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.search=new r.h(""),this.list$=Object(O.a)(this.dictionaries.UGDictionary.items$,this.search.valueChanges.pipe(Object(_.a)(100),Object(M.a)(),Object(x.a)(this.search.value))).pipe(Object(A.a)((function(t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return o.filter((function(t){return e.paymentsS.ugdSearchFn(r,t)}))})))}},{key:"closeModal",value:function(e){this.modal.close(e)}}]),e}()).\u0275fac=function(e){return new(e||fe)(T.Qb(C.c),T.Qb(se.a),T.Qb(i.a))},fe.\u0275cmp=T.Kb({type:fe,selectors:[["j-ugd-dictionary"]],decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,"m-0","text-wrap"],[1,"p3","text-gray","m-0"],[1,"text-center","text-light","light"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"button",1),T.ic("click",(function(e){return t.modal.dismiss()})),T.Rb(2,"img",2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"div",3),T.Wb(5,"h5"),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"div",4),T.Wb(9,"j-form-field",5),T.Rb(10,"j-icon",6),T.Rb(11,"input",7),T.nc(12,"translate"),T.Vb(),T.Vb(),T.Wb(13,"div",8),T.Wb(14,"div",9),T.Wb(15,"div",10),T.Wb(16,"ul",11),T.Rc(17,de,6,5,"li",12),T.nc(18,"async"),T.Vb(),T.Rc(19,pe,4,3,"div",13),T.nc(20,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.vc("alt",T.oc(3,6,"SHARED.CLOSE")),T.Ab(4),T.Uc(T.oc(7,8,"PAYMENTS.DICTIONARY.UGD_TITLE")),T.Ab(5),T.uc("placeholder",T.oc(12,10,"PAYMENTS.DICTIONARY.SEARCH"))("formControl",t.search),T.Ab(6),T.uc("ngForOf",T.oc(18,12,t.list$)),T.Ab(2),T.uc("ngIf",0===T.oc(20,14,t.list$).length))},directives:[z.a,J.a,Z.a,ee.a,r.c,r.t,r.i,o.t,o.u],pipes:[c.d,o.b],styles:[""],encapsulation:2}),fe),ve=n("HghS");function ye(e,t){if(1&e){var n=T.Xb();T.Wb(0,"li",14),T.Wb(1,"div",15),T.ic("click",(function(e){T.Ic(n);var o=t.$implicit;return T.mc().closeModal(o)})),T.Wb(2,"div",16),T.Rb(3,"j-entity-logo",17),T.Vb(),T.Wb(4,"div",18),T.Wb(5,"p",19),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"p",20),T.Tc(9),T.Vb(),T.Vb(),T.Vb(),T.Vb()}if(2&e){var o=t.$implicit;T.Ab(3),T.uc("name",o.bic),T.Ab(3),T.Uc(o.salaryTransitIban?T.oc(7,4,"PAYMENTS.BANKS_RECEIVERS.IBAN")+o.salaryTransitIban:o.name),T.Ab(3),T.Wc("",o.bic,": ",o.name,"")}}function ge(e,t){1&e&&(T.Wb(0,"div"),T.Wb(1,"p",21),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.BANKS_RECEIVERS.NOT_FOUND")))}var Ae,Te=((Ae=function(){function e(t,n,o){_classCallCheck(this,e),this.modal=t,this.paymentsS=n,this.dict=o}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.search=new r.h(""),this.list$=Object(O.a)(this.dict.bankDictionary.items$,this.search.valueChanges.pipe(Object(_.a)(100),Object(M.a)(),Object(x.a)(this.search.value))).pipe(Object(A.a)((function(t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return o.filter((function(t){return e.paymentsS.bankReceiverSearchFn(r,t)}))})))}},{key:"closeModal",value:function(e){this.modal.close(e)}}]),e}()).\u0275fac=function(e){return new(e||Ae)(T.Qb(i.a),T.Qb(C.c),T.Qb(se.a))},Ae.\u0275cmp=T.Kb({type:Ae,selectors:[["j-banks-receivers"]],decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","mb-2",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mb-2"],[1,"account-pill","account-pill_gray","account-pill_fill",3,"click"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"text-center","text-light","light"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"button",1),T.ic("click",(function(e){return t.modal.dismiss()})),T.Rb(2,"img",2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"div",3),T.Wb(5,"h5"),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"div",4),T.Wb(9,"j-form-field",5),T.Rb(10,"j-icon",6),T.Rb(11,"input",7),T.nc(12,"translate"),T.Vb(),T.Vb(),T.Wb(13,"div",8),T.Wb(14,"div",9),T.Wb(15,"div",10),T.Wb(16,"ul",11),T.Rc(17,ye,10,6,"li",12),T.nc(18,"async"),T.Vb(),T.Rc(19,ge,4,3,"div",13),T.nc(20,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.vc("alt",T.oc(3,6,"SHARED.CLOSE")),T.Ab(4),T.Uc(T.oc(7,8,"PAYMENTS.BANKS_RECEIVERS.SEARCH")),T.Ab(5),T.uc("placeholder",T.oc(12,10,"PAYMENTS.BANKS_RECEIVERS.SEARCH"))("formControl",t.search),T.Ab(6),T.uc("ngForOf",T.oc(18,12,t.list$)),T.Ab(2),T.uc("ngIf",!T.oc(20,14,t.list$)))},directives:[z.a,J.a,Z.a,ee.a,r.c,r.t,r.i,o.t,o.u,te.a],pipes:[c.d,o.b],styles:[""]}),Ae);function Re(e,t){if(1&e){var n=T.Xb();T.Wb(0,"li",14),T.ic("click",(function(e){T.Ic(n);var o=t.$implicit;return T.mc().closeModal(o)})),T.Wb(1,"div",15),T.Tc(2),T.Vb(),T.Vb()}if(2&e){var o=t.$implicit;T.Ab(2),T.Uc(o.label||o.description)}}function Ce(e,t){1&e&&(T.Wb(0,"div"),T.Wb(1,"p",16),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.DICTIONARY.NOT_FOUND")))}var Ee,ke,Se,Ve=((Ee=function(){function e(t,n){_classCallCheck(this,e),this.paymentsS=t,this.modal=n,this.searchPlaceholder="PAYMENTS.DICTIONARY.SEARCH",this.title="PAYMENTS.DICTIONARY.TITLE"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.search=new r.h(""),this.list$=Object(O.a)(this.store.items$,this.search.valueChanges.pipe(Object(_.a)(100),Object(M.a)(),Object(x.a)(this.search.value))).pipe(Object(A.a)((function(t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return o.filter((function(t){return e.searchFn?e.searchFn(r,t):e.paymentsS.genericSearchTerm(r,t)}))})))}},{key:"closeModal",value:function(e){this.modal.close(e)}}]),e}()).\u0275fac=function(e){return new(e||Ee)(T.Qb(C.c),T.Qb(i.a))},Ee.\u0275cmp=T.Kb({type:Ee,selectors:[["j-generic-dictionary"]],inputs:{store:"store",searchFn:"searchFn",searchPlaceholder:"searchPlaceholder",title:"title"},decls:21,vars:16,consts:[[1,"dictionary-modal"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body"],[1,"form-group"],["clearable","true"],["jPrefix","","name","search",1,"text-gray","d-block","mt-n1"],["type","text","jFormInput","",1,"form-control",3,"placeholder","formControl"],[1,"dictionary-modal--list"],[1,"scrolled"],[1,"scrolled--content"],[1,"list-unstyled"],["class","j-option-label ",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"j-option-label",3,"click"],[1,""],[1,"text-center","text-light","light"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"button",1),T.ic("click",(function(e){return t.modal.dismiss()})),T.Rb(2,"img",2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"div",3),T.Wb(5,"h5"),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"div",4),T.Wb(9,"j-form-field",5),T.Rb(10,"j-icon",6),T.Rb(11,"input",7),T.nc(12,"translate"),T.Vb(),T.Vb(),T.Wb(13,"div",8),T.Wb(14,"div",9),T.Wb(15,"div",10),T.Wb(16,"ul",11),T.Rc(17,Re,3,1,"li",12),T.nc(18,"async"),T.Vb(),T.Rc(19,Ce,4,3,"div",13),T.nc(20,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.vc("alt",T.oc(3,6,"SHARED.CLOSE")),T.Ab(4),T.Uc(T.oc(7,8,t.title)),T.Ab(5),T.uc("placeholder",T.oc(12,10,t.searchPlaceholder))("formControl",t.search),T.Ab(6),T.uc("ngForOf",T.oc(18,12,t.list$)),T.Ab(2),T.uc("ngIf",0===T.oc(20,14,t.list$).length))},directives:[z.a,J.a,Z.a,ee.a,r.c,r.t,r.i,o.t,o.u],pipes:[c.d,o.b],styles:[""],encapsulation:2}),Ee),Ne=n("Stn5"),Ie=((Se=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Se)},Se.\u0275cmp=T.Kb({type:Se,selectors:[["j-bic-info"]],decls:13,vars:12,consts:[[1,"p4"],[3,"innerHTML"]],template:function(e,t){1&e&&(T.Wb(0,"article",0),T.Wb(1,"p"),T.Wb(2,"strong"),T.Tc(3),T.nc(4,"translate"),T.Vb(),T.Vb(),T.Rb(5,"p",1),T.nc(6,"translate"),T.Wb(7,"p"),T.Wb(8,"strong"),T.Tc(9),T.nc(10,"translate"),T.Vb(),T.Vb(),T.Rb(11,"p",1),T.nc(12,"translate"),T.Vb()),2&e&&(T.Ab(3),T.Vc(" ",T.oc(4,4,"PAYMENTS.BIC_INFO.SWIFT.TITLE")," "),T.Ab(2),T.uc("innerHTML",T.oc(6,6,"PAYMENTS.BIC_INFO.SWIFT.DESCRIPTION"),T.Jc),T.Ab(4),T.Vc(" ",T.oc(10,8,"PAYMENTS.BIC_INFO.BIC.TITLE")," "),T.Ab(2),T.uc("innerHTML",T.oc(12,10,"PAYMENTS.BIC_INFO.BIC.DESCRIPTION"),T.Jc))},pipes:[c.d],styles:[""]}),Se),Oe=((ke=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ke)},ke.\u0275cmp=T.Kb({type:ke,selectors:[["j-iban-info"]],decls:4,vars:0,consts:[["translate","",1,"p2","font-weight-medium"],["translate","",1,"p4"]],template:function(e,t){1&e&&(T.Wb(0,"p",0),T.Tc(1,"CURRENCY_PAYMENT.RECIPIENT.IBAN_INFO.TITLE"),T.Vb(),T.Wb(2,"p",1),T.Tc(3,"CURRENCY_PAYMENT.RECIPIENT.IBAN_INFO.DESCRIPTION"),T.Vb())},directives:[c.a],styles:[""]}),ke),je=n("quSY"),Pe=n("O/Ur"),We=n("QfCG"),Me=n("BV3K"),_e=n("SfXN"),xe=n("e8Ap"),we=n("jRXw"),De=n("4cI0"),Ye=["input"],Ue=function(){return{width:"100%",height:"56px","background-color":"#ECEEF1"}};function Le(e,t){1&e&&(T.Wb(0,"div",7),T.Rb(1,"ngx-skeleton-loader",8),T.Vb()),2&e&&(T.Ab(1),T.uc("theme",T.yc(1,Ue)))}function Fe(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div",10),T.ic("click",(function(e){T.Ic(n);var o=t.$implicit;return T.mc(2).onBankSelect(o)})),T.Tc(1),T.Vb()}if(2&e){var o=t.$implicit,r=T.mc(2);T.Ab(1),T.Vc(" ",r.mapBankLabel(o)," ")}}function $e(e,t){if(1&e&&(T.Wb(0,"div",7),T.Rc(1,Fe,2,1,"div",9),T.Vb()),2&e){var n=T.mc();T.Ab(1),T.uc("ngForOf",n.banks)}}function Be(e,t){1&e&&(T.Ub(0),T.Rb(1,"j-empty-placeholder",13),T.Tb())}function Ke(e,t){if(1&e&&(T.Tc(0),T.nc(1,"translate")),2&e){var n=T.mc(2);T.Vc(" ",T.oc(1,1,n.placeholderText)," ")}}function He(e,t){if(1&e&&(T.Wb(0,"div",7),T.Rc(1,Be,2,0,"ng-container",11),T.Rc(2,Ke,2,3,"ng-template",null,12,T.Sc),T.Vb()),2&e){var n=T.Fc(3),o=T.mc();T.Ab(1),T.uc("ngIf",(null==o.labelControl?null:null==o.labelControl.value?null:o.labelControl.value.length)>0)("ngIfElse",n)}}function Qe(e,t){1&e&&T.Rb(0,"j-bic-info")}var Ge,qe=((Ge=function(){function e(t){_classCallCheck(this,e),this.currencyPaymentService=t,this.labelText="CURRENCY_PAYMENT.RECIPIENT.BIC",this.placeholderText="CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED",this.isLoading=!1,this.isBicFocused=!1,this.subscription=new je.a}return _createClass(e,[{key:"selectByBic",value:function(e){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.retrieveBanks(e);case 2:if(!(n=this.banks.find((function(t){return t.bic==e})))){t.next=5;break}return t.abrupt("return",this.onBankSelect(n));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnInit",value:function(){this.listenBankSearch()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"focus",value:function(){var e=this;setTimeout((function(){e.input.nativeElement.focus()}),100)}},{key:"onBicFocus",value:function(e){this.isBicFocused=!0,this.labelControl.setValue(""),this.banks=[]}},{key:"onBicBlur",value:function(e){var t=this;setTimeout((function(){t.isBicFocused=!1}),300)}},{key:"mapBankLabel",value:function(e){return"".concat(e.bic," - ").concat(e.name)}},{key:"onBankSelect",value:function(e){this.labelControl.setValue(this.mapBankLabel(e),{emitEvent:!1}),this.bankControl.setValue(e)}},{key:"listenBankSearch",value:function(){var e,t=this;this.subscription.add(null===(e=this.labelControl)||void 0===e?void 0:e.valueChanges.pipe(Object(_.a)(300)).pipe(Object(M.a)()).subscribe((function(e){var n;(null===(n=e)||void 0===n?void 0:n.length)>=1&&t.retrieveBanks(e,t.countryCode)})))}},{key:"retrieveBanks",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return this.isLoading=!0,r=(null===(t=n)||void 0===t?void 0:t.substring(0,2))||null,o.prev=2,o.next=5,this.currencyPaymentService.getBanks(e,r);case 5:this.banks=o.sent,o.next=10;break;case 8:o.prev=8,o.t0=o.catch(2);case 10:return o.prev=10,this.isLoading=!1,o.finish(10);case 13:case"end":return o.stop()}}),o,this,[[2,8,10,13]])})))}}]),e}()).\u0275fac=function(e){return new(e||Ge)(T.Qb(Pe.b))},Ge.\u0275cmp=T.Kb({type:Ge,selectors:[["j-foreign-bank-select"]],viewQuery:function(e,t){var n;1&e&&T.Yc(Ye,!0),2&e&&T.Ec(n=T.jc())&&(t.input=n.first)},inputs:{labelControl:"labelControl",bankControl:"bankControl",countryCode:"countryCode",errorMessages:"errorMessages",labelText:"labelText",placeholderText:"placeholderText"},decls:14,vars:14,consts:[["type","text","jFormInput","","jFocusOnReturn","",1,"form-control","bic-input",3,"formControl","focus","blur"],["input",""],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-medium","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],[3,"control","errorMessages"],[1,"bic-dropdown",3,"hidden"],["class","bic-dropdown-body",4,"ngIf"],["bicInfo",""],[1,"bic-dropdown-body"],["count","4",3,"theme"],["class","j-option-label text-wrap",3,"click",4,"ngFor","ngForOf"],[1,"j-option-label","text-wrap",3,"click"],[4,"ngIf","ngIfElse"],["placeholder",""],["label","SHARED.SEARCH_NOT_FOUND"]],template:function(e,t){if(1&e&&(T.Wb(0,"j-form-field"),T.Wb(1,"j-label"),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"input",0,1),T.ic("focus",(function(e){return t.onBicFocus(e)}))("blur",(function(e){return t.onBicBlur(e)})),T.Vb(),T.Rb(6,"a",2),T.Rb(7,"j-error",3),T.Vb(),T.Wb(8,"div",4),T.Rc(9,Le,2,2,"div",5),T.Rc(10,$e,2,1,"div",5),T.Rc(11,He,4,2,"div",5),T.Vb(),T.Rc(12,Qe,1,0,"ng-template",null,6,T.Sc)),2&e){var n=T.Fc(13);T.Ab(2),T.Uc(T.oc(3,12,t.labelText)),T.Ab(2),T.Hb("has-dropdown",null==t.banks?null:t.banks.length),T.uc("formControl",t.labelControl),T.Ab(2),T.uc("ngbTooltip",n)("inlineSVG","/assets/icons/payments/question.svg"),T.Ab(1),T.uc("control",t.labelControl)("errorMessages",t.errorMessages),T.Ab(1),T.uc("hidden",!t.isBicFocused),T.Ab(1),T.uc("ngIf",t.isLoading),T.Ab(1),T.uc("ngIf",!t.isLoading&&(null==t.banks?null:t.banks.length)),T.Ab(1),T.uc("ngIf",!(t.isLoading||null!=t.banks&&t.banks.length))}},directives:[z.a,We.a,ee.a,r.c,Me.a,r.t,r.i,_e.a,i.E,xe.a,we.a,o.u,s.a,o.t,De.a,Ie],pipes:[c.d],styles:["[_nghost-%COMP%]{display:block;position:relative}.bic-dropdown[_ngcontent-%COMP%]{border-radius:0 8px 8px 0;left:0;right:0;padding:1.5rem;background:#fff;position:absolute;max-height:300px;height:30vh;z-index:1000;box-shadow:0 14px 16px rgba(0,0,0,.05)}.bic-dropdown[_ngcontent-%COMP%]   .j-option-label[_ngcontent-%COMP%]{cursor:pointer}.bic-input.has-dropdown[_ngcontent-%COMP%]{border-radius:8px 0 0 8px}.bic-dropdown-body[_ngcontent-%COMP%]{top:0;right:0;left:0;bottom:0;height:100%;overflow-y:auto;padding-right:.5rem}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}.bic-dropdown-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b7bec5;border-radius:10px}"]}),Ge),Xe=n("Kx/q"),ze=n("fK/r"),Je=n("PGAL"),Ze=n("Hjq/");function et(e,t){if(1&e&&(T.Wb(0,"div",32),T.Tc(1),T.Vb()),2&e){var n=T.mc(2);T.Ab(1),T.Uc(null==n.primaryRecipient?null:n.primaryRecipient.name)}}function tt(e,t){if(1&e&&(T.Wb(0,"div",26),T.Wb(1,"div",27),T.Wb(2,"span",28),T.Tc(3,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.CONTRACT_TYPE"),T.Vb(),T.Tc(4,": "),T.Vb(),T.Wb(5,"div",29),T.Tc(6),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(6),T.Vc(" ",n.contract.type.description," ")}}function nt(e,t){if(1&e&&(T.Wb(0,"div",26),T.Wb(1,"div",27),T.Wb(2,"span",28),T.Tc(3,"CONTRACTS.DETAILS.UNK"),T.Vb(),T.Tc(4,": "),T.Vb(),T.Wb(5,"div",29),T.Tc(6),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(6),T.Vc(" ",n.contract.registrationNumberContract," ")}}function ot(e,t){if(1&e&&(T.Wb(0,"div",26),T.Wb(1,"div",27),T.Wb(2,"span",28),T.Tc(3,"CONTRACTS.DETAILS.UNK_DATE"),T.Vb(),T.Tc(4,": "),T.Vb(),T.Wb(5,"div",29),T.Tc(6),T.nc(7,"date"),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(6),T.Vc(" ",T.pc(7,1,n.contract.documentDate,"d MMMM yyyy")," ")}}function rt(e,t){1&e&&(T.Wb(0,"span"),T.Tc(1," 1"),T.Vb())}function at(e,t){if(1&e&&(T.Wb(0,"section",20),T.Wb(1,"j-collapsible"),T.Wb(2,"j-collapsible-trigger"),T.Wb(3,"div",21),T.Wb(4,"h5",11),T.Wb(5,"span",28),T.Tc(6,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.TITLE"),T.Vb(),T.Rc(7,rt,2,0,"span",33),T.Vb(),T.Rb(8,"span",23),T.Vb(),T.Vb(),T.Wb(9,"j-collapsible-body"),T.Wb(10,"div",24),T.Wb(11,"div",26),T.Wb(12,"div",27),T.Wb(13,"span",28),T.Tc(14,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.NAME"),T.Vb(),T.Tc(15,": "),T.Vb(),T.Wb(16,"div",29),T.Tc(17),T.Vb(),T.Vb(),T.Wb(18,"div",26),T.Wb(19,"div",27),T.Wb(20,"span",28),T.Tc(21,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.COUNTRY"),T.Vb(),T.Tc(22,": "),T.Vb(),T.Wb(23,"div",29),T.Tc(24),T.Vb(),T.Vb(),T.Wb(25,"div",26),T.Wb(26,"div",27),T.Wb(27,"span",28),T.Tc(28,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.CITY"),T.Vb(),T.Tc(29,": "),T.Vb(),T.Wb(30,"div",29),T.Tc(31),T.Vb(),T.Vb(),T.Wb(32,"div",26),T.Wb(33,"div",27),T.Wb(34,"span",28),T.Tc(35,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.BANK"),T.Vb(),T.Tc(36,": "),T.Vb(),T.Wb(37,"div",29),T.Tc(38),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(7),T.uc("ngIf",(null==n.extraRecipients?null:n.extraRecipients.length)>0),T.Ab(10),T.Vc(" ",n.primaryRecipient.name," "),T.Ab(7),T.Vc(" ",n.mapCountry(n.primaryRecipient)," "),T.Ab(7),T.Vc(" ",n.primaryRecipient.cityName||n.primaryRecipient.defaultCityName||"-"," "),T.Ab(7),T.Vc(" ",n.mapBank(n.primaryRecipient)," ")}}function it(e,t){if(1&e&&(T.Wb(0,"section",20),T.Wb(1,"j-collapsible"),T.Wb(2,"j-collapsible-trigger"),T.Wb(3,"div",21),T.Wb(4,"h5",11),T.Wb(5,"span",28),T.Tc(6,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.TITLE"),T.Vb(),T.Wb(7,"span"),T.Tc(8),T.Vb(),T.Vb(),T.Rb(9,"span",23),T.Vb(),T.Vb(),T.Wb(10,"j-collapsible-body"),T.Wb(11,"div",24),T.Wb(12,"div",26),T.Wb(13,"div",27),T.Wb(14,"span",28),T.Tc(15,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.NAME"),T.Vb(),T.Tc(16,": "),T.Vb(),T.Wb(17,"div",29),T.Tc(18),T.Vb(),T.Vb(),T.Wb(19,"div",26),T.Wb(20,"div",27),T.Wb(21,"span",28),T.Tc(22,"CURRENCY_PAYMENT.CONTRACTS.RECIPIENT.COUNTRY"),T.Vb(),T.Tc(23,": "),T.Vb(),T.Wb(24,"div",29),T.Tc(25),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e){var n=t.$implicit,o=t.index,r=T.mc(2);T.Ab(8),T.Vc(" ",o+2,""),T.Ab(10),T.Vc(" ",n.name," "),T.Ab(7),T.Vc(" ",r.mapCountry(n)," ")}}function ct(e,t){if(1&e){var n=T.Xb();T.Wb(0,"section",1),T.Wb(1,"div",2),T.ic("click",(function(e){return T.Ic(n),T.mc().close()})),T.Vb(),T.Wb(2,"section",3),T.Wb(3,"section",4),T.Wb(4,"article",5),T.Rb(5,"span",6),T.Wb(6,"span",7),T.Tc(7,"CURRENCY_PAYMENT.CONTRACTS.STATUS.REGED"),T.Vb(),T.Vb(),T.Wb(8,"a",8),T.ic("click",(function(e){return T.Ic(n),T.mc().close(e)})),T.Vb(),T.Vb(),T.Wb(9,"section",9),T.Wb(10,"section",10),T.Wb(11,"h3",11),T.Wb(12,"span",12),T.Tc(13,"\u2116"),T.Vb(),T.Tc(14),T.Vb(),T.Rc(15,et,2,1,"div",13),T.Wb(16,"div",14),T.Wb(17,"div",15),T.Rb(18,"small",16),T.Wb(19,"div",17),T.Rb(20,"j-money",18),T.Vb(),T.Vb(),T.Wb(21,"div",15),T.Rb(22,"small",19),T.Wb(23,"div",17),T.Rb(24,"j-money",18),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(25,"section",20),T.Wb(26,"j-collapsible"),T.Wb(27,"j-collapsible-trigger"),T.Wb(28,"div",21),T.Wb(29,"h5",22),T.Tc(30,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.TITLE"),T.Vb(),T.Rb(31,"span",23),T.Vb(),T.Vb(),T.Wb(32,"j-collapsible-body"),T.Wb(33,"div",24),T.Rc(34,tt,7,1,"div",25),T.Wb(35,"div",26),T.Wb(36,"div",27),T.Wb(37,"span",28),T.Tc(38,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.DATE_FROM"),T.Vb(),T.Tc(39,": "),T.Vb(),T.Wb(40,"div",29),T.Tc(41),T.nc(42,"date"),T.Vb(),T.Vb(),T.Wb(43,"div",26),T.Wb(44,"div",27),T.Wb(45,"span",28),T.Tc(46,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.DATE_TO"),T.Vb(),T.Tc(47,": "),T.Vb(),T.Wb(48,"div",29),T.Tc(49),T.nc(50,"date"),T.Vb(),T.Vb(),T.Rc(51,nt,7,1,"div",25),T.Rc(52,ot,8,4,"div",25),T.Wb(53,"div",26),T.Wb(54,"div",27),T.Wb(55,"span",28),T.Tc(56,"CURRENCY_PAYMENT.CONTRACTS.DETAILS.CURRENCIES"),T.Vb(),T.Tc(57,": "),T.Vb(),T.Wb(58,"div",29),T.Tc(59),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Rc(60,at,39,5,"section",30),T.Rc(61,it,26,3,"section",31),T.Vb(),T.Vb(),T.Vb()}if(2&e){var o=T.mc();T.Hb("is-shown",o.isShown),T.Ab(2),T.Hb("is-shown",o.isShown),T.Ab(3),T.uc("inlineSVG","/assets/icons/counterparty/status.svg"),T.Ab(9),T.Vc(" ",o.contract.contractNumber," "),T.Ab(1),T.uc("ngIf",0==(null==o.extraRecipients?null:o.extraRecipients.length)),T.Ab(5),T.uc("money",o.contract.amount),T.Ab(4),T.uc("money",o.contract.remainder),T.Ab(10),T.uc("ngIf",o.contract.type),T.Ab(7),T.Vc("",T.pc(42,17,o.contract.dateFrom,"d MMMM yyyy")," "),T.Ab(8),T.Vc("",T.pc(50,20,o.contract.dateTo,"d MMMM yyyy")," "),T.Ab(2),T.uc("ngIf",o.contract.registrationNumberContract),T.Ab(1),T.uc("ngIf",o.contract.documentDate),T.Ab(7),T.Vc("",o.contract.permittedCurrencies.join(", ")," "),T.Ab(1),T.uc("ngIf",o.primaryRecipient),T.Ab(1),T.uc("ngForOf",o.extraRecipients)}}var st,lt=((st=function(){function e(t,n){_classCallCheck(this,e),this.document=t,this.translateService=n,this.isShown=!1}return _createClass(e,[{key:"mapBank",value:function(e){var t=e.bankBic,n=e.bankName;return"".concat(t).concat(t?n?"- ".concat(n):"":n||"")}},{key:"mapCountry",value:function(e){var t,n,o,r;if(e.country){var a=e.country.code,i="";switch(this.translateService.currentLang){case"ru":default:i=null===(t=e.country)||void 0===t?void 0:t.nameRu;case"kk":i=null===(n=e.country)||void 0===n?void 0:n.nameKk;case"en":i=null===(o=e.country)||void 0===o?void 0:o.nameEn}return"".concat(a," - ").concat(i)}return e.primary&&(null===(r=this.contract.contractor)||void 0===r?void 0:r.country)?"".concat(this.contract.contractor.country.code," - ").concat(this.contract.contractor.country.name):e.countryCode?e.countryCode:"-"}},{key:"ngOnDestroy",value:function(){this.close()}},{key:"show",value:function(){this.document.body.classList.add("overflow-hidden"),this.isShown=!0}},{key:"close",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(e=t)||void 0===e||e.preventDefault(),this.document.body.classList.remove("overflow-hidden"),this.isShown=!1}},{key:"primaryRecipient",get:function(){var e;return null===(e=this.contract.recipients)||void 0===e?void 0:e.find((function(e){return e.primary}))}},{key:"extraRecipients",get:function(){var e;return null===(e=this.contract.recipients)||void 0===e?void 0:e.filter((function(e){return!e.primary}))}}]),e}()).\u0275fac=function(e){return new(e||st)(T.Qb(o.e),T.Qb(c.e))},st.\u0275cmp=T.Kb({type:st,selectors:[["j-fx-contract-details"]],inputs:{contract:"contract"},decls:1,vars:1,consts:[["class","f-page-wrapper",3,"is-shown",4,"ngIf"],[1,"f-page-wrapper"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","fx"],[1,"fx__header"],[1,"fx__status"],[1,"text-success",3,"inlineSVG"],["translate","",1,"text-muted","ml-3","p3"],["href","#","inlineSVG","assets/icons/payments/close.svg",1,"fx__close","ml-auto",3,"click"],[1,"fx__scrollable"],[1,"fx__block","py-3","mt-0"],[1,"mb-0"],[1,"text-light"],["class","p2",4,"ngIf"],[1,"fx__amounts"],[1,"fx__amounts-item"],["translate","CURRENCY_PAYMENT.CONTRACTS.INFO.AMOUNT",1,"text-muted"],[1,"text-dark"],[3,"money"],["translate","CURRENCY_PAYMENT.CONTRACTS.INFO.REMAINDER",1,"text-muted","p4"],[1,"fx__block","fx__block--collapsible"],[1,"fx__collapse","d-flex","align-items-center"],["translate","",1,"mb-0"],["inlineSVG","assets/icons/payments/collapse.svg",1,"ml-auto","text-primary","fx__arrow"],[1,"fx__body","p2"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],[1,"text-muted","j-desc-child"],["translate",""],[1,"text-dark","j-desc-child"],["class","fx__block fx__block--collapsible",4,"ngIf"],["class","fx__block fx__block--collapsible",4,"ngFor","ngForOf"],[1,"p2"],[4,"ngIf"]],template:function(e,t){1&e&&T.Rc(0,ct,62,23,"section",0),2&e&&T.uc("ngIf",t.contract)},directives:[o.u,xe.a,c.a,Xe.a,ze.a,Je.a,Ze.a,o.t],pipes:[o.f],styles:[".fx{padding:1rem;width:100%;max-width:425px}.fx__header{-webkit-box-pack:justify;justify-content:space-between;margin-top:.5rem;margin-bottom:1.5rem}.fx__header,.fx__status{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.fx__status{padding-left:1rem}.fx__scrollable{-webkit-box-flex:1;flex-grow:1;overflow-y:auto}.fx__scrollable::-webkit-scrollbar{width:8px}.fx__scrollable::-webkit-scrollbar-track{background:#fff}.fx__scrollable::-webkit-scrollbar-thumb{background:#d6dadf;border-radius:10px}.fx__collapse{padding:1rem 0}.j-collapsed .fx__body{padding-bottom:1rem}.j-collapsed .fx__collapse .fx__arrow{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.fx__block{background:#fff;border-radius:.5rem;padding:1.5rem 1rem;margin:.75rem 0}.fx__block--collapsible{padding-top:0;padding-bottom:0}.fx__arrow,.fx__block--collapsible{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.fx__arrow{-webkit-transform:rotate(540deg);transform:rotate(540deg)}.fx__collapse{cursor:pointer;-webkit-box-align:center;align-items:center}.fx__link{color:#1586bb;display:-webkit-box;display:flex;padding-left:1rem;padding-right:1rem;width:100%}.fx__link:hover{color:#ef5630}.fx__icon{margin-right:.5rem;display:block}.fx__amounts{display:-webkit-box;display:flex;border-top:1px solid #eceef1;margin-top:1.5rem;padding-top:1rem}.fx__amounts-item{-webkit-box-flex:1;flex-grow:1}.fx__amounts-item small{display:block;margin-bottom:.25rem}"],encapsulation:2}),st),ut=n("UoEe"),bt=n("SCaJ"),mt=n("tepA");function dt(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div",4),T.ic("click",(function(e){T.Ic(n);var o=t.$implicit;return T.mc().onSelect(o)})),T.Wb(1,"div",5),T.Rb(2,"span",6),T.Tc(3,": "),T.Rb(4,"span",7),T.nc(5,"highlight"),T.nc(6,"formatIban"),T.Vb(),T.Wb(7,"div",8),T.Rb(8,"span",7),T.nc(9,"highlight"),T.Tc(10,": "),T.Rb(11,"span",7),T.nc(12,"highlight"),T.Vb(),T.Vb()}if(2&e){var o=t.$implicit,r=T.mc();T.Ab(4),T.uc("innerHTML",T.pc(5,3,T.oc(6,6,o.iban),r.searchTerm),T.Jc),T.Ab(4),T.uc("innerHTML",T.pc(9,8,o.bic,r.searchTerm),T.Jc),T.Ab(3),T.uc("innerHTML",T.pc(12,11,o.bankName,r.searchTerm),T.Jc)}}var pt,ft=((pt=function(){function e(t){_classCallCheck(this,e),this.translateService=t,this.selected=new T.n}return _createClass(e,[{key:"onSelect",value:function(e){this.selected.emit({recipient:this.recipient,account:e})}},{key:"countryName",get:function(){var e,t,n,o,r,a;switch(this.translateService.currentLang){case"ru":default:return null===(t=null===(e=this.recipient)||void 0===e?void 0:e.country)||void 0===t?void 0:t.nameRu;case"kk":return null===(o=null===(n=this.recipient)||void 0===n?void 0:n.country)||void 0===o?void 0:o.nameKk;case"en":return null===(a=null===(r=this.recipient)||void 0===r?void 0:r.country)||void 0===a?void 0:a.nameEn}}}]),e}()).\u0275fac=function(e){return new(e||pt)(T.Qb(c.e))},pt.\u0275cmp=T.Kb({type:pt,selectors:[["j-foreign-recipient"]],inputs:{searchTerm:"searchTerm",recipient:"recipient"},outputs:{selected:"selected"},decls:6,vars:9,consts:[[1,"recipient"],[1,"text-dark","p2","recipient__name",3,"innerHTML"],[1,"text-muted","p3","recipient__country",3,"innerHTML"],["class","recipient__account p3",3,"click",4,"ngFor","ngForOf"],[1,"recipient__account","p3",3,"click"],[1,"text-dark"],["translate","CURRENCY_PAYMENT.DICTIONARY.IBAN"],[3,"innerHTML"],[1,"text-muted"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Rb(1,"h5",1),T.nc(2,"highlight"),T.Rb(3,"div",2),T.nc(4,"highlight"),T.Rc(5,dt,13,14,"div",3),T.Vb()),2&e&&(T.Ab(1),T.uc("innerHTML",T.pc(2,3,t.recipient.name,t.searchTerm),T.Jc),T.Ab(2),T.uc("innerHTML",T.pc(4,6,t.countryName,t.searchTerm),T.Jc),T.Ab(2),T.uc("ngForOf",t.recipient.accounts))},directives:[o.t,c.a],pipes:[bt.a,mt.a],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),pt);function ht(e,t){1&e&&T.Rb(0,"j-empty-placeholder",9)}function vt(e,t){1&e&&T.Rb(0,"j-empty-placeholder",10)}function yt(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-foreign-recipient",11),T.ic("selected",(function(e){return T.Ic(n),T.mc().onRecipientSelect(e)})),T.Vb()}if(2&e){var o=t.$implicit,r=T.mc();T.uc("recipient",o)("searchTerm",r.searchTerm)}}var gt,At=((gt=function(){function e(t,n){_classCallCheck(this,e),this.modal=t,this.recipientsService=n,this.searchTerm="",this.loadRecipients()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"loadRecipients",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.recipientsService.getForeignRecipients();case 2:this.recipients=e.sent,this.filteredRecipients=_toConsumableArray(this.recipients);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"onQueryChange",value:function(e){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.searchTerm=e,t.next=3,this.recipientsService.getForeignRecipients(e);case 3:this.filteredRecipients=t.sent;case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onRecipientSelect",value:function(e){this.modal.close(e)}},{key:"onClose",value:function(){this.modal.dismiss()}}]),e}()).\u0275fac=function(e){return new(e||gt)(T.Qb(i.a),T.Qb(X.a))},gt.\u0275cmp=T.Kb({type:gt,selectors:[["j-foreign-recipients-dictionary"]],decls:9,vars:4,consts:[[1,"dictionary"],[1,"dictionary__header"],["translate","CURRENCY_PAYMENT.DICTIONARY.TITLE",1,"dictionary__heading"],[1,"dictionary__search"],[3,"placeholder","valueChanged"],["label","CURRENCY_PAYMENT.DICTIONARY.EMPTY",4,"ngIf"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND",4,"ngIf"],[1,"dictionary__list"],[3,"recipient","searchTerm","selected",4,"ngFor","ngForOf"],["label","CURRENCY_PAYMENT.DICTIONARY.EMPTY"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND"],[3,"recipient","searchTerm","selected"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"div",1),T.Rb(2,"h5",2),T.Wb(3,"div",3),T.Wb(4,"j-search-input",4),T.ic("valueChanged",(function(e){return t.onQueryChange(e)})),T.Vb(),T.Vb(),T.Vb(),T.Rc(5,ht,1,0,"j-empty-placeholder",5),T.Rc(6,vt,1,0,"j-empty-placeholder",6),T.Wb(7,"div",7),T.Rc(8,yt,1,2,"j-foreign-recipient",8),T.Vb(),T.Vb()),2&e&&(T.Ab(4),T.uc("placeholder","CURRENCY_PAYMENT.DICTIONARY.SEARCH"),T.Ab(1),T.uc("ngIf",0==(null==t.recipients?null:t.recipients.length)),T.Ab(1),T.uc("ngIf",(null==t.recipients?null:t.recipients.length)>0&&0==(null==t.filteredRecipients?null:t.filteredRecipients.length)),T.Ab(2),T.uc("ngForOf",t.filteredRecipients))},directives:[c.a,ut.a,o.u,o.t,De.a,ft],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),gt),Tt=n("q46q");function Rt(e,t){if(1&e&&(T.Rb(0,"div",3),T.nc(1,"highlight")),2&e){var n=T.mc();T.uc("innerHTML",T.pc(1,1,n.bic,n.searchTerm),T.Jc)}}var Ct,Et=((Ct=function(){function e(){_classCallCheck(this,e),this.selected=new T.n}return _createClass(e,[{key:"onSelect",value:function(){this.selected.emit(this.recipient)}},{key:"bic",get:function(){if(this.recipient.bankBic&&this.recipient.bankName)return"".concat(this.recipient.bankBic," - ").concat(this.recipient.bankName)}}]),e}()).\u0275fac=function(e){return new(e||Ct)},Ct.\u0275cmp=T.Kb({type:Ct,selectors:[["j-foreign-contracts-recipient"]],inputs:{searchTerm:"searchTerm",recipient:"recipient"},outputs:{selected:"selected"},decls:4,vars:5,consts:[[1,"recipient__account","p3","mt-3","pt-3",3,"click"],[1,"text-dark","p2","recipient__name",3,"innerHTML"],["class","text-muted p3 recipient__country mb-0",3,"innerHTML",4,"ngIf"],[1,"text-muted","p3","recipient__country","mb-0",3,"innerHTML"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.ic("click",(function(e){return t.onSelect()})),T.Rb(1,"h5",1),T.nc(2,"highlight"),T.Rc(3,Rt,2,4,"div",2),T.Vb()),2&e&&(T.Ab(1),T.uc("innerHTML",T.pc(2,2,t.recipient.name,t.searchTerm),T.Jc),T.Ab(2),T.uc("ngIf",t.bic))},directives:[o.u],pipes:[bt.a],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),Ct);function kt(e,t){1&e&&T.Rb(0,"j-empty-placeholder",9)}function St(e,t){1&e&&T.Rb(0,"j-empty-placeholder",10)}function Vt(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-foreign-contracts-recipient",11),T.ic("selected",(function(e){return T.Ic(n),T.mc().onRecipientSelect(e)})),T.Vb()}if(2&e){var o=t.$implicit,r=T.mc();T.uc("recipient",o)("searchTerm",r.searchTerm)}}var Nt,It,Ot,jt=((It=function(){function e(t){_classCallCheck(this,e),this.modal=t,this.searchTerm=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.filteredRecipients=_toConsumableArray(this.recipients)}},{key:"onQueryChange",value:function(e){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.searchTerm=e,e||(this.filteredRecipients=_toConsumableArray(this.recipients)),this.filteredRecipients=this.recipients.filter((function(t){return n.includesQuery(t.name,e)||n.includesQuery(t.bankBic,e)}));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onRecipientSelect",value:function(e){this.modal.close(e)}},{key:"onClose",value:function(){this.modal.dismiss()}},{key:"includesQuery",value:function(e,t){var n,o;return null===(n=e)||void 0===n?void 0:n.toLowerCase().includes(null===(o=t)||void 0===o?void 0:o.toLowerCase())}}]),e}()).\u0275fac=function(e){return new(e||It)(T.Qb(i.a))},It.\u0275cmp=T.Kb({type:It,selectors:[["j-foreign-contracts-recipients-dictionary"]],decls:9,vars:4,consts:[[1,"dictionary"],[1,"dictionary__header"],["translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.TITLE",1,"dictionary__heading"],[1,"dictionary__search"],[3,"placeholder","valueChanged"],["label","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.EMPTY",4,"ngIf"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND",4,"ngIf"],[1,"dictionary__list"],[3,"recipient","searchTerm","selected",4,"ngFor","ngForOf"],["label","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.EMPTY"],["label","CURRENCY_PAYMENT.DICTIONARY.NOT_FOUND"],[3,"recipient","searchTerm","selected"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"div",1),T.Rb(2,"h5",2),T.Wb(3,"div",3),T.Wb(4,"j-search-input",4),T.ic("valueChanged",(function(e){return t.onQueryChange(e)})),T.Vb(),T.Vb(),T.Vb(),T.Rc(5,kt,1,0,"j-empty-placeholder",5),T.Rc(6,St,1,0,"j-empty-placeholder",6),T.Wb(7,"div",7),T.Rc(8,Vt,1,2,"j-foreign-contracts-recipient",8),T.Vb(),T.Vb()),2&e&&(T.Ab(4),T.uc("placeholder","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.SEARCH"),T.Ab(1),T.uc("ngIf",0==(null==t.recipients?null:t.recipients.length)),T.Ab(1),T.uc("ngIf",(null==t.recipients?null:t.recipients.length)>0&&0==(null==t.filteredRecipients?null:t.filteredRecipients.length)),T.Ab(2),T.uc("ngForOf",t.filteredRecipients))},directives:[c.a,ut.a,o.u,o.t,De.a,Et],styles:[".dictionary[_ngcontent-%COMP%]{padding:40px 24px;max-height:80vh;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dictionary__header[_ngcontent-%COMP%]{flex-shrink:0;background:#fff}.dictionary__list[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1}.dictionary__heading[_ngcontent-%COMP%]{margin-bottom:18px}.dictionary__search[_ngcontent-%COMP%], .recipient[_ngcontent-%COMP%]{padding:16px 0}.recipient__name[_ngcontent-%COMP%]{margin-bottom:4px;line-height:24px}.recipient__country[_ngcontent-%COMP%]{margin-bottom:16px;line-height:18px}.recipient__account[_ngcontent-%COMP%]{padding:8px 16px;background:#f6f7f8;border-radius:8px;line-height:21px;cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.recipient__account[_ngcontent-%COMP%]:hover{background:#e9ecf1}.recipient__account[_ngcontent-%COMP%] + .recipient__account[_ngcontent-%COMP%]{margin-top:8px}"]}),It),Pt=((Nt=function(){function e(t){_classCallCheck(this,e),this.modal=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.modal.close()}}]),e}()).\u0275fac=function(e){return new(e||Nt)(T.Qb(i.a))},Nt.\u0275cmp=T.Kb({type:Nt,selectors:[["j-iin-check-error"]],decls:15,vars:9,consts:[[1,"result-modal"],[1,"modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","p-3"],[1,"text-center"],[1,"modal-body","text-center"],[1,"form-group"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"div",1),T.Wb(2,"button",2),T.ic("click",(function(e){return t.modal.dismiss()})),T.Rb(3,"img",3),T.nc(4,"translate"),T.Vb(),T.Vb(),T.Wb(5,"div",4),T.Wb(6,"div",5),T.Wb(7,"h5"),T.Tc(8),T.nc(9,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Wb(10,"div",6),T.Wb(11,"div",7),T.Wb(12,"button",8),T.ic("click",(function(e){return t.close()})),T.Tc(13),T.nc(14,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(3),T.vc("alt",T.oc(4,3,"SHARED.CLOSE")),T.Ab(5),T.Uc(T.oc(9,5,"PAYMENTS.IIN_CHECK_ERROR")),T.Ab(5),T.Vc("",T.oc(14,7,"SHARED.CLOSE")," "))},pipes:[c.d],styles:[""]}),Nt),Wt=n("JPBo"),Mt=n("CVrE"),_t=n("PqYM"),xt=n("CqXF"),wt=n("w1tV"),Dt=n("wd/R"),Yt=n("E+oP"),Ut=n.n(Yt),Lt=n("AytR"),Ft=["formDirective"],$t=["senderAccountDropdown"],Bt=((Ot=function(){function e(t,n,o,r,a,i,c,s,l,u,b,m,d){_classCallCheck(this,e),this.form=t,this.api=n,this.route=o,this.router=r,this.companyService=a,this.paymentsService=i,this.maskService=c,this.modals=s,this.dictionaries=l,this.pipeline=u,this.translateService=b,this.authorityPermissionsService=m,this.featureFlagsService=d,this.isRestricted=!1,this.PAYMENT_STATUS=B.i,this.SPINNER="BasePaymentContainer",this.restoredData={},this.amountMessage$=new N.a(""),this.periodMessage$=new N.a(""),this.commission$=new N.a(null),this.vat$=new N.a(0),this.total$=new N.a(0),this.purposeMessage$=new N.a(""),this.dateMessage$=new N.a(""),this.purposeLength$=new N.a(0),this.workingHours$=new N.a(null),this.workingDays$=new N.a([]),this.processingPayment$=new N.a(null),this.isImported=!1,this.subs=new je.a,this.isPermissionsUpdating=!1,this.isPermissionsUpdateAllowed=!Lt.a.production,this.errors=this.paymentsService.errors,this.rules=this.paymentsService.rules,this.ugdStore=this.dictionaries.UGDictionary,this.knpStore=this.dictionaries.KNPDictionary,this.kbkStore=this.dictionaries.KBKDictionary,this.getWorkingHours()}return _createClass(e,[{key:"getPermission",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authorityPermissionsService.isRestricted(this.paymentType);case 2:this.isRestricted=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getWorkingHours",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.getWorkingHours();case 2:t=e.sent,this.workingHours$.next(t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnInit",value:function(){var e=this;this.getPermission(),this.listenRouterParams(),this.createControlsStream(this.form),this.combineUrgentStream(),this.subs.add(this.processingPayment$.pipe(Object(M.a)(),Object(D.a)(0)).subscribe((function(t){t?e.paymentsService.spinner.show(e.SPINNER):e.paymentsService.spinner.hide(e.SPINNER)})))}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe(),this.paymentsService.spinner.hide(this.SPINNER)}},{key:"onSenderAccountSelect",value:function(e){this.form.controls.senderAccount.setValue(e)}},{key:"hasError",value:function(e,t){var n,o;return t.invalid&&(t.dirty&&!(null===(n=e)||void 0===n?void 0:n.isFocused)||(null===(o=this.formDirective)||void 0===o?void 0:o.submitted)&&t.touched)}},{key:"sendPayment",value:function(e){var t,n=this;this.formDirective.form.markAsPristine();var o=this.paymentsService.paymentNumber,r=e||Object.assign(Object.assign({},this.form.value),{purpose:[this.form.value.purpose,this.purposeMessage$.getValue()].filter((function(e){return!!e})).join(". ")});return this.processingPayment$.next(r),this.paymentsService.paymentNumber.entity=null,this.pipeline.processPayment({paymentId:this.paymentId,total:this.total$.getValue()-this.commission$.getValue(),commission:this.commission$.getValue(),status:null===(t=this.restoredData)||void 0===t?void 0:t.status,userPurpose:this.form.value.purpose,rawBody:r}).then((function(e){e?n.restoredData={status:e.status.code,signatures:e.signatures,companyId:e.companyId}:(n.restoredData=null,o.entity||o.fetching||(o.entity=r.number))})).catch((function(e){console.log(e)})).finally((function(){n.processingPayment$.next(null)}))}},{key:"onSubmit",value:function(e){e&&e.preventDefault(),this.form.valid?this.processPayment():this.form.markAllAsTouched()}},{key:"updatePermissions",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isPermissionsUpdating=!0,e.prev=1,e.next=4,this.authorityPermissionsService.updatePermissions();case 4:this.getPermission(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,this.isPermissionsUpdating=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,7,9,12]])})))}},{key:"processPayment",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.form.getRawValue(),this.processingPayment$.next(t),e.prev=2,e.next=5,this.api.checkWorkingTime(t.date);case 5:if(n=e.sent,e.t0=!!this.featureFlagsService.isDisabled(q.a.PAYMENT_PERMISSIONS),e.t0){e.next=11;break}return e.next=10,this.api.checkAmountLimit(t.amount,this.paymentType);case 10:e.t0=e.sent.isPassed;case 11:o=e.t0,n&&o?this.sendPayment():this.processingPayment$.next(null),e.next=18;break;case 15:e.prev=15,e.t1=e.catch(2),this.processingPayment$.next(null);case 18:case"end":return e.stop()}}),e,this,[[2,15]])})))}},{key:"openKnpDictionary",value:function(e,t){var n=this;e.close(),e.blur(),setTimeout((function(){var e=n.modals.open(me,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});e.componentInstance.paymentType=n.paymentType,e.result.then((function(e){n.form.controls.knp.patchValue(e.code)})).catch((function(){}))}),0)}},{key:"knpComparator",value:function(e,t){return e.code===t}},{key:"combineUrgentStream",value:function(){var e,t=this,n=this.controlsStream,o=n.date,r=n.bankAccount,a=n.bankReceiver,i=this.form.controls.urgent;if(i){var c=new Date,s=Object(h.getTimeZoneOffset)(new Date,"Asia/Almaty");c.setHours(c.getHours()+-s/60);var l=new Date(c);l.setHours(9,0,0);var u,b=new Date(c);b.setHours(16,0,0);var m,d=!0;u=(u=c>=l&&c<=b?Object(_t.a)(+b-+c).pipe(Object(xt.a)(!1)):c<l?Object(_t.a)(+l-+c).pipe(Object(xt.a)(d=!d)):Object(_t.a)(l.setDate(l.getDate()+1)-+c).pipe(Object(xt.a)(d=!d))).pipe(Object($.a)(1),Object(x.a)(d)),a?m=Object(O.a)([r,a,this.dictionaries.bankDictionary.entities$]).pipe(Object(A.a)((function(e){var t,n=_slicedToArray(e,3),o=n[0],r=n[1],a=n[2];return r&&(t=a[r])&&t.salaryTransitIban?t.salaryTransitIban:t&&!t.salaryTransitIban&&o?Object(h.ibanPrefix)(o,K.a.KZT):""}))):r&&(m=r.pipe(Object(A.a)((function(e){return Object(h.ibanPrefix)(e,K.a.KZT)})))),m=(null===(e=m)||void 0===e?void 0:e.pipe(Object(A.a)((function(e){return t.paymentsService.bankFromAccount.transform(e)}))))||Object(j.a)(""),this.subs.add(Object(O.a)([o.pipe(Object(A.a)((function(e){return!e}))),m.pipe(Object(_.a)(300),Object(A.a)((function(e){return"TSESKZKA"!==e}))),u]).pipe(Object(A.a)((function(e){return e.every((function(e){return e}))}))).subscribe((function(e){e&&i.disabled?i.enable():!e&&i.enabled&&(i.disable(),i.setValue(!1))})))}}},{key:"listenRouterParams",value:function(){var e=this;this.subs.add(this.route.params.pipe(Object(A.a)((function(t){return{state:window.history.state,params:t,route:e.route}})),Object(_.a)(0),Object(Y.a)((function(t){var n,o,r,a=t.params,i=t.state;if(null===(n=i)||void 0===n?void 0:n.silent)return e.restoredData.status===B.i.DRAFT?e.paymentsService.rootTitle=C.b.EDIT_DRAFT:e.restoredData.status===B.i.CREATED&&(e.paymentsService.rootTitle=C.b.EDIT_PAYMENT),P.a;if(null===(o=i)||void 0===o?void 0:o.resolvedPayment)return Object(j.a)(i.resolvedPayment);if(a.paymentId||(null===(r=i)||void 0===r?void 0:r.repeatPaymentId)){var c=a.paymentId||i.repeatPaymentId;return Object(W.a)(e.api.getPaymentById(c)).pipe(Object(U.a)((function(t){return e.router.navigate([e.router.url.replace("/"+c,"")]),P.a})))}return e.setAutoNumeration(),e.paymentsService.rootTitle=C.b.NEW,P.a}))).subscribe((function(t){e.restorePayment(t)})))}},{key:"getMaskConfig",value:function(){var e=this;Object.entries(this.masks).forEach((function(t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return e.masks[o]=e.maskService.getConfig(r)}))}},{key:"checkPersonalAccounts",value:function(e){0!==e.length?e.every((function(e){return e.isClosed||e.isLocked}))?this.paymentsService.infoMessage.entity={type:C.a.info,message:C.d.allLocked}:(1===e.length&&(this.form.patchValue({senderAccount:e[0]}),this.senderAccountDropdown.selectAccount(e[0]),this.form.markAsPristine()),this.paymentsService.infoMessage.entity=null):this.paymentsService.infoMessage.entity={type:C.a.info,message:C.d.noAccounts}}},{key:"createControlsStream",value:function(e){this.controlsStream=Object.entries(e.controls).reduce((function(e,t,n,o){var r=_slicedToArray(t,2),a=r[0],i=r[1];return e[a]=i.valueChanges.pipe(Object(x.a)(i.value)),e}),{})}},{key:"listenCommission",value:function(){var e=this,t=this.controlsStream,n=t.amount,o=t.date,r=t.urgent,a=t.kbk,i=t.knp,c=t.senderAccount;this.subs.add(Object(O.a)([Object(O.a)(Object.entries({amount:n,date:o,urgent:r,kbk:a,knp:i,senderAccount:c}).filter((function(e){var t=_slicedToArray(e,2);return t[0],!!t[1]})).map((function(e){var t=_slicedToArray(e,2),n=t[0];return t[1].pipe(Object(M.a)(),Object(A.a)((function(e){return[n,e]})))}))),this.controlsStream.type.pipe(Object(M.a)()),this.companyService.currentCompany$.pipe(Object(L.a)((function(e){return!!e})),Object(M.a)())]).pipe(Object(_.a)(300),Object(L.a)((function(t){return _slicedToArray(t,1)[0].every((function(t){var n=_slicedToArray(t,2),o=n[0];return!n[1]||!e.form.controls[o]||e.form.controls[o].valid}))})),Object(Y.a)((function(t){var n=_slicedToArray(t,3),o=n[0],r=n[1],a=n[2],i=o.reduce((function(e,t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return e[o]=r,e}),{}),c=i.amount,s=i.date,l=i.kbk,u=i.knp,b=i.urgent,m=i.senderAccount,d={amount:e.maskService.getNumberedAmount(c),date:s,urgent:b,currency:K.a.KZT,category:B.h.DOMESTIC,type:r,companyId:a.id,kbk:l,knp:u,senderAccount:m};return e.paymentsService.calculateCommission$(d).pipe(Object(U.a)((function(e){return Object(j.a)(null)})))}))).subscribe(this.commission$))}},{key:"listenVAT",value:function(){var e=this;this.controlsStream.vat&&this.controlsStream.amount&&this.subs.add(Object(O.a)([this.controlsStream.vat,this.controlsStream.amount]).pipe(Object(A.a)((function(t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return o?Math.round(100*(12*e.maskService.getNumberedAmount(r)/112+Number.EPSILON))/100:0}))).subscribe(this.vat$))}},{key:"listenTotal",value:function(){var e=this;this.form.controls.amount&&this.subs.add(Object(O.a)(this.commission$,this.controlsStream.amount).pipe(Object(A.a)((function(t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return o+e.maskService.getNumberedAmount(r)}))).subscribe(this.total$))}},{key:"combineEmployeesAmount",value:function(){var e=this;this.subs.add(this.controlsStream.employees.pipe(Object(_.a)(100),Object(A.a)((function(e){return(e||[]).reduce((function(e,t){return e+t.amount}),0)}))).subscribe((function(t){e.form.controls.amount.patchValue(t)})))}},{key:"combineKNP",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[function(t){return e.dictionaries.selectByPaymentType(t,{type:e.paymentType,sortFavourite:!0})}],n=arguments.length>1?arguments[1]:void 0,o=[this.knpStore.items$];return n&&o.push.apply(o,_toConsumableArray(n)),Object(O.a)(o).pipe(Object(A.a)((function(e){return t.reduce((function(t,n){return n(t,e.slice(1))}),e[0])})),Object(wt.a)())}},{key:"combineKBK",value:function(e){var t=this;this.kbk$=this.kbkStore.items$,Object(O.a)([this.kbkStore.items$.pipe(Object(A.a)((function(n){return t.dictionaries.selectByPaymentType(n,{type:e,sortFavourite:!0})})))]).pipe(Object(A.a)((function(e){return _slicedToArray(e,1)[0]})))}},{key:"saveToDraft",value:function(e){var t=this;this.formDirective.submitted=!0,this.formDirective.form.markAsPristine();var n=this.paymentsService.paymentNumber,o=e||Object.assign(Object.assign({},this.form.value),{purpose:[this.form.value.purpose,this.purposeMessage$.getValue()].filter((function(e){return!!e})).join("; ")});n.entity=null,this.processingPayment$.next(Object.assign({id:this.paymentId},o)),this.pipeline.saveToDrafts(o,{paymentId:this.paymentId,type:this.paymentType,commission:this.commission$.value,userPurpose:this.form.value.purpose,category:B.h.DOMESTIC}).then((function(e){e.id!==t.paymentId&&(e&&(t.restoredData={status:e.status,signatures:e.signatures,companyId:e.companyId}),t.router.navigate([t.route.snapshot.params.paymentId?"../":".",e.id],{relativeTo:t.route,state:{silent:!0}}))})).catch((function(e){console.log(e),n.entity||n.fetching||(n.entity=o.number)})).finally((function(){return t.processingPayment$.next(null)}))}},{key:"setAutoNumeration",value:function(){var e=this;this.subs.add(this.paymentsService.paymentNumber$.pipe(Object(w.a)(this.controlsStream.number)).subscribe((function(t){var n=_slicedToArray(t,2),o=n[0];n[1]||e.form.controls.number.setValue(o)})))}},{key:"provideAmountMessage",value:function(){var e=this;if(this.form.controls.amount){var t=this.controlsStream,n=t.senderAccount,o=t.date;this.subs.add(Object(O.a)([this.companyService.authorityLevel$,this.total$,n.pipe(Object(L.a)((function(e){return!!e}))),o,this.workingHours$.asObservable()]).pipe(Object(Y.a)((function(t){var n,o=_slicedToArray(t,5),r=o[0],a=o[1],i=o[2],c=o[3],s=o[4];if(r!==B.a.PRIMARY_SIGNATURE)return Object(j.a)("");var l=(null===(n=s)||void 0===n?void 0:n.endTime)||h.edgeTimeLabel,u=i.balance.amount-a;if(u<0){var b=e.maskService.formatAmount(Math.abs(u));return c?e.translateService.get("PAYMENTS.AMOUNT_MESSAGES.DEFAULT",{amount:b,edge:"".concat(Object(h.formatNgbDate)(c,e.translateService.currentLang)," ").concat(l)}):e.translateService.get("PAYMENTS.AMOUNT_MESSAGES.AUTO",{amount:b})}return Object(j.a)("")}))).subscribe(this.amountMessage$))}}},{key:"listenWorkingDays",value:function(){var e=this;this.subs.add(this.dictionaries.workingDays.entity$.pipe(Object(A.a)((function(t){return e.dictionaries.selectDaysTimeline(Dt(Object(h.ngbDateToDate)(e.dateLimit.minDate)).format(h.ISO_8061),Dt(Object(h.ngbDateToDate)(e.dateLimit.maxDate)).format(h.ISO_8061),t)}))).subscribe(this.workingDays$))}},{key:"listenDateMessageStream",value:function(){this.subs.add(Object(O.a)([this.companyService.authorityLevel$,this.controlsStream.date,this.controlsStream.senderAccount.pipe(Object(L.a)((function(e){return!!e})))]).pipe(Object(A.a)((function(e){var t=_slicedToArray(e,3),n=t[0],o=t[1];return t[2],n===B.a.PRIMARY_SIGNATURE?"PAYMENTS.DATE_MESSAGES.PRIMARY_ANY":o?"PAYMENTS.DATE_MESSAGES.SECONDARY_DATE":"PAYMENTS.DATE_MESSAGES.SECONDARY_DATE_AUTO"}))).subscribe(this.dateMessage$))}},{key:"listenPurposeMessageStream",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["vat","kbk","knp"],o={vat:function(t){return t?e.translateService.instant("PAYMENTS.FORM.INCLUDING_VAT",{amount:e.maskService.formatAmount(t)}):""},kbk:function(t){var n;return t&&(n=e.kbkStore.items.find((function(e){return e.code===t})))?"".concat(n.name,"."):""},knp:function(t){var n;return t&&(n=e.knpStore.items.find((function(e){return e.code===t})))?"".concat(n.name,"."):""}},r=[];r.push((this.controlsStream.vat&&this.vat$||Object(j.a)(0)).pipe(Object(A.a)((function(e){return["vat",e]}))),this.controlsStream.knp.pipe(Object(A.a)((function(e){return["knp",e]})))),r.push.apply(r,_toConsumableArray(t)),this.subs.add(Object(O.a)(r).pipe(Object(_.a)(100),Object(A.a)((function(e){return e.reduce((function(e,t){return e[t[0]]=t[1],e}),{})})),Object(A.a)((function(e){return n.reduce((function(t,n){return Array.isArray(n)?t.push(n[1](e[n[0]],e)):t.push(o[n]?o[n](e[n],e):e[n]),t}),[]).filter((function(e){return!!e})).join(" ")})),Object(F.a)((function(t){e.form.controls.purpose.patchValue(e.form.controls.purpose.value),t&&e.form.controls.purpose.markAllAsTouched()}))).subscribe(this.purposeMessage$)),this.subs.add(Object(O.a)(this.purposeMessage$,this.controlsStream.purpose).pipe(Object(A.a)((function(e){var t=_slicedToArray(e,2),n=t[0],o=t[1];return(n||"").length+(o||"").length}))).subscribe(this.purposeLength$)),this.validatePurpose()}},{key:"validatePurpose",value:function(){var e=this;this.subs.add(Object(O.a)(this.purposeMessage$,this.controlsStream.purpose).subscribe((function(t){var n=_slicedToArray(t,2),o=n[0],r=(n[1]||"").length+(o||"").length,a=e.form.touched?e.form.controls.purpose.errors:{};a&&r>e.rules.purposeLength&&(a.maxlength=r),e.form.controls.purpose.setErrors(Ut()(a)?null:a,{emitEvent:!0})})))}},{key:"restorePayment",value:function(e){var t=this;this.subs.add(Object(O.a)([this.knpStore.fetched$,this.kbkStore.fetched$,this.ugdStore.fetched$,this.dictionaries.bankDictionary.fetched$,this.accountStore.fetched$]).pipe(Object(L.a)((function(e){return e.every((function(e){return e}))})),Object(F.a)((function(){var n,o,r,a,i,c,s;try{s=t.pipeline.flattenPaymentToModel(e)}catch(l){s={}}t.restoredData={companyId:e.companyId,status:null===(n=e.status)||void 0===n?void 0:n.code,signatures:e.signatures},e.id&&!t.paymentId?(s.number="",s.date=null,t.restoredData.status=null,t.paymentsService.rootTitle=C.b.NEW):t.paymentsService.rootTitle=t.restoredData.status===B.i.DRAFT?C.b.EDIT_DRAFT:C.b.EDIT_PAYMENT,s.emailOnSuccess&&(s.notify=!0),t.form.patchValue(Object.assign(Object.assign({},s),{purpose:null===(r=null===(o=e.details.associatedField)||void 0===o?void 0:o.parameters)||void 0===r?void 0:r.paymentPurpose})),null===(a=t.senderAccountDropdown)||void 0===a||a.selectByIban(null===(c=null===(i=e)||void 0===i?void 0:i.details)||void 0===c?void 0:c.payerIban),t.isImported=e.imported,s.number||t.setAutoNumeration()})),Object(_.a)(10),Object($.a)(1)).subscribe())}},{key:"paymentId",get:function(){return this.route.snapshot.params.paymentId}},{key:"dateHelper",get:function(){return this.form.controls.date.value?"":"PAYMENTS.FORM.DATE_HELPER"}},{key:"senderAccountLabel",get:function(){return this.form.controls.senderAccount?"PAYMENTS.FORM.SENDER_ACCOUNT.SELECTED":"PAYMENTS.FORM.SENDER_ACCOUNT.EMPTY"}},{key:"submitLabel",get:function(){return"SHARED."+(this.paymentsService.isSignatureRequired?"TO_SIGN":"FOR_SIGN")}},{key:"paymentType",get:function(){return this.form.controls.type.value},set:function(e){this.form.controls.type.patchValue(e)}}]),e}()).\u0275fac=function(e){T.hc()},Ot.\u0275dir=T.Lb({type:Ot,viewQuery:function(e,t){var n;1&e&&(T.Yc(Ft,!0),T.Yc($t,!0)),2&e&&(T.Ec(n=T.jc())&&(t.formDirective=n.first),T.Ec(n=T.jc())&&(t.senderAccountDropdown=n.first))}}),Ot),Kt=n("mR7B"),Ht=n("2A1n"),Qt=n("7rOj"),Gt=n("FSKB"),qt=n("YjsB"),Xt=n("kDIH"),zt=n("cZYL"),Jt=n("hsBV"),Zt=n("Bl/x"),en=n("O1Qh"),tn=n("vOW5"),nn=n("Ya7Z"),on=n("Q98t"),rn=n("B+58"),an=n("Cg+c"),cn=n("JqCM"),sn=n("M6pS"),ln=n("13E/"),un=n("H6TZ"),bn=n("Kx0l"),mn=n("wV3k"),dn=["emailOnSuccess"],pn=["senderAccountDropdown"],fn=["contractsSelect"],hn=["contractDetails"],vn=["bankDropdown"],yn=["intermediaryBankDropdown"],gn=["commissionAccountDropdown"],An=["rubNonRussiaBankDropdown"],Tn=["rubNonRussiaCorrespondentBankDropdown"],Rn=["rubNonRussiaCorrespondentIbanInput"];function Cn(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-restricted-placeholder",2),T.ic("retried",(function(e){return T.Ic(n),T.mc().updatePermissions()})),T.Vb()}if(2&e){var o=T.mc();T.uc("isRetryable",o.isPermissionsUpdateAllowed)("isLoading",o.isPermissionsUpdating)}}function En(e,t){if(1&e&&(T.Wb(0,"div",72),T.Rb(1,"small",73),T.nc(2,"translate"),T.Vb()),2&e){var n=T.mc(2);T.Hb("is-loading",n.isContractsDescriptionLoading),T.uc("jLoading",n.isContractsDescriptionLoading)("jLoadingInverted",!0),T.Ab(1),T.uc("innerHTML",T.pc(2,5,"CURRENCY_PAYMENT.CONTRACTS.SWITCH.DESCRIPTION",n.contractsSwitchDescriptionParams),T.Jc)}}function kn(e,t){if(1&e){var n=T.Xb();T.Wb(0,"button",83),T.ic("click",(function(e){return T.Ic(n),T.mc(5).openContractsAddingModal()})),T.Wb(1,"span",13),T.Tc(2," CURRENCY_PAYMENT.CONTRACTS.ADD_NEW "),T.Vb(),T.Vb()}}function Sn(e,t){if(1&e&&(T.Wb(0,"div",81),T.Rc(1,kn,3,0,"button",82),T.Wb(2,"h6",13),T.Tc(3,"CURRENCY_PAYMENT.CONTRACTS.TITLE"),T.Vb(),T.Vb()),2&e){var n=T.mc(4);T.Ab(1),T.uc("ngIf",n.filteredContracts.length>0)}}function Vn(e,t){if(1&e&&T.Rc(0,Sn,4,1,"div",80),2&e){var n=t.searchTerm,o=T.mc(3);T.uc("ngIf",!n&&!o.isContractsLoading)}}function Nn(e,t){if(1&e&&(T.Wb(0,"div",84),T.Wb(1,"div",85),T.Wb(2,"span"),T.Tc(3),T.Vb(),T.Rb(4,"j-money",86),T.Vb(),T.Wb(5,"div",87),T.Wb(6,"span"),T.Tc(7),T.Vb(),T.Wb(8,"div"),T.Rb(9,"span",88),T.Tc(10,"\xa0 "),T.Rb(11,"j-money",86),T.Vb(),T.Vb(),T.Vb()),2&e){var n=t.item;T.Ab(3),T.Uc(n.contractor.name),T.Ab(1),T.uc("money",n.amount),T.Ab(3),T.Uc(n.contractNumber),T.Ab(4),T.uc("money",n.remainder)}}function In(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"div",89),T.Rb(2,"img",90),T.Rb(3,"div",91),T.nc(4,"translate"),T.Wb(5,"a",92),T.ic("click",(function(e){return T.Ic(n),T.mc(4).openContractsAddingModal(e)})),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Vb(),T.Tb()}2&e&&(T.Ab(3),T.uc("innerHTML",T.oc(4,2,"CURRENCY_PAYMENT.CONTRACTS.EMPTY_STATE"),T.Jc),T.Ab(3),T.Vc(" ",T.oc(7,4,"CURRENCY_PAYMENT.CONTRACTS.ADD_NEW")," "))}function On(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Rb(1,"j-empty-placeholder",93),T.Wb(2,"div",94),T.Wb(3,"a",95),T.ic("click",(function(e){return T.Ic(n),T.mc(4).openContractsAddingModal(e)})),T.Tc(4),T.nc(5,"translate"),T.Vb(),T.Vb(),T.Tb()}2&e&&(T.Ab(4),T.Vc(" ",T.oc(5,1,"CURRENCY_PAYMENT.CONTRACTS.ADD_NEW")," "))}function jn(e,t){if(1&e&&(T.Rc(0,In,8,6,"ng-container",1),T.Rc(1,On,6,3,"ng-container",1)),2&e){var n=T.mc(3);T.uc("ngIf",0==n.contracts.length),T.Ab(1),T.uc("ngIf",n.contracts.length>0)}}function Pn(e,t){if(1&e&&T.Tc(0),2&e){var n=t.item,o=T.mc(3);T.Vc(" ",o.mapContractLabel(n||o.form.controls.contract.value)," ")}}function Wn(e,t){if(1&e){var n=T.Xb();T.Wb(0,"a",96),T.ic("click",(function(e){return T.Ic(n),T.mc(3).showContractDetails(e)})),T.Tc(1,"CURRENCY_PAYMENT.CONTRACTS.SHOW_DETAILS"),T.Vb()}}function Mn(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"div",74),T.Wb(2,"j-form-field",null,75),T.Wb(4,"j-label",13),T.Tc(5,"CURRENCY_PAYMENT.RECIPIENT.CONTRACT"),T.Vb(),T.Wb(6,"j-select",76,77),T.ic("change",(function(e){return T.Ic(n),T.mc(2).onContractSelect(e)})),T.Rc(8,Vn,1,1,"ng-template",39),T.Rc(9,Nn,12,4,"ng-template",26),T.Rc(10,jn,2,2,"ng-template",78),T.Rc(11,Pn,1,1,"ng-template",27),T.Vb(),T.Rc(12,Wn,2,0,"a",79),T.Rb(13,"j-error",28),T.Vb(),T.Vb(),T.Tb()}if(2&e){var o=T.Fc(3),r=T.Fc(7),a=T.mc(2);T.Ab(6),T.uc("loading",a.isContractsLoading)("appendTo",o.elementRef.nativeElement)("jFocusOnReturn",r)("formControl",a.form.controls.contractId)("clearable",!1)("searchFn",a.contractComparator)("items",a.filteredContracts),T.Ab(6),T.uc("ngIf",a.isContractSelected),T.Ab(1),T.uc("control",a.form.controls.contractId)("errorMessages",a.errors.contractId)}}function _n(e,t){if(1&e){var n=T.Xb();T.Wb(0,"button",97),T.ic("click",(function(e){return T.Ic(n),T.mc(2).openForeignContractsRecipientsDictionary()})),T.Vb()}}function xn(e,t){if(1&e){var n=T.Xb();T.Wb(0,"button",98),T.ic("click",(function(e){return T.Ic(n),T.mc(2).openForeignRecipientsDictionary()})),T.Vb()}}function wn(e,t){if(1&e&&(T.Wb(0,"div",99),T.Tc(1),T.Vb()),2&e){var n=t.item,o=T.mc(2);T.Ab(1),T.Vc(" ",o.mapCountryLabel(n)," ")}}function Dn(e,t){if(1&e&&T.Tc(0),2&e){var n=t.item;T.mc();var o=T.Fc(33),r=T.mc();T.Vc(" ",o.focused?"":r.mapCountryLabel(n)," ")}}function Yn(e,t){if(1&e&&(T.Wb(0,"div",20),T.Wb(1,"j-form-field"),T.Wb(2,"j-label"),T.Tc(3),T.nc(4,"translate"),T.nc(5,"async"),T.Vb(),T.Rb(6,"input",100),T.Rb(7,"j-error",28),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(3),T.Uc(T.oc(4,7,T.oc(5,9,n.cityPlaceholder$))),T.Ab(3),T.uc("mask",n.masks.cityName.mask)("dropSpecialCharacters",!1)("maxlength",n.cityMaxLength)("formControl",n.form.controls.cityName),T.Ab(1),T.uc("control",n.form.controls.cityName)("errorMessages",n.errors.purpose)}}function Un(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"div",101),T.Wb(2,"div",20),T.Wb(3,"j-form-field"),T.Wb(4,"j-label",13),T.Tc(5,"CURRENCY_PAYMENT.AUD.INDEX"),T.Vb(),T.Rb(6,"input",102),T.Vb(),T.Vb(),T.Wb(7,"div",20),T.Wb(8,"j-form-field"),T.Wb(9,"j-label",13),T.Tc(10,"CURRENCY_PAYMENT.AUD.STATE"),T.Vb(),T.Rb(11,"input",103),T.Vb(),T.Vb(),T.Vb(),T.Wb(12,"div",101),T.Wb(13,"div",20),T.Wb(14,"j-form-field"),T.Wb(15,"j-label",13),T.Tc(16,"CURRENCY_PAYMENT.AUD.BUILDING_NUMBER"),T.Vb(),T.Rb(17,"input",104),T.Vb(),T.Vb(),T.Wb(18,"div",20),T.Wb(19,"j-form-field"),T.Wb(20,"j-label",13),T.Tc(21,"CURRENCY_PAYMENT.AUD.STREET"),T.Vb(),T.Rb(22,"input",105),T.Vb(),T.Vb(),T.Vb(),T.Rb(23,"hr",106),T.Tb()),2&e){var n=T.mc(2);T.Ab(6),T.uc("formControl",n.form.controls.audIndex),T.Ab(5),T.uc("formControl",n.form.controls.audState),T.Ab(6),T.uc("formControl",n.form.controls.audBuildingNumber),T.Ab(5),T.uc("formControl",n.form.controls.audStreet)}}function Ln(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"div",20),T.Wb(2,"j-form-field"),T.Wb(3,"j-label",13),T.Tc(4,"CURRENCY_PAYMENT.AUD.ADDRESS"),T.Vb(),T.Rb(5,"input",107),T.Vb(),T.Vb(),T.Tb()),2&e){var n=T.mc(2);T.Ab(5),T.uc("formControl",n.form.controls.audAddress)}}function Fn(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"div",20),T.Wb(2,"j-form-field"),T.Wb(3,"j-label",13),T.Tc(4,"CURRENCY_PAYMENT.AUD.ADDRESS"),T.Vb(),T.Rb(5,"input",107),T.Vb(),T.Vb(),T.Tb()),2&e){var n=T.mc(2);T.Ab(5),T.uc("formControl",n.form.controls.canAddress)}}function $n(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"div",20),T.Rb(2,"j-foreign-bank-select",108,109),T.Vb(),T.Wb(4,"div",20),T.Wb(5,"j-form-field",21),T.Wb(6,"j-label",13),T.Tc(7,"CURRENCY_PAYMENT.RECIPIENT.CORRESPONDENT_IBAN"),T.Vb(),T.Rb(8,"input",110,111),T.Rb(10,"j-error",28),T.Vb(),T.Vb(),T.Tb()),2&e){var n=T.mc(2);T.Ab(2),T.uc("labelText","CURRENCY_PAYMENT.RECIPIENT.CORRESPONDENT_BIC")("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_CORRESPONDENT_BIC_ENTERED")("labelControl",n.form.controls.rubNonRussiaCorrespondentBankLabel)("errorMessages",n.errors.bankSelect)("bankControl",n.form.controls.rubNonRussiaCorrespondentBank),T.Ab(6),T.uc("validation",!1)("mask",n.masks.rubNonRussiaCorrespondentIban.mask)("formControl",n.form.controls.rubNonRussiaCorrespondentIban),T.Ab(2),T.uc("control",n.form.controls.rubNonRussiaCorrespondentIban)("errorMessages",n.errors.bankAccount)}}function Bn(e,t){if(1&e&&(T.Wb(0,"div",20),T.Wb(1,"j-form-field",21),T.Wb(2,"j-label",13),T.Tc(3,"CURRENCY_PAYMENT.RECIPIENT.KBE"),T.Vb(),T.Rb(4,"input",112),T.Rb(5,"a",113),T.Rb(6,"j-error",28),T.Vb(),T.Vb()),2&e){T.mc();var n=T.Fc(148),o=T.mc();T.Ab(4),T.uc("mask",o.masks.kbeCode.mask)("jShadow",o.masks.kbeCode.shadow)("dropSpecialCharacters",!0)("formControl",o.form.controls.kbeCode),T.Ab(1),T.uc("ngbTooltip",n)("inlineSVG","/assets/icons/payments/question.svg"),T.Ab(1),T.uc("control",o.form.controls.kbeCode)("errorMessages",o.errors.kbeCode)}}function Kn(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"div",20),T.Rb(2,"j-foreign-bank-select",108,114),T.Vb(),T.Wb(4,"div",20),T.Wb(5,"j-form-field"),T.Wb(6,"j-label"),T.Tc(7),T.nc(8,"translate"),T.nc(9,"async"),T.Vb(),T.Rb(10,"input",100),T.Vb(),T.Vb(),T.Tb()),2&e){var n=T.mc(2);T.Ab(2),T.uc("labelText","CURRENCY_PAYMENT.RECIPIENT.BANK")("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED")("labelControl",n.form.controls.rubNonRussiaBankLabel)("errorMessages",n.errors.bankSelect)("bankControl",n.form.controls.rubNonRussiaBank),T.Ab(5),T.Uc(T.oc(8,10,T.oc(9,12,n.cityPlaceholder$))),T.Ab(3),T.uc("mask",n.masks.cityName.mask)("dropSpecialCharacters",!1)("maxlength",n.cityMaxLength)("formControl",n.form.controls.cityName)}}function Hn(e,t){1&e&&(T.Wb(0,"div",45),T.Tc(1," CURRENCY_PAYMENT.RECIPIENT.BIC_DESCRIPTION "),T.Vb())}function Qn(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"div",20),T.Rb(2,"j-foreign-bank-select",115,116),T.Rc(4,Hn,2,0,"div",117),T.Vb(),T.Tb()),2&e){var n=T.mc(2);T.Ab(2),T.uc("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_BIC_ENTERED")("labelControl",n.form.controls.bankLabel)("errorMessages",n.errors.bankSelect)("bankControl",n.form.controls.bank),T.Ab(2),T.uc("ngIf",!n.isBicRequired)}}function Gn(e,t){if(1&e&&T.Rb(0,"j-foreign-bank-select",121,122),2&e){var n=T.mc(3);T.uc("placeholderText","CURRENCY_PAYMENT.RECIPIENT.NO_INTERMEDIARY_BIC_ENTERED")("labelControl",n.form.controls.intermediaryBankLabel)("bankControl",n.form.controls.intermediaryBank)("errorMessages",n.errors.bankSelect)}}function qn(e,t){if(1&e&&(T.Wb(0,"div",10),T.Rb(1,"j-switch",11),T.Wb(2,"div",118),T.Wb(3,"strong",13),T.Tc(4,"CURRENCY_PAYMENT.RECIPIENT.SWITCH.TITLE"),T.Vb(),T.Rc(5,Gn,2,4,"j-foreign-bank-select",119),T.Wb(6,"small",120),T.Tc(7,"CURRENCY_PAYMENT.RECIPIENT.SWITCH.DESCRIPTION"),T.Vb(),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(1),T.uc("formControl",n.form.controls.hasIntermediaryBank),T.Ab(4),T.uc("ngIf",n.hasIntermediaryBank)}}function Xn(e,t){if(1&e&&(T.Wb(0,"div",20),T.Wb(1,"j-form-field",21),T.Wb(2,"j-label",13),T.Tc(3,"CURRENCY_PAYMENT.RECIPIENT.KIO"),T.Vb(),T.Rb(4,"input",123),T.Rb(5,"j-error",28),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(4),T.uc("mask",n.masks.kio.mask)("dropSpecialCharacters",!1)("formControl",n.form.controls.kio),T.Ab(1),T.uc("control",n.form.controls.kio)("errorMessages",n.errors.kio)}}function zn(e,t){if(1&e&&(T.Wb(0,"div",20),T.Wb(1,"j-form-field",21),T.Wb(2,"j-label",13),T.Tc(3,"CURRENCY_PAYMENT.RECIPIENT.KPP"),T.Vb(),T.Rb(4,"input",124),T.Rb(5,"a",113),T.Vb(),T.Wb(6,"div",45),T.Tc(7," CURRENCY_PAYMENT.RECIPIENT.KPP_DESCRIPTION "),T.Vb(),T.Vb()),2&e){T.mc();var n=T.Fc(150),o=T.mc();T.Ab(4),T.uc("mask",o.masks.kpp.mask)("jShadow",o.masks.kpp.shadow)("validation",!1)("formControl",o.form.controls.kpp),T.Ab(1),T.uc("ngbTooltip",n)("inlineSVG","/assets/icons/payments/question.svg")}}function Jn(e,t){if(1&e&&(T.Wb(0,"div",130),T.Wb(1,"j-form-field",21),T.Wb(2,"j-label",13),T.Tc(3,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KIO"),T.Vb(),T.Rb(4,"input",142),T.Rb(5,"j-error",28),T.Vb(),T.Wb(6,"j-form-field",21),T.Wb(7,"j-label",13),T.Tc(8,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KPP"),T.Vb(),T.Rb(9,"input",135),T.Rb(10,"a",113),T.Vb(),T.Vb()),2&e){T.mc(2);var n=T.Fc(150),o=T.mc();T.Ab(4),T.uc("formControl",o.form.controls.payerInn),T.Ab(1),T.uc("control",o.form.controls.payerInn)("errorMessages",o.errors.payerInn),T.Ab(4),T.uc("mask",o.masks.kpp.mask)("jShadow",o.masks.kpp.shadow)("formControl",o.form.controls.payerKpp),T.Ab(1),T.uc("ngbTooltip",n)("inlineSVG","/assets/icons/payments/question.svg")}}function Zn(e,t){if(1&e&&(T.Wb(0,"div",84),T.Wb(1,"strong"),T.Tc(2),T.Vb(),T.Wb(3,"span"),T.Tc(4," - "),T.Vb(),T.Wb(5,"span"),T.Tc(6),T.Vb(),T.Vb()),2&e){var n=t.item;T.Ab(2),T.Uc(n.code),T.Ab(4),T.Uc(n.description)}}function eo(e,t){1&e&&T.Rb(0,"j-empty-placeholder",143)}function to(e,t){if(1&e&&T.Tc(0),2&e){var n=t.item;T.mc();var o=T.Fc(17);T.Vc(" ",o.focused?"":n.code+" - "+n.description," ")}}function no(e,t){if(1&e&&(T.Wb(0,"div",84),T.Wb(1,"strong"),T.Tc(2),T.Vb(),T.Wb(3,"span"),T.Tc(4," - "),T.Vb(),T.Wb(5,"span"),T.Tc(6),T.Vb(),T.Vb()),2&e){var n=t.item;T.Ab(2),T.Uc(n.code),T.Ab(4),T.Uc(n.description)}}function oo(e,t){1&e&&T.Rb(0,"j-empty-placeholder",144)}function ro(e,t){if(1&e&&T.Tc(0),2&e){var n=t.item;T.mc();var o=T.Fc(32);T.Vc(" ",o.focused?"":n.code+" - "+n.description," ")}}function ao(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"div",20),T.Wb(2,"j-form-field",21),T.Wb(3,"j-label",13),T.Tc(4,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PURPOSE"),T.Vb(),T.Rb(5,"input",135),T.Rb(6,"a",113),T.Vb(),T.Vb(),T.Wb(7,"div",20),T.Wb(8,"j-form-field",21),T.Wb(9,"j-label",13),T.Tc(10,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.TAX_NUMBER"),T.Vb(),T.Rb(11,"input",135),T.Vb(),T.Vb(),T.Wb(12,"div",130),T.Wb(13,"div"),T.Wb(14,"j-form-field",21),T.Wb(15,"j-label",13),T.Tc(16,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PERIOD"),T.Vb(),T.Rb(17,"input",145),T.Rb(18,"a",113),T.Vb(),T.Wb(19,"div",45),T.Tc(20,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PERIOD_DESCRIPTION "),T.Vb(),T.Vb(),T.Wb(21,"j-form-field",21),T.Wb(22,"j-label",13),T.Tc(23,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.UIP"),T.Vb(),T.Rb(24,"input",146),T.Vb(),T.Vb(),T.Tb()),2&e){T.mc(2);var n=T.Fc(154),o=T.Fc(156),r=T.mc();T.Ab(5),T.uc("mask",r.masks.paymentBasis.mask)("jShadow",r.masks.paymentBasis.shadow)("formControl",r.form.controls.paymentBasis),T.Ab(1),T.uc("ngbTooltip",n)("inlineSVG","/assets/icons/payments/question.svg"),T.Ab(5),T.uc("mask",r.masks.budgetDocNumber.mask)("jShadow",r.masks.budgetDocNumber.shadow)("formControl",r.form.controls.budgetDocNumber),T.Ab(6),T.uc("mask",r.masks.budgetPeriod.mask)("jShadow",r.masks.budgetPeriod.shadow)("dropSpecialCharacters",!1)("formControl",r.form.controls.budgetPeriod),T.Ab(1),T.uc("ngbTooltip",o)("inlineSVG","/assets/icons/payments/question.svg"),T.Ab(6),T.uc("formControl",r.form.controls.uip)}}function io(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"fieldset",15),T.Wb(2,"h5",7),T.Tc(3,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.TITLE"),T.Vb(),T.Wb(4,"div",20),T.Wb(5,"div",125),T.Rb(6,"input",126),T.Wb(7,"label",127),T.Rb(8,"span",128),T.Vb(),T.Vb(),T.Vb(),T.Rc(9,Jn,11,8,"div",129),T.Wb(10,"div",130,131),T.Wb(12,"j-form-field",null,132),T.Wb(14,"j-label",13),T.Tc(15,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.KBK"),T.Vb(),T.Wb(16,"j-select",133,134),T.Rc(18,Zn,7,2,"ng-template",26),T.Rc(19,eo,1,0,"ng-template",78),T.Rc(20,to,1,1,"ng-template",27),T.Vb(),T.Vb(),T.Wb(21,"j-form-field",21),T.Wb(22,"j-label",13),T.Tc(23,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.OKTMO"),T.Vb(),T.Rb(24,"input",135),T.Rb(25,"a",113),T.Vb(),T.Vb(),T.Wb(26,"div",20),T.Wb(27,"j-form-field",null,136),T.Wb(29,"j-label",13),T.Tc(30,"CURRENCY_PAYMENT.RUSSIAN_BUDGET.PAYER_STATUS"),T.Vb(),T.Wb(31,"j-select",137,138),T.Rc(33,no,7,2,"ng-template",26),T.Rc(34,oo,1,0,"ng-template",78),T.Rc(35,ro,1,1,"ng-template",27),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(36,"fieldset",15),T.Wb(37,"div",20),T.Wb(38,"div",125),T.Rb(39,"input",139),T.Wb(40,"label",140),T.Rb(41,"span",141),T.Vb(),T.Vb(),T.Vb(),T.Rc(42,ao,25,15,"ng-container",1),T.Vb(),T.Tb()),2&e){var n=T.Fc(11),o=T.Fc(17),r=T.Fc(28),a=T.Fc(32);T.mc();var i=T.Fc(152),c=T.mc();T.Ab(6),T.uc("formControl",c.form.controls.isRussianTaxPayer),T.Ab(3),T.uc("ngIf",c.isRussianTaxpayer),T.Ab(7),T.uc("loading",c.isKbkLoading)("appendTo",n)("jFocusOnReturn",o)("formControl",c.form.controls.kbk)("clearable",!1)("searchFn",c.kbkComparator)("items",c.kbkList),T.Ab(8),T.uc("mask",c.masks.oktmo.mask)("jShadow",c.masks.oktmo.shadow)("formControl",c.form.controls.oktmo),T.Ab(1),T.uc("ngbTooltip",i)("inlineSVG","/assets/icons/payments/question.svg"),T.Ab(6),T.uc("loading",c.isStatusesLoading)("appendTo",r.elementRef.nativeElement)("jFocusOnReturn",a)("formControl",c.form.controls.payerStatus)("clearable",!1)("searchFn",c.statusComparator)("items",c.statuses),T.Ab(8),T.uc("formControl",c.form.controls.hasRussianBudgetExtras),T.Ab(3),T.uc("ngIf",c.hasRussianBudgetExtras)}}function co(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div"),T.Wb(1,"button",83),T.ic("click",(function(e){T.Ic(n),T.mc(2);var t=T.Fc(89);return T.mc().openKnpDictionary(t,e)})),T.Rb(2,"span",147),T.Wb(3,"span",13),T.Tc(4," CURRENCY_PAYMENT.DETAILS.KNP.DICTIONARY "),T.Vb(),T.Vb(),T.Wb(5,"p",148),T.Tc(6,"CURRENCY_PAYMENT.DETAILS.KNP.FREQUENT"),T.Vb(),T.Wb(7,"p",149),T.Tc(8,"CURRENCY_PAYMENT.DETAILS.KNP.DESCRIPTION"),T.Vb(),T.Vb()}2&e&&(T.Ab(2),T.uc("inlineSVG","/assets/icons/payments/list.svg"))}function so(e,t){1&e&&T.Rc(0,co,9,1,"div",1),2&e&&T.uc("ngIf",!t.searchTerm)}function lo(e,t){if(1&e&&(T.Wb(0,"div",20),T.Wb(1,"j-form-field"),T.Wb(2,"j-label",13),T.Tc(3,"CURRENCY_PAYMENT.DETAILS.KVO"),T.Vb(),T.Rb(4,"input",33),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(4),T.uc("mask",n.masks.kvo.mask)("formControl",n.form.controls.kvo)}}function uo(e,t){if(1&e&&(T.Wb(0,"div",84),T.Tc(1),T.Vb()),2&e){var n=t.item,o=T.mc(3);T.Ab(1),T.Vc(" ",o.mapCodeWordLabel(n)," ")}}function bo(e,t){if(1&e&&T.Tc(0),2&e){var n=t.item;T.mc();var o=T.Fc(8),r=T.mc(2);T.Vc(" ",o.focused?"":r.mapCodeWordLabel(n||(null==r.form.controls.codeWord?null:r.form.controls.codeWord.value))," ")}}function mo(e,t){if(1&e&&(T.Wb(0,"div",20),T.Wb(1,"j-form-field",null,150),T.Wb(3,"j-label"),T.Tc(4),T.nc(5,"translate"),T.nc(6,"async"),T.Vb(),T.Wb(7,"j-select",133,151),T.Rc(9,uo,2,1,"ng-template",26),T.Rc(10,bo,1,1,"ng-template",27),T.Vb(),T.Vb(),T.Vb()),2&e){var n=T.Fc(2),o=T.Fc(8),r=T.mc(2);T.Ab(4),T.Uc(T.oc(5,8,T.oc(6,10,r.codeWordLabel$))),T.Ab(3),T.uc("loading",r.isCodeWordsLoading)("appendTo",n.elementRef.nativeElement)("jFocusOnReturn",o)("formControl",r.form.controls.codeWord)("clearable",!1)("searchFn",r.codeWordComparator)("items",r.codeWords)}}function po(e,t){if(1&e&&(T.Wb(0,"div",152),T.Wb(1,"div",153),T.Tc(2),T.Vb(),T.Vb()),2&e){var n=t.ngIf;T.Ab(2),T.Vc(" ",n," ")}}function fo(e,t){if(1&e&&(T.Wb(0,"div",154),T.Rb(1,"span",155),T.nc(2,"async"),T.Vb()),2&e){var n=T.mc(2);T.Ab(1),T.uc("innerHTML",T.oc(2,1,n.comissionMessage),T.Jc)}}function ho(e,t){if(1&e&&(T.Wb(0,"div",156),T.Rb(1,"span",155),T.nc(2,"async"),T.Vb()),2&e){var n=T.mc(2);T.Ab(1),T.uc("innerHTML",T.oc(2,1,n.amountMessage),T.Jc)}}var vo=function(e){return{amount:e}};function yo(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div",156),T.Rb(1,"span",157),T.nc(2,"money"),T.Wb(3,"a",158),T.ic("click",(function(e){return T.Ic(n),T.mc(2).scrollToContracts(e)})),T.Tc(4),T.nc(5,"translate"),T.Vb(),T.Vb()}if(2&e){var o=T.mc(2);T.Ab(1),T.uc("translate","ERRORS.CURRENCY_PAYMENT.MUST_INCLUDE_CONTRACT")("translateParams",T.zc(7,vo,T.oc(2,3,o.contractMaxAmount))),T.Ab(3),T.Uc(T.oc(5,5,"ERRORS.CURRENCY_PAYMENT.MUST_INCLUDE_CONTRACT_LINK"))}}function go(e,t){if(1&e&&(T.Wb(0,"div",156),T.Rb(1,"span",155),T.Vb()),2&e){var n=T.mc(2);T.Ab(1),T.uc("innerHTML",n.comissionMessage,T.Jc)}}function Ao(e,t){1&e&&(T.Ub(0),T.Tc(1),T.nc(2,"translate"),T.Tb()),2&e&&(T.Ab(1),T.Vc(" ",T.oc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function To(e,t){if(1&e&&(T.Tc(0),T.nc(1,"translate"),T.Rb(2,"j-money",86)),2&e){var n=T.mc(2);T.Vc(" ",T.oc(1,2,"PAYMENTS.COMMISSION"),": "),T.Ab(2),T.uc("money",n.commissionBalance)}}function Ro(e,t){1&e&&T.Rb(0,"div",159)}function Co(e,t){if(1&e&&(T.Wb(0,"li",59),T.Rb(1,"j-switch",11),T.Wb(2,"span",12),T.Wb(3,"strong",13),T.Tc(4,"CURRENCY_PAYMENT.AGENT.TITLE"),T.Vb(),T.Rb(5,"br"),T.Wb(6,"small",160),T.Tc(7,"CURRENCY_PAYMENT.AGENT.DESCRIPTION"),T.Vb(),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(1),T.uc("formControl",n.form.controls.payComission)}}function Eo(e,t){1&e&&(T.Wb(0,"div"),T.Wb(1,"small",161),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.NOTIFY.DESCRIPTION")))}function ko(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div",162),T.Wb(1,"j-form-field"),T.Wb(2,"j-label"),T.Tc(3),T.nc(4,"translate"),T.Vb(),T.Wb(5,"input",163,164),T.ic("focus",(function(e){return T.Ic(n),T.mc(2).onEmailOnSuccessFocus(e)})),T.Vb(),T.Rb(7,"j-error",28),T.Vb(),T.Wb(8,"small",161),T.Tc(9),T.nc(10,"translate"),T.Vb(),T.Vb()}if(2&e){var o=T.mc(2);T.Ab(3),T.Uc(T.oc(4,6,"PAYMENTS.NOTIFY.EMAIL")),T.Ab(2),T.uc("ngbTypeahead",o.search)("formControl",o.form.controls.emailOnSuccess),T.Ab(2),T.uc("control",o.form.controls.emailOnSuccess)("errorMessages",o.errors.email),T.Ab(2),T.Uc(T.oc(10,8,"PAYMENTS.NOTIFY.EMAIL"))}}function So(e,t){if(1&e&&(T.Rb(0,"p",165),T.nc(1,"translate")),2&e){var n=T.mc(2);T.uc("innerHTML",T.oc(1,1,n.agreementText),T.Jc)}}function Vo(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"button",166),T.ic("click",(function(e){return T.Ic(n),T.mc(2).saveToDraft()})),T.Wb(2,"strong",13),T.Tc(3,"SHARED.SAVE"),T.Vb(),T.Vb(),T.Wb(4,"button",167),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Tb()}if(2&e){var o=T.mc(2);T.Ab(5),T.Vc("",T.oc(6,1,o.submitLabel)," ")}}function No(e,t){1&e&&(T.Ub(0),T.Wb(1,"button",168),T.Tc(2,"SHARED.SAVE_EDITING"),T.Vb(),T.Tb())}function Io(e,t){if(1&e&&T.Rb(0,"j-fx-contract-details",169,170),2&e){var n=T.mc(2);T.uc("contract",n.form.controls.contract.value)}}function Oo(e,t){}function jo(e,t){1&e&&T.Rb(0,"j-kbe-info")}function Po(e,t){1&e&&(T.Rb(0,"div",171),T.nc(1,"translate")),2&e&&T.uc("innerHTML",T.oc(1,1,"PAYMENTS.KPP"),T.Jc)}function Wo(e,t){1&e&&(T.Rb(0,"div",171),T.nc(1,"translate")),2&e&&T.uc("innerHTML",T.oc(1,1,"PAYMENTS.OKTMO"),T.Jc)}function Mo(e,t){1&e&&(T.Rb(0,"div",171),T.nc(1,"translate")),2&e&&T.uc("innerHTML",T.oc(1,1,"PAYMENTS.BASIS"),T.Jc)}function _o(e,t){1&e&&(T.Rb(0,"div",171),T.nc(1,"translate")),2&e&&T.uc("innerHTML",T.oc(1,1,"PAYMENTS.BUDGET"),T.Jc)}function xo(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"div",3),T.Wb(2,"form",4,5),T.ic("submit",(function(e){return T.Ic(n),T.mc().onSubmit(e)})),T.Wb(4,"fieldset",6),T.Wb(5,"h5",7),T.Tc(6,"CURRENCY_PAYMENT.DEBIT_ACCOUNT"),T.Vb(),T.Wb(7,"j-account-dropdown",8,9),T.ic("selected",(function(e){return T.Ic(n),T.mc().onSenderAccountSelect(e)})),T.Vb(),T.Wb(9,"div",10),T.Rb(10,"j-switch",11),T.Wb(11,"div",12),T.Wb(12,"strong",13),T.Tc(13,"CURRENCY_PAYMENT.CONTRACTS.SWITCH.TITLE"),T.Vb(),T.Rc(14,En,3,8,"div",14),T.Vb(),T.Vb(),T.Rc(15,Mn,14,10,"ng-container",1),T.Vb(),T.Wb(16,"fieldset",15),T.Wb(17,"div",16),T.Wb(18,"h5",17),T.Tc(19,"CURRENCY_PAYMENT.RECIPIENT.TITLE"),T.Vb(),T.Rc(20,_n,1,0,"button",18),T.Rc(21,xn,1,0,"button",19),T.Vb(),T.Wb(22,"div",20),T.Wb(23,"j-form-field",21),T.Wb(24,"j-label",13),T.Tc(25,"CURRENCY_PAYMENT.RECIPIENT.NAME"),T.Vb(),T.Wb(26,"input",22),T.ic("paste",(function(e){return T.Ic(n),T.mc().onNamePaste(e)})),T.Vb(),T.Vb(),T.Vb(),T.Wb(27,"div",20),T.Wb(28,"j-form-field",null,23),T.Wb(30,"j-label",13),T.Tc(31,"CURRENCY_PAYMENT.RECIPIENT.COUNTRY"),T.Vb(),T.Wb(32,"j-select",24,25),T.ic("change",(function(e){return T.Ic(n),T.mc().onCountrySelect(e)}))("focus",(function(e){return T.Ic(n),T.mc().onCountryFocus()}))("search",(function(e){return T.Ic(n),T.mc().onCountrySearch(e)})),T.nc(34,"async"),T.Rc(35,wn,2,1,"ng-template",26),T.Rc(36,Dn,1,1,"ng-template",27),T.Vb(),T.Rb(37,"j-error",28),T.Vb(),T.Vb(),T.Rc(38,Yn,8,11,"div",29),T.Rc(39,Un,24,4,"ng-container",1),T.nc(40,"async"),T.Rc(41,Ln,6,1,"ng-container",1),T.nc(42,"async"),T.Rc(43,Fn,6,1,"ng-container",1),T.nc(44,"async"),T.Rc(45,$n,11,10,"ng-container",1),T.nc(46,"async"),T.Wb(47,"div"),T.nc(48,"async"),T.Rc(49,Bn,7,8,"div",29),T.Rc(50,Kn,11,14,"ng-container",1),T.nc(51,"async"),T.Wb(52,"div",20),T.Wb(53,"j-form-field",21),T.Wb(54,"j-label",13),T.Tc(55,"CURRENCY_PAYMENT.RECIPIENT.IBAN"),T.Vb(),T.Rb(56,"input",30,31),T.Rb(58,"j-error",28),T.Vb(),T.Vb(),T.Vb(),T.Rc(59,Qn,5,5,"ng-container",1),T.nc(60,"async"),T.Rc(61,qn,8,2,"div",32),T.Rc(62,Xn,6,5,"div",29),T.nc(63,"async"),T.Rc(64,zn,8,6,"div",29),T.nc(65,"async"),T.Vb(),T.Rc(66,io,43,23,"ng-container",1),T.nc(67,"async"),T.Wb(68,"fieldset",15),T.Wb(69,"h5",7),T.Tc(70,"CURRENCY_PAYMENT.DETAILS.TITLE"),T.Vb(),T.Wb(71,"div",20),T.Wb(72,"j-form-field"),T.Wb(73,"j-label",13),T.Tc(74,"CURRENCY_PAYMENT.DETAILS.DOCUMENT_NUMBER"),T.Vb(),T.Rb(75,"input",33),T.Vb(),T.Vb(),T.Wb(76,"div",20),T.Rb(77,"j-date-picker",34,35),T.nc(79,"async"),T.nc(80,"translate"),T.nc(81,"translate"),T.nc(82,"async"),T.Vb(),T.Wb(83,"div",20),T.Wb(84,"j-form-field",null,36),T.Wb(86,"j-label",13),T.Tc(87,"CURRENCY_PAYMENT.DETAILS.KNP.TITLE"),T.Vb(),T.Wb(88,"j-select",37,38),T.ic("change",(function(e){return T.Ic(n),T.mc().knpIsChanged()})),T.nc(90,"async"),T.Rc(91,so,1,1,"ng-template",39),T.Vb(),T.Vb(),T.Vb(),T.Rc(92,lo,5,2,"div",29),T.nc(93,"async"),T.Rc(94,mo,11,12,"div",29),T.nc(95,"async"),T.Wb(96,"div",40),T.Wb(97,"span",41),T.Tc(98),T.nc(99,"async"),T.Vb(),T.Wb(100,"j-form-field"),T.Wb(101,"j-label",13),T.Tc(102,"CURRENCY_PAYMENT.DETAILS.PURPOSE"),T.Vb(),T.Rb(103,"textarea",42,43),T.Rb(105,"j-error",28),T.Rc(106,po,3,1,"div",44),T.nc(107,"async"),T.Vb(),T.Wb(108,"div",45),T.Tc(109," CURRENCY_PAYMENT.DETAILS.PURPOSE_DESCRIPTION "),T.Vb(),T.Vb(),T.Vb(),T.Wb(110,"fieldset",15),T.Wb(111,"div",46),T.Wb(112,"j-account-dropdown",47,48),T.ic("selected",(function(e){return T.Ic(n),T.mc().onCommissionAccountSelect(e)})),T.Vb(),T.Rc(114,fo,3,3,"div",49),T.Vb(),T.Wb(115,"div",20),T.Wb(116,"j-form-field",50),T.Wb(117,"j-label",13),T.Tc(118,"CURRENCY_PAYMENT.AMOUNT.TITLE"),T.Vb(),T.Wb(119,"input",51),T.ic("paste",(function(e){return T.Ic(n),T.mc().onAmountPaste(e)})),T.Vb(),T.Vb(),T.Rc(120,ho,3,3,"div",52),T.Rc(121,yo,6,9,"div",52),T.Rc(122,go,2,1,"div",52),T.Wb(123,"div",53),T.Rc(124,Ao,3,3,"ng-container",54),T.Rc(125,To,3,4,"ng-template",null,55,T.Sc),T.Rc(127,Ro,1,0,"div",56),T.Vb(),T.Vb(),T.Wb(128,"ul",57),T.Rc(129,Co,8,1,"li",58),T.Wb(130,"li",59),T.Rb(131,"j-switch",11),T.Wb(132,"div",60),T.Wb(133,"strong"),T.Tc(134),T.nc(135,"translate"),T.Vb(),T.Rb(136,"br"),T.Rc(137,Eo,4,3,"div",1),T.Rc(138,ko,11,10,"div",61),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Rc(139,So,2,3,"p",62),T.Wb(140,"div",63),T.Rc(141,Vo,7,3,"ng-container",1),T.Rc(142,No,3,0,"ng-container",1),T.Vb(),T.Rb(143,"ngx-spinner",64),T.Vb(),T.Vb(),T.Rc(144,Io,2,1,"j-fx-contract-details",65),T.Rc(145,Oo,0,0,"ng-template",null,66,T.Sc),T.Rc(147,jo,1,0,"ng-template",null,67,T.Sc),T.Rc(149,Po,2,3,"ng-template",null,68,T.Sc),T.Rc(151,Wo,2,3,"ng-template",null,69,T.Sc),T.Rc(153,Mo,2,3,"ng-template",null,70,T.Sc),T.Rc(155,_o,2,3,"ng-template",null,71,T.Sc),T.Tb()}if(2&e){var o=T.Fc(29),r=T.Fc(33),a=T.Fc(78),i=T.Fc(85),c=T.Fc(89),s=T.Fc(126),l=T.mc();T.Ab(2),T.uc("formGroup",l.form),T.Ab(5),T.uc("isLoading",l.isAccountsLoading)("isDisabledSelectable",!0)("label","CURRENCY_PAYMENT.DEBIT_ACCOUNT")("hasError",l.form.controls.senderAccount.touched&&l.form.controls.senderAccount.errors)("accounts",l.senderAccountsList),T.Ab(3),T.uc("formControl",l.form.controls.withinContract),T.Ab(4),T.uc("ngIf",l.isContractsDescriptionShown),T.Ab(1),T.uc("ngIf",l.withinContract),T.Ab(5),T.uc("ngIf",l.withinContract&&(null==l.form.controls.contract?null:null==l.form.controls.contract.value?null:null==l.form.controls.contract.value.recipients?null:l.form.controls.contract.value.recipients.length)>1),T.Ab(1),T.uc("ngIf",!l.withinContract),T.Ab(5),T.uc("mask",l.masks.name.mask)("dropSpecialCharacters",!1)("maxlength",l.withinContract?null:l.nameMaxLength)("formControl",l.form.controls.name),T.Ab(6),T.uc("appendTo",o.elementRef.nativeElement)("jFocusOnReturn",r)("formControl",l.form.controls.countryCode)("readonly",l.form.controls.countryCode.disabled)("clearable",!1)("searchFn",l.countryComparator)("items",T.oc(34,102,l.countries$)),T.Ab(5),T.uc("control",l.form.controls.countryCode)("errorMessages",l.errors.country),T.Ab(1),T.uc("ngIf",l.isCityShown),T.Ab(1),T.uc("ngIf",T.oc(40,104,l.isAustraliaAud$)),T.Ab(2),T.uc("ngIf",T.oc(42,106,l.isAustraliaNonAud$)),T.Ab(2),T.uc("ngIf",T.oc(44,108,l.isCountryCanada$)),T.Ab(2),T.uc("ngIf",T.oc(46,110,l.isRubNonRussia$)),T.Ab(2),T.Hb("kbe-account-row",!(T.oc(48,112,l.isRubNonRussia$)||l.withinContract)),T.Ab(2),T.uc("ngIf",!l.withinContract),T.Ab(1),T.uc("ngIf",T.oc(51,114,l.isRubNonRussia$)),T.Ab(2),T.Hb("mb-3",l.withinContract),T.Ab(4),T.uc("mask",l.masks.bankAccount.mask)("formControl",l.form.controls.bankAccount),T.Ab(2),T.uc("control",l.form.controls.bankAccount)("errorMessages",l.errors.bankAccount),T.Ab(1),T.uc("ngIf",!T.oc(60,116,l.isRubNonRussia$)),T.Ab(2),T.uc("ngIf",l.isIntermediaryBankSwitchable),T.Ab(1),T.uc("ngIf",T.oc(63,118,l.isKioEnabled$)),T.Ab(2),T.uc("ngIf",T.oc(65,120,l.isKppEnabled$)),T.Ab(2),T.uc("ngIf",T.oc(67,122,l.isRussianBudget$)),T.Ab(9),T.uc("mask",l.masks.number.mask)("formControl",l.form.controls.number),T.Ab(2),T.uc("datesEnabled",T.oc(79,124,l.workingDays$))("formControl",l.form.controls.date)("formatValue",!0)("jFocusOnReturn",a)("label",T.oc(80,126,"CURRENCY_PAYMENT.DETAILS.VALUE_DATE"))("minDate",l.dateLimit.minDate)("maxDate",l.dateLimit.maxDate)("helperText",T.oc(81,128,T.oc(82,130,l.dateMessage$))),T.Ab(11),T.uc("jFocusOnReturn",c)("appendTo",i.elementRef.nativeElement)("formControl",l.form.controls.knp)("clearable",!1)("searchMask",l.masks.knp.mask)("shadow",l.masks.knp.shadow)("compareWith",l.knpComparator)("items",T.oc(90,132,l.knp$)),T.Ab(4),T.uc("ngIf",T.oc(93,134,l.isKvoEnabled$)),T.Ab(2),T.uc("ngIf",T.oc(95,136,l.isCodeWordEnabled$)),T.Ab(4),T.Wc(" ",T.oc(99,138,l.purposeLength$),"/",l.rules.purposeLength,""),T.Ab(5),T.uc("formControl",l.form.controls.purpose)("mask",l.masks.purpose.mask)("dropSpecialCharacters",!1),T.Ab(2),T.uc("control",l.form.controls.purpose)("errorMessages",l.errors.purpose),T.Ab(1),T.uc("ngIf",T.oc(107,140,l.purposeMessage$)),T.Ab(5),T.uc("hidden",!l.isCommissionAccountSelectable),T.Ab(1),T.uc("isLoading",l.isAccountsLoading)("accounts",l.commissionAccountsList)("isDisabledSelectable",!0)("hasError",l.form.controls.commissionAccount.touched&&l.form.controls.commissionAccount.errors)("label","CURRENCY_PAYMENT.COMISSION.ACCOUNT"),T.Ab(2),T.uc("ngIf",l.comissionMessage),T.Ab(2),T.uc("floatLabel","always"),T.Ab(3),T.uc("suffix",l.amountSuffix)("placeholder",l.amountPlaceholder)("mask",l.amountMask)("dropSpecialCharacters",!0)("formControl",l.form.controls.amount),T.Ab(1),T.uc("ngIf",l.amountMessage),T.Ab(1),T.uc("ngIf",l.shouldBindContract),T.Ab(1),T.uc("ngIf",l.comissionMessage&&!l.isCommissionAccountSelectable),T.Ab(2),T.uc("ngIf",null===l.commissionBalance)("ngIfElse",s),T.Ab(3),T.uc("ngIf",0==l.isOurComission),T.Ab(2),T.uc("ngIf",l.canPayCommission),T.Ab(2),T.uc("formControl",l.form.controls.notify),T.Ab(3),T.Uc(T.oc(135,142,"PAYMENTS.NOTIFY.TITLE")),T.Ab(3),T.uc("ngIf",!l.form.controls.notify.value),T.Ab(1),T.uc("ngIf",l.form.controls.notify.value),T.Ab(1),T.uc("ngIf",l.isContractsAgreementShown),T.Ab(2),T.uc("ngIf",l.restoredData.status!==l.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("ngIf",l.restoredData.status===l.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("name",l.SPINNER)("fullScreen",!1),T.Ab(1),T.uc("ngIf",l.form.controls.contract.value)}}var wo,Do,Yo,Uo,Lo=function(e){return e.JYSAN="TSESKZKA",e}({}),Fo=K.a.JPY,$o=["342","343","314","312"],Bo=new RegExp(/(([a-zA-Z]{1}[a-zA-Z0-9\/\-?:().,\'+\ ]+)|([a-zA-Z]{1}))+/g),Ko=function(e){return!!e&&"810"!==e.substring(5,8)},Ho=function(e){return!!e&&["000","001","002"].includes(e.substring(6,9))},Qo=function(e){return!!e&&"0"===e[0]},Go=function(e){var t,n,o;return e.value&&5!==(null===(t=e.value)||void 0===t?void 0:t.length)&&10!==(null===(n=e.value)||void 0===n?void 0:n.length)&&12!==(null===(o=e.value)||void 0===o?void 0:o.length)?{lengthMismatch:!0}:null},qo=function(e){var t=new RegExp("^[0-9]+$");return e.value&&!e.value.match(t)?{rubInvalidNumbers:!0}:e.value&&e.value.length>8&&!Qo(e.value)&&Ko(e.value)?{rubInvalid:!0}:e.value&&20!==e.value.length?{rubLength:!0}:null},Xo=((wo=function(e){function t(e,n,o,r,a,i,c,s,l,u,b,m,d,p,f,h,v,y,g,A){var T;return _classCallCheck(this,t),(T=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,m.createCurrencyForm(),i,r,a,e,n,o,u,c,b,s,l,f))).companyService=e,T.paymentsService=n,T.maskService=o,T.route=r,T.router=a,T.api=i,T.dictionaries=c,T.translateService=s,T.authorityPermissionsService=l,T.modalService=u,T.pipelines=b,T.paymentsFormsFactory=m,T.maskPipe=d,T.recipientsService=p,T.featureFlagsService=f,T.accountsService=h,T.currencyPaymentService=v,T.curSymbolPipe=y,T.conversionService=g,T.contractsModalsService=A,T.nameMaxLength=103,T.cityMaxLength=32,T.paymentCategory=B.h.FOREIGN,T.isCounterPartyLoading$=new N.a(null),T.masks={iinOrBin:"iin",bankAccount:"foreignAccount",kbeCode:"kbe",knp:"knp",number:"paymentNum",amount:"amount",name:"foreignLatin",cityName:"foreignLatin",purpose:"foreignLatin",kvo:"kvo",kio:"kio",kpp:"kpp",oktmo:"oktmo",paymentBasis:"basis",budgetDocNumber:"budgetDocNumber",budgetPeriod:"budgetPeriod",rubNonRussiaCorrespondentIban:"russianAccount"},T.focusEmail$=new I.a,T.prevEmails$=new N.a([]),T.fetchingEmailsFor$=new N.a(null),T.accounts=[],T.isAccountsLoading=!0,T.contracts=[],T.filteredContracts=[],T.isContractsLoading=!1,T.isContractSelected=!1,T.withinContract=!1,T.isContractsDescriptionShown=!1,T.isContractsAgreementShown=!0,T.isContractsDescriptionLoading=!1,T.contractMaxAmount={amount:1e4,currency:K.a.USD},T.countries=[],T.countries$=new N.a([]),T.hasDefaultCity=!1,T.isCityShown=!1,T.cityPlaceholder$=new N.a("CURRENCY_PAYMENT.RECIPIENT.CITY"),T.isBicRequired=!0,T.isIntermediaryBankSwitchable=!1,T.hasIntermediaryBank=!1,T.ibanMaxLength=34,T.amountMask="separator.2",T.amountPlaceholder="0,00",T.amountSuffix=" ",T.isCommissionAccountSelectable=!0,T.isOurComission=!1,T.canPayCommission=!0,T.commissionBalance=null,T.isKppEnabled$=new N.a(!1),T.isKioEnabled$=new N.a(!1),T.isKvoEnabled$=new N.a(!1),T.codeWordLabel$=new N.a("CURRENCY_PAYMENT.RECIPIENT.CODEWORD"),T.isCodeWordEnabled$=new N.a(!1),T.isRubNonRussia$=new N.a(!1),T.isRubToRussia$=new N.a(!1),T.isRussianBudgetDisabled=!1,T.isRussianBudget$=new N.a(!1),T.isRussianTaxpayer=!1,T.kbkList=[],T.isKbkLoading=!1,T.statuses=[],T.isStatusesLoading=!1,T.hasRussianBudgetExtras=!1,T.isForeignContractDisabled=!1,T.isAustraliaAud$=new N.a(!1),T.isAustraliaNonAud$=new N.a(!1),T.isCountryCanada$=new N.a(!1),T.rules.purposeLength=335,T.isForeignContractDisabled=T.featureFlagsService.isDisabled(q.a.FOREIGN_CONTRACT),T.featureFlagsService.featureFlags$.subscribe((function(e){T.isForeignContractDisabled=T.featureFlagsService.isDisabled(q.a.FOREIGN_CONTRACT)})),T.featureFlagsService.checkFeatureRoute(q.a.FOREIGN_PAYMENT).then((function(){T.isRussianBudgetDisabled=T.featureFlagsService.isDisabled(q.a.RUB_BUDGET_PAYMENT),T.isForeignContractDisabled=T.featureFlagsService.isDisabled(q.a.FOREIGN_CONTRACT)})),T}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(t.prototype),"ngOnInit",this).call(this),this.accountStore=this.accountsService.store,this.dateLimit=this.paymentsService.stdDateRangeNgb,this.retrieveKnps(),this.retrieveAccounts(),this.retrieveCountries(),this.retrieveContracts(),this.retrieveCodeWords(),this.retrieveKbks(),this.retrieveStatuses(),this.createControlsStream(this.form),this.getMaskConfig(),this.listenCommission(),this.listenCountrySelect(),this.listenWithinContractSwitch(),this.listenContractsSwitchDescription(),this.listenContractSelect(),this.listenEmailSearch(),this.listenWorkingDays(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.listenPurpose(),this.listenPayComission(),this.listenIntermediaryBankSwitch(),this.listenIntermediaryBankSwitchable(),this.listenAmount(),this.applyAmountValidation(),this.listenAmountMessage(),this.setAutoNumeration(),this.listenCompanyType(),this.listenIsRussianBudget(),this.listenIsRussianTaxpayer(),this.listenHasRussianBudgetExtras(),this.listenRouterParams(),this.listenKvo(),this.listenKio(),this.listenCodeWordEnabling(),this.listenCodeWord(),this.listenCodeWordsList(),this.listenRubToNonRussia(),this.listenRubNonRussiaCorrespondentBank(),this.listenAudToAustralia(),this.listenAudNonAustralia(),this.listenCountryIsCanada(),this.listenMaxLengths(),this.applyKbeRules(),this.applyNameRules(),this.applyCountryRules(),this.applyIbanRules()}},{key:"applyKbeRules",value:function(){var e=this;this.subs.add(this.controlsStream.withinContract.subscribe((function(t){t?e.clearValidation([e.form.controls.kbeCode]):e.setValidation([e.form.controls.kbeCode],[r.H.required,Q.a.kbe])})))}},{key:"applyNameRules",value:function(){var e=this,t=this.form.controls.name,n=this.controlsStream,o=n.withinContract,a=n.senderAccount;this.subs.add(Object(O.a)([o,a]).pipe(Object(M.a)()).subscribe((function(n){var o,a,i=_slicedToArray(n,2),c=i[0],s=null===(a=null===(o=i[1])||void 0===o?void 0:o.balance)||void 0===a?void 0:a.currency,l=t.pristine;c?(t.disable(),e.clearValidation([t]),e.masks.name={mask:null}):(t.enable(),e.setValidation([t],[r.H.required]),e.masks.name=s===K.a.RUB?H.a.foreignCyrillic:H.a.foreignLatin),setTimeout((function(){l&&t.markAsPristine()}),0)})))}},{key:"onNamePaste",value:function(e){e.preventDefault();var t=(e.clipboardData||window.clipboardData).getData("text").substring(0,this.nameMaxLength);this.form.controls.name.setValue(t)}},{key:"applyCountryRules",value:function(){var e=this,t=this.form.controls.countryCode,n=this.controlsStream,o=n.withinContract,a=n.senderAccount,i=n.contract;this.subs.add(Object(O.a)([o,a,i]).pipe(Object(M.a)()).subscribe((function(n){var o,a,i=_slicedToArray(n,2),c=i[0],s=null===(a=null===(o=i[1])||void 0===o?void 0:o.balance)||void 0===a?void 0:a.currency,l=t.pristine;if(c)t.disable(),e.clearValidation([t]);else{t.enable();var u=[r.H.required];s===K.a.CNY&&u.push((function(e){return e.value!==Mt.a.CN?{cnyOnlyToChina:!0}:null})),e.setValidation([t],u)}setTimeout((function(){l&&t.markAsPristine()}),0)})))}},{key:"onCountrySearch",value:function(e){var t=this,n=e.term;if(n){var o=this.countries.filter((function(e){return e.code.toLowerCase().includes(n.toLowerCase())||e.nameEn.toLowerCase().includes(n.toLowerCase())||e.nameKk.toLowerCase().includes(n.toLowerCase())||e.nameRu.toLowerCase().includes(n.toLowerCase())})).sort((function(e,o){return t.countrySorter(e,o,n)}));this.countries$.next(o)}else this.countries$.next(this.countries)}},{key:"onCountryFocus",value:function(){this.form.controls.senderAccount.value||(this.senderAccountDropdown.hasError=!0)}},{key:"onCountrySelect",value:function(e){this.hasDefaultCity=!!e.defaultCityName,this.form.controls.country.setValue(e)}},{key:"countrySorter",value:function(e,t,n){if(e.code.toLowerCase()===n.toLowerCase())return-1;if(t.code.toLowerCase()===n.toLowerCase())return 1;if(e.code.toLowerCase().includes(n.toLowerCase()))return-1;if(t.code.toLowerCase().includes(n.toLowerCase()))return 1;switch(this.translateService.currentLang){case"ru":return e.nameRu<t.nameRu?-1:1;case"en":return e.nameEn<t.nameEn?-1:1;case"kk":return e.nameKk<t.nameKk?-1:1;default:return 0}}},{key:"countryComparator",value:function(e,t){return!0}},{key:"mapCountryLabel",value:function(e){var t;switch(this.translateService.currentLang){case"ru":default:t=e.nameRu;break;case"kk":t=e.nameKk;break;case"en":t=e.nameEn}return"".concat(e.code," - ").concat(t||e.name)}},{key:"retrieveCountries",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.currencyPaymentService.getCountries();case 2:this.countries=e.sent,this.countries$.next(this.countries);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"applyIbanRules",value:function(){var e=this,t=this.controlsStream,n=t.senderAccount,o=t.country,a=t.countryCode,i=t.contract,c=t.contractId,s=t.bank,l=t.rubNonRussiaBank,u=t.withinContract;this.subs.add(Object(O.a)([n,s,l,o,a,i,c,u,this.countries$]).subscribe((function(t){var n,o,a,i=_slicedToArray(t,3),c=i[0],s=i[1],l=i[2],u=[r.H.required],b=null===(o=null===(n=c)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.currency,m=e.form.controls.bankAccount.pristine;if(b===K.a.RUB&&e.currentCountryCode===Mt.a.RU)e.masks.bankAccount=H.a.russianAccount,u.push((function(e){var t;return function(e,t){var n=new RegExp("^[0-9]+$");return e.value&&!e.value.match(n)?{rubInvalidNumbers:!0}:e.value&&t&&!Qo(e.value)&&Ho(t)?{rubInvalidBudget:!0}:e.value&&t&&e.value.length>8&&!Qo(e.value)&&Ko(e.value)?{rubInvalid:!0}:e.value&&20!==e.value.length?{rubLength:!0}:null}(e,null===(t=s)||void 0===t?void 0:t.bic)}));else{var d=b===K.a.RUB?l:s,p=null===(a=e.countries.find((function(e){var t;return e.id===(null===(t=d)||void 0===t?void 0:t.countryId)})))||void 0===a?void 0:a.code;e.masks.bankAccount=H.a.foreignAccount,u.push((function(e){return function(e,t){var n,o,r,a=null===(n=e.value)||void 0===n?void 0:n.substring(0,2).match(/[A-Za-z]{2}/);return t&&a&&(null===(o=e.value)||void 0===o?void 0:o.substring(0,2).toUpperCase())!==(null===(r=t)||void 0===r?void 0:r.substring(0,2).toUpperCase())?{currencyMismatch:!0}:null}(e,p)})),u.push(r.H.maxLength(e.ibanMaxLength))}e.setValidation([e.form.controls.bankAccount],u),setTimeout((function(){m&&e.form.controls.bankAccount.markAsPristine()}),0)})))}},{key:"mapContractLabel",value:function(e){var t,n,o,r,a,i=this.form.getRawValue().contract;return(null===(t=e)||void 0===t?void 0:t.contractNumber)||(null===(o=null===(n=e)||void 0===n?void 0:n.contractor)||void 0===o?void 0:o.name)?"".concat(e.contractNumber," - ").concat(null===(r=e.contractor)||void 0===r?void 0:r.name):i?"".concat(i.contractNumber," - ").concat(null===(a=i.contractor)||void 0===a?void 0:a.name):""}},{key:"openForeignContractsRecipientsDictionary",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.modals.open(jt,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0}),n=this.form.getRawValue(),o=n.contract,t.componentInstance.recipients=o.recipients,e.prev=2,e.next=5,t.result;case 5:r=e.sent,this.selectContractRecipient(r),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,this,[[2,9]])})))}},{key:"selectContractRecipient",value:function(e){var t,n,o,r;if(e){var a=this.form.controls,i=a.name,c=a.country,s=a.countryCode,l=a.bankAccount,u=a.bank,b=a.cityName,m=a.fxContractRecipient,d=a.fxContractRecipientId;m.setValue(e),d.setValue(e.id),i.setValue(e.name||""),(null===(t=e.country)||void 0===t?void 0:t.code)&&!this.countries.find((function(t){var n;return t.code===(null===(n=e.country)||void 0===n?void 0:n.code)}))&&this.countries$.next([].concat(_toConsumableArray(this.countries),[e.country])),c.setValue(e.country),s.setValue((null===(n=e.country)||void 0===n?void 0:n.code)||e.countryCode),(e.cityName||e.defaultCityName)&&b.setValue(e.cityName||e.defaultCityName||""),e.iban&&l.setValue(e.iban),e.bankBic&&(u.setValue({code:e.bankBic,name:e.bankName}),null===(o=this.bankDropdown)||void 0===o||o.selectByBic(e.bankBic),null===(r=this.rubNonRussiaBankDropdown)||void 0===r||r.selectByBic(e.bankBic))}}},{key:"showContractDetails",value:function(e){e.preventDefault(),e.stopPropagation(),this.contractDetails.show()}},{key:"onContractSelect",value:function(e){var t,n,o,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var i,c,s,l,u,b,m,d,p,f;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=this.form.controls,c=i.contract,s=i.kio,l=i.contractId,a.next=6,this.currencyPaymentService.getContractById(e.id);case 6:if(u=a.sent,Object.assign(e,u),c.setValue(e),l.setValue(e.id),e.contractor.iinOrBin&&!r&&(null===(t=s)||void 0===t||t.setValue(e.contractor.iinOrBin)),b=null===(n=e.recipients)||void 0===n?void 0:n.find((function(e){return e.primary})),m=this.form.getRawValue(),d=m.fxContractRecipient,p=m.fxContractRecipientId,d||p||!b){a.next=12;break}return a.abrupt("return",void this.selectContractRecipient(b));case 12:(f=null===(o=e.recipients)||void 0===o?void 0:o.find((function(e){var t;return(null===(t=d)||void 0===t?void 0:t.id)===e.id||p===e.id})))&&(b=f),this.selectContractRecipient(b);case 14:case"end":return a.stop()}}),a,this)})))}},{key:"contractComparator",value:function(e,t){if(!e)return!0;var n=t.contractor.name.toLowerCase().includes(e.toLowerCase()),o=t.contractNumber.toLowerCase().includes(e.toLowerCase());return n||o}},{key:"onEmailOnSuccessFocus",value:function(e){this.focusEmail$.next(e.target.value)}},{key:"onSenderAccountSelect",value:function(e){e&&(this.form.controls.senderAccount.setValue(e),this.form.controls.senderAccount.markAsDirty(),this.senderAccountDropdown.hasError=!1)}},{key:"onCommissionAccountSelect",value:function(e){this.form.controls.commissionAccount.setValue(e)}},{key:"codeWordComparator",value:function(e,t){return!e||t.name.toLowerCase().includes(e.toLowerCase())||t.code.toLowerCase().includes(e.toLowerCase())}},{key:"kbkComparator",value:function(e,t){return!e||t.code.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())}},{key:"statusComparator",value:function(e,t){return!e||t.code.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())}},{key:"scrollToContracts",value:function(e){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,this.form.controls.withinContract.setValue(!0);case 3:setTimeout((function(){document.getElementById("contractGroup").scrollIntoView({behavior:"smooth"}),n.contractsSelect.focus(),n.contractsSelect.open()}),100);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onAmountPaste",value:function(e){var t,n;e.preventDefault();var o=this.form.getRawValue(),r=(e.clipboardData||window.clipboardData).getData("text"),a=this.maskService.getNumberedAmount(r);(null===(n=null===(t=o.senderAccount)||void 0===t?void 0:t.balance)||void 0===n?void 0:n.currency)===Fo&&(a=Math.trunc(a)),this.form.controls.amount.setValue(a)}},{key:"mapCodeWordLabel",value:function(e){if(e)return"".concat(e.code," - ").concat(e.name)}},{key:"listenMaxLengths",value:function(){var e=this;this.subs.add(Object(O.a)([this.isAustraliaAud$,this.isAustraliaNonAud$,this.isCountryCanada$,this.isRubNonRussia$,this.isRubToRussia$,this.controlsStream.name,this.controlsStream.purpose,this.purposeMessage$,this.controlsStream.countryCode]).subscribe((function(t){var n,o,a=_slicedToArray(t,8),i=a[0],c=a[1],s=a[2],l=a[3],u=a[4],b=a[5],m=a[6],d=a[7];if(u=u||"",b=b||"",m=m||"",i?(e.nameMaxLength=35,e.cityMaxLength=26):c?(e.nameMaxLength=35,e.cityMaxLength=31):s?(e.nameMaxLength=35,e.cityMaxLength=32):(e.nameMaxLength=103,e.cityMaxLength=32),l||s){e.rules.purposeLength=203;var p=u.match(Bo);(null===(n=p)||void 0===n?void 0:n.length)>0&&(e.nameMaxLength-=2*p.length);var f=b.match(Bo);(null===(o=f)||void 0===o?void 0:o.length)>0&&(e.rules.purposeLength-=2*f.length)}else e.rules.purposeLength=d===Mt.a.CN?300:335;e.setValidation([e.form.controls.purpose],[r.H.maxLength(d===Mt.a.CN?e.rules.purposeLength:e.rules.purposeLength-m.length)],!1)})))}},{key:"listenAudToAustralia",value:function(){var e=this;this.subs.add(this.isAustraliaAud$.subscribe((function(t){var n=e.form.controls,o=n.audIndex,a=n.audState,i=n.audStreet,c=n.audBuildingNumber;t?e.setValidation([o,a,i,c],[r.H.required]):e.clearValidation([o,a,i,c])})))}},{key:"listenAudNonAustralia",value:function(){var e=this;this.subs.add(this.isAustraliaNonAud$.subscribe((function(t){var n=e.form.controls.audAddress;t?e.setValidation([n],[r.H.required]):e.clearValidation([n])})))}},{key:"listenCountryIsCanada",value:function(){var e=this;this.subs.add(this.isCountryCanada$.subscribe((function(t){var n=e.form.controls.canAddress;t?e.setValidation([n],[r.H.required]):e.clearValidation([n])})))}},{key:"listenCompanyType",value:function(){var e=this;this.subs.add(this.companyService.refresh$.subscribe((function(t){e.companyService.currentCompany.type===G.a.CORPORATE?(e.agreementText="CURRENCY_PAYMENT.AGREEMENT.CORPORATE",e.isForeignContractDisabled&&(e.isContractsAgreementShown=!1),e.isContractsDescriptionShown=!0):(e.agreementText="CURRENCY_PAYMENT.AGREEMENT.ENTREPRENEUR",e.isForeignContractDisabled&&(e.isContractsAgreementShown=!0),e.isContractsDescriptionShown=!1)})))}},{key:"retrieveKnps",value:function(){var e=this;this.knp$=this.combineKNP([function(t){return e.dictionaries.selectByPaymentType(t,{type:B.j.FOREIGN,sortFavourite:!1})}])}},{key:"retrieveAccounts",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isAccountsLoading=!0,e.prev=1,e.next=4,this.accountsService.getAccounts(this.companyService.currentId);case 4:t=e.sent,this.accounts=t.filter((function(e){return e.balance.currency&&e.accountType===l.a.ACCOUNT})).sort(this.sortAccounts),this.selectDefaultSenderAccount(),this.listenCommissionAccount(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,this.isAccountsLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,8,10,13]])})))}},{key:"selectDefaultSenderAccount",value:function(){try{1===this.senderAccountsList.length&&(this.senderAccountDropdown.selectAccount(this.senderAccountsList[0]),this.onSenderAccountSelect(this.senderAccountsList[0]),this.senderAccountDropdown.isDisabled=!0)}catch(e){}}},{key:"retrieveContracts",value:function(){var e,t;return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.isContractsLoading=!0,n.prev=1,n.next=4,this.currencyPaymentService.getContracts();case 4:o=n.sent,this.contracts=o.filter((function(e){return e.status===B.c.REGED})),r=null===(t=null===(e=this.formValue.senderAccount)||void 0===e?void 0:e.balance)||void 0===t?void 0:t.currency,this.filteredContracts=r?this.contracts.filter((function(e){return e.permittedCurrencies.includes(r)})):_toConsumableArray(this.contracts),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(1);case 12:return n.prev=12,this.isContractsLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,this,[[1,10,12,15]])})))}},{key:"retrieveKbks",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isKbkLoading=!0,e.prev=1,e.next=4,this.currencyPaymentService.getKbkList();case 4:this.kbkList=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,this.isKbkLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,7,9,12]])})))}},{key:"retrieveStatuses",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isStatusesLoading=!0,e.prev=1,e.next=4,this.currencyPaymentService.getStatuses();case 4:this.statuses=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,this.isStatusesLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,7,9,12]])})))}},{key:"retrieveCodeWords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentCountryCode;return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isCodeWordsLoading){t.next=16;break}if(this.isCodeWordsLoading=!0,t.prev=2,!e){t.next=9;break}return t.next=6,this.currencyPaymentService.getCodeWords(e);case 6:this.codeWords=t.sent,n=this.form.controls.codeWord.value,this.codeWords.find((function(e){return n.code===e.code&&n.countryCode===e.countryCode}))||this.form.controls.codeWord.setValue("");case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(2);case 13:return t.prev=13,this.isCodeWordsLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[2,11,13,16]])})))}},{key:"listenCountrySelect",value:function(){var e=this,t=this.controlsStream,n=t.countryCode,o=t.senderAccount,a=t.country;this.subs.add(Object(O.a)([n,o,a]).pipe(Object(M.a)()).subscribe((function(t){var n,o,a=_slicedToArray(t,2),i=a[0],c=a[1];i&&(e.form.controls.bankLabel.setValue(""),e.form.controls.bank.setValue(null),(null===(o=null===(n=c)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.currency)===K.a.RUB||e.hasDefaultCity?(e.isCityShown=!1,e.clearValidation([e.form.controls.cityName])):(e.isCityShown=!0,e.setValidation([e.form.controls.cityName],[r.H.required])))})))}},{key:"listenContractsSwitchDescription",value:function(){var e=this;this.subs.add(this.controlsStream.senderAccount.subscribe((function(t){var n,o,r,a,i,c;e.filteredContracts=e.contracts.filter((function(e){var n,o,r;return null===(n=e.permittedCurrencies)||void 0===n?void 0:n.includes(null===(r=null===(o=t)||void 0===o?void 0:o.balance)||void 0===r?void 0:r.currency)})),(null===(o=null===(n=e.formValue.contract)||void 0===n?void 0:n.amount)||void 0===o?void 0:o.currency)!==(null===(a=null===(r=t)||void 0===r?void 0:r.balance)||void 0===a?void 0:a.currency)&&(e.form.controls.contract.setValue(null),e.form.controls.contractId.setValue("")),e.updateContractsSwitchDescriptionParams((null===(c=null===(i=t)||void 0===i?void 0:i.balance)||void 0===c?void 0:c.currency)||null)})))}},{key:"listenIsRussianBudget",value:function(){var e=this;this.subs.add(Object(O.a)([this.controlsStream.senderAccount,this.controlsStream.bankAccount,this.controlsStream.bank,this.controlsStream.withinContract,this.controlsStream.contract,this.controlsStream.country]).subscribe((function(t){var n,o,r,a=_slicedToArray(t,3),i=a[0],c=a[1],s=a[2],l=Qo(c)&&Ho(null===(n=s)||void 0===n?void 0:n.bic);e.currentCountryCode===Mt.a.RU&&(null===(r=null===(o=i)||void 0===o?void 0:o.balance)||void 0===r?void 0:r.currency)===K.a.RUB&&l&&!e.featureFlagsService.isDisabled(q.a.RUB_BUDGET_PAYMENT)?(e.isRussianBudget$.next(!0),e.form.controls.isRussianBudget.setValue(!0)):(e.isRussianBudget$.next(!1),e.form.controls.isRussianBudget.setValue(!1))})))}},{key:"listenWithinContractSwitch",value:function(){var e=this,t=this.controlsStream,n=t.withinContract,o=t.senderAccount,a=t.contract,i=t.country;this.subs.add(Object(O.a)([n,o,a,i]).pipe(Object(M.a)()).subscribe((function(t){var n,o,a,i=_slicedToArray(t,4),c=i[0],s=i[1],l=i[2];i[3],e.withinContract=c;var u=null===(o=null===(n=s)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.currency,b=e.form.controls,m=[b.bank,b.bankLabel];if(e.currentCountryCode===Mt.a.US?(e.cityPlaceholder$.next("CURRENCY_PAYMENT.RECIPIENT.CITY_STATE"),e.clearValidation([e.form.controls.bankLabel,e.form.controls.bank])):e.cityPlaceholder$.next(e.formValue.isRubNonRussia?"CURRENCY_PAYMENT.RECIPIENT.CITY_BANK":"CURRENCY_PAYMENT.RECIPIENT.CITY"),c){var d=u===K.a.RUB;!(null===(a=l)||void 0===a?void 0:a.contractor.iinOrBin)&&d?e.isKioEnabled$.next(!0):e.isKioEnabled$.next(!1),e.clearValidation(m),e.setValidation([e.form.controls.contractId],[function(t){return e.currentCountryCode!==Mt.a.CN&&u===K.a.CNY?{cnyOnlyToChina:!0}:null},r.H.required],!1);var p=u===K.a.AUD,f=e.currentCountryCode===Mt.a.CA,h=e.currentCountryCode===Mt.a.AU;e.isAustraliaAud$.next(p&&h),e.isAustraliaNonAud$.next(!p&&h),e.isCountryCanada$.next(f),e.currentCountryCode&&u===K.a.RUB&&(e.rubNonRussiaWithinContractCountry=l.contractor.country.code,e.applyRubPaymentRules(e.rubNonRussiaWithinContractCountry))}else{e.form.controls.contract.setValue(null,{emitEvent:!1}),e.form.controls.contractId.setValue(null),e.clearValidation([e.form.controls.contractId]),e.setValidation(m,[r.H.required]);var v=u===K.a.AUD,y=e.currentCountryCode===Mt.a.AU,g=e.currentCountryCode===Mt.a.CA;e.isAustraliaAud$.next(v&&y),e.isAustraliaNonAud$.next(!v&&y),e.isCountryCanada$.next(g),u===K.a.RUB?e.applyRubPaymentRules(e.currentCountryCode):u===K.a.CNY?(e.form.controls.codeWord.setValue(""),e.applyChinaPaymentRules(e.currentCountryCode)):e.applyDefaultPaymentRules()}})))}},{key:"listenCodeWordEnabling",value:function(){var e=this,t=this.controlsStream,n=t.withinContract,o=t.contract,r=t.country;this.subs.add(Object(O.a)([n,o,r]).subscribe((function(t){e.currentCountryCode===Mt.a.AE?(e.isCodeWordEnabled$.next(!0),e.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD_AE")):e.currentCountryCode===Mt.a.CN?(e.isCodeWordEnabled$.next(!0),e.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD")):(e.isCodeWordEnabled$.next(!1),e.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD"))})))}},{key:"listenContractSelect",value:function(){var e=this;this.subs.add(this.controlsStream.contractId.pipe(Object(M.a)()).subscribe((function(t){e.isContractSelected=!!t})))}},{key:"updateContractsSwitchDescriptionParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K.a.USD;return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||e===K.a.USD){t.next=18;break}return this.isContractsDescriptionLoading=!0,n={currencyFrom:e,currencyTo:K.a.USD,sum:{amount:1e4,currency:K.a.USD}},t.prev=3,t.next=6,this.conversionService.getRate(n);case 6:o=t.sent,this.contractMaxAmount={amount:o.calculatedSum,currency:e},t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),this.contractMaxAmount={amount:1e4,currency:K.a.USD};case 13:return t.prev=13,this.isContractsDescriptionLoading=!1,t.finish(13);case 16:t.next=19;break;case 18:this.contractMaxAmount={amount:1e4,currency:K.a.USD};case 19:r=(r=this.maskService.getMaskedAmount(this.contractMaxAmount.amount)).split(",").filter((function(e){return parseInt(e,10)>0})).map((function(e,t){return 1===t&&e.length<2?"".concat(e,"0"):e})).join(","),a=this.curSymbolPipe.transform(this.contractMaxAmount.currency),this.contractsSwitchDescriptionParams={amount:"".concat(r," ").concat(a)};case 23:case"end":return t.stop()}}),t,this,[[3,10,13,16]])})))}},{key:"openForeignRecipientsDictionary",value:function(){var e,t;return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,r,a,i,c,s,l,u,b,m,d,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=this.modals.open(At,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0}),n.prev=1,n.next=4,o.result;case 4:r=n.sent,a=this.form.controls,i=a.countryCode,c=a.cityName,s=a.name,l=a.bankAccount,u=a.kbeCode,b=a.bank,m=a.kio,d=r.recipient,p=r.account,i.setValue(d.countryCode),c.setValue(d.cityName||""),s.setValue(d.name||""),l.setValue(p.iban),u.setValue(d.kbe.code),b.setValue({bic:p.bic,name:p.bankName}),this.bankDropdown.selectByBic(p.bic),null===(e=this.rubNonRussiaBankDropdown)||void 0===e||e.selectByBic(p.bic),null===(t=m)||void 0===t||t.setValue(d.iinOrBin),n.next=20;break;case 18:n.prev=18,n.t0=n.catch(1);case 20:case"end":return n.stop()}}),n,this,[[1,18]])})))}},{key:"applyAmountValidation",value:function(){var e=this;this.subs.add(Object(O.a)([this.controlsStream.senderAccount,this.controlsStream.contractId]).subscribe((function(t){var n,o,a=_slicedToArray(t,2),i=a[0],c=a[1],s=[r.H.required,r.H.min(e.paymentsService.rules.minAmount),r.H.max(e.paymentsService.rules.maxAmount),function(e){var t;return 0===(null===(t=e)||void 0===t?void 0:t.value)?{cantBeZero:!0}:null}];(null===(o=null===(n=i)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.currency)!==e.contractMaxAmount.currency||c||s.push((function(t){var n=e.maskService.getNumberedAmount(t.value);if(!e.isForeignContractDisabled&&!e.withinContract)return n>e.contractMaxAmount.amount?-1!==$o.indexOf(e.formValue.knp)?null:{mustIncludeContract:!0}:null})),e.setValidation([e.form.controls.amount],s,!1)})))}},{key:"setValidation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.forEach((function(e){var o=e.pristine;e.setValidators(t),e.updateValueAndValidity({emitEvent:n}),setTimeout((function(){o&&e.markAsPristine()}),0)}))}},{key:"clearValidation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.forEach((function(e){var n=e.pristine;e.clearValidators(),e.updateValueAndValidity({emitEvent:t}),setTimeout((function(){n&&e.markAsPristine()}),0)}))}},{key:"listenPayComission",value:function(){var e=this;this.subs.add(this.controlsStream.payComission.pipe(Object(M.a)()).subscribe((function(t){e.isOurComission=t})))}},{key:"listenIntermediaryBankSwitchable",value:function(){var e=this,t=this.controlsStream,n=t.senderAccount,o=t.country,r=t.bank;this.subs.add(Object(O.a)([n,o,r]).subscribe((function(t){var n,o,r,a=_slicedToArray(t,3),i=a[0],c=(a[1],a[2]),s=null===(o=null===(n=i)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.currency,l=null===(r=c)||void 0===r?void 0:r.bic;(s===K.a.EUR||s===K.a.USD&&e.currentCountryCode!==Mt.a.US)&&l!==Lo.JYSAN?(e.isIntermediaryBankSwitchable=!0,e.setValidation([e.form.controls.intermediaryBankLabel],[function(t){var n=e.form.getRawValue();return t.value&&t.value===n.bankLabel?{equalBanks:!0}:null}])):(e.clearValidation([e.form.controls.intermediaryBankLabel]),e.isIntermediaryBankSwitchable=!1)})))}},{key:"listenIntermediaryBankSwitch",value:function(){var e=this;this.subs.add(this.controlsStream.hasIntermediaryBank.pipe(Object(M.a)()).subscribe((function(t){e.hasIntermediaryBank=t,t||(e.form.controls.intermediaryBankLabel.setValue(""),e.form.controls.intermediaryBank.setValue(null))})))}},{key:"listenEmailSearch",value:function(){var e=this,t=this.form.controls.emailOnSuccess;this.subs.add(this.controlsStream.notify.pipe(Object(_.a)(100)).subscribe((function(e){return e?t.enable():t.disable()}))),this.search=function(t){return Object(O.a)([e.prevEmails$.pipe(Object(A.a)((function(e){return e.map((function(e){return e.email}))}))),t.pipe(Object(_.a)(200),Object(M.a)(),Object(x.a)("")),e.focusEmail$]).pipe(Object(A.a)((function(e){var t=_slicedToArray(e,3),n=t[0],o=t[1];return t[2],o?n.filter((function(e){return e.toLowerCase().indexOf(o.toLowerCase())>-1})).slice(0,3):n.slice(0,3)})))}}},{key:"setAutoNumeration",value:function(){var e=this;this.subs.add(this.paymentsService.foreignPaymentNumber$.pipe(Object(w.a)(this.controlsStream.number)).subscribe((function(t){var n=_slicedToArray(t,2),o=n[0];n[1]||e.form.controls.number.setValue(o)})))}},{key:"listenCommission",value:function(){var e=this,t=this.controlsStream,n=t.senderAccount,o=t.date,r=t.commissionAccount,a=t.amount,i=t.payComission;Object(O.a)([n,o,r,a,i,this.workingHours$.asObservable()]).pipe(Object(_.a)(300)).subscribe((function(t){e.updateComission()}))}},{key:"updateComission",value:function(){var e,t,n,o,r,a,i,c,s,l,u,b;return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function m(){var d,p,f,v,y,g,A,T,R,C,E;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(d=this.form.controls,p=d.senderAccount,f=d.date,v=d.commissionAccount,y=d.amount,g=d.payComission,A=!0,[p,f,v,y,g].forEach((function(e){e.invalid&&(A=!1)})),A){m.next=4;break}return m.abrupt("return");case 4:return T=this.form.getRawValue(),m.prev=5,R=T.date?Object(h.ngbStructToISO)(T.date):null,C=this.maskService.getNumberedAmount(T.amount),E={companyId:this.companyService.currentId,category:B.h.FOREIGN,type:B.j.FOREIGN,details:{valueDate:R,paymentAmount:{amount:C,currency:null===(t=null===(e=T.senderAccount)||void 0===e?void 0:e.balance)||void 0===t?void 0:t.currency},foreignPaymentDetails:{type:T.payComission?"OUR":"SHA"},urgent:!1,payerIban:T.senderAccount.iban}},m.next=9,this.api.getCommissionWithCurrency(E);case 9:this.commissionBalance=m.sent,this.form.controls.comission.setValue((null===(n=this.commissionBalance)||void 0===n?void 0:n.amount)||0),this.form.controls.comissionCurrency.setValue(this.commissionBalance.currency),this.comissionMessage=(null===(r=null===(o=T.commissionAccount)||void 0===o?void 0:o.balance)||void 0===r?void 0:r.amount)<(null===(a=this.commissionBalance)||void 0===a?void 0:a.amount)&&(null===(c=null===(i=T.commissionAccount)||void 0===i?void 0:i.balance)||void 0===c?void 0:c.currency)===(null===(s=this.commissionBalance)||void 0===s?void 0:s.currency)?this.mapCommissionMessage({amount:(null===(l=this.commissionBalance)||void 0===l?void 0:l.amount)-(null===(b=null===(u=T.commissionAccount)||void 0===u?void 0:u.balance)||void 0===b?void 0:b.amount),currency:this.commissionBalance.currency}):Object(j.a)(null),m.next=18;break;case 15:m.prev=15,m.t0=m.catch(5),this.commission$.next(null),this.comissionMessage=null;case 18:case"end":return m.stop()}}),m,this,[[5,15]])})))}},{key:"mapCommissionMessage",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingHours$.value,o=this.form.getRawValue().date,r=this.maskService.formatAmount(e.amount),a=this.curSymbolPipe.transform(e.currency),i=(null===(t=n)||void 0===t?void 0:t.endTime)||h.edgeTimeLabel;return this.translateService.get(o?"CURRENCY_PAYMENT.MESSAGES.COMMISSION.WITH_DATE":"CURRENCY_PAYMENT.MESSAGES.COMMISSION.DEFAULT",{amount:"".concat(r," ").concat(a),edge:"".concat(Object(h.formatNgbDate)(o,this.translateService.currentLang)," ").concat(i)})}},{key:"mapAmountMessage",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingHours$.value,o=this.form.getRawValue().date,r=this.maskService.formatAmount(e.amount),a=this.curSymbolPipe.transform(e.currency),i=(null===(t=n)||void 0===t?void 0:t.endTime)||h.edgeTimeLabel;return this.translateService.get(o?"CURRENCY_PAYMENT.MESSAGES.AMOUNT.WITH_DATE":"CURRENCY_PAYMENT.MESSAGES.AMOUNT.DEFAULT",{amount:"".concat(r," ").concat(a),edge:"".concat(Object(h.formatNgbDate)(o,this.translateService.currentLang)," ").concat(i)})}},{key:"sortAccounts",value:function(e,t){return e.balance.currency===t.balance.currency?0:e.balance.currency===K.a.USD?-1:1}},{key:"listenAmount",value:function(){var e=this,t=this.form.controls.amount;this.subs.add(this.controlsStream.senderAccount.pipe(Object(M.a)(),Object(A.a)((function(n){var o,r,a=null===(r=null===(o=n)||void 0===o?void 0:o.balance)||void 0===r?void 0:r.currency,i=t.pristine;return e.amountSuffix=" ".concat(e.curSymbolPipe.transform(a)||a||e.curSymbolPipe.transform(K.a.KZT)),a===Fo?(e.amountMask="separator.0",e.amountPlaceholder="0"):(e.amountMask="separator.2",e.amountPlaceholder="0,00"),i})),Object(D.a)(0)).subscribe((function(e){e&&e!==t.pristine&&t.markAsPristine()})))}},{key:"listenAmountMessage",value:function(){var e=this,t=this.controlsStream,n=t.senderAccount,o=t.date,r=t.amount,a=t.contractId;Object(O.a)([n,o,r,a,this.workingHours$.asObservable()]).pipe(Object(M.a)()).subscribe((function(t){var n,o,r,a,i=_slicedToArray(t,5),c=i[0],s=(i[1],i[2]),l=(i[3],i[4],e.maskService.getNumberedAmount(s)),u=(null===(o=null===(n=c)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.amount)<l&&!e.shouldBindContract;e.amountMessage=u?e.mapAmountMessage({amount:l-(null===(a=null===(r=c)||void 0===r?void 0:r.balance)||void 0===a?void 0:a.amount),currency:c.balance.currency}):Object(j.a)(null)}))}},{key:"listenCommissionAccount",value:function(){var e=this;this.subs.add(this.controlsStream.senderAccount.pipe(Object(M.a)()).subscribe((function(t){var n,o,r,a,i,c,s,l,u=e.form.getRawValue().commissionAccount;if(u&&(null===(o=null===(n=u)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.currency)!=(null===(a=null===(r=t)||void 0===r?void 0:r.balance)||void 0===a?void 0:a.currency)&&(e.commissionAccountDropdown.clearSelected(),e.onCommissionAccountSelect(null)),1===e.commissionAccountsList.length){var b=e.commissionAccountsList[0];null===(i=e.commissionAccountDropdown)||void 0===i||i.selectAccount(b),e.onCommissionAccountSelect(b),e.isCommissionAccountSelectable=!1}else e.isCommissionAccountSelectable=!0;var m=e.commissionAccountsList.filter((function(e){return e.balance.currency===K.a.KZT}));1===(null===(c=m)||void 0===c?void 0:c.length)?(null===(s=e.commissionAccountDropdown)||void 0===s||s.selectAccount(m[0]),e.onCommissionAccountSelect(m[0])):0===m.length&&t&&(null===(l=e.commissionAccountDropdown)||void 0===l||l.selectAccount(t),e.onCommissionAccountSelect(t))})))}},{key:"saveToDraft",value:function(e){var t,n=this;this.formDirective.submitted=!0,this.formDirective.form.markAsPristine();var o=this.paymentsService.foreignPaymentNumber,r=e||Object.assign({},this.form.value);o.entity=null,this.processingPayment$.next(Object.assign({id:this.paymentId},r)),this.pipeline.saveToDrafts(r,{paymentId:this.paymentId,type:B.j.FOREIGN,commission:null===(t=this.commissionBalance)||void 0===t?void 0:t.amount,userPurpose:this.form.value.purpose,category:B.h.FOREIGN}).then((function(e){e.id!==n.paymentId&&(e&&(n.restoredData={status:e.status,signatures:e.signatures,companyId:e.companyId}),n.router.navigate([n.route.snapshot.params.paymentId?"../":".",e.id],{relativeTo:n.route,state:{silent:!0,resolvedPayment:n.currencyPaymentService.mapForm(n.form.getRawValue())}}))})).catch((function(e){o.entity||o.fetching||(o.entity=r.number)})).finally((function(){n.processingPayment$.next(null)}))}},{key:"listenRouterParams",value:function(){var e=this;this.subs.add(this.route.params.pipe(Object(A.a)((function(t){return{state:window.history.state,params:t,route:e.route}})),Object(_.a)(0),Object(Y.a)((function(t){var n,o,r,a=t.params,i=t.state;if(null===(n=i)||void 0===n?void 0:n.silent)return e.restoredData.status===B.i.DRAFT?e.paymentsService.rootTitle=Mt.d.EDIT_DRAFT:e.restoredData.status===B.i.CREATED&&(e.paymentsService.rootTitle=Mt.d.EDIT_PAYMENT),P.a;if(null===(o=i)||void 0===o?void 0:o.resolvedPayment)return Object(j.a)(i.resolvedPayment);if(a.paymentId||(null===(r=i)||void 0===r?void 0:r.repeatPaymentId)){var c=a.paymentId||i.repeatPaymentId;return Object(W.a)(e.api.getPaymentById(c)).pipe(Object(U.a)((function(t){return e.router.navigate([e.router.url.replace("/"+c,"")]),P.a})))}return e.setAutoNumeration(),e.paymentsService.rootTitle=Mt.d.NEW,P.a}))).subscribe((function(t){e.restorePayment(t)})))}},{key:"restorePayment",value:function(e){var t=this;this.subs.add(Object(O.a)([this.knpStore.fetched$]).pipe(Object(L.a)((function(e){return e.every((function(e){return e}))})),Object(F.a)((function(){var n,o;try{o=t.pipeline.flattenPaymentToModel(e)}catch(r){o={}}t.restoredData={companyId:e.companyId,status:null===(n=e.status)||void 0===n?void 0:n.code,signatures:e.signatures},e.isNewPayment||e.id&&!t.paymentId?(o.number="",o.date=null,t.restoredData.status=null,t.paymentsService.rootTitle=Mt.d.NEW):t.paymentsService.rootTitle=t.restoredData.status===B.i.DRAFT?Mt.d.EDIT_DRAFT:Mt.d.EDIT_PAYMENT,o.emailOnSuccess&&(o.notify=!0),t.form.patchValue(Object.assign({},o)),t.restoreAsyncData(e),t.isImported=e.imported,o.number||t.setAutoNumeration()})),Object(_.a)(10),Object($.a)(1)).subscribe())}},{key:"sendPayment",value:function(e){var t,n,o=this;this.formDirective.form.markAsPristine();var r=this.paymentsService.paymentNumber,a=e||Object.assign({},this.form.value);return this.processingPayment$.next(a),this.paymentsService.paymentNumber.entity=null,this.pipeline.processPayment({paymentId:this.paymentId,total:a.amount,commission:null===(t=this.commissionBalance)||void 0===t?void 0:t.amount,status:null===(n=this.restoredData)||void 0===n?void 0:n.status,userPurpose:this.form.value.purpose,rawBody:a}).then((function(e){e?o.restoredData={status:e.status.code,signatures:e.signatures,companyId:e.companyId}:(o.restoredData=null,r.entity||r.fetching||(r.entity=a.number))})).catch((function(e){})).finally((function(){o.processingPayment$.next(null)}))}},{key:"onSubmit",value:function(e){e&&e.preventDefault(),this.form.valid?this.processPayment():this.form.markAllAsTouched()}},{key:"processPayment",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.form.getRawValue(),this.processingPayment$.next(t),e.prev=2,e.next=5,this.api.checkWorkingTime(t.date);case 5:return n=e.sent,e.next=8,this.api.checkAmountLimit(t.amount,this.paymentType);case 8:o=e.sent,n&&o?this.sendPayment():this.processingPayment$.next(null),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.processingPayment$.next(null);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})))}},{key:"openContractsAddingModal",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(e=t)||void 0===e||e.preventDefault(),this.contractsModalsService.showAddContractModal(!1)}},{key:"openKnpDictionary",value:function(e,t){var n=this;e.close(),e.blur(),setTimeout((function(){n.modals.open(me,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then((function(e){n.form.controls.knp.patchValue(e),n.form.controls.knpObject.patchValue(e)})).catch((function(){}))}),0)}},{key:"restoreAsyncData",value:function(e){var t,n,o,a,i,c,s,l,u,b,m,d,p,f,h,v,y;return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function g(){var A,T,R,C=this;return regeneratorRuntime.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.retrieveAccounts();case 2:if(this.senderAccountDropdown.selectByIban(null===(t=e.details)||void 0===t?void 0:t.payerIban),A=null===(a=null===(o=null===(n=e)||void 0===n?void 0:n.paymentRecipient)||void 0===o?void 0:o.recipientAccount)||void 0===a?void 0:a.bic,T=null===(s=null===(c=null===(i=e)||void 0===i?void 0:i.details)||void 0===c?void 0:c.foreignPaymentDetails)||void 0===s?void 0:s.intermediaryBankBic,R=null===(b=null===(u=null===(l=e)||void 0===l?void 0:l.details)||void 0===u?void 0:u.foreignPaymentDetails)||void 0===b?void 0:b.intermediaryBankIban,(null===(m=this.formValue.senderAccount)||void 0===m?void 0:m.balance.currency)===K.a.RUB&&this.currentCountryCode!==Mt.a.RU&&this.isRubNonRussia$.next(!0),A&&setTimeout((function(){var e,t;C.formValue.isRubNonRussia?null===(e=C.rubNonRussiaBankDropdown)||void 0===e||e.selectByBic(A):null===(t=C.bankDropdown)||void 0===t||t.selectByBic(A)}),100),T&&setTimeout((function(){var e;C.formValue.isRubNonRussia?C.rubNonRussiaCorrespondentBankDropdown.selectByBic(T):null===(e=C.intermediaryBankDropdown)||void 0===e||e.selectByBic(T)}),100),R&&this.formValue.isRubNonRussia&&this.form.controls.rubNonRussiaCorrespondentIban.setValue(R),this.withinContract&&this.onContractSelect(this.formValue.contract,!0),g.t0=null===(d=e.details)||void 0===d?void 0:d.foreignPaymentDetails.codeWord,!g.t0){g.next=14;break}return g.next=13,this.retrieveCodeWords();case 13:this.form.controls.codeWord.setValue(e.details.foreignPaymentDetails.codeWord);case 14:this.commissionAccountDropdown.selectByIban(e.details.foreignPaymentDetails.commissionWithdrawalIban),this.hasDefaultCity=!!(null===(f=null===(p=e.paymentRecipient)||void 0===p?void 0:p.country)||void 0===f?void 0:f.defaultCityName),(null===(y=null===(v=null===(h=e)||void 0===h?void 0:h.details)||void 0===v?void 0:v.paymentAmount)||void 0===y?void 0:y.currency)===K.a.RUB||this.hasDefaultCity?(this.isCityShown=!1,this.clearValidation([this.form.controls.cityName])):(this.isCityShown=!0,this.setValidation([this.form.controls.cityName],[r.H.required]));case 17:case"end":return g.stop()}}),g,this)})))}},{key:"listenPurposeMessageStream",value:function(){this.subs.add(Object(O.a)([this.purposeMessage$,this.controlsStream.purpose,this.controlsStream.countryCode]).pipe(Object(A.a)((function(e){var t=_slicedToArray(e,3),n=t[0],o=t[1];return t[2]===Mt.a.CN?(o||"").length:(n||"").length+(o||"").length}))).subscribe(this.purposeLength$)),this.validatePurpose()}},{key:"listenIsRussianTaxpayer",value:function(){var e=this;this.subs.add(this.controlsStream.isRussianTaxPayer.subscribe((function(t){t?(e.isRussianTaxpayer=!0,e.setValidation([e.form.controls.payerInn],[r.H.required,Go])):(e.isRussianTaxpayer=!1,e.clearValidation([e.form.controls.payerInn]))})))}},{key:"listenHasRussianBudgetExtras",value:function(){var e=this;this.subs.add(this.controlsStream.hasRussianBudgetExtras.subscribe((function(t){e.hasRussianBudgetExtras=!!t})))}},{key:"listenKvo",value:function(){var e=this;this.subs.add(this.isKvoEnabled$.pipe(Object(M.a)()).subscribe((function(t){t?e.setValidation([e.form.controls.kvo],[r.H.required]):e.clearValidation([e.form.controls.kvo])})))}},{key:"listenPurpose",value:function(){var e=this;this.subs.add(Object(O.a)([this.isKvoEnabled$.pipe(Object(M.a)()),this.controlsStream.kvo.pipe(Object(M.a)()),this.controlsStream.isRubNonRussia.pipe(Object(M.a)()),this.controlsStream.name.pipe(Object(M.a)()),this.controlsStream.withinContract.pipe(Object(M.a)()),this.controlsStream.bankAccount,this.controlsStream.country,this.controlsStream.countryCode,this.controlsStream.codeWord]).subscribe((function(t){var n,o=_slicedToArray(t,9),r=o[0],a=o[1],i=o[2],c=o[3],s=o[4],l=o[5],u=(o[6],o[7]),b=o[8],m="";r&&(m+="'(VO".concat(a||"",")'")),i&&!s&&(m+=" \u0434\u043b\u044f ".concat(c||""," \u0441\u0447\u0451\u0442 '").concat(l||"","'")),u===Mt.a.CN&&(m+="//".concat((null===(n=b)||void 0===n?void 0:n.code)||"")),e.purposeMessage$.next(m)})))}},{key:"listenKio",value:function(){var e=this;this.subs.add(Object(O.a)([this.isKioEnabled$,this.isRussianBudget$]).pipe(Object(M.a)()).subscribe((function(t){var n,o=_slicedToArray(t,2),a=o[0],i=o[1];a?(n=i?[Go,r.H.required]:[Go],e.setValidation([e.form.controls.kio],n)):e.clearValidation([e.form.controls.kio])})))}},{key:"listenCodeWordsList",value:function(){var e=this,t=this.controlsStream,n=t.country,o=t.countryCode,r=t.contract,a=t.withinContract;this.subs.add(Object(O.a)([n,o,r,a]).subscribe((function(t){e.retrieveCodeWords()})))}},{key:"listenCodeWord",value:function(){var e=this;this.subs.add(this.isCodeWordEnabled$.pipe(Object(M.a)()).subscribe((function(t){t?e.setValidation([e.form.controls.codeWord],[r.H.required]):e.clearValidation([e.form.controls.codeWord])})))}},{key:"listenRubToNonRussia",value:function(){var e=this;this.subs.add(Object(O.a)([this.isRussianBudget$,this.isRubToRussia$,this.isRubNonRussia$,this.controlsStream.senderAccount,this.controlsStream.contract,this.controlsStream.withinContract,this.controlsStream.bankAccount,this.controlsStream.bank]).subscribe((function(t){var n,o=_slicedToArray(t,8),a=(o[0],o[1],o[2]),i=o[3],c=o[4],s=o[5],l=o[6],u=o[7];e.form.controls.isRubNonRussia.setValue(a);var b=null===(n=c)||void 0===n?void 0:n.contractor.bankCountryCode;a?(b&&b===Mt.a.RU?setTimeout((function(){e.rubNonRussiaCorrespondentBankDropdown.selectByBic(c.contractor.bank.code)}),100):b&&b!==Mt.a.RU&&setTimeout((function(){var t;e.rubNonRussiaBankDropdown.selectByBic(null===(t=e.formValue.contract)||void 0===t?void 0:t.contractor.bank.code)}),100),e.clearValidation([e.form.controls.bank,e.form.controls.bankLabel],!1),e.setValidation([e.form.controls.rubNonRussiaCorrespondentBankLabel],[r.H.required]),e.setValidation([e.form.controls.rubNonRussiaCorrespondentIban],[r.H.required,qo])):(s?e.clearValidation([e.form.controls.bank,e.form.controls.bankLabel],!1):(e.setValidation([e.form.controls.bank],[r.H.required],!1),e.setValidation([e.form.controls.bankLabel],[r.H.required,function(t){var n,o,r,a,c,s;return e.currentCountryCode===Mt.a.RU&&(null===(o=null===(n=i)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.currency)===K.a.RUB&&Qo(l)&&Ho(null===(r=u)||void 0===r?void 0:r.bic)&&e.isRussianBudgetDisabled?{rubBudgetDisabled:!0}:e.currentCountryCode===Mt.a.RU&&(null===(c=null===(a=i)||void 0===a?void 0:a.balance)||void 0===c?void 0:c.currency)===K.a.RUB&&Qo(l)&&!Ho(null===(s=u)||void 0===s?void 0:s.bic)?{rubBudgetWrongBic:!0}:null}])),e.clearValidation([e.form.controls.rubNonRussiaCorrespondentBankLabel,e.form.controls.rubNonRussiaCorrespondentIban]))})))}},{key:"listenRubNonRussiaCorrespondentBank",value:function(){var e=this;this.subs.add(this.controlsStream.rubNonRussiaBank.subscribe((function(t){var n;(null===(n=t)||void 0===n?void 0:n.cityName)&&e.form.controls.cityName.setValue(t.cityName)})))}},{key:"applyRubPaymentRules",value:function(e){e&&(this.applyRubPurposeRules(),e===Mt.a.RU?(this.isRubNonRussia$.next(!1),this.isRubToRussia$.next(!0),this.applyRubToRussiaKvoAndKioRules(),this.applyRubToRussiaPayCommissionRules()):(this.isRubNonRussia$.next(!0),this.isRubToRussia$.next(!1),this.applyRubToNonRussiaCorrespondentRules(),this.applyRubToNonRussiaKvoAndKioRules()))}},{key:"applyRubPurposeRules",value:function(){this.masks.purpose=H.a.foreignCyrillic}},{key:"applyRubToRussiaKvoAndKioRules",value:function(){this.isKvoEnabled$.next(!0),this.isKioEnabled$.next(!0),this.isKppEnabled$.next(!0)}},{key:"applyRubToRussiaPayCommissionRules",value:function(){this.canPayCommission=!1,this.form.controls.payComission.setValue(!1)}},{key:"applyRubToNonRussiaCorrespondentRules",value:function(){this.cityPlaceholder$.next("CURRENCY_PAYMENT.RECIPIENT.CITY_BANK")}},{key:"applyRubToNonRussiaKvoAndKioRules",value:function(){this.isKvoEnabled$.next(!0),this.isKioEnabled$.next(!1),this.isKppEnabled$.next(!1)}},{key:"applyDefaultPaymentRules",value:function(){this.isRubNonRussia$.next(!1),this.applyDefaultPaymentPurposeRules(),this.applyDefaultPaymentKvoAndKioRules(),this.applyDefaultPaymentPayCommissionRules(),this.applyDefaultPaymentCodeWordRules()}},{key:"applyDefaultPaymentPayCommissionRules",value:function(){this.canPayCommission=!0}},{key:"applyDefaultPaymentPurposeRules",value:function(){this.masks.purpose=H.a.foreignLatin}},{key:"applyDefaultPaymentKvoAndKioRules",value:function(){this.isKioEnabled$.next(!1),this.isKvoEnabled$.next(!1),this.isKppEnabled$.next(!1)}},{key:"applyDefaultPaymentCodeWordRules",value:function(){this.isCodeWordEnabled$.next(!1)}},{key:"applyChinaPaymentRules",value:function(e){e||(this.form.controls.countryCode.setValue(Mt.a.CN),this.hasDefaultCity=!1,this.retrieveCodeWords(Mt.a.CN)),this.isCodeWordEnabled$.next(!0),this.codeWordLabel$.next("CURRENCY_PAYMENT.RECIPIENT.CODEWORD")}},{key:"knpIsChanged",value:function(){var e=this;this.subs.add(Object(O.a)([this.controlsStream.senderAccount,this.controlsStream.contractId]).subscribe((function(t){var n=[r.H.required,r.H.min(e.paymentsService.rules.minAmount),r.H.max(e.paymentsService.rules.maxAmount),function(e){var t;return 0===(null===(t=e)||void 0===t?void 0:t.value)?{cantBeZero:!0}:null}];n.push((function(t){var n=e.maskService.getNumberedAmount(t.value);if(!e.isForeignContractDisabled&&!e.withinContract)return n>e.contractMaxAmount.amount?-1!==$o.indexOf(e.formValue.knp)?null:{mustIncludeContract:!0}:null})),e.setValidation([e.form.controls.amount],n,!1)})))}},{key:"currentCountryCode",get:function(){var e,t,n,o=(null===(n=null===(t=null===(e=this.formValue.contract)||void 0===e?void 0:e.contractor)||void 0===t?void 0:t.country)||void 0===n?void 0:n.code)||null;return this.formValue.withinContract&&o?o.substring(0,2):!this.formValue.withinContract&&this.formValue.countryCode?this.formValue.countryCode.substring(0,2):null}},{key:"senderAccountsList",get:function(){return this.accounts.filter((function(e){return e.balance.currency!==K.a.KZT}))}},{key:"commissionAccountsList",get:function(){var e=this.form.getRawValue().senderAccount;return this.accounts.filter((function(t){var n,o;return t.balance.currency===K.a.KZT||t.balance.currency===(null===(o=null===(n=e)||void 0===n?void 0:n.balance)||void 0===o?void 0:o.currency)}))}},{key:"formValue",get:function(){return this.form.getRawValue()}},{key:"shouldBindContract",get:function(){var e,t;return-1===$o.indexOf(this.formValue.knp)&&!this.isForeignContractDisabled&&(null===(t=null===(e=this.formValue.senderAccount)||void 0===e?void 0:e.balance)||void 0===t?void 0:t.currency)===this.contractMaxAmount.currency&&!this.formValue.contractId&&this.maskService.getNumberedAmount(this.formValue.amount)>this.contractMaxAmount.amount}}]),t}(Bt)).\u0275fac=function(e){return new(e||wo)(T.Qb(G.b),T.Qb(Mt.g),T.Qb(Kt.a),T.Qb(p.a),T.Qb(p.c),T.Qb(Mt.c),T.Qb(se.a),T.Qb(c.e),T.Qb(Ht.c),T.Qb(i.q),T.Qb(Mt.f),T.Qb(Mt.e),T.Qb(a.b),T.Qb(G.c),T.Qb(q.b),T.Qb(l.c),T.Qb(Mt.b),T.Qb(Qt.c),T.Qb(Gt.a),T.Qb(qt.a))},wo.\u0275cmp=T.Kb({type:wo,selectors:[["j-currency-payment"]],viewQuery:function(e,t){var n;1&e&&(T.Oc(dn,!0),T.Yc(pn,!0),T.Yc(fn,!0),T.Yc(hn,!0),T.Yc(vn,!0),T.Yc(yn,!0),T.Yc(gn,!0),T.Yc(An,!0),T.Yc(Tn,!0),T.Yc(Rn,!0)),2&e&&(T.Ec(n=T.jc())&&(t.emailOnSuccess=n.first),T.Ec(n=T.jc())&&(t.senderAccountDropdown=n.first),T.Ec(n=T.jc())&&(t.contractsSelect=n.first),T.Ec(n=T.jc())&&(t.contractDetails=n.first),T.Ec(n=T.jc())&&(t.bankDropdown=n.first),T.Ec(n=T.jc())&&(t.intermediaryBankDropdown=n.first),T.Ec(n=T.jc())&&(t.commissionAccountDropdown=n.first),T.Ec(n=T.jc())&&(t.rubNonRussiaBankDropdown=n.first),T.Ec(n=T.jc())&&(t.rubNonRussiaCorrespondentBankDropdown=n.first),T.Ec(n=T.jc())&&(t.rubNonRussiaCorrespondentIbanInput=n.first))},features:[T.zb([{provide:g.a,useClass:g.b}]),T.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],[1,"payment-section"],["autocomplete","off","jInvalidControlScroll","","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"mb-4"],["translate","",1,"mb-4"],[3,"isLoading","isDisabledSelectable","label","hasError","accounts","selected"],["senderAccountDropdown",""],[1,"j-switch-wrap","form-group"],[3,"formControl"],[1,"ml-3"],["translate",""],["class","contracts-description",3,"jLoading","jLoadingInverted","is-loading",4,"ngIf"],[1,"form-section"],[1,"recipient-title","mb-4"],["translate","",1,"m-0"],["class","btn btn-link p-0 p3","type","button","translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.OPEN",3,"click",4,"ngIf"],["class","btn btn-link p-0 p3","type","button","translate","CURRENCY_PAYMENT.DICTIONARY.OPEN",3,"click",4,"ngIf"],[1,"form-group"],["clearable","true"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","dropSpecialCharacters","maxlength","formControl","paste"],["countryWrapper",""],["bindValue","code",3,"appendTo","jFocusOnReturn","formControl","readonly","clearable","searchFn","items","change","focus","search"],["countrySelect",""],["j-option-tmp",""],["j-label-tmp",""],[3,"control","errorMessages"],["class","form-group",4,"ngIf"],["type","text","jFormInput","","jFocusOnReturn","","jUppercase","",1,"form-control",3,"mask","formControl"],["accountInput","jFormInput"],["class","j-switch-wrap form-group",4,"ngIf"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["allowAuto","true",3,"datesEnabled","formControl","formatValue","jFocusOnReturn","label","minDate","maxDate","helperText"],["datePicker",""],["knpWrapper",""],["bindLabel","label","bindValue","code",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","compareWith","items","change"],["knpSelect",""],["j-header-tmp",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl","mask","dropSpecialCharacters"],["purpose",""],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],["translate","",1,"j-input-helper","text-muted","mt-1","mb-0","p3"],[3,"hidden"],[3,"isLoading","accounts","isDisabledSelectable","hasError","label","selected"],["commissionAccountDropdown",""],["class","j-input-helper text-muted comission-message p3",4,"ngIf"],["clearable","true",3,"floatLabel"],["jFocusOnReturn","","jFormInput","","jCursorBound","","jReplaceDot","","thousandSeparator"," ","decimalMarker",",","maxlength","29",1,"form-control",3,"suffix","placeholder","mask","dropSpecialCharacters","formControl","paste"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-2","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],["class","mt-2","translate","CURRENCY_PAYMENT.COMISSION.DESCRIPTION",4,"ngIf"],[1,"list-group"],["class","list-group-item d-flex align-items-center",4,"ngIf"],[1,"list-group-item","d-flex","align-items-center"],[1,"ml-3","flex-grow-1"],["class","mt-1",4,"ngIf"],["class","my-3 p3 text-muted",3,"innerHTML",4,"ngIf"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],[3,"contract",4,"ngIf"],["amountInfo",""],["kbeInfo",""],["kppInfo",""],["oktmoInfo",""],["basisInfo",""],["budgetPeriodInfo",""],[1,"contracts-description",3,"jLoading","jLoadingInverted"],[1,"text-gray",3,"innerHTML"],["id","contractGroup",1,"form-group","mt-4"],["contractsWrapper",""],["bindValue","id",3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items","change"],["contractsSelect",""],["j-notfound-tmp",""],["href","#","jSuffix","","class","mr-1 p3","translate","",3,"click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["type","button","class","list-dictionary form-section--action btn btn-xs btn-link float-right",3,"click",4,"ngIf"],["type","button",1,"list-dictionary","form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"j-option-label","text-wrap","p3"],[1,"text-dark","contract-row"],[3,"money"],[1,"text-muted","contract-row"],["translate","CURRENCY_PAYMENT.CONTRACTS.SELECT.REMAINDER"],[1,"contracts__empty"],["src","assets/img/payments/no_contract.svg"],[1,"mx-auto","mt-3","p2","text-muted",3,"innerHTML"],["href","#",1,"link","d-inline-block","mt-3",3,"click"],["label","CURRENCY_PAYMENT.CONTRACTS.NOT_FOUND"],[1,"text-center","my-2"],["href","#",1,"link","d-inline-block",3,"click"],["href","#","jSuffix","","translate","",1,"mr-1","p3",3,"click"],["type","button","translate","CURRENCY_PAYMENT.CONTRACTS_DICTIONARY.OPEN",1,"btn","btn-link","p-0","p3",3,"click"],["type","button","translate","CURRENCY_PAYMENT.DICTIONARY.OPEN",1,"btn","btn-link","p-0","p3",3,"click"],[1,"j-option-label","text-wrap"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","dropSpecialCharacters","maxlength","formControl"],[1,"kbe-account-row"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","4",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","28",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","10",1,"form-control",3,"formControl"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","25",1,"form-control",3,"formControl"],[1,"mt-0"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","70",1,"form-control",3,"formControl"],[3,"labelText","placeholderText","labelControl","errorMessages","bankControl"],["rubNonRussiaCorrespondentBankDropdown",""],["type","text","jFormInput","","jFocusOnReturn","","jUppercase","",1,"form-control",3,"validation","mask","formControl"],["rubNonRussiaCorrespondentIbanInput","jFormInput"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],["rubNonRussiaBankDropdown",""],[3,"placeholderText","labelControl","errorMessages","bankControl"],["bankDropdown",""],["class","j-input-helper text-muted mt-1 mb-0 p3","translate","",4,"ngIf"],[1,"intermediatory-content","ml-3"],["class","intermediatory-input",3,"placeholderText","labelControl","bankControl","errorMessages",4,"ngIf"],["translate","",1,"d-block","text-gray"],[1,"intermediatory-input",3,"placeholderText","labelControl","bankControl","errorMessages"],["intermediaryBankDropdown",""],["type","text","jFocusOnReturn","","jFormInput","","maxlength","12",1,"form-control",3,"mask","dropSpecialCharacters","formControl"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","validation","formControl"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","isRussianTaxPayer",1,"custom-control-input",3,"formControl"],["for","isRussianTaxPayer",1,"custom-control-label"],["translate","CURRENCY_PAYMENT.RUSSIAN_BUDGET.IS_TAXPAYER",1,"p3","text-muted"],["class","russian-row",4,"ngIf"],[1,"russian-row"],["kbkRowWrapper",""],["kbkWrapper",""],[3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["kbkSelect",""],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","formControl"],["payerStatusWrap",""],["bindValue","code",3,"loading","appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["payerStatusSelect",""],["type","checkbox","id","hasRussianBudgetExtras",1,"custom-control-input",3,"formControl"],["for","hasRussianBudgetExtras",1,"custom-control-label"],["translate","CURRENCY_PAYMENT.RUSSIAN_BUDGET.EXTRAS",1,"p3","text-muted"],["type","text","jFocusOnReturn","","jFormInput","","maxlength","12",1,"form-control",3,"formControl"],["label","CURRENCY_PAYMENT.RUSSIAN_BUDGET.KBK_NOT_FOUND"],["label","CURRENCY_PAYMENT.RUSSIAN_BUDGET.STATUS_NOT_FOUND"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"formControl"],[1,"mr-2",3,"inlineSVG"],["translate","",1,"p2","m-0"],["translate","",1,"p3","text-gray"],["codeWordsWrapper",""],["codeWordsSelect",""],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"j-input-helper","text-muted","comission-message","p3"],[3,"innerHTML"],[1,"j-input-helper","text-muted","mt-1","p3"],[1,"text-danger","mr-1",3,"translate","translateParams"],["href","#",1,"link-blue","contracts-scroll-link",3,"click"],["translate","CURRENCY_PAYMENT.COMISSION.DESCRIPTION",1,"mt-2"],["translate","",1,"text-gray"],[1,"text-gray"],[1,"mt-1"],["type","email","jFormInput","","jFocusOnReturn","","autocomplete","off",1,"form-control",3,"ngbTypeahead","formControl","focus"],["emailOnSuccess","ngbTypeahead"],[1,"my-3","p3","text-muted",3,"innerHTML"],["type","button",1,"btn","btn-link","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit","translate","",1,"btn","btn-outline-primary","btn-static"],[3,"contract"],["contractDetails",""],[1,"p4",3,"innerHTML"]],template:function(e,t){1&e&&(T.Rc(0,Cn,1,2,"j-restricted-placeholder",0),T.Rc(1,xo,157,144,"ng-container",1)),2&e&&(T.uc("ngIf",t.isRestricted),T.Ab(1),T.uc("ngIf",!t.isRestricted))},directives:[o.u,Xt.a,r.J,r.u,zt.b,Me.b,r.l,c.a,Jt.a,Zt.a,r.t,r.i,z.a,We.a,ee.a,r.c,Me.a,a.a,r.o,en.a,tn.j,tn.d,we.a,nn.a,on.a,tn.b,rn.a,an.a,cn.a,sn.a,tn.h,Xe.a,De.a,_e.a,qe,ln.a,i.E,xe.a,r.a,un.a,i.G,lt,bn.a],pipes:[o.b,c.d,mn.a],styles:[".payments__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}.payment-section--submit{text-align:right}.payment-section{max-width:582px}.payment-section--purpose-length{position:absolute;right:.8rem;top:.4rem;z-index:1}.payment-section--summary .payment-section--amount-warn{color:#666c72}@media(min-width:960px){.payment-section--summary .payment-section--amount-warn{width:70%;text-align:right;margin-left:auto}}.kbe-account-row{margin-bottom:1rem}@media(min-width:960px){.kbe-account-row{display:grid;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px;grid-template-columns:130px 1fr}}@media(min-width:960px){.kbe-account-row .form-group{margin-bottom:0}}.intermediatory-content{width:100%}.intermediatory-input{margin-top:.5rem;position:relative;margin-bottom:.25rem}.intermediatory-input .bic-dropdown{left:0;right:0}.contract-row{display:-webkit-box;display:flex;width:100%;-webkit-box-pack:justify;justify-content:space-between}.contract-row>:first-child{padding-right:1rem}.list-dictionary{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;line-height:1}.list-dictionary span{display:block}.comission-message{margin-top:-12px}.j-select .j-spinner-loader{top:19px}.contracts__empty{text-align:center;max-width:312px;margin:0 auto}.russian-row{position:relative;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1rem}.russian-row>*{width:100%;max-width:calc(50% - 6px)}.contracts-description{position:relative}.contracts-description.is-loading small{opacity:.5}.contracts-scroll-link{border-bottom:1px dashed #1586bb}.contracts-scroll-link:hover{border-color:#ef5630}.recipient-title{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}"],encapsulation:2}),wo),zo=["paymentComponent"],Jo=((Do=function(){function e(t,n,o){_classCallCheck(this,e),this.router=t,this.navService=n,this.paymentsService=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.title$=this.paymentsService.rootTitle$.pipe(Object(A.a)((function(e){return"CURRENCY_PAYMENT.".concat(e)})))}},{key:"onClose",value:function(){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.router.navigate(["/"])}},{key:"ngAfterViewInit",value:function(){this.formDirective=this.paymentComponent.formDirective,this.form=this.paymentComponent.form}}]),e}()).\u0275fac=function(e){return new(e||Do)(T.Qb(p.c),T.Qb(R.a),T.Qb(C.c))},Do.\u0275cmp=T.Kb({type:Do,selectors:[["j-currency-payments"]],viewQuery:function(e,t){var n;1&e&&T.Yc(zo,!0),2&e&&T.Ec(n=T.jc())&&(t.paymentComponent=n.first)},features:[T.zb([{provide:g.a,useClass:g.b}])],decls:9,vars:5,consts:[[3,"closed"],[1,"f-page-title"],["paymentComponent",""]],template:function(e,t){1&e&&(T.Wb(0,"f-page",0),T.ic("closed",(function(e){return t.onClose()})),T.Wb(1,"f-page-header"),T.Wb(2,"h1",1),T.Tc(3),T.nc(4,"translate"),T.nc(5,"async"),T.Vb(),T.Vb(),T.Wb(6,"f-page-body"),T.Rb(7,"j-currency-payment",null,2),T.Vb(),T.Vb()),2&e&&(T.Ab(3),T.Vc(" ",T.oc(4,1,T.oc(5,3,t.title$))," "))},directives:[E.a,k.a,S.a,Xo],pipes:[c.d,o.b],styles:[""]}),Do),Zo=n("aDQ/"),er=n("7o/Q"),tr=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new nr(e))}}]),e}(),nr=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).hasPrev=!1,n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),t}(er.a),or=((Yo=function(){function e(){_classCallCheck(this,e),this.subs=new je.a,this.itemChanges$=new N.a(0),this.routerTrigger$=this.itemChanges$.pipe(Object(x.a)(this.itemChanges$.getValue()),(function(e){return e.lift(new tr)}),Object(A.a)((function(e){var t=_slicedToArray(e,2),n=t[0],o=t[1],r={offsetEnterX:0,offsetLeaveX:0};return 0!==n&&(r.offsetEnterX=n>o?-100:100,r.offsetLeaveX=n>o?100:-100),{value:o,params:r}})),Object(wt.a)())}return _createClass(e,[{key:"ngOnInit",value:function(){this.subs.add(this.routerTrigger$.subscribe())}},{key:"ngOnDestroy",value:function(){this.subs.unsubscribe()}},{key:"onActivate",value:function(e,t){t.activatedRouteData&&t.activatedRouteData.animation&&t.activatedRouteData.index!==this.itemChanges$.getValue()&&this.itemChanges$.next(t.activatedRouteData.index)}}]),e}()).\u0275fac=function(e){return new(e||Yo)},Yo.\u0275dir=T.Lb({type:Yo}),Yo),rr=function(e){return[e]},ar=((Uo=function(e){function t(e,n,o){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).navService=e,r.router=n,r.paymentsService=o,r.routes=f.a,r}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(t.prototype),"ngOnInit",this).call(this),this.title$=this.paymentsService.rootTitle$.pipe(Object(A.a)((function(e){return"PAYMENTS.".concat(e)})))}},{key:"onClose",value:function(){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.router.navigate(["/"])}}]),t}(or)).\u0275fac=function(e){return new(e||Uo)(T.Qb(R.a),T.Qb(p.c),T.Qb(C.c))},Uo.\u0275cmp=T.Kb({type:Uo,selectors:[["j-tenge-payments"]],features:[T.zb([{provide:g.a,useClass:g.b}]),T.xb],decls:21,vars:23,consts:[[3,"closed"],[1,"f-page-title"],[1,"f-page-tabs-wrap"],[1,"f-page-tabs"],["routerLinkActive","active",3,"routerLink"],[1,"outlet-animation-wrapper"],["outlet","outlet"]],template:function(e,t){1&e&&(T.Wb(0,"f-page",0),T.ic("closed",(function(e){return t.onClose()})),T.Wb(1,"f-page-header"),T.Wb(2,"h1",1),T.Tc(3),T.nc(4,"translate"),T.nc(5,"async"),T.Vb(),T.Wb(6,"div",2),T.Wb(7,"nav",3),T.Wb(8,"a",4),T.Tc(9),T.nc(10,"translate"),T.Vb(),T.Wb(11,"a",4),T.Tc(12),T.nc(13,"translate"),T.Vb(),T.Wb(14,"a",4),T.Tc(15),T.nc(16,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(17,"f-page-body"),T.Wb(18,"div",5),T.Rb(19,"router-outlet",null,6),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(3),T.Vc(" ",T.oc(4,7,T.oc(5,9,t.title$))," "),T.Ab(5),T.uc("routerLink",T.zc(17,rr,t.routes.tenge.order)),T.Ab(1),T.Vc(" ",T.oc(10,11,"PAYMENTS.TABS.PAYMENT_ORDER")," "),T.Ab(2),T.uc("routerLink",T.zc(19,rr,t.routes.tenge.state.root)),T.Ab(1),T.Vc(" ",T.oc(13,13,"PAYMENTS.TABS.BUDGET")," "),T.Ab(2),T.uc("routerLink",T.zc(21,rr,t.routes.tenge.salary)),T.Ab(1),T.Vc(" ",T.oc(16,15,"PAYMENTS.TABS.SALARY")," "))},directives:[E.a,k.a,p.f,p.e,S.a,p.h],pipes:[c.d,o.b],styles:[".payment-section--submit{text-align:right}.payment-section{max-width:582px}.payment-section--purpose-length{position:absolute;right:.8rem;top:.4rem;z-index:1}.payment-section--summary .payment-section--amount-warn{color:#666c72}"],encapsulation:2,data:{animation:[Zo.c]}}),Uo),ir=n("gcYM"),cr=n("jMpN"),sr=n("Dwsl"),lr=n("+uUT"),ur=n("zOyH"),br=n("ttPG"),mr=n("0eeg"),dr=n("Wo9y"),pr=n("EBek"),fr=n("vZvt"),hr=n("570E"),vr=n("zdqJ"),yr=n("mCLR"),gr=n("VnnJ"),Ar=n("+BgI"),Tr=n("wtV8"),Rr=n("kFTB"),Cr=n("wGsJ"),Er=n("I0Rk"),kr=["vinTpl"],Sr=["protocolNumberTpl"];function Vr(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-restricted-placeholder",2),T.ic("retried",(function(e){return T.Ic(n),T.mc().updatePermissions()})),T.Vb()}if(2&e){var o=T.mc();T.uc("isRetryable",o.isPermissionsUpdateAllowed)("isLoading",o.isPermissionsUpdating)}}function Nr(e,t){if(1&e&&(T.Wb(0,"div",54),T.Wb(1,"p",55),T.Tc(2),T.Vb(),T.Wb(3,"p",56),T.Tc(4),T.nc(5,"translate"),T.Vb(),T.Vb()),2&e){var n=t.item;T.Ab(2),T.Uc(n.label),T.Ab(2),T.Wc("",T.oc(5,3,"PAYMENTS.FORM.BIN")," ",n.bin,"")}}function Ir(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div"),T.Wb(1,"button",57),T.ic("click",(function(e){T.Ic(n),T.mc(2);var t=T.Fc(19);return T.mc().openDepartmentDictionary(t,e)})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"p",58),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Vb()}2&e&&(T.Ab(2),T.Vc(" ",T.oc(3,2,"PAYMENTS.DICTIONARY.TITLE")," "),T.Ab(3),T.Vc(" ",T.oc(6,4,"PAYMENTS.DICTIONARY.FREQUENT_UGD")," "))}function Or(e,t){1&e&&T.Rc(0,Ir,7,6,"div",1),2&e&&T.uc("ngIf",!t.searchTerm)}function jr(e,t){1&e&&T.Rb(0,"div",9)}function Pr(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div"),T.Wb(1,"button",57),T.ic("click",(function(e){T.Ic(n),T.mc(2);var t=T.Fc(67);return T.mc().openKBKDictionary(t,e)})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"p",58),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Vb()}2&e&&(T.Ab(2),T.Vc(" ",T.oc(3,2,"PAYMENTS.DICTIONARY.TITLE")," "),T.Ab(3),T.Vc(" ",T.oc(6,4,"PAYMENTS.DICTIONARY.FREQUENT_KBK")," "))}function Wr(e,t){1&e&&T.Rc(0,Pr,7,6,"div",1),2&e&&T.uc("ngIf",!t.searchTerm)}function Mr(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div"),T.Wb(1,"button",57),T.ic("click",(function(e){T.Ic(n),T.mc(2);var t=T.Fc(77);return T.mc().openKnpDictionary(t,e)})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"p",59),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Wb(7,"p",60),T.Tc(8),T.nc(9,"translate"),T.Vb(),T.Vb()}2&e&&(T.Ab(2),T.Vc(" ",T.oc(3,3,"PAYMENTS.DICTIONARY.TITLE")," "),T.Ab(3),T.Uc(T.oc(6,5,"PAYMENTS.DICTIONARY.FREQUENT_KNP")),T.Ab(3),T.Uc(T.oc(9,7,"PAYMENTS.DICTIONARY.KNP_DESCRIPTION")))}function _r(e,t){1&e&&T.Rc(0,Mr,10,9,"div",1),2&e&&T.uc("ngIf",!t.searchTerm)}function xr(e,t){if(1&e&&(T.Wb(0,"div",61),T.Wb(1,"div",62),T.Tc(2),T.Vb(),T.Vb()),2&e){var n=t.ngIf;T.Ab(2),T.Vc(" ",n," ")}}function wr(e,t){1&e&&T.Rb(0,"div",9)}function Dr(e,t){if(1&e&&(T.Wb(0,"div",63),T.Rb(1,"span",64),T.nc(2,"translate"),T.Vb()),2&e){var n=t.ngIf;T.Ab(1),T.uc("innerHTML",T.oc(2,1,n),T.Jc)}}function Yr(e,t){1&e&&(T.Ub(0),T.Tc(1),T.nc(2,"translate"),T.Tb()),2&e&&(T.Ab(1),T.Vc(" ",T.oc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Ur(e,t){if(1&e&&(T.Tc(0),T.nc(1,"translate"),T.nc(2,"amountFormat"),T.nc(3,"async")),2&e){var n=T.mc(2);T.Wc(" ",T.oc(1,2,"PAYMENTS.COMMISSION"),": ",T.oc(2,4,T.oc(3,6,n.commission$))," \u20b8 ")}}function Lr(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"button",65),T.ic("click",(function(e){return T.Ic(n),T.mc(2).saveToDraft()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"button",66),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Tb()}if(2&e){var o=T.mc(2);T.Ab(2),T.Uc(T.oc(3,2,"PAYMENTS.FORM.SAVE")),T.Ab(3),T.Vc("",T.oc(6,4,o.submitLabel)," ")}}function Fr(e,t){1&e&&(T.Ub(0),T.Wb(1,"button",67),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function $r(e,t){if(1&e&&(T.Wb(0,"div",68),T.Wb(1,"div",69),T.Rb(2,"j-period-input",70,71),T.nc(4,"translate"),T.Vb(),T.Vb()),2&e){var n=T.Fc(3),o=T.mc(2);T.Ab(2),T.uc("hasError",o.hasError(n,o.form.controls.period))("label",T.oc(4,3,"SHARED.TIME.PERIOD"))("formControl",o.form.controls.period)}}function Br(e,t){if(1&e&&(T.Wb(0,"div",68),T.Wb(1,"div",72),T.Rb(2,"j-period-input",70,73),T.nc(4,"translate"),T.nc(5,"translate"),T.Vb(),T.Wb(6,"div",72),T.Rb(7,"j-period-input",70,74),T.nc(9,"translate"),T.nc(10,"translate"),T.Vb(),T.Vb()),2&e){var n=T.Fc(3),o=T.Fc(8),r=T.mc(2);T.Ab(2),T.xc("label","",T.oc(4,8,"SHARED.TIME.MONTH")," ",T.oc(5,10,"SHARED.PREPOSITION.FROM"),""),T.uc("hasError",r.hasError(n,r.form.controls.periodStart)||r.hasError(o,r.form.controls.periodEnd))("formControl",r.form.controls.periodStart),T.Ab(5),T.xc("label","",T.oc(9,12,"SHARED.TIME.MONTH")," ",T.oc(10,14,"SHARED.PREPOSITION.TO"),""),T.uc("hasError",r.hasError(o,r.form.controls.periodEnd)||r.hasError(n,r.form.controls.periodStart))("formControl",r.form.controls.periodEnd)}}function Kr(e,t){if(1&e&&(T.Wb(0,"j-form-field",15),T.Wb(1,"j-label"),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Rb(4,"input",75),T.Rb(5,"j-error",19),T.Vb(),T.Wb(6,"div",63),T.Rb(7,"span",64),T.Vb()),2&e){var n=T.mc(2);T.Ab(2),T.Uc(T.oc(3,5,"PAYMENTS.FORM.VIN")),T.Ab(2),T.uc("formControl",n.form.controls.vin),T.Ab(1),T.uc("control",n.form.controls.vin)("errorMessages",n.errors.vin),T.Ab(2),T.uc("innerHTML",n.vinMessage,T.Jc)}}function Hr(e,t){if(1&e&&(T.Wb(0,"j-form-field",15),T.Wb(1,"j-label"),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Rb(4,"input",21),T.Vb()),2&e){var n=T.mc(2);T.Ab(2),T.Uc(T.oc(3,3,"PAYMENTS.FORM.PROTOCOL_NUMBER")),T.Ab(2),T.uc("mask",n.masks.protocolNumber.mask)("formControl",n.form.controls.protocolNumber)}}function Qr(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"form",3,4),T.ic("submit",(function(e){return T.Ic(n),T.mc().onSubmit(e)})),T.Wb(3,"div",5),T.Wb(4,"fieldset"),T.Wb(5,"div",6),T.Wb(6,"h2",7),T.Tc(7),T.nc(8,"translate"),T.Vb(),T.Wb(9,"button",8),T.ic("click",(function(e){T.Ic(n);var t=T.Fc(19);return T.mc().openDepartmentDictionary(t,e)})),T.Tc(10),T.nc(11,"translate"),T.Vb(),T.Vb(),T.Wb(12,"div",9),T.Wb(13,"j-form-field",null,10),T.Wb(15,"j-label"),T.Tc(16),T.nc(17,"translate"),T.Vb(),T.Wb(18,"j-select",11,12),T.nc(20,"async"),T.Rc(21,Nr,6,5,"ng-template",13),T.Rc(22,Or,1,1,"ng-template",14),T.Vb(),T.Vb(),T.Vb(),T.Wb(23,"div",9),T.Wb(24,"j-form-field",15),T.Rb(25,"j-entity-logo",16),T.nc(26,"bankFromAccount"),T.Wb(27,"j-label"),T.Tc(28),T.nc(29,"translate"),T.Vb(),T.Rb(30,"input",17,18),T.Rb(32,"j-error",19),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(33,"div",5),T.Wb(34,"fieldset"),T.Wb(35,"legend",20),T.Tc(36),T.nc(37,"translate"),T.Vb(),T.Wb(38,"div",9),T.Wb(39,"j-form-field"),T.Wb(40,"j-label"),T.Tc(41),T.nc(42,"translate"),T.Vb(),T.Rb(43,"input",21),T.Vb(),T.Vb(),T.Rc(44,jr,1,0,"div",22),T.Wb(45,"div",9),T.Wb(46,"ul",23),T.Wb(47,"li",24),T.Rb(48,"j-switch",25),T.Wb(49,"span",26),T.Tc(50),T.nc(51,"translate"),T.Rb(52,"br"),T.Wb(53,"small",27),T.Tc(54),T.nc(55,"translate"),T.Wb(56,"span",28),T.Tc(57),T.nc(58,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(59,"div",9),T.Wb(60,"div",9),T.Wb(61,"j-form-field",null,29),T.Wb(63,"j-label"),T.Tc(64),T.nc(65,"translate"),T.Vb(),T.Wb(66,"j-select",30,31),T.ic("change",(function(e){return T.Ic(n),T.mc().onKbkSelect(e)})),T.nc(68,"async"),T.Rc(69,Wr,1,1,"ng-template",14),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(70,"div",9),T.Wb(71,"j-form-field",null,32),T.Wb(73,"j-label"),T.Tc(74),T.nc(75,"translate"),T.Vb(),T.Wb(76,"j-select",33,34),T.Rc(78,_r,1,1,"ng-template",14),T.Vb(),T.Vb(),T.Vb(),T.Wb(79,"div",35),T.Wb(80,"span",36),T.Tc(81),T.nc(82,"async"),T.Vb(),T.Wb(83,"j-form-field"),T.Wb(84,"j-label"),T.Tc(85),T.nc(86,"translate"),T.Vb(),T.Rb(87,"textarea",37,38),T.Rb(89,"j-error",19),T.Rc(90,xr,3,1,"div",39),T.nc(91,"async"),T.Vb(),T.Vb(),T.Rc(92,wr,1,0,"div",22),T.Vb(),T.Vb(),T.Wb(93,"div",5),T.Wb(94,"fieldset"),T.Wb(95,"div",9),T.Wb(96,"j-account-dropdown",40,41),T.ic("selected",(function(e){return T.Ic(n),T.mc().onSenderAccountSelect(e)})),T.nc(98,"async"),T.nc(99,"async"),T.Vb(),T.Vb(),T.Wb(100,"div",9),T.Wb(101,"div",9),T.Wb(102,"j-form-field",42),T.Wb(103,"j-label"),T.Tc(104),T.nc(105,"translate"),T.Vb(),T.Rb(106,"input",43),T.Vb(),T.Rc(107,Dr,3,3,"div",44),T.nc(108,"async"),T.Wb(109,"div",45),T.Rc(110,Yr,3,3,"ng-container",46),T.nc(111,"async"),T.Rc(112,Ur,4,8,"ng-template",null,47,T.Sc),T.Vb(),T.Vb(),T.Vb(),T.Wb(114,"div",9),T.Wb(115,"ul",23),T.Wb(116,"li",24),T.Rb(117,"j-switch",25),T.Wb(118,"span",26),T.Tc(119),T.nc(120,"translate"),T.Rb(121,"br"),T.Wb(122,"small",27),T.Tc(123),T.nc(124,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(125,"div",48),T.Wb(126,"div",48),T.Rc(127,Lr,7,6,"ng-container",1),T.Rc(128,Fr,4,3,"ng-container",1),T.Vb(),T.Vb(),T.Rc(129,$r,5,5,"ng-template",null,49,T.Sc),T.Rc(131,Br,11,16,"ng-template",null,50,T.Sc),T.Rc(133,Kr,8,7,"ng-template",null,51,T.Sc),T.Rc(135,Hr,5,5,"ng-template",null,52,T.Sc),T.Rb(137,"ngx-spinner",53),T.Rb(138,"ngx-spinner",53),T.Vb(),T.Tb()}if(2&e){var o=T.Fc(14),r=T.Fc(19),a=T.Fc(62),i=T.Fc(67),c=T.Fc(72),s=T.Fc(77),l=T.Fc(113),u=T.Fc(130),b=T.Fc(132),m=T.mc();T.Ab(1),T.uc("formGroup",m.form),T.Ab(6),T.Vc(" ",T.oc(8,72,"PAYMENTS.RECIPIENT.TITLE")," "),T.Ab(3),T.Vc(" ",T.oc(11,74,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),T.Ab(6),T.Uc(T.oc(17,76,"PAYMENTS.FORM.UGD")),T.Ab(2),T.uc("appendTo",o.elementRef.nativeElement)("jFocusOnReturn",r)("formControl",m.form.controls.ugd)("clearable",!1)("searchFn",m.paymentsService.ugdSearchFn)("items",T.oc(20,78,m.ugdStore.items$)),T.Ab(7),T.uc("name",T.oc(26,80,"KZ"+m.form.controls.bankAccount.value)),T.Ab(3),T.Uc(T.oc(29,82,"PAYMENTS.FORM.IBAN")),T.Ab(2),T.uc("jShadow",m.masks.bankAccount.shadow)("dropSpecialCharacters",!0)("mask",m.masks.bankAccount.mask)("formControl",m.form.controls.bankAccount),T.Ab(2),T.uc("control",m.form.controls.bankAccount)("errorMessages",m.errors.bankAccount),T.Ab(4),T.Uc(T.oc(37,84,"PAYMENTS.FORM.DETAILS")),T.Ab(5),T.Uc(T.oc(42,86,"PAYMENTS.FORM.DOCUMENT_NUMBER")),T.Ab(2),T.uc("mask",m.masks.number.mask)("formControl",m.form.controls.number),T.Ab(1),T.uc("ngTemplateOutlet",m.form.controls.intervalEnabled.value?b:u),T.Ab(4),T.uc("formControl",m.form.controls.intervalEnabled),T.Ab(2),T.Vc(" ",T.oc(51,88,"PAYMENTS.FORPERIOD")," "),T.Ab(4),T.Vc(" ",T.oc(55,90,m.intervalSwitchLabel)," "),T.Ab(2),T.uc("hidden",!m.form.controls.intervalEnabled.value),T.Ab(1),T.Vc(": ",T.oc(58,92,m.periodMessage$)," "),T.Ab(7),T.Uc(T.oc(65,94,"PAYMENTS.FORM.KBK")),T.Ab(2),T.uc("jFocusOnReturn",i)("appendTo",a.elementRef.nativeElement)("formControl",m.form.controls.kbk)("clearable",!1)("searchMask",m.masks.kbk.mask)("shadow",m.masks.kbk.shadow)("items",T.oc(68,96,m.kbkStore.items$)),T.Ab(8),T.Uc(T.oc(75,98,"PAYMENTS.FORM.KNP_REGULAR")),T.Ab(2),T.uc("appendTo",c.elementRef.nativeElement)("jFocusOnReturn",s)("formControl",m.form.controls.knp)("clearable",!1)("searchMask",m.masks.knp.mask)("shadow",m.masks.knp.shadow)("items",m.filteredKnpList),T.Ab(5),T.Wc(" ",T.oc(82,100,m.purposeLength$),"/",m.rules.purposeLength,""),T.Ab(4),T.Uc(T.oc(86,102,"PAYMENTS.FORM.PURPOSE")),T.Ab(2),T.uc("formControl",m.form.controls.purpose),T.Ab(2),T.uc("control",m.form.controls.purpose)("errorMessages",m.errors.purpose),T.Ab(1),T.uc("ngIf",T.oc(91,104,m.purposeMessage$)),T.Ab(2),T.uc("ngTemplateOutlet",m.associatedFieldTpl),T.Ab(4),T.uc("isLoading",T.oc(98,106,m.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",m.form.controls.senderAccount.touched&&m.form.controls.senderAccount.errors)("accounts",T.oc(99,108,m.acceptableAccounts$)),T.Ab(6),T.uc("floatLabel","always"),T.Ab(2),T.Uc(T.oc(105,110,"PAYMENTS.FORM.AMOUNT")),T.Ab(2),T.uc("dropSpecialCharacters",!0)("formControl",m.form.controls.amount),T.Ab(1),T.uc("ngIf",T.oc(108,112,m.amountMessage$)),T.Ab(3),T.uc("ngIf",null===T.oc(111,114,m.commission$))("ngIfElse",l),T.Ab(7),T.uc("formControl",m.form.controls.urgent),T.Ab(2),T.Vc("",T.oc(120,116,"PAYMENTS.FORM.URGENT")," "),T.Ab(4),T.Uc(T.oc(124,118,"PAYMENTS.URGENT_HELPER")),T.Ab(4),T.uc("ngIf",m.restoredData.status!==m.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("ngIf",m.restoredData.status===m.PAYMENT_STATUS.CREATED),T.Ab(9),T.uc("name",m.SPINNER)("fullScreen",!1),T.Ab(1),T.uc("name",m.SPINNER)("fullScreen",!1)}}var Gr,qr,Xr=((Gr=function(e){function t(e,n,o,r,a,i,c,s,l,u,b,m,d,p,f,h){var v;return _classCallCheck(this,t),(v=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,f.createTaxForm(),m,e,n,r,o,i,u,d,b,c,h,p))).route=e,v.router=n,v.paymentsService=o,v.companyService=r,v.dateAdapter=a,v.maskService=i,v.translate=c,v.datePipe=s,v.accountsService=l,v.modalService=u,v.pipelines=b,v.api=m,v.dictionaries=d,v.featureFlagsService=p,v.paymentsFormsFactory=f,v.authorityPermissionsService=h,v.associatedFieldTpl=void 0,v.masks={number:"paymentNum",amount:"amount",vin:"vin",knp:"knp",kbk:"kbk",protocolNumber:"protocol",bankAccount:"tengeAccount"},v.commission$=new N.a(0),v.protocolMessage$=new N.a(""),v.vinLength=17,v.subs=new je.a,v.paymentType=B.j.TAX,v}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(t.prototype),"ngOnInit",this).call(this),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)((function(t){return e.checkPersonalAccounts(t)}))),this.getMaskConfig(),this.createControlsStream(this.form),this.combineKBK(this.paymentType),this.knp$=this.combineKNP([function(t,n){if(n[0]){var o=e.knpStore.getItemsByIds(e.kbkStore.entities[n[0]].associatedKnpList),r=e.form.controls.knp;return r.enable(),setTimeout((function(){1===o.length?(r.patchValue(o[0].code),e.focusableContainer.focusNext()):o.some((function(e){return e.code===r.value}))||r.patchValue("")}),100),o}return[]}],[this.controlsStream.kbk]),this.listenWorkingDays(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenKnpUpdates(),this.subs.add(this.createPeriodMessage$().subscribe(this.periodMessage$)),this.subs.add(Object(O.a)([this.controlsStream.vin.pipe(Object(A.a)((function(e){return e?"VIN".concat(e,"/V"):""}))),this.controlsStream.protocolNumber.pipe(Object(A.a)((function(e){return e?"ADM".concat(e,"/A"):""})))]).subscribe((function(t){e.protocolMessage$.next(t.join(" "))})));var n=[this.protocolMessage$.pipe(Object(A.a)((function(e){return["protocol",e]}))),Object(O.a)([this.translate.get("SHARED.NOT_SELECTED"),this.translate.get("SHARED.TIME.PERIOD"),this.periodMessage$]).pipe(Object(A.a)((function(e){var t=_slicedToArray(e,3),n=t[0],o=t[1],r=t[2];return r&&r!==n?"".concat(o,": ").concat(r,"."):""})),Object(A.a)((function(e){return["period",e]})))];this.listenPurposeMessageStream(n,["protocol","kbk","knp","period"]),this.subs.add(this.controlsStream.kbk.pipe().subscribe((function(t){var n=e.form.controls,o=n.protocolNumber,r=n.vin;e.rules.kbkCodeVinReq.some((function(e){return e===t}))?(r.enable(),o.disable(),o.value&&o.patchValue(""),e.associatedFieldTpl=e.vinTpl):/^204\d+$/.test(t)?(r.disable(),r.value&&r.patchValue(""),o.enable(),e.associatedFieldTpl=e.protocolNumberTpl):(e.associatedFieldTpl=null,r.disable(),o.disable(),o.value&&o.patchValue(""),r.value&&r.patchValue(""))}))),this.subs.add(this.controlsStream.intervalEnabled.pipe(Object(ir.a)(300,void 0,{leading:!0,trailing:!0}),Object(M.a)()).subscribe((function(t){var n=e.form.controls,o=n.period,r=n.periodEnd,a=n.periodStart;t?([r,a].forEach((function(e){return e.enable()})),o.disable()):([r,a].forEach((function(e){return e.disable()})),o.enable())}))),this.form.get("bankAccount").value||this.form.get("bankAccount").setValue(B.p.TAX_ACCOUNT)}},{key:"onKbkSelect",value:function(e){!this.form.controls.knp.value&&e.associatedKnpList&&this.form.controls.knp.setValue(e.associatedKnpList[0])}},{key:"openDepartmentDictionary",value:function(e,t){var n=this;t&&t.preventDefault(),e&&(e.blur(),e.close()),this.modalService.open(he,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then((function(e){n.form.controls.ugd.setValue(e.code)})).catch((function(){}))}},{key:"openKBKDictionary",value:function(e,t){var n=this;t&&t.preventDefault(),e&&(e.blur(),e.close());var o=this.modalService.open(Ve,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});Object.assign(o.componentInstance,{store:this.kbkStore}),o.result.then((function(e){n.form.controls.kbk.setValue(e.code)})).catch((function(){}))}},{key:"onUgdSelect",value:function(e){}},{key:"createPeriodMessage$",value:function(){var e=this,t=this.controlsStream,n=t.intervalEnabled,o=t.periodEnd,r=t.periodStart,a=t.period;return Object(O.a)([n,this.translate.get("SHARED.NOT_SELECTED"),a,r,o]).pipe(Object(_.a)(0),Object(A.a)((function(t){var n=_toArray(t),o=n[0],r=n[1],a=_slicedToArray(n.slice(2).map((function(t){return t?e.datePipe.transform(t,"MM.yyyy"):""})),3),i=a[0],c=a[1],s=a[2];return!o&&!i||o&&!c&&!s?r:o?"".concat(c||r," - ").concat(s||r):"".concat(i||r)})))}},{key:"sendPayment",value:function(){return _get(_getPrototypeOf(t.prototype),"sendPayment",this).call(this,this.constructTaxPaymentBody())}},{key:"saveToDraft",value:function(){return _get(_getPrototypeOf(t.prototype),"saveToDraft",this).call(this,this.constructTaxPaymentBody())}},{key:"openKnpDictionary",value:function(e,t){var n=this;e.close(),e.blur(),setTimeout((function(){var e=n.modals.open(me,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});e.componentInstance.paymentType=n.paymentType,e.result.then((function(e){if(!n.filteredKnpList.includes(e)){var t=n.kbkStore.items.find((function(e){var t;return e.code==(null===(t=n.form.controls.kbk)||void 0===t?void 0:t.value)})),o=n.knpStore.getItemsByIds(t.associatedKnpList);n.filteredKnpList=[].concat(_toConsumableArray(o),[e])}n.form.controls.knp.patchValue(e.code)})).catch((function(){}))}),0)}},{key:"constructTaxPaymentBody",value:function(){var e,t=this.form.value,n=this.protocolMessage$.getValue();return e=n?this.purposeMessage$.getValue().replace(n,[n,t.purpose].filter((function(e){return!!e})).join(" ")):[t.purpose,this.purposeMessage$.getValue()].filter((function(e){return!!e})).join(". "),Object.assign(Object.assign({},t),{purpose:e})}},{key:"listenKnpUpdates",value:function(){var e=this;this.knp$.subscribe((function(t){e.filteredKnpList=t}))}},{key:"intervalSwitchLabel",get:function(){return this.form.controls.intervalEnabled.value?"PAYMENTS.INTERVAL.ENABLED":"PAYMENTS.INTERVAL.DISABLED"}},{key:"vinMessage",get:function(){var e,t;return this.form.controls.vin.value&&0!==this.form.controls.vin.value.length?(null===(e=this.form.controls.vin.value)||void 0===e?void 0:e.length)<this.vinLength?this.translate.instant("PAYMENTS.VIN_MESSAGE.LESS",{length:this.vinLength}):(null===(t=this.form.controls.vin.value)||void 0===t?void 0:t.length)>this.vinLength?this.translate.instant("PAYMENTS.VIN_MESSAGE.MORE",{length:this.vinLength}):"":this.translate.instant("PAYMENTS.VIN_MESSAGE.OPTIONAL")}}]),t}(Bt)).\u0275fac=function(e){return new(e||Gr)(T.Qb(p.a),T.Qb(p.c),T.Qb(C.c),T.Qb(gr.a),T.Qb(i.c),T.Qb(Kt.a),T.Qb(c.e),T.Qb(o.f),T.Qb(l.c),T.Qb(i.q),T.Qb(Ar.a),T.Qb(Tr.a),T.Qb(se.a),T.Qb(q.b),T.Qb(Rr.a),T.Qb(Ht.c))},Gr.\u0275cmp=T.Kb({type:Gr,selectors:[["j-tax-payment"]],viewQuery:function(e,t){var n;1&e&&(T.Yc(r.v,!0),T.Yc(Me.b,!0),T.Yc(kr,!0,T.L),T.Yc(Sr,!0,T.L)),2&e&&(T.Ec(n=T.jc())&&(t.ngForm=n.first),T.Ec(n=T.jc())&&(t.focusableContainer=n.first),T.Ec(n=T.jc())&&(t.vinTpl=n.first),T.Ec(n=T.jc())&&(t.protocolNumberTpl=n.first))},features:[T.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],["autocomplete","off","jInvalidControlScroll","","jFocusableContainer","",1,"p-relative",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["selectWrapper",""],["bindValue","code","bindLabel","label",3,"appendTo","jFocusOnReturn","formControl","clearable","searchFn","items"],["ugdSelect",""],["j-option-tmp",""],["j-header-tmp",""],["clearable","true"],["jPrefix","","hideEmpty","true",3,"name"],["type","text","jFormInput","","jReplaceOnPaste","KZ","jDynamicPrefix","KZ","jFocusOnReturn","","jUppercase","",1,"form-control",3,"jShadow","dropSpecialCharacters","mask","formControl"],["accountInput","jFormInput"],[3,"control","errorMessages"],[1,"h2"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["class","form-group",4,"ngTemplateOutlet"],[1,"list-group"],[1,"list-group-item","text-left","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[3,"hidden"],["kbkWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items","change"],["kbkSelect",""],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"appendTo","jFocusOnReturn","formControl","clearable","searchMask","shadow","items"],["knpSelect",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],["clearable","true",3,"floatLabel"],["type","text","suffix"," \u20b8","jFormInput","","jCursorBound","","placeholder","0,00","mask","separator.2","jReplaceDot","","thousandSeparator"," ","decimalMarker",",",1,"form-control",3,"dropSpecialCharacters","formControl"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],[1,"payment-section--submit","form-group","pt-4"],["periodTpl",""],["intervalTpl",""],["vinTpl",""],["protocolNumberTpl",""],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],[1,"j-option-label","text-wrap"],[1,"m-0"],[1,"p3","text-gray","m-0"],["type","button",1,"form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"p2"],[1,"p2","m-0"],[1,"p3","text-gray"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"j-input-helper","text-muted","mt-1","p3"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"],[1,"row"],[1,"col"],[3,"hasError","label","formControl"],["period",""],[1,"col","col-md-6"],["periodStart",""],["periodEnd",""],["type","text","jFormInput","","jFocusOnReturn","","maxlength","64","jUppercase","",1,"form-control",3,"formControl"]],template:function(e,t){1&e&&(T.Rc(0,Vr,1,2,"j-restricted-placeholder",0),T.Rc(1,Qr,139,120,"ng-container",1)),2&e&&(T.uc("ngIf",t.isRestricted),T.Ab(1),T.uc("ngIf",!t.isRestricted))},directives:[o.u,Xt.a,r.J,r.u,zt.b,Me.b,r.l,z.a,We.a,en.a,Me.a,r.t,r.i,tn.j,tn.b,te.a,Z.a,ee.a,r.c,ur.a,cr.a,nn.a,ln.a,a.a,we.a,o.B,Zt.a,Jt.a,rn.a,an.a,cn.a,un.a,Cr.a,r.o],pipes:[c.d,o.b,ne.a,Er.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}"]}),Gr),zr=function(e){return[e]},Jr=((qr=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).routes=f.a,e}return _inherits(t,e),t}(or)).\u0275fac=function(e){return new(e||qr)},qr.\u0275cmp=T.Kb({type:qr,selectors:[["j-budget-payments"]],features:[T.xb],decls:17,vars:24,consts:[[1,"payment-section"],[1,"form-group","mb-5"],["routerLinkActive","active",1,"btn","btn-sm","btn-outline-dark","btn-shadow",3,"routerLink"],["routerLinkActive","active",1,"btn","btn-sm","btn-outline-dark","btn-shadow","ml-2",3,"routerLink"],[1,"outlet-animation-wrapper"],[3,"activate"],["outlet","outlet"]],template:function(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div",0),T.Wb(1,"div",1),T.Wb(2,"a",2),T.Tc(3),T.nc(4,"translate"),T.Vb(),T.Wb(5,"a",3),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"a",3),T.Tc(9),T.nc(10,"translate"),T.Vb(),T.Wb(11,"a",3),T.Tc(12),T.nc(13,"translate"),T.Vb(),T.Vb(),T.Wb(14,"div",4),T.Wb(15,"router-outlet",5,6),T.ic("activate",(function(e){T.Ic(n);var o=T.Fc(16);return t.onActivate(e,o)})),T.Vb(),T.Vb(),T.Vb()}2&e&&(T.Ab(2),T.uc("routerLink",T.zc(16,zr,t.routes.tenge.state.tax)),T.Ab(1),T.Uc(T.oc(4,8,"PAYMENTS.TABS.TAX")),T.Ab(2),T.uc("routerLink",T.zc(18,zr,t.routes.tenge.state.pension)),T.Ab(1),T.Uc(T.oc(7,10,"PAYMENTS.TABS.PENSION")),T.Ab(2),T.uc("routerLink",T.zc(20,zr,t.routes.tenge.state.social)),T.Ab(1),T.Uc(T.oc(10,12,"PAYMENTS.TABS.SOCIAL")),T.Ab(2),T.uc("routerLink",T.zc(22,zr,t.routes.tenge.state.osms)),T.Ab(1),T.Uc(T.oc(13,14,"PAYMENTS.TABS.MEDICAL")))},directives:[p.f,p.e,p.h],pipes:[c.d],styles:[""],data:{animation:[Zo.c]}}),qr),Zr=n("ZF+8"),ea=["emailOnSuccess"];function ta(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-restricted-placeholder",2),T.ic("retried",(function(e){return T.Ic(n),T.mc().updatePermissions()})),T.Vb()}if(2&e){var o=T.mc();T.uc("isRetryable",o.isPermissionsUpdateAllowed)("isLoading",o.isPermissionsUpdating)}}function na(e,t){if(1&e){var n=T.Xb();T.Wb(0,"button",56),T.ic("click",(function(e){return T.Ic(n),T.mc(2).checkIin()})),T.Tc(1),T.nc(2,"translate"),T.Vb()}2&e&&(T.Ab(1),T.Uc(T.oc(2,1,"PAYMENTS.FORM.CHECK")))}function oa(e,t){1&e&&(T.Wb(0,"span"),T.Wb(1,"span",57),T.Tc(2,"PAYMENTS.TRUSTED_COUNTERPARTY"),T.Vb(),T.Rb(3,"span",58),T.Vb()),2&e&&(T.Ab(3),T.uc("inlineSVG","/assets/icons/counterparty/status.svg"))}function ra(e,t){1&e&&(T.Wb(0,"span"),T.Wb(1,"span",57),T.Tc(2,"PAYMENTS.UNTRUSTED_COUNTERPARTY"),T.Vb(),T.Rb(3,"span",59),T.Vb()),2&e&&(T.Ab(3),T.uc("inlineSVG","/assets/icons/counterparty/status.svg"))}function aa(e,t){if(1&e&&(T.Wb(0,"li",60),T.Tc(1),T.nc(2,"translate"),T.Vb()),2&e){var n=t.$implicit;T.Ab(1),T.Vc(" \u2022 ",T.oc(2,1,n.name)," ")}}function ia(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div"),T.Wb(1,"button",61),T.ic("click",(function(e){T.Ic(n),T.mc(2);var t=T.Fc(80);return T.mc().openKnpDictionary(t,e)})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"p",62),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Wb(7,"p",63),T.Tc(8),T.nc(9,"translate"),T.Vb(),T.Vb()}2&e&&(T.Ab(2),T.Vc(" ",T.oc(3,3,"PAYMENTS.DICTIONARY.TITLE")," "),T.Ab(3),T.Uc(T.oc(6,5,"PAYMENTS.DICTIONARY.FREQUENT_KNP")),T.Ab(3),T.Uc(T.oc(9,7,"PAYMENTS.DICTIONARY.KNP_DESCRIPTION")))}function ca(e,t){1&e&&T.Rc(0,ia,10,9,"div",1),2&e&&T.uc("ngIf",!t.searchTerm)}function sa(e,t){if(1&e&&(T.Wb(0,"div",64),T.Wb(1,"div",65),T.Tc(2),T.Vb(),T.Vb()),2&e){var n=t.ngIf;T.Ab(2),T.Vc(" ",n," ")}}function la(e,t){if(1&e&&(T.Wb(0,"div",37),T.Rb(1,"span",66),T.nc(2,"translate"),T.Vb()),2&e){var n=t.ngIf;T.Ab(1),T.uc("innerHTML",T.oc(2,1,n),T.Jc)}}function ua(e,t){1&e&&(T.Ub(0),T.Tc(1),T.nc(2,"translate"),T.Tb()),2&e&&(T.Ab(1),T.Vc(" ",T.oc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function ba(e,t){if(1&e&&(T.Tc(0),T.nc(1,"translate"),T.nc(2,"amountFormat"),T.nc(3,"async")),2&e){var n=T.mc(2);T.Wc(" ",T.oc(1,2,"PAYMENTS.COMMISSION"),": ",T.oc(2,4,T.oc(3,6,n.commission$))," \u20b8 ")}}function ma(e,t){1&e&&(T.Wb(0,"div"),T.Wb(1,"small",50),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.NOTIFY.DESCRIPTION")))}function da(e,t){if(1&e){var n=T.Xb();T.Wb(0,"div",67),T.Wb(1,"j-form-field"),T.Wb(2,"j-label"),T.Tc(3),T.nc(4,"translate"),T.Vb(),T.Wb(5,"input",68,69),T.ic("focus",(function(e){return T.Ic(n),T.mc(2).onEmailOnSuccessFocus(e)})),T.Vb(),T.Rb(7,"j-error",14),T.Vb(),T.Wb(8,"small",50),T.Tc(9),T.nc(10,"translate"),T.Vb(),T.Vb()}if(2&e){var o=T.mc(2);T.Ab(3),T.Uc(T.oc(4,6,"PAYMENTS.NOTIFY.EMAIL")),T.Ab(2),T.uc("ngbTypeahead",o.search)("formControl",o.form.controls.emailOnSuccess),T.Ab(2),T.uc("control",o.form.controls.emailOnSuccess)("errorMessages",o.errors.email),T.Ab(2),T.Uc(T.oc(10,8,"PAYMENTS.NOTIFY.EMAIL"))}}function pa(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"button",70),T.ic("click",(function(e){return T.Ic(n),T.mc(2).saveToDraft()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"button",71),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Tb()}if(2&e){var o=T.mc(2);T.Ab(2),T.Uc(T.oc(3,2,"PAYMENTS.FORM.SAVE")),T.Ab(3),T.Vc("",T.oc(6,4,o.submitLabel)," ")}}function fa(e,t){1&e&&(T.Ub(0),T.Wb(1,"button",72),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function ha(e,t){1&e&&T.Rb(0,"j-kbe-info")}function va(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"div",3),T.Wb(2,"form",4,5),T.ic("submit",(function(e){return T.Ic(n),T.mc().onSubmit(e)})),T.Wb(4,"div",6),T.Wb(5,"fieldset"),T.Wb(6,"div",7),T.Wb(7,"h2",8),T.Tc(8),T.nc(9,"translate"),T.Vb(),T.Wb(10,"button",9),T.ic("click",(function(e){return T.Ic(n),T.mc().openSavedPayments()})),T.Tc(11),T.nc(12,"translate"),T.Vb(),T.Vb(),T.Wb(13,"div",10),T.Wb(14,"j-form-field"),T.Wb(15,"j-label"),T.Tc(16),T.nc(17,"translate"),T.Vb(),T.Rb(18,"input",11),T.Rc(19,na,3,3,"button",12),T.nc(20,"async"),T.nc(21,"async"),T.Wb(22,"div",13),T.nc(23,"async"),T.Rc(24,oa,4,1,"span",1),T.nc(25,"async"),T.Rc(26,ra,4,1,"span",1),T.nc(27,"async"),T.Vb(),T.Rb(28,"j-error",14),T.Vb(),T.Wb(29,"ul",15),T.Rc(30,aa,3,3,"li",16),T.Vb(),T.Vb(),T.Wb(31,"div",10),T.Wb(32,"j-form-field",17),T.Wb(33,"j-label"),T.Tc(34),T.nc(35,"translate"),T.Vb(),T.Rb(36,"input",18),T.Vb(),T.Vb(),T.Wb(37,"div",10),T.Wb(38,"j-form-field",17),T.Rb(39,"j-entity-logo",19),T.nc(40,"bankFromAccount"),T.Wb(41,"j-label"),T.Tc(42),T.nc(43,"translate"),T.Vb(),T.Rb(44,"input",20,21),T.Rb(46,"j-error",14),T.Vb(),T.Vb(),T.Wb(47,"div",10),T.Wb(48,"j-form-field",17),T.Wb(49,"j-label"),T.Tc(50),T.nc(51,"translate"),T.Vb(),T.Rb(52,"input",22),T.Rb(53,"a",23),T.Rb(54,"j-error",14),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(55,"div",6),T.Wb(56,"fieldset"),T.Wb(57,"legend",24),T.Tc(58),T.nc(59,"translate"),T.Vb(),T.Wb(60,"div",10),T.Wb(61,"j-form-field"),T.Wb(62,"j-label"),T.Tc(63),T.nc(64,"translate"),T.Vb(),T.Rb(65,"input",25),T.Vb(),T.Vb(),T.Wb(66,"div",10),T.Rb(67,"j-date-picker",26,27),T.nc(69,"async"),T.nc(70,"translate"),T.nc(71,"translate"),T.nc(72,"async"),T.Vb(),T.Wb(73,"div",10),T.Wb(74,"j-form-field",null,28),T.Wb(76,"j-label"),T.Tc(77),T.nc(78,"translate"),T.Vb(),T.Wb(79,"j-select",29,30),T.nc(81,"async"),T.Rc(82,ca,1,1,"ng-template",31),T.Vb(),T.Vb(),T.Vb(),T.Wb(83,"div",32),T.Wb(84,"span",33),T.Tc(85),T.nc(86,"async"),T.Vb(),T.Wb(87,"j-form-field"),T.Wb(88,"j-label"),T.Tc(89),T.nc(90,"translate"),T.Vb(),T.Rb(91,"textarea",34,35),T.Rb(93,"j-error",14),T.Rc(94,sa,3,1,"div",36),T.nc(95,"async"),T.Vb(),T.Wb(96,"div",37),T.Tc(97),T.nc(98,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(99,"div",6),T.Wb(100,"fieldset"),T.Wb(101,"div",10),T.Wb(102,"j-account-dropdown",38,39),T.ic("selected",(function(e){return T.Ic(n),T.mc().onSenderAccountSelect(e)})),T.nc(104,"async"),T.nc(105,"async"),T.Vb(),T.Vb(),T.Wb(106,"div",10),T.Wb(107,"div",10),T.Wb(108,"j-form-field",40),T.Wb(109,"j-label"),T.Tc(110),T.nc(111,"translate"),T.Vb(),T.Rb(112,"input",41),T.Vb(),T.Rc(113,la,3,3,"div",42),T.nc(114,"async"),T.Wb(115,"div",43),T.Rc(116,ua,3,3,"ng-container",44),T.nc(117,"async"),T.Rc(118,ba,4,8,"ng-template",null,45,T.Sc),T.Vb(),T.Vb(),T.Vb(),T.Wb(120,"div",10),T.Wb(121,"ul",46),T.Wb(122,"li",47),T.Rb(123,"j-switch",48),T.Wb(124,"span",49),T.Tc(125),T.nc(126,"translate"),T.Rb(127,"br"),T.Wb(128,"small",50),T.Tc(129),T.nc(130,"translate"),T.nc(131,"amountFormat"),T.nc(132,"async"),T.Vb(),T.Vb(),T.Vb(),T.Wb(133,"li",47),T.Rb(134,"j-switch",48),T.Wb(135,"span",49),T.Tc(136),T.nc(137,"translate"),T.Rb(138,"br"),T.Wb(139,"small",50),T.Tc(140),T.nc(141,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Wb(142,"li",47),T.Rb(143,"j-switch",48),T.Wb(144,"div",51),T.Wb(145,"strong"),T.Tc(146),T.nc(147,"translate"),T.Vb(),T.Rb(148,"br"),T.Rc(149,ma,4,3,"div",1),T.Rc(150,da,11,10,"div",52),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(151,"div",53),T.Wb(152,"div",53),T.Rc(153,pa,7,6,"ng-container",1),T.Rc(154,fa,4,3,"ng-container",1),T.Vb(),T.Vb(),T.Rb(155,"ngx-spinner",54),T.Vb(),T.Vb(),T.Rc(156,ha,1,0,"ng-template",null,55,T.Sc),T.Tb()}if(2&e){var o=T.Fc(68),r=T.Fc(75),a=T.Fc(80),i=T.Fc(119),c=T.Fc(157),s=T.mc();T.Ab(2),T.uc("formGroup",s.form),T.Ab(6),T.Vc(" ",T.oc(9,90,"PAYMENTS.RECIPIENT.TITLE")," "),T.Ab(3),T.Vc(" ",T.oc(12,92,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),T.Ab(5),T.Uc(T.oc(17,94,"PAYMENTS.FORM.IIN")),T.Ab(2),T.uc("dropSpecialCharacters",!0)("jShadow",s.masks.iinOrBin.shadow)("mask",s.masks.iinOrBin.mask)("formControl",s.form.controls.iinOrBin),T.Ab(1),T.uc("ngIf",s.form.controls.iinOrBin.valid&&s.iinIsNotOwn&&!T.oc(20,96,s.iinIsSubmitted$)&&!T.oc(21,98,s.iinIsFound$)),T.Ab(3),T.uc("jLoading",T.oc(23,100,s.isCounterPartyLoading$))("jLoadingInverted",!0),T.Ab(2),T.uc("ngIf",T.oc(25,102,s.counterParty$)===s.counterPartyStatus.SUCCESS),T.Ab(2),T.uc("ngIf",T.oc(27,104,s.counterParty$)===s.counterPartyStatus.ERROR),T.Ab(2),T.uc("control",s.form.controls.iinOrBin)("errorMessages",s.errors.iinOrBin),T.Ab(2),T.uc("ngForOf",s.riskGroups),T.Ab(4),T.Uc(T.oc(35,106,"PAYMENTS.FORM.NAME")),T.Ab(2),T.uc("formControl",s.form.controls.name),T.Ab(3),T.uc("name",T.oc(40,108,"KZ"+s.form.controls.bankAccount.value)),T.Ab(3),T.Uc(T.oc(43,110,"PAYMENTS.FORM.IBAN")),T.Ab(2),T.uc("jShadow",s.masks.bankAccount.shadow)("dropSpecialCharacters",!0)("mask",s.masks.bankAccount.mask)("formControl",s.form.controls.bankAccount),T.Ab(2),T.uc("control",s.form.controls.bankAccount)("errorMessages",s.errors.bankAccount),T.Ab(4),T.Uc(T.oc(51,112,"PAYMENTS.FORM.KBE")),T.Ab(2),T.uc("mask",s.masks.kbeCode.mask)("jShadow",s.masks.kbeCode.shadow)("dropSpecialCharacters",!0)("formControl",s.form.controls.kbeCode),T.Ab(1),T.uc("ngbTooltip",c)("inlineSVG","/assets/icons/payments/question.svg"),T.Ab(1),T.uc("control",s.form.controls.kbeCode)("errorMessages",s.errors.kbeCode),T.Ab(4),T.Uc(T.oc(59,114,"PAYMENTS.FORM.DETAILS")),T.Ab(5),T.Uc(T.oc(64,116,"PAYMENTS.FORM.DOCUMENT_NUMBER")),T.Ab(2),T.uc("mask",s.masks.number.mask)("formControl",s.form.controls.number),T.Ab(2),T.uc("datesEnabled",T.oc(69,118,s.workingDays$))("formControl",s.form.controls.date)("formatValue",!0)("jFocusOnReturn",o)("label",T.oc(70,120,"PAYMENTS.FORM.VALUE_DATE"))("minDate",s.dateLimit.minDate)("maxDate",s.dateLimit.maxDate)("helperText",T.oc(71,122,T.oc(72,124,s.dateMessage$))),T.Ab(10),T.Uc(T.oc(78,126,"PAYMENTS.FORM.KNP_REGULAR")),T.Ab(2),T.uc("jFocusOnReturn",a)("appendTo",r.elementRef.nativeElement)("formControl",s.form.controls.knp)("clearable",!1)("searchMask",s.masks.knp.mask)("shadow",s.masks.knp.shadow)("compareWith",s.knpComparator)("items",T.oc(81,128,s.knp$)),T.Ab(6),T.Wc(" ",T.oc(86,130,s.purposeLength$),"/",s.rules.purposeLength,""),T.Ab(4),T.Uc(T.oc(90,132,"PAYMENTS.FORM.PURPOSE")),T.Ab(2),T.uc("formControl",s.form.controls.purpose),T.Ab(2),T.uc("control",s.form.controls.purpose)("errorMessages",s.errors.purpose),T.Ab(1),T.uc("ngIf",T.oc(95,134,s.purposeMessage$)),T.Ab(3),T.Vc(" ",T.oc(98,136,"PAYMENTS.FORM.PURPOSE_HELPER")," "),T.Ab(5),T.uc("isLoading",T.oc(104,138,s.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",s.form.controls.senderAccount.touched&&s.form.controls.senderAccount.errors)("accounts",T.oc(105,140,s.acceptableAccounts$)),T.Ab(6),T.uc("floatLabel","always"),T.Ab(2),T.Uc(T.oc(111,142,"PAYMENTS.FORM.AMOUNT")),T.Ab(2),T.uc("dropSpecialCharacters",!0)("formControl",s.form.controls.amount),T.Ab(1),T.uc("ngIf",T.oc(114,144,s.amountMessage$)),T.Ab(3),T.uc("ngIf",null===T.oc(117,146,s.commission$))("ngIfElse",i),T.Ab(7),T.uc("formControl",s.form.controls.vat),T.Ab(2),T.Vc(" ",T.oc(126,148,"PAYMENTS.VAT.TITLE"),""),T.Ab(4),T.Wc("",T.oc(130,150,"PAYMENTS.VAT.DESCRIPTION")," = ",T.oc(131,152,T.oc(132,154,s.vat$))," \u20b8"),T.Ab(5),T.uc("formControl",s.form.controls.urgent),T.Ab(2),T.Vc("",T.oc(137,156,"PAYMENTS.FORM.URGENT")," "),T.Ab(4),T.Uc(T.oc(141,158,"PAYMENTS.URGENT_HELPER")),T.Ab(3),T.uc("formControl",s.form.controls.notify),T.Ab(3),T.Uc(T.oc(147,160,"PAYMENTS.NOTIFY.TITLE")),T.Ab(3),T.uc("ngIf",!s.form.controls.notify.value),T.Ab(1),T.uc("ngIf",s.form.controls.notify.value),T.Ab(3),T.uc("ngIf",s.restoredData.status!==s.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("ngIf",s.restoredData.status===s.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("name",s.SPINNER)("fullScreen",!1)}}var ya,ga=function(e){return e.SUCCESS="SUCCESS",e.ERROR="ERROR",e}({}),Aa=((ya=function(e){function t(e,n,o,r,a,i,c,s,l,u,b,m,d,p,f,h){var v;return _classCallCheck(this,t),(v=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,p.createPaymentInTengeForm(),i,r,a,e,n,o,m,c,d,s,l,u))).companyService=e,v.paymentsService=n,v.maskService=o,v.route=r,v.router=a,v.api=i,v.dictionaries=c,v.translateService=s,v.authorityPermissionsService=l,v.featureFlagsService=u,v.accountsService=b,v.modalService=m,v.pipelines=d,v.paymentsFormsFactory=p,v.recipientsService=f,v.userService=h,v.isCounterPartyLoading$=new N.a(null),v.masks={iinOrBin:"iin",bankAccount:"tengeAccount",kbeCode:"kbe",knp:"knp",number:"paymentNum",amount:"amount"},v.riskGroups=[],v.counterPartyStatus=ga,v.counterParty$=new N.a(null),v.focusEmail$=new I.a,v.prevEmails$=new N.a([]),v.fetchingEmailsFor$=new N.a(null),v.iinIsSubmitted$=new N.a(null),v.iinIsFound$=new N.a(null),v.paymentType=B.j.REGULAR_PAYMENT_ORDER,v.user=v.userService.user,v}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(t.prototype),"ngOnInit",this).call(this),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)((function(t){return e.checkPersonalAccounts(t)}))),this.knp$=this.combineKNP([function(t){return e.dictionaries.selectByPaymentType(t,{type:B.j.REGULAR_PAYMENT_ORDER,sortFavourite:!0})}]),this.listenWorkingDays(),this.getMaskConfig(),this.createControlsStream(this.form),this.listenVAT(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.listenEmailSearch();var n=this.controlsStream,o=n.bankAccount,r=n.senderAccount;this.subs.add(Object(O.a)([o.pipe(Object(L.a)((function(t){return e.form.controls.bankAccount.valid})),Object(x.a)("")),r.pipe(Object(L.a)((function(t){return e.form.controls.senderAccount.valid})),Object(A.a)((function(e){return e.iban})),Object(x.a)(""))]).pipe(Object(A.a)((function(t){var n=_slicedToArray(t,2),o=n[0],r=n[1];return e.paymentsService.checkPaymentTypeFromIban(r,"KZ"+o)}))).subscribe((function(t){return e.paymentType=t}))),this.applyCounterAgentVerification()}},{key:"openSavedPayments",value:function(){var e=this;this.modalService.open(ce,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then((function(t){var n=t.recipient,o=t.account;e.form.patchValue({bankAccount:o.iban,iinOrBin:n.iinOrBin,name:n.name,kbeCode:n.kbe.code}),e.form.markAsDirty()})).catch((function(){}))}},{key:"onEmailOnSuccessFocus",value:function(e){this.focusEmail$.next(e.target.value)}},{key:"openKnpDictionary",value:function(e,t){var n=this;e.close(),e.blur(),setTimeout((function(){var e=n.modals.open(me,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0});e.componentInstance.paymentType=B.j.REGULAR_PAYMENT_ORDER,e.result.then((function(e){n.form.controls.knp.patchValue(e.code)})).catch((function(){}))}),0)}},{key:"applyCounterAgentVerification",value:function(){var e=this,t=this.form.controls.iinOrBin;this.subs.add(this.controlsStream.iinOrBin.pipe(Object(M.a)(),Object(_.a)(300),Object(Y.a)((function(n){return e.counterParty$.next(null),e.iinIsFound$.next(null),e.iinIsSubmitted$.next(null),t.valid&&(e.iinIsNotOwn=e.user.iin!==n,e.isCounterPartyLoading$.next(n)),e.isCounterPartyLoading$.next(null),Object(j.a)(null)}))).subscribe((function(t){t&&e.checkCounterParty(t),e.isCounterPartyLoading$.next(null)})))}},{key:"checkCounterParty",value:function(e){var t,n,o;(null===(t=e.companyInfo)||void 0===t?void 0:t.name)&&this.form.controls.name.setValue(null===(n=e.companyInfo)||void 0===n?void 0:n.name),e.riskGroups&&(this.riskGroups=e.riskGroups),this.counterParty$.next(0===(null===(o=e.riskGroups)||void 0===o?void 0:o.length)?this.counterPartyStatus.SUCCESS:this.counterPartyStatus.ERROR)}},{key:"listenEmailSearch",value:function(){var e=this,t=this.form.controls.emailOnSuccess;this.subs.add(this.controlsStream.notify.pipe(Object(_.a)(100)).subscribe((function(e){return e?t.enable():t.disable()}))),this.subs.add(this.controlsStream.iinOrBin.pipe(Object(_.a)(200),Object(L.a)((function(t){return e.form.controls.iinOrBin.valid})),Object(Y.a)((function(t){return e.fetchingEmailsFor$.next(t),e.prevEmails$.next([]),e.recipientsService.getPrevNotifications(t).catch((function(e){return[]}))}))).subscribe((function(t){e.prevEmails$.next(t),e.fetchingEmailsFor$.next(null)}))),this.search=function(t){return Object(O.a)([e.prevEmails$.pipe(Object(A.a)((function(e){return e.map((function(e){return e.email}))}))),t.pipe(Object(_.a)(200),Object(M.a)(),Object(x.a)("")),e.focusEmail$]).pipe(Object(A.a)((function(e){var t=_slicedToArray(e,3),n=t[0],o=t[1];return t[2],o?n.filter((function(e){return e.toLowerCase().indexOf(o.toLowerCase())>-1})).slice(0,3):n.slice(0,3)})))}}},{key:"checkIin",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.riskGroups=[],this.iinIsSubmitted$.next(!0),t=this.form.controls.iinOrBin.value,this.isCounterPartyLoading$.next(t),this.recipientsService.checkCounterParty(t).then((function(e){return Object(V.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&this.checkCounterParty(e),t.next=3,this.successfulCounterPartyResult();case 3:case"end":return t.stop()}}),t,this)})))})).catch((function(e){console.error(e),n.iinIsSubmitted$.next(null),n.iinIsFound$.next(null),n.isCounterPartyLoading$.next(null),n.showSignError()}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"showSignError",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modalService.open(Pt,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"successfulCounterPartyResult",value:function(){return Object(V.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.iinIsSubmitted$.next(null),this.iinIsFound$.next(!0),this.isCounterPartyLoading$.next(null);case 1:case"end":return e.stop()}}),e,this)})))}}]),t}(Bt)).\u0275fac=function(e){return new(e||ya)(T.Qb(gr.a),T.Qb(C.c),T.Qb(Kt.a),T.Qb(p.a),T.Qb(p.c),T.Qb(Tr.a),T.Qb(se.a),T.Qb(c.e),T.Qb(Ht.c),T.Qb(q.b),T.Qb(l.c),T.Qb(i.q),T.Qb(Ar.a),T.Qb(Rr.a),T.Qb(X.a),T.Qb(Zr.h))},ya.\u0275cmp=T.Kb({type:ya,selectors:[["j-payment-order"]],viewQuery:function(e,t){var n;1&e&&T.Oc(ea,!0),2&e&&T.Ec(n=T.jc())&&(t.emailOnSuccess=n.first)},features:[T.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],[1,"payment-section"],["jInvalidControlScroll","","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"dropSpecialCharacters","jShadow","mask","formControl"],["jSuffix","","type","button","class","btn btn-xs btn-link",3,"click",4,"ngIf"],["jSuffix","",1,"counterParty","p3",3,"jLoading","jLoadingInverted"],[3,"control","errorMessages"],[1,"navbar-nav","mt-2"],["class","p3 risk-li text-muted",4,"ngFor","ngForOf"],["clearable","true"],["type","text","jFocusOnReturn","","jFormInput","",1,"form-control",3,"formControl"],["jPrefix","","hideEmpty","true",3,"name"],["type","text","jFormInput","","jReplaceOnPaste","KZ","jDynamicPrefix","KZ","jFocusOnReturn","","jUppercase","",1,"form-control",3,"jShadow","dropSpecialCharacters","mask","formControl"],["accountInput","jFormInput"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","jShadow","dropSpecialCharacters","formControl"],["href","javascript:void(0)","jSuffix","","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-gray",3,"ngbTooltip","inlineSVG"],[1,"h2"],["type","text","jFormInput","","jFocusOnReturn","",1,"form-control",3,"mask","formControl"],["allowAuto","true",3,"datesEnabled","formControl","formatValue","jFocusOnReturn","label","minDate","maxDate","helperText"],["datePicker",""],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","compareWith","items"],["select",""],["j-header-tmp",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],["clearable","true",3,"floatLabel"],["type","text","jFocusOnReturn","","jFormInput","","jCursorBound","","jReplaceDot","","suffix"," \u20b8","placeholder","0,00","mask","separator.2","thousandSeparator"," ","decimalMarker",",",1,"form-control",3,"dropSpecialCharacters","formControl"],["class","j-input-helper text-muted mt-1 p3",4,"ngIf"],[1,"j-input-helper","text-muted","mt-1","p3","position-relative"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group"],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"ml-3","flex-grow-1"],["class","mt-1",4,"ngIf"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["kbeInfo",""],["jSuffix","","type","button",1,"btn","btn-xs","btn-link",3,"click"],["translate","",1,"text-muted","mr-2"],[1,"text-success",3,"inlineSVG"],[1,"text-danger",3,"inlineSVG"],[1,"p3","risk-li","text-muted"],["type","button",1,"form-section--action","btn","btn-xs","btn-link","float-right",3,"click"],[1,"p2","m-0"],[1,"p3","text-gray"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[3,"innerHTML"],[1,"mt-1"],["type","email","jFormInput","","jFocusOnReturn","","autocomplete","off",1,"form-control",3,"ngbTypeahead","formControl","focus"],["emailOnSuccess","ngbTypeahead"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(e,t){1&e&&(T.Rc(0,ta,1,2,"j-restricted-placeholder",0),T.Rc(1,va,158,162,"ng-container",1)),2&e&&(T.uc("ngIf",t.isRestricted),T.Ab(1),T.uc("ngIf",!t.isRestricted))},directives:[o.u,Xt.a,r.J,r.u,zt.b,Me.b,r.l,z.a,We.a,ee.a,r.c,Me.a,ln.a,a.a,r.t,r.i,_e.a,sn.a,we.a,o.t,te.a,Z.a,ur.a,cr.a,nn.a,i.E,xe.a,on.a,en.a,tn.b,Jt.a,rn.a,an.a,Zt.a,cn.a,c.a,un.a,i.G,bn.a],pipes:[c.d,o.b,ne.a,Er.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}.counterParty[_ngcontent-%COMP%]{position:relative;min-width:40px;height:100%}li.risk-li[_ngcontent-%COMP%] + li.risk-li[_ngcontent-%COMP%]{margin-top:.5rem}"]}),ya),Ta=n("LXWx");function Ra(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-restricted-placeholder",2),T.ic("retried",(function(e){return T.Ic(n),T.mc().updatePermissions()})),T.Vb()}if(2&e){var o=T.mc();T.uc("isRetryable",o.isPermissionsUpdateAllowed)("isLoading",o.isPermissionsUpdating)}}function Ca(e,t){if(1&e&&(T.Wb(0,"div",36),T.Wb(1,"div",37),T.Tc(2),T.Vb(),T.Vb()),2&e){var n=t.ngIf;T.Ab(2),T.Vc(" ",n," ")}}function Ea(e,t){if(1&e&&(T.Wb(0,"div",38),T.Rb(1,"span",39),T.nc(2,"translate"),T.Vb()),2&e){var n=t.ngIf;T.Ab(1),T.uc("innerHTML",T.oc(2,1,n),T.Jc)}}function ka(e,t){1&e&&(T.Ub(0),T.Tc(1),T.nc(2,"translate"),T.Tb()),2&e&&(T.Ab(1),T.Vc(" ",T.oc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Sa(e,t){if(1&e&&(T.Tc(0),T.nc(1,"translate"),T.nc(2,"amountFormat"),T.nc(3,"async")),2&e){var n=T.mc(2);T.Wc(" ",T.oc(1,2,"PAYMENTS.COMMISSION"),": ",T.oc(2,4,T.oc(3,6,n.commission$))," \u20b8 ")}}function Va(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"button",40),T.ic("click",(function(e){return T.Ic(n),T.mc(2).saveToDraft()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"button",41),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Tb()}if(2&e){var o=T.mc(2);T.Ab(2),T.Uc(T.oc(3,2,"PAYMENTS.FORM.SAVE")),T.Ab(3),T.Vc("",T.oc(6,4,o.submitLabel)," ")}}function Na(e,t){1&e&&(T.Ub(0),T.Wb(1,"button",42),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function Ia(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"form",3,4),T.ic("submit",(function(e){return T.Ic(n),T.mc().onSubmit(e)})),T.Wb(3,"div",5),T.Wb(4,"fieldset"),T.Wb(5,"legend",6),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"div",7),T.Wb(9,"j-form-field"),T.Wb(10,"j-label"),T.Tc(11),T.nc(12,"translate"),T.Vb(),T.Rb(13,"input",8),T.Vb(),T.Vb(),T.Wb(14,"div",7),T.Wb(15,"j-form-field",null,9),T.Wb(17,"j-label"),T.Tc(18),T.nc(19,"translate"),T.Vb(),T.Rb(20,"j-select",10,11),T.nc(22,"async"),T.Vb(),T.Vb(),T.Wb(23,"div",12),T.Wb(24,"span",13),T.Tc(25),T.nc(26,"async"),T.Vb(),T.Wb(27,"j-form-field"),T.Wb(28,"j-label"),T.Tc(29),T.nc(30,"translate"),T.Vb(),T.Rb(31,"textarea",14,15),T.Rb(33,"j-error",16),T.Rc(34,Ca,3,1,"div",17),T.nc(35,"async"),T.Vb(),T.Vb(),T.Wb(36,"div",7),T.Wb(37,"j-account-dropdown",18,19),T.ic("selected",(function(e){return T.Ic(n),T.mc().onSenderAccountSelect(e)})),T.nc(39,"async"),T.nc(40,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(41,"div",5),T.Wb(42,"fieldset"),T.Wb(43,"j-employee-group-control",20),T.Rb(44,"j-error",16),T.Vb(),T.Vb(),T.Vb(),T.Wb(45,"div",21),T.Wb(46,"div",7),T.Wb(47,"fieldset"),T.Wb(48,"ul",22),T.Wb(49,"li",23),T.Wb(50,"h5",24),T.Tc(51),T.nc(52,"translate"),T.Wb(53,"span",25),T.Wb(54,"strong"),T.Tc(55),T.nc(56,"amountFormat"),T.nc(57,"async"),T.Vb(),T.Tc(58," \u20b8"),T.Vb(),T.Vb(),T.Rc(59,Ea,3,3,"div",26),T.nc(60,"async"),T.Wb(61,"p",27),T.Rc(62,ka,3,3,"ng-container",28),T.nc(63,"async"),T.Rc(64,Sa,4,8,"ng-template",null,29,T.Sc),T.Vb(),T.Vb(),T.Wb(66,"li",30),T.Rb(67,"j-switch",31),T.Wb(68,"span",32),T.Tc(69),T.nc(70,"translate"),T.Rb(71,"br"),T.Wb(72,"small",33),T.Tc(73),T.nc(74,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(75,"div",34),T.Wb(76,"div",34),T.Rc(77,Va,7,6,"ng-container",1),T.Rc(78,Na,4,3,"ng-container",1),T.Vb(),T.Vb(),T.Rb(79,"ngx-spinner",35),T.Vb(),T.Tb()}if(2&e){var o=T.Fc(16),r=T.Fc(21),a=T.Fc(65),i=T.mc();T.Ab(1),T.uc("formGroup",i.form),T.Ab(5),T.Uc(T.oc(7,45,"PAYMENTS.FORM.DETAILS")),T.Ab(5),T.Uc(T.oc(12,47,"PAYMENTS.FORM.DOCUMENT_NUMBER")),T.Ab(2),T.uc("mask",i.masks.number.mask)("formControl",i.form.controls.number),T.Ab(5),T.Uc(T.oc(19,49,"PAYMENTS.FORM.KNP")),T.Ab(2),T.uc("jFocusOnReturn",r)("appendTo",o.elementRef.nativeElement)("formControl",i.form.controls.knp)("clearable",!1)("searchMask",i.masks.knp.mask)("shadow",i.masks.knp.shadow)("items",T.oc(22,51,i.knp$)),T.Ab(5),T.Wc(" ",T.oc(26,53,i.purposeLength$),"/",i.rules.purposeLength,""),T.Ab(4),T.Uc(T.oc(30,55,"PAYMENTS.FORM.PURPOSE")),T.Ab(2),T.uc("formControl",i.form.controls.purpose),T.Ab(2),T.uc("control",i.form.controls.purpose)("errorMessages",i.errors.purpose),T.Ab(1),T.uc("ngIf",T.oc(35,57,i.purposeMessage$)),T.Ab(3),T.uc("isLoading",T.oc(39,59,i.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",i.form.controls.senderAccount.touched&&i.form.controls.senderAccount.errors)("accounts",T.oc(40,61,i.acceptableAccounts$)),T.Ab(6),T.uc("formControl",i.form.controls.employees)("paymentType",i.paymentType)("minAmount",i.employeeMinAmount)("maxAmount",i.employeeMaxAmount)("periodRequired",!0)("birthDateRequired",!0)("additionalPeriodEnabled",!0),T.Ab(1),T.uc("control",i.form.controls.employees)("errorMessages",i.errors.employees),T.Ab(7),T.Vc("",T.oc(52,63,"PAYMENTS.FORM.TOTAL_AMOUNT"),": "),T.Ab(4),T.Uc(T.oc(56,65,T.oc(57,67,i.total$))),T.Ab(4),T.uc("ngIf",T.oc(60,69,i.amountMessage$)),T.Ab(3),T.uc("ngIf",null===T.oc(63,71,i.commission$))("ngIfElse",a),T.Ab(5),T.uc("formControl",i.form.controls.urgent),T.Ab(2),T.Vc("",T.oc(70,73,"PAYMENTS.FORM.URGENT")," "),T.Ab(4),T.Uc(T.oc(74,75,"PAYMENTS.URGENT_HELPER")),T.Ab(4),T.uc("ngIf",i.restoredData.status!==i.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("ngIf",i.restoredData.status===i.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("name",i.SPINNER)("fullScreen",!1)}}var Oa,ja=((Oa=function(e){function t(e,n,o,r,a,i,c,s,l,u,b,m,d,p,f){var h;return _classCallCheck(this,t),(h=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,p.createPensionForm(),u,e,n,r,o,i,s,l,b,m,d,f))).route=e,h.router=n,h.paymentsService=o,h.companyService=r,h.dateAdapter=a,h.maskService=i,h.accountsService=c,h.modalService=s,h.dictionaries=l,h.api=u,h.pipeline=b,h.translateService=m,h.authorityPermissionsService=d,h.paymentsFormsFactory=p,h.featureFlagsService=f,h.masks={number:"paymentNum",amount:"amount",knp:"knp"},h.employeeMinAmount=6e3,h.employeeMaxAmount=null,h.employees$=new N.a([]),h.amount$=new N.a(0),h.subs=new je.a,h.paymentType=B.j.PENSION,h}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(t.prototype),"ngOnInit",this).call(this),this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)((function(t){return e.checkPersonalAccounts(t)}))),this.getMaskConfig(),this.createControlsStream(this.form),this.knp$=this.combineKNP(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream()}}]),t}(Bt)).\u0275fac=function(e){return new(e||Oa)(T.Qb(p.a),T.Qb(p.c),T.Qb(Mt.g),T.Qb(gr.a),T.Qb(i.c),T.Qb(Kt.a),T.Qb(l.c),T.Qb(i.q),T.Qb(Zr.a),T.Qb(Mt.c),T.Qb(Mt.f),T.Qb(c.e),T.Qb(Ht.c),T.Qb(Mt.e),T.Qb(q.b))},Oa.\u0275cmp=T.Kb({type:Oa,selectors:[["j-pension-payment"]],features:[T.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],["jInvalidControlScroll","","autocomplete","off","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","minAmount","maxAmount","periodRequired","birthDateRequired","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(e,t){1&e&&(T.Rc(0,Ra,1,2,"j-restricted-placeholder",0),T.Rc(1,Ia,80,77,"ng-container",1)),2&e&&(T.uc("ngIf",t.isRestricted),T.Ab(1),T.uc("ngIf",!t.isRestricted))},directives:[o.u,Xt.a,r.J,r.u,zt.b,Me.b,r.l,z.a,We.a,ee.a,r.c,Me.a,a.a,r.t,r.i,en.a,we.a,Jt.a,Ta.a,Zt.a,cn.a,un.a],pipes:[c.d,o.b,Er.a],styles:[""],encapsulation:2}),Oa);function Pa(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-restricted-placeholder",2),T.ic("retried",(function(e){return T.Ic(n),T.mc().updatePermissions()})),T.Vb()}if(2&e){var o=T.mc();T.uc("isRetryable",o.isPermissionsUpdateAllowed)("isLoading",o.isPermissionsUpdating)}}function Wa(e,t){if(1&e&&(T.Wb(0,"div",36),T.Wb(1,"div",37),T.Tc(2),T.Vb(),T.Vb()),2&e){var n=t.ngIf;T.Ab(2),T.Vc(" ",n," ")}}function Ma(e,t){if(1&e&&(T.Wb(0,"div",38),T.Rb(1,"span",39),T.nc(2,"translate"),T.Vb()),2&e){var n=t.ngIf;T.Ab(1),T.uc("innerHTML",T.oc(2,1,n),T.Jc)}}function _a(e,t){1&e&&(T.Ub(0),T.Tc(1),T.nc(2,"translate"),T.Tb()),2&e&&(T.Ab(1),T.Vc(" ",T.oc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function xa(e,t){if(1&e&&(T.Tc(0),T.nc(1,"translate"),T.nc(2,"amountFormat"),T.nc(3,"async")),2&e){var n=T.mc(2);T.Wc(" ",T.oc(1,2,"PAYMENTS.COMMISSION"),": ",T.oc(2,4,T.oc(3,6,n.commission$))," \u20b8 ")}}function wa(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"button",40),T.ic("click",(function(e){return T.Ic(n),T.mc(2).saveToDraft()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"button",41),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Tb()}if(2&e){var o=T.mc(2);T.Ab(2),T.Uc(T.oc(3,2,"PAYMENTS.FORM.SAVE")),T.Ab(3),T.Vc("",T.oc(6,4,o.submitLabel)," ")}}function Da(e,t){1&e&&(T.Ub(0),T.Wb(1,"button",42),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function Ya(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"form",3,4),T.ic("submit",(function(e){return T.Ic(n),T.mc().onSubmit(e)})),T.Wb(3,"div",5),T.Wb(4,"fieldset"),T.Wb(5,"legend",6),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"div",7),T.Wb(9,"j-form-field"),T.Wb(10,"j-label"),T.Tc(11),T.nc(12,"translate"),T.Vb(),T.Rb(13,"input",8),T.Vb(),T.Vb(),T.Wb(14,"div",7),T.Wb(15,"j-form-field",null,9),T.Wb(17,"j-label"),T.Tc(18),T.nc(19,"translate"),T.Vb(),T.Rb(20,"j-select",10,11),T.nc(22,"async"),T.Vb(),T.Vb(),T.Wb(23,"div",12),T.Wb(24,"span",13),T.Tc(25),T.nc(26,"async"),T.Vb(),T.Wb(27,"j-form-field"),T.Wb(28,"j-label"),T.Tc(29),T.nc(30,"translate"),T.Vb(),T.Rb(31,"textarea",14,15),T.Rb(33,"j-error",16),T.Rc(34,Wa,3,1,"div",17),T.nc(35,"async"),T.Vb(),T.Vb(),T.Wb(36,"div",7),T.Wb(37,"j-account-dropdown",18,19),T.ic("selected",(function(e){return T.Ic(n),T.mc().onSenderAccountSelect(e)})),T.nc(39,"async"),T.nc(40,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(41,"div",5),T.Wb(42,"fieldset"),T.Wb(43,"j-employee-group-control",20),T.Rb(44,"j-error",16),T.Vb(),T.Vb(),T.Vb(),T.Wb(45,"div",21),T.Wb(46,"div",7),T.Wb(47,"fieldset"),T.Wb(48,"ul",22),T.Wb(49,"li",23),T.Wb(50,"h5",24),T.Tc(51),T.nc(52,"translate"),T.Wb(53,"span",25),T.Wb(54,"strong"),T.Tc(55),T.nc(56,"amountFormat"),T.nc(57,"async"),T.Vb(),T.Tc(58," \u20b8"),T.Vb(),T.Vb(),T.Rc(59,Ma,3,3,"div",26),T.nc(60,"async"),T.Wb(61,"p",27),T.Rc(62,_a,3,3,"ng-container",28),T.nc(63,"async"),T.Rc(64,xa,4,8,"ng-template",null,29,T.Sc),T.Vb(),T.Vb(),T.Wb(66,"li",30),T.Rb(67,"j-switch",31),T.Wb(68,"span",32),T.Tc(69),T.nc(70,"translate"),T.Rb(71,"br"),T.Wb(72,"small",33),T.Tc(73),T.nc(74,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(75,"div",34),T.Wb(76,"div",34),T.Rc(77,wa,7,6,"ng-container",1),T.Rc(78,Da,4,3,"ng-container",1),T.Vb(),T.Vb(),T.Rb(79,"ngx-spinner",35),T.Vb(),T.Tb()}if(2&e){var o=T.Fc(16),r=T.Fc(21),a=T.Fc(65),i=T.mc();T.Ab(1),T.uc("formGroup",i.form),T.Ab(5),T.Uc(T.oc(7,45,"PAYMENTS.FORM.DETAILS")),T.Ab(5),T.Uc(T.oc(12,47,"PAYMENTS.FORM.DOCUMENT_NUMBER")),T.Ab(2),T.uc("mask",i.masks.number.mask)("formControl",i.form.controls.number),T.Ab(5),T.Uc(T.oc(19,49,"PAYMENTS.FORM.KNP")),T.Ab(2),T.uc("jFocusOnReturn",r)("appendTo",o.elementRef.nativeElement)("formControl",i.form.controls.knp)("clearable",!1)("searchMask",i.masks.knp.mask)("shadow",i.masks.knp.shadow)("items",T.oc(22,51,i.knp$)),T.Ab(5),T.Wc(" ",T.oc(26,53,i.purposeLength$),"/",i.rules.purposeLength,""),T.Ab(4),T.Uc(T.oc(30,55,"PAYMENTS.FORM.PURPOSE")),T.Ab(2),T.uc("formControl",i.form.controls.purpose),T.Ab(2),T.uc("control",i.form.controls.purpose)("errorMessages",i.errors.purpose),T.Ab(1),T.uc("ngIf",T.oc(35,57,i.purposeMessage$)),T.Ab(3),T.uc("isLoading",T.oc(39,59,i.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",i.form.controls.senderAccount.touched&&i.form.controls.senderAccount.errors)("accounts",T.oc(40,61,i.acceptableAccounts$)),T.Ab(6),T.uc("formControl",i.form.controls.employees)("paymentType",i.paymentType)("periodRequired",!0)("birthDateRequired",!0)("minAmount",i.employeeMinAmount)("maxAmount",i.employeeMaxAmount)("additionalPeriodEnabled",!0),T.Ab(1),T.uc("control",i.form.controls.employees)("errorMessages",i.errors.employees),T.Ab(7),T.Vc("",T.oc(52,63,"PAYMENTS.FORM.TOTAL_AMOUNT"),": "),T.Ab(4),T.Uc(T.oc(56,65,T.oc(57,67,i.total$))),T.Ab(4),T.uc("ngIf",T.oc(60,69,i.amountMessage$)),T.Ab(3),T.uc("ngIf",null===T.oc(63,71,i.commission$))("ngIfElse",a),T.Ab(5),T.uc("formControl",i.form.controls.urgent),T.Ab(2),T.Vc("",T.oc(70,73,"PAYMENTS.FORM.URGENT")," "),T.Ab(4),T.Uc(T.oc(74,75,"PAYMENTS.URGENT_HELPER")),T.Ab(4),T.uc("ngIf",i.restoredData.status!==i.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("ngIf",i.restoredData.status===i.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("name",i.SPINNER)("fullScreen",!1)}}var Ua,La=((Ua=function(e){function t(e,n,o,r,a,i,c,s,l,u,b,m,d,p,f){var h;return _classCallCheck(this,t),(h=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,d.createSocialForm(),l,r,a,n,e,i,s,u,b,m,f,p))).paymentsService=e,h.companyService=n,h.dateAdapter=o,h.route=r,h.router=a,h.maskService=i,h.accountsService=c,h.modalService=s,h.api=l,h.dictionaries=u,h.pipeline=b,h.translateService=m,h.paymentsFormsFactory=d,h.featureFlagsService=p,h.authorityPermissionsService=f,h.masks={number:"paymentNum",amount:"amount",knp:"knp"},h.employeeMinAmount=2100,h.employeeMaxAmount=null,h.paymentType=B.j.SOCIAL,h}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(t.prototype),"ngOnInit",this).call(this),this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)((function(t){return e.checkPersonalAccounts(t)}))),this.getMaskConfig(),this.createControlsStream(this.form),this.listenWorkingDays(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.knp$=this.combineKNP()}}]),t}(Bt)).\u0275fac=function(e){return new(e||Ua)(T.Qb(C.c),T.Qb(gr.a),T.Qb(i.c),T.Qb(p.a),T.Qb(p.c),T.Qb(Kt.a),T.Qb(l.c),T.Qb(i.q),T.Qb(Tr.a),T.Qb(se.a),T.Qb(Ar.a),T.Qb(c.e),T.Qb(Rr.a),T.Qb(q.b),T.Qb(Ht.c))},Ua.\u0275cmp=T.Kb({type:Ua,selectors:[["j-social-payment"]],features:[T.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],["jInvalidControlScroll","","jFocusableContainer","","autocomplete","off",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","periodRequired","birthDateRequired","minAmount","maxAmount","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(e,t){1&e&&(T.Rc(0,Pa,1,2,"j-restricted-placeholder",0),T.Rc(1,Ya,80,77,"ng-container",1)),2&e&&(T.uc("ngIf",t.isRestricted),T.Ab(1),T.uc("ngIf",!t.isRestricted))},directives:[o.u,Xt.a,r.J,r.u,zt.b,Me.b,r.l,z.a,We.a,ee.a,r.c,Me.a,a.a,r.t,r.i,en.a,we.a,Jt.a,Ta.a,Zt.a,cn.a,un.a],pipes:[c.d,o.b,Er.a],styles:[""]}),Ua);function Fa(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-restricted-placeholder",2),T.ic("retried",(function(e){return T.Ic(n),T.mc().updatePermissions()})),T.Vb()}if(2&e){var o=T.mc();T.uc("isRetryable",o.isPermissionsUpdateAllowed)("isLoading",o.isPermissionsUpdating)}}function $a(e,t){if(1&e&&(T.Wb(0,"div",36),T.Wb(1,"div",37),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()),2&e){var n=t.ngIf;T.Ab(2),T.Vc(" ",T.oc(3,1,n)," ")}}function Ba(e,t){if(1&e&&(T.Wb(0,"div",38),T.Rb(1,"span",39),T.nc(2,"translate"),T.Vb()),2&e){var n=t.ngIf;T.Ab(1),T.uc("innerHTML",T.oc(2,1,n),T.Jc)}}function Ka(e,t){1&e&&(T.Ub(0),T.Tc(1),T.nc(2,"translate"),T.Tb()),2&e&&(T.Ab(1),T.Vc(" ",T.oc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function Ha(e,t){if(1&e&&(T.Tc(0),T.nc(1,"translate"),T.nc(2,"amountFormat"),T.nc(3,"async")),2&e){var n=T.mc(2);T.Wc(" ",T.oc(1,2,"PAYMENTS.COMMISSION"),": ",T.oc(2,4,T.oc(3,6,n.commission$))," \u20b8 ")}}function Qa(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"button",40),T.ic("click",(function(e){return T.Ic(n),T.mc(2).saveToDraft()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"button",41),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Tb()}if(2&e){var o=T.mc(2);T.Ab(2),T.Uc(T.oc(3,2,"PAYMENTS.FORM.SAVE")),T.Ab(3),T.Vc("",T.oc(6,4,o.submitLabel)," ")}}function Ga(e,t){1&e&&(T.Ub(0),T.Wb(1,"button",42),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function qa(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"form",3,4),T.ic("submit",(function(e){return T.Ic(n),T.mc().onSubmit(e)})),T.Wb(3,"div",5),T.Wb(4,"fieldset"),T.Wb(5,"legend",6),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Wb(8,"div",7),T.Wb(9,"j-form-field"),T.Wb(10,"j-label"),T.Tc(11),T.nc(12,"translate"),T.Vb(),T.Rb(13,"input",8),T.Vb(),T.Vb(),T.Wb(14,"div",7),T.Wb(15,"j-form-field",null,9),T.Wb(17,"j-label"),T.Tc(18),T.nc(19,"translate"),T.Vb(),T.Rb(20,"j-select",10,11),T.nc(22,"async"),T.Vb(),T.Vb(),T.Wb(23,"div",12),T.Wb(24,"span",13),T.Tc(25),T.nc(26,"async"),T.Vb(),T.Wb(27,"j-form-field"),T.Wb(28,"j-label"),T.Tc(29),T.nc(30,"translate"),T.Vb(),T.Rb(31,"textarea",14,15),T.Rb(33,"j-error",16),T.Rc(34,$a,4,3,"div",17),T.nc(35,"async"),T.Vb(),T.Vb(),T.Wb(36,"div",7),T.Wb(37,"j-account-dropdown",18,19),T.ic("selected",(function(e){return T.Ic(n),T.mc().onSenderAccountSelect(e)})),T.nc(39,"async"),T.nc(40,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(41,"div",5),T.Wb(42,"fieldset"),T.Wb(43,"j-employee-group-control",20),T.Rb(44,"j-error",16),T.Vb(),T.Vb(),T.Vb(),T.Wb(45,"div",21),T.Wb(46,"div",7),T.Wb(47,"fieldset"),T.Wb(48,"ul",22),T.Wb(49,"li",23),T.Wb(50,"h5",24),T.Tc(51),T.nc(52,"translate"),T.Wb(53,"span",25),T.Wb(54,"strong"),T.Tc(55),T.nc(56,"amountFormat"),T.nc(57,"async"),T.Vb(),T.Tc(58," \u20b8"),T.Vb(),T.Vb(),T.Rc(59,Ba,3,3,"div",26),T.nc(60,"async"),T.Wb(61,"p",27),T.Rc(62,Ka,3,3,"ng-container",28),T.nc(63,"async"),T.Rc(64,Ha,4,8,"ng-template",null,29,T.Sc),T.Vb(),T.Vb(),T.Wb(66,"li",30),T.Rb(67,"j-switch",31),T.Wb(68,"span",32),T.Tc(69),T.nc(70,"translate"),T.Rb(71,"br"),T.Wb(72,"small",33),T.Tc(73),T.nc(74,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(75,"div",34),T.Rc(76,Qa,7,6,"ng-container",1),T.Rc(77,Ga,4,3,"ng-container",1),T.Vb(),T.Rb(78,"ngx-spinner",35),T.Vb(),T.Tb()}if(2&e){var o=T.Fc(16),r=T.Fc(21),a=T.Fc(65),i=T.mc();T.Ab(1),T.uc("formGroup",i.form),T.Ab(5),T.Uc(T.oc(7,45,"PAYMENTS.FORM.DETAILS")),T.Ab(5),T.Uc(T.oc(12,47,"PAYMENTS.FORM.DOCUMENT_NUMBER")),T.Ab(2),T.uc("mask",i.masks.number.mask)("formControl",i.form.controls.number),T.Ab(5),T.Uc(T.oc(19,49,"PAYMENTS.FORM.KNP")),T.Ab(2),T.uc("jFocusOnReturn",r)("appendTo",o.elementRef.nativeElement)("formControl",i.form.controls.knp)("clearable",!1)("searchMask",i.masks.knp.mask)("shadow",i.masks.knp.shadow)("items",T.oc(22,51,i.knp$)),T.Ab(5),T.Wc(" ",T.oc(26,53,i.purposeLength$),"/",i.rules.purposeLength,""),T.Ab(4),T.Uc(T.oc(30,55,"PAYMENTS.FORM.PURPOSE")),T.Ab(2),T.uc("formControl",i.form.controls.purpose),T.Ab(2),T.uc("control",i.form.controls.purpose)("errorMessages",i.errors.purpose),T.Ab(1),T.uc("ngIf",T.oc(35,57,i.purposeMessage$)),T.Ab(3),T.uc("isLoading",T.oc(39,59,i.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",i.form.controls.senderAccount.touched&&i.form.controls.senderAccount.errors)("accounts",T.oc(40,61,i.acceptableAccounts$)),T.Ab(6),T.uc("formControl",i.form.controls.employees)("paymentType",i.paymentType)("minAmount",i.employeeMinAmount)("maxAmount",i.employeeMaxAmount)("periodRequired",!0)("birthDateRequired",!0)("additionalPeriodEnabled",!0),T.Ab(1),T.uc("control",i.form.controls.employees)("errorMessages",i.errors.employees),T.Ab(7),T.Vc("",T.oc(52,63,"PAYMENTS.FORM.TOTAL_AMOUNT"),": "),T.Ab(4),T.Uc(T.oc(56,65,T.oc(57,67,i.total$))),T.Ab(4),T.uc("ngIf",T.oc(60,69,i.amountMessage$)),T.Ab(3),T.uc("ngIf",null===T.oc(63,71,i.commission$))("ngIfElse",a),T.Ab(5),T.uc("formControl",i.form.controls.urgent),T.Ab(2),T.Vc("",T.oc(70,73,"PAYMENTS.FORM.URGENT")," "),T.Ab(4),T.Uc(T.oc(74,75,"PAYMENTS.URGENT_HELPER")),T.Ab(3),T.uc("ngIf",i.restoredData.status!==i.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("ngIf",i.restoredData.status===i.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("name",i.SPINNER)("fullScreen",!1)}}var Xa,za=((Xa=function(e){function t(e,n,o,r,a,i,c,s,l,u,b,m,d,p,f){var h;return _classCallCheck(this,t),(h=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,d.createMedicalForm(),u,e,n,r,o,i,s,l,b,m,p,f))).route=e,h.router=n,h.paymentsService=o,h.companyService=r,h.dateAdapter=a,h.maskService=i,h.accountsService=c,h.modalService=s,h.dictionaries=l,h.api=u,h.pipeline=b,h.translateService=m,h.paymentsFormsFactory=d,h.authorityPermissionsService=p,h.featureFlagsService=f,h.masks={number:"paymentNum",amount:"amount",knp:"knp"},h.employeeMinAmount=4200,h.employeeMaxAmount=null,h.paymentType=B.j.MEDICAL,h}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(t.prototype),"ngOnInit",this).call(this),this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)((function(t){return e.checkPersonalAccounts(t)}))),this.getMaskConfig(),this.createControlsStream(this.form),this.knp$=this.combineKNP(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream()}}]),t}(Bt)).\u0275fac=function(e){return new(e||Xa)(T.Qb(p.a),T.Qb(p.c),T.Qb(C.c),T.Qb(gr.a),T.Qb(i.c),T.Qb(Kt.a),T.Qb(l.c),T.Qb(i.q),T.Qb(se.a),T.Qb(Tr.a),T.Qb(Ar.a),T.Qb(c.e),T.Qb(Rr.a),T.Qb(Ht.c),T.Qb(q.b))},Xa.\u0275cmp=T.Kb({type:Xa,selectors:[["j-medical-payment"]],features:[T.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],["jInvalidControlScroll","","jFocusableContainer","","autocomplete","off",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"h2"],[1,"form-group"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["knpWrapper",""],["bindValue","code","bindLabel","label",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","minAmount","maxAmount","periodRequired","birthDateRequired","additionalPeriodEnabled"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(e,t){1&e&&(T.Rc(0,Fa,1,2,"j-restricted-placeholder",0),T.Rc(1,qa,79,77,"ng-container",1)),2&e&&(T.uc("ngIf",t.isRestricted),T.Ab(1),T.uc("ngIf",!t.isRestricted))},directives:[o.u,Xt.a,r.J,r.u,zt.b,Me.b,r.l,z.a,We.a,ee.a,r.c,Me.a,a.a,r.t,r.i,en.a,we.a,Jt.a,Ta.a,Zt.a,cn.a,un.a],pipes:[c.d,o.b,Er.a],styles:[""]}),Xa);function Ja(e,t){if(1&e){var n=T.Xb();T.Wb(0,"j-restricted-placeholder",2),T.ic("retried",(function(e){return T.Ic(n),T.mc().updatePermissions()})),T.Vb()}if(2&e){var o=T.mc();T.uc("isRetryable",o.isPermissionsUpdateAllowed)("isLoading",o.isPermissionsUpdating)}}function Za(e,t){1&e&&(T.Wb(0,"j-label"),T.Tc(1),T.nc(2,"translate"),T.Vb()),2&e&&(T.Ab(1),T.Vc("",T.oc(2,1,"PAYMENTS.FORM.RECEIVER_BANK")," "))}function ei(e,t){if(1&e&&(T.Wb(0,"div",56),T.Wb(1,"div",57),T.Rb(2,"j-entity-logo",58),T.Vb(),T.Wb(3,"div",59),T.Wb(4,"p",60),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Wb(7,"p",61),T.Tc(8),T.Vb(),T.Vb(),T.Vb()),2&e){var n=t.item;T.Ab(2),T.uc("name",n.bic),T.Ab(3),T.Vc(" ",n.salaryTransitIban?T.oc(6,4,"PAYMENTS.FORM.ACCOUNT")+n.salaryTransitIban:n.name," "),T.Ab(3),T.Wc("",n.bic,": ",n.name,"")}}function ti(e,t){if(1&e&&(T.Wb(0,"div",62),T.Wb(1,"div",57),T.Rb(2,"j-entity-logo",58),T.Vb(),T.Wb(3,"div",59),T.Wb(4,"p",60),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Wb(7,"p",61),T.Tc(8),T.Vb(),T.Vb(),T.Vb()),2&e){var n=t.item;T.Ab(2),T.uc("name",n.bic),T.Ab(3),T.Vc(" ",n.salaryTransitIban?T.oc(6,4,"PAYMENTS.FORM.ACCOUNT")+n.salaryTransitIban:n.name," "),T.Ab(3),T.Wc("",n.bic,": ",n.name," ")}}function ni(e,t){if(1&e&&(T.Wb(0,"div",10),T.Wb(1,"j-form-field",63),T.Wb(2,"j-label"),T.Tc(3),T.nc(4,"translate"),T.Vb(),T.Rb(5,"input",64,65),T.Rb(7,"j-error",28),T.Vb(),T.Vb()),2&e){var n=T.mc(2);T.Ab(3),T.Uc(T.oc(4,7,"PAYMENTS.FORM.BANK_IBAN")),T.Ab(2),T.uc("jShadow",n.masks.bankAccount.shadow)("dropSpecialCharacters",!0)("mask",n.masks.bankAccount.mask)("formControl",n.form.controls.bankAccount),T.Ab(2),T.uc("control",n.form.controls.bankAccount)("errorMessages",n.errors.bankAccount)}}function oi(e,t){if(1&e&&(T.Wb(0,"div",66),T.Tc(1),T.Vb()),2&e){var n=t.item;T.Ab(1),T.Uc(n.label)}}function ri(e,t){if(1&e&&(T.Wb(0,"div",67),T.Wb(1,"div",68),T.Tc(2),T.Vb(),T.Vb()),2&e){var n=t.ngIf;T.Ab(2),T.Vc(" ",n," ")}}function ai(e,t){if(1&e&&(T.Wb(0,"div",69),T.Rb(1,"span",70),T.nc(2,"translate"),T.Vb()),2&e){var n=t.ngIf;T.Ab(1),T.uc("innerHTML",T.oc(2,1,n),T.Jc)}}function ii(e,t){1&e&&(T.Ub(0),T.Tc(1),T.nc(2,"translate"),T.Tb()),2&e&&(T.Ab(1),T.Vc(" ",T.oc(2,1,"PAYMENTS.COMMISSION_CALC_AUTO")," "))}function ci(e,t){if(1&e&&(T.Tc(0),T.nc(1,"translate"),T.nc(2,"amountFormat"),T.nc(3,"async")),2&e){var n=T.mc(2);T.Wc(" ",T.oc(1,2,"PAYMENTS.COMMISSION"),": ",T.oc(2,4,T.oc(3,6,n.commission$))," \u20b8 ")}}function si(e,t){1&e&&(T.Rb(0,"p",71),T.nc(1,"translate")),2&e&&T.uc("innerHTML",T.oc(1,1,"PAYMENTS.FORM.RESIDENT_AGREEMENT"),T.Jc)}function li(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"button",72),T.ic("click",(function(e){return T.Ic(n),T.mc(2).saveToDraft()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"button",73),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Tb()}if(2&e){var o=T.mc(2);T.Ab(2),T.Uc(T.oc(3,2,"PAYMENTS.FORM.SAVE")),T.Ab(3),T.Vc("",T.oc(6,4,o.submitLabel)," ")}}function ui(e,t){1&e&&(T.Ub(0),T.Wb(1,"button",74),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,1,"PAYMENTS.FORM.SAVE_EDIT")))}function bi(e,t){if(1&e){var n=T.Xb();T.Ub(0),T.Wb(1,"div",3),T.Wb(2,"form",4,5),T.ic("submit",(function(e){return T.Ic(n),T.mc().onSubmit(e)})),T.Wb(4,"div",6),T.Wb(5,"fieldset"),T.Wb(6,"div",7),T.Wb(7,"h2",8),T.Tc(8),T.nc(9,"translate"),T.Vb(),T.Wb(10,"button",9),T.ic("click",(function(e){return T.Ic(n),T.mc().openBanksDictionary()})),T.Tc(11),T.nc(12,"translate"),T.Vb(),T.Vb(),T.Wb(13,"div",10),T.Wb(14,"j-form-field",null,11),T.Rc(16,Za,3,3,"j-label",1),T.Wb(17,"j-select",12,13),T.nc(19,"async"),T.Rc(20,ei,9,6,"ng-template",14),T.Rc(21,ti,9,6,"ng-template",15),T.Vb(),T.Vb(),T.Vb(),T.Rc(22,ni,8,9,"div",16),T.Vb(),T.Vb(),T.Wb(23,"div",6),T.Wb(24,"fieldset"),T.Wb(25,"legend",17),T.Tc(26),T.nc(27,"translate"),T.Vb(),T.Wb(28,"div",10),T.Wb(29,"j-form-field"),T.Wb(30,"j-label"),T.Tc(31),T.nc(32,"translate"),T.Vb(),T.Rb(33,"input",18),T.Vb(),T.Vb(),T.Wb(34,"div",10),T.Rb(35,"j-date-picker",19,20),T.nc(37,"async"),T.nc(38,"translate"),T.nc(39,"translate"),T.nc(40,"async"),T.Vb(),T.Wb(41,"div",10),T.Wb(42,"j-form-field",null,21),T.Wb(44,"j-label"),T.Tc(45),T.nc(46,"translate"),T.Vb(),T.Wb(47,"j-select",22,23),T.nc(49,"async"),T.Rc(50,oi,2,1,"ng-template",14),T.Vb(),T.Vb(),T.Vb(),T.Wb(51,"div",24),T.Wb(52,"span",25),T.Tc(53),T.nc(54,"async"),T.Vb(),T.Wb(55,"j-form-field"),T.Wb(56,"j-label"),T.Tc(57),T.nc(58,"translate"),T.Vb(),T.Rb(59,"textarea",26,27),T.Rb(61,"j-error",28),T.Rc(62,ri,3,1,"div",29),T.nc(63,"async"),T.Vb(),T.Vb(),T.Wb(64,"div",10),T.Wb(65,"j-account-dropdown",30,31),T.ic("selected",(function(e){return T.Ic(n),T.mc().onSenderAccountSelect(e)})),T.nc(67,"async"),T.nc(68,"async"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(69,"div",6),T.Wb(70,"fieldset"),T.Wb(71,"j-employee-group-control",32),T.Wb(72,"div",33),T.Wb(73,"div",34),T.Wb(74,"div",35),T.Rb(75,"input",36),T.Wb(76,"label",37),T.Tc(77),T.nc(78,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Wb(79,"div",34),T.Wb(80,"div",35),T.Rb(81,"input",38),T.Wb(82,"label",39),T.Tc(83),T.nc(84,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Rb(85,"j-error",28),T.Vb(),T.Vb(),T.Vb(),T.Wb(86,"div",40),T.Wb(87,"div",10),T.Wb(88,"fieldset"),T.Wb(89,"ul",41),T.Wb(90,"li",42),T.Wb(91,"h5",43),T.Tc(92),T.nc(93,"translate"),T.Wb(94,"span",44),T.Wb(95,"strong"),T.Tc(96),T.nc(97,"amountFormat"),T.nc(98,"async"),T.Vb(),T.Tc(99," \u20b8"),T.Vb(),T.Vb(),T.Rc(100,ai,3,3,"div",45),T.nc(101,"async"),T.Wb(102,"p",46),T.Rc(103,ii,3,3,"ng-container",47),T.nc(104,"async"),T.Rc(105,ci,4,8,"ng-template",null,48,T.Sc),T.Vb(),T.Vb(),T.Wb(107,"li",49),T.Rb(108,"j-switch",50),T.Wb(109,"span",51),T.Tc(110),T.nc(111,"translate"),T.Rb(112,"br"),T.Wb(113,"small",52),T.Tc(114),T.nc(115,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(116,"div",53),T.Rc(117,si,2,3,"p",54),T.nc(118,"async"),T.Wb(119,"div",53),T.Rc(120,li,7,6,"ng-container",1),T.Rc(121,ui,4,3,"ng-container",1),T.Vb(),T.Vb(),T.Rb(122,"ngx-spinner",55),T.Vb(),T.Vb(),T.Tb()}if(2&e){var o=T.Fc(15),r=T.Fc(18),a=T.Fc(36),i=T.Fc(43),c=T.Fc(48),s=T.Fc(106),l=T.mc();T.Ab(2),T.uc("formGroup",l.form),T.Ab(6),T.Vc(" ",T.oc(9,67,"PAYMENTS.RECIPIENT.TITLE")," "),T.Ab(3),T.Vc(" ",T.oc(12,69,"PAYMENTS.SELECT_FROM_DICTIONARY")," "),T.Ab(5),T.uc("ngIf",!l.form.controls.bankReceiver.value),T.Ab(1),T.uc("searchFn",l.paymentsService.bankReceiverSearchFn)("jFocusOnReturn",r)("appendTo",o.elementRef.nativeElement)("formControl",l.form.controls.bankReceiver)("clearable",!1)("items",T.oc(19,71,l.banks.items$)),T.Ab(5),T.uc("ngIf",l.form.controls.bankAccount.enabled),T.Ab(4),T.Uc(T.oc(27,73,"PAYMENTS.FORM.DETAILS")),T.Ab(5),T.Uc(T.oc(32,75,"PAYMENTS.FORM.DOCUMENT_NUMBER")),T.Ab(2),T.uc("mask",l.masks.number.mask)("formControl",l.form.controls.number),T.Ab(2),T.uc("jFocusOnReturn",a)("datesEnabled",T.oc(37,77,l.workingDays$))("formControl",l.form.controls.date)("formatValue",!0)("label",T.oc(38,79,"PAYMENTS.FORM.VALUE_DATE"))("minDate",l.dateLimit.minDate)("maxDate",l.dateLimit.maxDate)("helperText",T.oc(39,81,T.oc(40,83,l.dateMessage$))),T.Ab(10),T.Uc(T.oc(46,85,"PAYMENTS.FORM.KNP")),T.Ab(2),T.uc("jFocusOnReturn",c)("appendTo",i.elementRef.nativeElement)("formControl",l.form.controls.knp)("clearable",!1)("searchMask",l.masks.knp.mask)("shadow",l.masks.knp.shadow)("items",T.oc(49,87,l.knp$)),T.Ab(6),T.Wc(" ",T.oc(54,89,l.purposeLength$),"/",l.rules.purposeLength,""),T.Ab(4),T.Uc(T.oc(58,91,"PAYMENTS.FORM.PURPOSE")),T.Ab(2),T.uc("formControl",l.form.controls.purpose),T.Ab(2),T.uc("control",l.form.controls.purpose)("errorMessages",l.errors.purpose),T.Ab(1),T.uc("ngIf",T.oc(63,93,l.purposeMessage$)),T.Ab(3),T.uc("isLoading",T.oc(67,95,l.accountStore.fetching$))("label","PAYMENTS.SENDER_ACCOUNT.UNSELECTED")("hasError",l.form.controls.senderAccount.touched&&l.form.controls.senderAccount.errors)("accounts",T.oc(68,97,l.acceptableAccounts$)),T.Ab(6),T.uc("formControl",l.form.controls.employees)("paymentType",l.paymentType)("minAmount",l.employeeMinAmount)("maxAmount",l.employeeMaxAmount)("birthDateRequired",!1)("ibanRequired",!0),T.Ab(4),T.uc("value",!0),T.Ab(2),T.Vc(" ",T.oc(78,99,"PAYMENTS.FORM.EMPLOYEE_RESIDENTS")," "),T.Ab(4),T.uc("value",!1),T.Ab(2),T.Vc(" ",T.oc(84,101,"PAYMENTS.FORM.EMPLOYEE_NON-RESIDENTS")," "),T.Ab(2),T.uc("control",l.form.controls.employees)("errorMessages",l.errors.employees),T.Ab(7),T.Vc("",T.oc(93,103,"PAYMENTS.FORM.TOTAL_AMOUNT"),": "),T.Ab(4),T.Uc(T.oc(97,105,T.oc(98,107,l.total$))),T.Ab(4),T.uc("ngIf",T.oc(101,109,l.amountMessage$)),T.Ab(3),T.uc("ngIf",null===T.oc(104,111,l.commission$))("ngIfElse",s),T.Ab(5),T.uc("formControl",l.form.controls.urgent),T.Ab(2),T.Vc("",T.oc(111,113,"PAYMENTS.FORM.URGENT")," "),T.Ab(4),T.Uc(T.oc(115,115,"PAYMENTS.URGENT_HELPER")),T.Ab(3),T.uc("ngIf",T.oc(118,117,l.controlsStream.isResidents)),T.Ab(3),T.uc("ngIf",l.restoredData.status!==l.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("ngIf",l.restoredData.status===l.PAYMENT_STATUS.CREATED),T.Ab(1),T.uc("name",l.SPINNER)("fullScreen",!1)}}var mi,di,pi=((mi=function(e){function t(e,n,o,r,a,i,c,s,l,u,b,m,d,p,f){var h;return _classCallCheck(this,t),(h=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,d.createSalaryForm(),l,r,a,n,e,i,s,u,b,m,p,f))).paymentsService=e,h.companyService=n,h.dateAdapter=o,h.route=r,h.router=a,h.maskService=i,h.accountsService=c,h.modalService=s,h.api=l,h.dictionaries=u,h.pipeline=b,h.translateService=m,h.paymentsFormsFactory=d,h.authorityPermissionsService=p,h.featureFlagsService=f,h.masks={number:"paymentNum",amount:"amount",knp:"knp",bankAccount:"tengeAccount"},h.employeeMinAmount=.01,h.employeeMaxAmount=null,h.paymentType=B.j.SALARY,h}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this;_get(_getPrototypeOf(t.prototype),"ngOnInit",this).call(this),this.banks=this.dictionaries.bankDictionary,this.dateLimit=this.paymentsService.stdDateRangeNgb,this.accountStore=this.accountsService.store,this.acceptableAccounts$=this.paymentsService.combineAcceptableAccounts(this.accountStore).pipe(Object(F.a)((function(t){return e.checkPersonalAccounts(t)}))),this.getMaskConfig(),this.createControlsStream(this.form),this.listenWorkingDays(),this.combineEmployeesAmount(),this.listenCommission(),this.listenTotal(),this.provideAmountMessage(),this.listenDateMessageStream(),this.listenPurposeMessageStream(),this.knp$=this.combineKNP(),this.subs.add(this.controlsStream.bankReceiver.pipe(Object(w.a)(this.banks.entities$),Object(A.a)((function(e){var t=_slicedToArray(e,2),n=t[0],o=t[1];return n&&o[n]})),Object(M.a)()).subscribe((function(t){var n=e.form.controls.bankAccount;!t||t.salaryTransitIban&&n.enabled?(n.disable(),n.patchValue("")):t&&!t.salaryTransitIban&&n.disabled?n.enable():t&&n.updateValueAndValidity()})))}},{key:"openBanksDictionary",value:function(){var e=this;this.modals.open(Te,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result.then((function(t){return t&&e.form.controls.bankReceiver.patchValue(t.id)})).catch((function(){}))}}]),t}(Bt)).\u0275fac=function(e){return new(e||mi)(T.Qb(C.c),T.Qb(gr.a),T.Qb(i.c),T.Qb(p.a),T.Qb(p.c),T.Qb(Kt.a),T.Qb(l.c),T.Qb(i.q),T.Qb(Tr.a),T.Qb(se.a),T.Qb(Ar.a),T.Qb(c.e),T.Qb(Rr.a),T.Qb(Ht.c),T.Qb(q.b))},mi.\u0275cmp=T.Kb({type:mi,selectors:[["j-salary-payment"]],features:[T.xb],decls:2,vars:2,consts:[["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried",4,"ngIf"],[4,"ngIf"],["label","PAYMENTS.RESTRICTED_PLACEHOLDER",3,"isRetryable","isLoading","retried"],[1,"payment-section"],["jInvalidControlScroll","","autocomplete","off","jFocusableContainer","",3,"formGroup","submit"],["formDirective","ngForm"],[1,"form-section"],[1,"payments__header"],[1,"h2","mb-0"],["type","button",1,"btn","btn-link","p-0","p3",3,"click"],[1,"form-group"],["receiverWrapper",""],["bindValue","id",3,"searchFn","jFocusOnReturn","appendTo","formControl","clearable","items"],["receiverSelect",""],["j-label-tmp",""],["j-option-tmp",""],["class","form-group",4,"ngIf"],[1,"h2"],["jFocusOnReturn","","type","text","jFormInput","",1,"form-control",3,"mask","formControl"],["allowAuto","true",3,"jFocusOnReturn","datesEnabled","formControl","formatValue","label","minDate","maxDate","helperText"],["datepicker",""],["knpWrapper",""],["bindValue","code",3,"jFocusOnReturn","appendTo","formControl","clearable","searchMask","shadow","items"],["select",""],[1,"form-group","position-relative"],[1,"payment-section--purpose-length","p3","text-gray"],["jFocusOnReturn","","jFormInput","","rows","5",1,"form-control",3,"formControl"],["purpose",""],[3,"control","errorMessages"],["jBottomLine","","class","j-form-field-bottom",4,"ngIf"],[3,"isLoading","label","hasError","accounts","selected"],["senderAccountDropdown",""],[3,"formControl","paymentType","minAmount","maxAmount","birthDateRequired","ibanRequired"],["ngProjectAs","[header]",5,["","header",""],1,"row"],[1,"form-group","col"],[1,"custom-control","custom-radio"],["type","radio","id","residents","name","isResidents","formControlName","isResidents",1,"custom-control-input",3,"value"],["for","residents",1,"custom-control-label","text-muted","p3"],["type","radio","id","nonResident","name","isResidents","formControlName","isResidents",1,"custom-control-input",3,"value"],["for","nonResident",1,"custom-control-label","text-muted","p3"],[1,"payment-section--summary","form-section"],[1,"list-group"],[1,"list-group-item"],[1,"light","m-0"],[1,"h3"],["class","payment-section--amount-warn mt-1 p2",4,"ngIf"],[1,"p3","text","text-gray","d-inline-block","m-0"],[4,"ngIf","ngIfElse"],["commission",""],[1,"list-group-item","d-flex","align-items-center"],[3,"formControl"],[1,"ml-3"],[1,"text-gray"],[1,"payment-section--submit","form-group","pt-4"],["class","p3 text-gray text-right",3,"innerHTML",4,"ngIf"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","zIndex","3","bdColor","rgba(246, 247, 248, 0.3)",3,"name","fullScreen"],[1,"account-pill","pl-0","pr-0"],[1,"account-pill--logo"],[3,"name"],[1,"account-pill--content","small"],[1,"wrap-text"],[1,"wrap-text","text-gray"],[1,"account-pill","account-pill_gray","account-pill_fill"],["clearable","true"],["type","text","jFormInput","","jReplaceOnPaste","KZ","jDynamicPrefix","KZ","jFocusOnReturn","","jUppercase","",1,"form-control",3,"jShadow","dropSpecialCharacters","mask","formControl"],["accountInput","jFormInput"],[1,"text-truncate"],["jBottomLine","",1,"j-form-field-bottom"],[1,"text-truncate","small"],[1,"payment-section--amount-warn","mt-1","p2"],[3,"innerHTML"],[1,"p3","text-gray","text-right",3,"innerHTML"],["type","button",1,"btn","btn-outline-primary","btn-static",3,"click"],["type","submit",1,"btn","btn-primary","btn-static","ml-3"],["type","submit",1,"btn","btn-outline-primary","btn-static"]],template:function(e,t){1&e&&(T.Rc(0,Ja,1,2,"j-restricted-placeholder",0),T.Rc(1,bi,123,119,"ng-container",1)),2&e&&(T.uc("ngIf",t.isRestricted),T.Ab(1),T.uc("ngIf",!t.isRestricted))},directives:[o.u,Xt.a,r.J,r.u,zt.b,Me.b,r.l,z.a,en.a,Me.a,r.t,r.i,tn.d,tn.j,We.a,ee.a,r.c,a.a,on.a,we.a,Jt.a,Ta.a,r.B,r.j,Zt.a,cn.a,te.a,ur.a,cr.a,nn.a,ln.a,un.a],pipes:[c.d,o.b,Er.a],styles:[".payments__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:1.5rem}"]}),mi),fi=[{path:f.c.root,component:ar,children:[{path:"",canActivate:[y.a]},{path:f.b.root,component:Jr,data:{animation:"slideOrFade",index:2},children:[{path:f.b.tax,matcher:Object(h.factoryUserPageMatcher)(f.b.tax,"paymentId"),component:Xr,canDeactivate:[v.a],data:{animation:"slideOrFade",index:21}},{path:f.b.pension,matcher:Object(h.factoryUserPageMatcher)(f.b.pension,"paymentId"),component:ja,canDeactivate:[v.a],data:{animation:"slideOrFade",index:22}},{path:f.b.social,matcher:Object(h.factoryUserPageMatcher)(f.b.social,"paymentId"),component:La,canDeactivate:[v.a],data:{animation:"slideOrFade",index:23}},{path:f.b.osms,matcher:Object(h.factoryUserPageMatcher)(f.b.osms,"paymentId"),component:za,canDeactivate:[v.a],data:{animation:"slideOrFade",index:24}},{path:"**",redirectTo:f.b.tax}]},{path:f.c.order,matcher:Object(h.factoryUserPageMatcher)(f.c.order,"paymentId"),component:Aa,canDeactivate:[v.a],data:{animation:"slideOrFade",index:1}},{path:f.c.salary,matcher:Object(h.factoryUserPageMatcher)(f.c.salary,"paymentId"),component:pi,canDeactivate:[v.a],data:{animation:"slideOrFade",index:3}},{path:":paymentId",canActivate:[y.a]},{path:"**",redirectTo:f.c.order}]},{path:f.a.foreignCurrency,canDeactivate:[v.a],matcher:Object(h.factoryUserPageMatcher)(f.a.foreignCurrency,"paymentId"),component:Jo},{path:"**",redirectTo:f.c.root}],hi=((di=function e(){_classCallCheck(this,e)}).\u0275mod=T.Ob({type:di}),di.\u0275inj=T.Nb({factory:function(e){return new(e||di)},imports:[[p.g.forChild(fi)],p.g]}),di),vi=n("pZP7"),yi=n("UZjs"),gi=n("JvPu"),Ai=n("wwEr"),Ti=n("3v+J"),Ri=n("Y+uv"),Ci=n("/zfT"),Ei=n("xWtO"),ki=n("i2Gl"),Si=n("Frqi"),Vi=n("paXB"),Ni=n("EiG8"),Ii=n("c66K"),Oi=n("VA2L"),ji=n("0AMz"),Pi=n("W3Es"),Wi=n("R4CF"),Mi=n("9txL"),_i=n("5I09"),xi=n("Tile"),wi=n("aF9I"),Di=n("aZ8m"),Yi=n("UhoJ"),Ui=n("sCra"),Li=n("fGuG"),Fi=n("7/bn"),$i=n("2FF4"),Bi=n("bSvt"),Ki=n("jH+I"),Hi=n("kUBv"),Qi=n("9Udv"),Gi=n("0jn5"),qi=n("gdaf"),Xi=n("LFY/"),zi=n("I+WJ"),Ji=n("lABO"),Zi=n("hJI6"),ec=n("JB36"),tc=n("4zJ+"),nc=n("XpgD"),oc=n("MfWJ"),rc=n("B8HE"),ac=n("5DAB"),ic=n("DHTX"),cc=n("6goL"),sc=n("BAfr"),lc=n("ajRT"),uc=n("NpBu"),bc=n("TaxS"),mc=n("tkTF"),dc=n("yy4r"),pc=n("ZVDf"),fc=n("l/gM"),hc=n("gN/K"),vc=n("+hcb"),yc=n("h7tf"),gc=n("9odQ"),Ac=n("WqMH"),Tc=n("3MRA"),Rc=n("y6vz"),Cc=n("Zgqj"),Ec=n("oMXN"),kc=n("rqas"),Sc=n("dnqU"),Vc=n("tp+K"),Nc=n("saU0"),Ic=n("ZF3e"),Oc=n("qew9"),jc=n("d/d6"),Pc=n("Dvla"),Wc=n("K1R0"),Mc=n("dlKe"),_c=n("DPnb"),xc=n("C6g9"),wc=n("3M96"),Dc=n("Q+Qo"),Yc=n("i/as"),Uc=n("8Sq6"),Lc=n("w657"),Fc=n("DHcY"),$c=n("adOO"),Bc=n("Ub7F"),Kc=n("OHc7"),Hc=n("Bs9s"),Qc=n("ScFe"),Gc=n("wY9W"),qc=n("7Fmj"),Xc=n("g1SY"),zc=n("3skF");n.d(t,"PaymentsModule",(function(){return Zc}));var Jc,Zc=((Jc=function e(){_classCallCheck(this,e)}).\u0275mod=T.Ob({type:Jc}),Jc.\u0275inj=T.Nb({factory:function(e){return new(e||Jc)},providers:[d.a],imports:[[o.c,r.n,r.D,a.c,i.g,i.D,i.H,i.y,s.b,c.c,l.b,b.a,m.a,hi,u.ContractsModule],i.r,i.D]}),Jc);T.Lc(ve.a,[Jo,Xo,ar,Xr,Jr,Aa,ja,La,za,pi,me,he,ve.a,Te,Ve,Ne.a,Pt,ce,qe,Ie,Oe,lt,At,jt,ft,Tt.b,Et,Wt.a,o.r,o.s,o.t,o.u,o.B,o.x,o.y,o.z,o.A,o.v,o.w,r.J,r.y,r.I,r.c,r.z,r.C,r.a,r.F,r.G,r.B,r.t,r.u,r.E,r.p,r.o,r.A,r.b,r.d,r.w,r.x,r.v,r.i,r.l,r.j,r.m,r.f,a.a,i.d,i.e,i.p,i.h,i.C,i.G,i.o,i.u,i.v,i.w,i.x,i.z,i.A,i.B,s.a,c.a,Jt.a,vi.a,yi.a,gi.a,Ai.a,Ti.a,Ri.a,Ci.a,Ei.a,Me.b,rn.a,ur.a,an.a,sr.a,lr.a,nn.a,Me.a,ln.a,zt.b,zt.a,cr.a,br.a,fr.a,yr.a,mr.a,dr.a,pr.a,hr.a,vr.a,ki.b,J.a,Si.a,sn.a,Vi.a,on.a,Ni.a,z.a,Ii.a,We.a,Z.a,_e.a,un.a,we.a,ee.a,Oi.a,ji.a,Pi.a,Wi.a,Mi.a,Ta.a,_i.a,E.a,k.a,S.a,xi.a,wi.a,Di.a,Yi.a,Ui.a,Li.a,Fi.a,Zt.a,te.a,Xe.a,$i.a,Bi.a,Ki.a,De.a,Hi.a,Qi.a,Gi.a,ze.a,Ze.a,Je.a,bn.a,qi.a,Xi.a,zi.a,Ji.a,Zi.a,ec.a,tc.a,nc.a,oc.a,rc.a,ac.b,ic.a,cc.a,Xt.a,sc.a,lc.a,uc.a,bc.a,mc.a,dc.a,Cr.a,pc.a,fc.a,ut.a,hc.a,vc.a,yc.a,gc.b,Ac.a,Tc.a,Rc.a,Cc.a,Ec.a,kc.a,Sc.a,Vc.a,Nc.a,Ic.a,cn.a,Oc.a,jc.a,xe.a,i.E,Pc.a,Pc.b,Wc.a,Mc.a,_c.a,_c.c,_c.b,xc.a,wc.a,en.a,Dc.a,tn.i,tn.j,tn.d,tn.g,tn.b,tn.a,tn.h,tn.l,tn.f,tn.k,tn.e,p.h,p.d,p.f,p.e,p.i,Yc.a,Uc.a,Lc.a],[o.b,o.I,o.q,o.l,o.F,o.g,o.D,o.G,o.d,o.f,o.j,o.k,o.m,a.b,c.d,Fc.a,$c.a,ne.a,Bc.a,Kc.a,Er.a,mt.a,Hc.a,Qc.a,bt.a,mn.a,Gc.a,qc.a,Xc.a,zc.a])}}]);