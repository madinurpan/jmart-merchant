(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"7wo0":function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),s=n("PCNd"),c=n("3Pt+"),a=n("tyNb"),r=n("fXoL"),o=n("paXB"),l=n("7/bn"),u=n("oMXN"),b=n("EiG8"),d=n("sYmb"),m=n("mCLR");const g=function(){return["main"]},p=function(){return["password"]},h=function(){return["package"]};let f=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-tabs"]],decls:7,vars:6,consts:[[1,"tabs"],["routerLinkActive","tabs__link--active","translate","",1,"p1","tabs__link",3,"routerLink"],["routerLinkActive","tabs__link--active","jBadge","new","translate","",1,"p1","tabs__link",3,"routerLink"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"a",1),r.Tc(2,"SETTINGS.MAIN"),r.Vb(),r.Wb(3,"a",1),r.Tc(4,"SETTINGS.PASSWORD.TITLE"),r.Vb(),r.Wb(5,"a",2),r.Tc(6,"SETTINGS.PACKAGE.NAV"),r.Vb(),r.Vb()),2&t&&(r.Ab(1),r.uc("routerLink",r.yc(3,g)),r.Ab(2),r.uc("routerLink",r.yc(4,p)),r.Ab(2),r.uc("routerLink",r.yc(5,h)))},directives:[a.f,a.e,d.a,m.a],styles:[".tabs[_ngcontent-%COMP%]{display:-webkit-box;display:flex;border-bottom:1px solid #eceef1}.tabs__link[_ngcontent-%COMP%]{color:#666c72;padding:1rem 0;display:block;border-bottom:2px solid transparent;bottom:-1.5px;position:relative}.tabs__link--active[_ngcontent-%COMP%]{color:#1a1c1f;font-weight:500;border-bottom-color:#ef5630}.tabs__link[_ngcontent-%COMP%] + .tabs__link[_ngcontent-%COMP%]{margin-left:40px}"]}),t})(),T=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-10","offset-xl-2"],[1,"settings"],["translate","",1,"header-title"]],template:function(t,e){1&t&&(r.Wb(0,"j-layout-home"),r.Wb(1,"j-aside"),r.Rb(2,"j-nav-main"),r.Vb(),r.Wb(3,"j-main"),r.Wb(4,"section",0),r.Wb(5,"section",1),r.Wb(6,"section",2),r.Wb(7,"h2",3),r.Tc(8,"SETTINGS.TITLE"),r.Vb(),r.Rb(9,"j-settings-tabs"),r.Rb(10,"router-outlet"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb())},directives:[o.a,l.a,u.a,b.a,d.a,f,a.h],styles:[".settings{padding-top:40px}.settings-info{padding:1rem;margin:2rem 0;background:#fff;border-radius:.75rem;max-width:435px}.settings-info a:not(.btn):hover{color:#ef5630}.settings-heading{font-size:1.25rem;margin:.375rem 0 1rem}.settings-heading-wrapper{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.all-requisites-item{border-radius:8px;background:#fff;margin:12px 16px;padding:16px 16px 16px 56px}"],encapsulation:2}),t})();var S=n("mrSG"),A=n("4Nuw"),E=n("ZF+8"),y=n("VnnJ"),C=n("JqCM"),k=n("VO+5"),I=n("Kcpt"),v=n("e8Ap"),P=n("L+ju"),O=n("zN9f");let R=(()=>{class t{constructor(){this.selected=new r.n}ngOnInit(){}onSelect(){this.account.isSelected=!this.account.isSelected,this.selected.emit(this.account.isSelected)}mapSelectedAccountLabel(t){var e;switch(null===(e=t)||void 0===e?void 0:e.accountType){case P.a.CARD:return"ACCOUNTS.CARD";case P.a.ACCOUNT:return"ACCOUNTS.DROPDOWN.REGULAR";case P.a.DEPOSIT:return"ACCOUNTS.DEPOSIT";default:return null}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-all-requisites-item"]],inputs:{isChecked:"isChecked",account:"account"},outputs:{selected:"selected"},decls:13,vars:8,consts:[[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label","all-requisites-item-label",3,"for"],[1,"all-requisites-item__row"],[1,"all-requisites-item__cell"],["size","sm",3,"name"],[1,"d-block","text-muted"],[1,"p2","all-requisites-item__iban"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"input",1),r.ic("change",(function(t){return e.onSelect()})),r.Vb(),r.Wb(2,"label",2),r.Wb(3,"div",3),r.Wb(4,"div",4),r.Rb(5,"j-entity-logo",5),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"small",6),r.Wb(8,"div"),r.Tc(9),r.nc(10,"translate"),r.Vb(),r.Vb(),r.Wb(11,"span",7),r.Tc(12),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(1),r.uc("id",e.account.id)("ngModel",e.account.isSelected),r.Ab(1),r.uc("for",e.account.id),r.Ab(3),r.uc("name",e.account.balance.currency),r.Ab(4),r.Uc(r.oc(10,6,e.mapSelectedAccountLabel(e.account))),r.Ab(3),r.Uc(e.account.iban))},directives:[c.a,c.t,c.w,O.a],pipes:[d.d],styles:[".all-requisites-item__row[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row}.all-requisites-item__cell[_ngcontent-%COMP%], .all-requisites-item__row[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal}.all-requisites-item__cell[_ngcontent-%COMP%]{margin:auto 5px;-webkit-box-orient:vertical;flex-direction:column}.all-requisites-item-label[_ngcontent-%COMP%]:after, .all-requisites-item-label[_ngcontent-%COMP%]:before{top:0;bottom:0;margin:auto}.text-muted[_ngcontent-%COMP%]{font-size:14px}.all-requisites-item__iban[_ngcontent-%COMP%]{margin-top:4px;display:block}"]}),t})();function w(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div"),r.Wb(1,"j-all-requisites-item",15),r.ic("selected",(function(e){return r.Ic(t),r.mc().onSelect()})),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit;r.Ab(1),r.uc("account",t)}}function _(t,e){1&t&&(r.Wb(0,"div",16),r.Rb(1,"ngx-spinner",17),r.Vb()),2&t&&(r.Ab(1),r.uc("fullScreen",!1))}let N=(()=>{class t{constructor(t,e,n,i,s,c){this.accountsService=t,this.filesService=e,this.companyService=n,this.spinner=i,this.notifier=s,this.translateService=c,this.closed=new r.n,this.accounts=[],this.isAllSelected=!1,this.isLoading=!0}ngOnInit(){return Object(S.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.spinner.show(),this.accounts=yield this.accountsService.getAccounts(),this.accounts.forEach(t=>{t.isSelected=!0}),this.isAllSelected=!0,this.spinner.hide(),this.isLoading=!1}))}selectAll(){this.isAllSelected=!this.isAllSelected,this.accounts=this.accounts.map(t=>(t.isSelected=this.isAllSelected,t))}onSelect(){this.isAllSelected=this.accounts.every(t=>t.isSelected)}onDownload(){const t=this.accounts.filter(t=>t.isSelected).map(t=>t.iban);t.length>0?this.download(t):this.notifier.show({type:"error",message:this.translateService.instant("SETTINGS.REQUISITES.ERROR")})}download(t){return Object(S.a)(this,void 0,void 0,(function*(){try{const e=yield this.accountsService.getPdfWithMultipleIbans(this.companyService.currentId,t);this.filesService.downloadFile(e,`${this.companyService.currentCompany.bin}.pdf`)}catch(e){console.error(e)}}))}onClose(){this.closed.emit()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(A.c),r.Qb(E.b),r.Qb(y.a),r.Qb(C.c),r.Qb(k.c),r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-all-requisites"]],outputs:{closed:"closed"},decls:20,vars:12,consts:[[1,"all-requisites-selector__header"],[1,"p2","text-dark","all-requisites-selector__header_size_b"],["type","button",1,"details__close","ml-auto","close",3,"click"],["size","md","name","cross",1,"size-md"],[1,"all-requisites-selector"],[1,"custom-control","custom-checkbox","all-requisites-item"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","change"],[1,"custom-control-label",3,"for"],[1,"all-requisites-selector__list"],[4,"ngFor","ngForOf"],["class","spinner-wrap",4,"ngIf"],[1,"all-requisites__footer"],[1,"all-requisites__button","btn","btn-outline-primary","btn-md",3,"click"],[3,"inlineSVG"],["translate","",1,"ml-2"],[3,"account","selected"],[1,"spinner-wrap"],["type","ball-scale-ripple-multiple","size","large","color","#d6dadf","bdColor","rgba(255, 255, 255, 0.5)",3,"fullScreen"]],template:function(t,e){1&t&&(r.Wb(0,"section",0),r.Wb(1,"div",1),r.Tc(2),r.nc(3,"translate"),r.Vb(),r.Wb(4,"button",2),r.ic("click",(function(t){return e.onClose()})),r.Rb(5,"j-icon",3),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"input",6),r.ic("change",(function(t){return e.selectAll()})),r.Vb(),r.Wb(9,"label",7),r.Tc(10),r.nc(11,"translate"),r.Vb(),r.Vb(),r.Wb(12,"div",8),r.Rc(13,w,2,1,"div",9),r.Vb(),r.Vb(),r.Rc(14,_,2,1,"div",10),r.Wb(15,"div",11),r.Wb(16,"button",12),r.ic("click",(function(t){return e.onDownload()})),r.Rb(17,"div",13),r.Wb(18,"strong",14),r.Tc(19,"ACCOUNTS.REQUISITES.DOWNLOAD"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(2),r.Vc(" ",r.oc(3,8,"SETTINGS.REQUISITES.SELECT_REQUISITES")," "),r.Ab(6),r.uc("id","all")("ngModel",e.isAllSelected),r.Ab(1),r.uc("for","all"),r.Ab(1),r.Vc(" ",r.oc(11,10,"SETTINGS.REQUISITES.SELECT_ALL")," "),r.Ab(3),r.uc("ngForOf",e.accounts),r.Ab(1),r.uc("ngIf",e.isLoading),r.Ab(3),r.uc("inlineSVG","assets/icons/account/pdf.svg"))},directives:[I.a,c.a,c.t,c.w,i.t,i.u,v.a,d.a,R,C.a],pipes:[d.d],styles:[".all-requisites-selector[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:calc(100% - 11rem)}.all-requisites-selector__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:1.5rem;background-color:#fff}.all-requisites-selector__header_size_b[_ngcontent-%COMP%]{font-size:24px;font-weight:500;line-height:30px}.all-requisites-selector__list[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;overflow-y:auto}.all-requisites__footer[_ngcontent-%COMP%]{margin:10px auto}.all-requisites__button[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem);display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}"]}),t})();var G=n("quSY"),x=n("lJxs"),V=n("TwVa"),W=n("S09V"),M=n("kmKP"),D=n("mR7B"),L=n("tmjD");let j=(()=>{class t{constructor(t,e,n,i,s){this.companyService=t,this.userService=e,this.translateService=n,this.maskedService=i,this.maskPipe=s}generateMainInfo(){return{title:this.mapCompanyPrefix("TITLE"),titleAdditional:this.mapCompanyPrefix("REQUISITES"),fields:[{label:this.mapCompanyPrefix("NAME"),value:this.companyService.currentCompany.name},{label:this.mapCompanyPrefix("IIN"),value:this.maskPipe.transform(this.companyService.currentCompany.bin,W.a.iin.mask)},{label:this.mapCompanyPrefix("KBE"),value:this.companyService.currentCompany.kod},{label:this.mapCompanyPrefix("ADDRESS"),value:this.companyService.currentCompany.legalAddress},{label:this.mapCompanyPrefix("SECTOR"),value:this.companyService.currentCompany.economicSector},{label:this.mapCompanyPrefix("REGISTER_DATE"),value:this.mapDate(this.companyService.currentCompany.registrationDate)}]}}generatePrivateInfo(){const t=this.userService.user;if(t)return{title:this.mapPrivatePrefix("TITLE"),fields:[{label:this.mapPrivatePrefix("NAME"),value:`${t.lastname||""} ${t.firstname||""} ${t.middlename||""}`},{label:this.mapPrivatePrefix("IIN"),value:this.maskPipe.transform(t.iin,W.a.iin.mask)},{label:this.mapPrivatePrefix("ROLE"),value:this.mapRole(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("RIGHTS"),value:this.mapSignText(this.companyService.currentAuthority)},{label:this.mapPrivatePrefix("EMAIL"),value:t.email},{label:this.mapPrivatePrefix("PHONE"),value:this.maskedService.getMaskedPhone(t.phone),isPhone:!0}]}}generateContactsInfo(){return{title:this.mapContactsPrefix("TITLE"),fields:[{label:this.mapContactsPrefix("CALL_CENTER"),value:"7711",isPhone:!0}]}}generateUserLastSessionInfo(){return Object(S.a)(this,void 0,void 0,(function*(){const t=yield this.userService.retrieveUserLastSession();return{title:this.mapLastSessionPrefix("TITLE"),fields:[{label:this.mapLastSessionPrefix("TIMESTAMP"),value:t.timestamp,isTimestamp:!0},{label:this.mapLastSessionPrefix("DEVICE_INFO"),value:t.deviceInfo},{label:this.mapLastSessionPrefix("IP_ADDRESS"),value:t.ipAddress}]}}))}getAuthoritiesList(){return this.companyService.getAuthorizedPersons().pipe(Object(x.a)(t=>{var e;return null===(e=t)||void 0===e?void 0:e.sort(this.sortPersons).map(t=>({initials:this.retrieveInitials(t),name:this.companyService.retrieveShortName(t),role:this.mapRole(t),startDate:t.fromDate,endDate:t.toDate,sign:this.mapSignText(t),color:this.mapInitialsColor(t)}))}))}mapAuthoritiesPrefix(t){return this.mapTranslatePrefix("AUTHORITIES",t)}mapLastSessionPrefix(t){return this.mapTranslatePrefix("USER_LAST_SESSION",t)}mapCompanyPrefix(t){return this.mapTranslatePrefix("COMPANY",t)}mapPrivatePrefix(t){return this.mapTranslatePrefix("PRIVATE",t)}mapContactsPrefix(t){return this.mapTranslatePrefix("CONTACTS",t)}mapTranslatePrefix(t,e){return`SETTINGS.${t}.${e}`}mapDate(t){return t?Object(i.K)(t,"d MMMM yyyy",this.translateService.currentLang):null}sortPersons(t,e){return t.authority===e.authority?0:t.authority===V.a.PRIMARY_SIGNATURE?-1:t.authority===V.a.SECONDARY_SIGNATURE&&e.authority===V.a.NO_SIGNATURE?-1:1}mapRole(t){switch(t.authority){case V.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("HEAD");case V.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("MAIN_ACCOUNTANT");case V.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("ACCOUNTANT")}}mapSignText(t){switch(t.authority){case V.a.PRIMARY_SIGNATURE:return this.mapAuthoritiesPrefix("FIRST_SIGN");case V.a.SECONDARY_SIGNATURE:return this.mapAuthoritiesPrefix("SECOND_SIGN");case V.a.NO_SIGNATURE:default:return this.mapAuthoritiesPrefix("NO_SIGN")}}mapInitialsColor(t){switch(t.authority){case V.a.PRIMARY_SIGNATURE:return"first-sign";case V.a.SECONDARY_SIGNATURE:return"second-sign";case V.a.NO_SIGNATURE:default:return"no-sign"}}retrieveInitials(t){return`${t.lastname[0]}${t.firstname[0]}`}}return t.\u0275fac=function(e){return new(e||t)(r.ec(y.a),r.ec(M.b),r.ec(d.e),r.ec(D.a),r.ec(L.b))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function K(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Tc(2,"SETTINGS.AUTHORITIES.ROLE"),r.Vb(),r.Tc(3,": "),r.Wb(4,"span",12),r.Tc(5),r.Vb(),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(5),r.Uc(t.role)}}function U(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Tc(2,"SETTINGS.AUTHORITIES.START_DATE"),r.Vb(),r.Tc(3,": "),r.Wb(4,"span",12),r.Tc(5),r.nc(6,"date"),r.Vb(),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(5),r.Uc(r.pc(6,1,t.startDate,"dd.MM.yyyy"))}}function q(t,e){if(1&t&&(r.Wb(0,"div",11),r.Wb(1,"span",12),r.Tc(2,"SETTINGS.AUTHORITIES.END_DATE"),r.Vb(),r.Tc(3,": "),r.Wb(4,"span",12),r.Tc(5),r.nc(6,"date"),r.Vb(),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(5),r.Uc(r.pc(6,1,t.endDate,"dd.MM.yyyy"))}}function F(t,e){if(1&t&&(r.Wb(0,"div",13),r.Tc(1),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(1),r.Vc(" ",t.sign," ")}}function B(t,e){if(1&t&&(r.Wb(0,"div",4),r.Wb(1,"div",5),r.Tc(2),r.Vb(),r.Wb(3,"div",6),r.Wb(4,"div",7),r.Tc(5),r.Vb(),r.Wb(6,"div",8),r.Rc(7,K,6,1,"div",9),r.Rc(8,U,7,4,"div",9),r.Rc(9,q,7,4,"div",9),r.Vb(),r.Vb(),r.Rc(10,F,2,1,"div",10),r.Vb()),2&t){const t=e.$implicit;r.Ab(1),r.Db(t.color),r.Ab(1),r.Vc(" ",t.initials," "),r.Ab(3),r.Uc(t.name),r.Ab(2),r.uc("ngIf",t.role),r.Ab(1),r.uc("ngIf",t.startDate),r.Ab(1),r.uc("ngIf",t.endDate),r.Ab(1),r.uc("ngIf",t.sign)}}function z(t,e){if(1&t&&(r.Wb(0,"section",1),r.Wb(1,"h6",2),r.Tc(2,"SETTINGS.AUTHORITIES.TITLE"),r.Vb(),r.Rc(3,B,11,8,"div",3),r.Vb()),2&t){const t=r.mc();r.Ab(3),r.uc("ngForOf",t.authorities)}}let X=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["e-authorities"]],inputs:{authorities:"authorities"},decls:1,vars:1,consts:[["class","settings-info",4,"ngIf"],[1,"settings-info"],["translate","",1,"settings-heading"],["class","authority",4,"ngFor","ngForOf"],[1,"authority"],[1,"authority__initials","p2"],[1,"authority__info"],[1,"p2","text-dark","authority__name"],[1,"p3","text-muted"],["class","authority__row",4,"ngIf"],["class","authority__sign p3 text-dark","translate","",4,"ngIf"],[1,"authority__row"],["translate",""],["translate","",1,"authority__sign","p3","text-dark"]],template:function(t,e){1&t&&r.Rc(0,z,4,1,"section",0),2&t&&r.uc("ngIf",e.authorities)},directives:[i.u,d.a,i.t],pipes:[i.f],styles:[".authority[_ngcontent-%COMP%]{-webkit-box-align:start;align-items:flex-start;margin-bottom:1rem}.authority[_ngcontent-%COMP%], .authority__initials[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.authority__initials[_ngcontent-%COMP%]{flex-shrink:0;width:2.5rem;height:2.5rem;border-radius:1rem;margin-right:1rem;color:#fff;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;background:#d6dadf}.authority__initials.first-sign[_ngcontent-%COMP%]{background:rgba(239,143,0,.7)}.authority__initials.second-sign[_ngcontent-%COMP%]{background:rgba(21,134,187,.7)}.authority__sign[_ngcontent-%COMP%]{margin-left:auto}.authority__name[_ngcontent-%COMP%]{margin-bottom:.25rem}"]}),t})();var Q=n("xJkR"),$=n("lABO");function Y(t,e){if(1&t&&r.Rb(0,"e-authorities",3),2&t){const t=r.mc();r.uc("authorities",t.authorities)}}const H=function(){return{width:"220px",height:"30px","margin-top":"0.375rem","margin-bottom":"30px","background-color":"#ECEEF1"}},J=function(){return{height:"70px","margin-bottom":"1rem","background-color":"#ECEEF1"}};function Z(t,e){1&t&&(r.Wb(0,"div",4),r.Rb(1,"ngx-skeleton-loader",5),r.Rb(2,"ngx-skeleton-loader",6),r.Vb()),2&t&&(r.Ab(1),r.uc("theme",r.yc(2,H)),r.Ab(1),r.uc("theme",r.yc(3,J)))}function tt(t,e){if(1&t){const t=r.Xb();r.Wb(0,"j-error-placeholder",7),r.ic("retried",(function(e){return r.Ic(t),r.mc().onRetry()})),r.Vb()}}let et=(()=>{class t{constructor(t,e){this.settingsService=t,this.companyService=e,this.subscription=new G.a;const n=this.settingsService.getAuthoritiesList().subscribe(t=>{this.authorities=t});this.subscription.add(n)}onRetry(){this.companyService.fetchAuthorizedPersons()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(j),r.Qb(y.a))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-authorities"]],decls:3,vars:3,consts:[[3,"authorities",4,"ngIf"],["class","settings-info",4,"ngIf"],["class","error-placeholder",3,"retried",4,"ngIf"],[3,"authorities"],[1,"settings-info"],[3,"theme"],["count","3",3,"theme"],[1,"error-placeholder",3,"retried"]],template:function(t,e){1&t&&(r.Rc(0,Y,1,1,"e-authorities",0),r.Rc(1,Z,3,4,"div",1),r.Rc(2,tt,1,0,"j-error-placeholder",2)),2&t&&(r.uc("ngIf",(null==e.authorities?null:e.authorities.length)>0),r.Ab(1),r.uc("ngIf",0==(null==e.authorities?null:e.authorities.length)),r.Ab(1),r.uc("ngIf",!e.authorities))},directives:[i.u,X,Q.a,$.a],styles:[".error-placeholder[_ngcontent-%COMP%]{max-width:435px}"]}),t})();var nt=n("itXk"),it=n("zdqJ");const st=["footerTemplate"];function ct(t,e){if(1&t&&r.Sb(0,4),2&t){const t=r.mc(2);r.uc("ngTemplateOutlet",t.footerTemplate)}}function at(t,e){if(1&t&&(r.Wb(0,"section",3),r.Sb(1,4),r.Rc(2,ct,1,1,"ng-container",5),r.Vb()),2&t){const t=r.mc(),e=r.Fc(3);r.Ab(1),r.uc("ngTemplateOutlet",e),r.Ab(1),r.uc("ngIf",t.footerTemplate)}}function rt(t,e){if(1&t&&(r.Wb(0,"section",6),r.Sb(1,4),r.Vb()),2&t){r.mc();const t=r.Fc(3);r.Ab(1),r.uc("ngTemplateOutlet",t)}}function ot(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",12),r.ic("click",(function(e){return r.Ic(t),r.mc(3).openRequisites()})),r.Tc(1),r.Vb()}if(2&t){const t=r.mc(3);r.Ab(1),r.Vc(" ",t.info.titleAdditional," ")}}function lt(t,e){if(1&t&&(r.Wb(0,"div",18),r.Tc(1),r.Vb()),2&t){const t=r.mc(2).$implicit;r.Ab(1),r.Vc(" ",t.value," ")}}function ut(t,e){if(1&t&&(r.Wb(0,"div",18),r.Tc(1),r.nc(2,"date"),r.Vb()),2&t){const t=r.mc(2).$implicit;r.Ab(1),r.Vc(" ",r.pc(2,1,t.value,"yyyy-MM-dd HH:mm")," ")}}function bt(t,e){if(1&t&&(r.Wb(0,"a",19),r.Tc(1),r.Vb()),2&t){const t=r.mc(2).$implicit;r.wc("href","tel:",t.value,"",r.Kc),r.Ab(1),r.Uc(t.value)}}function dt(t,e){if(1&t&&(r.Wb(0,"a",19),r.Tc(1),r.Vb()),2&t){const t=r.mc(2).$implicit;r.wc("href","mailto:",t.value,"",r.Kc),r.Ab(1),r.Uc(t.value)}}function mt(t,e){if(1&t&&(r.Wb(0,"div",14),r.Wb(1,"div",15),r.Tc(2),r.Vb(),r.Rc(3,lt,2,1,"div",16),r.Rc(4,ut,3,4,"div",16),r.Rc(5,bt,2,2,"a",17),r.Rc(6,dt,2,2,"a",17),r.Vb()),2&t){const t=r.mc().$implicit;r.Ab(2),r.Vc(" ",t.label," "),r.Ab(1),r.uc("ngIf",!t.isPhone&&!t.isEmail&&!t.isTimestamp),r.Ab(1),r.uc("ngIf",t.isTimestamp),r.Ab(1),r.uc("ngIf",t.isPhone),r.Ab(1),r.uc("ngIf",t.isEmail)}}function gt(t,e){if(1&t&&(r.Ub(0),r.Rc(1,mt,7,5,"div",13),r.Tb()),2&t){const t=e.$implicit;r.Ab(1),r.uc("ngIf",t.value)}}function pt(t,e){if(1&t&&(r.Ub(0),r.Wb(1,"div",8),r.Wb(2,"h6",9),r.Tc(3),r.Vb(),r.Rc(4,ot,2,1,"button",10),r.Vb(),r.Rc(5,gt,2,1,"ng-container",11),r.Tb()),2&t){const t=r.mc(2);r.Ab(3),r.Uc(t.info.title),r.Ab(1),r.uc("ngIf",t.info.titleAdditional),r.Ab(1),r.uc("ngForOf",t.info.fields)}}function ht(t,e){if(1&t&&r.Rc(0,pt,6,3,"ng-container",7),2&t){const t=r.mc();r.uc("ngIf",t.info)}}let ft=(()=>{class t{constructor(){this.requisitesClicked=new r.n}ngOnInit(){}openRequisites(){this.requisitesClicked.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-info"]],contentQueries:function(t,e,n){var i;1&t&&r.Ib(n,st,!0),2&t&&r.Ec(i=r.jc())&&(e.footerTemplate=i.first)},inputs:{info:"info",hasTour:"hasTour"},outputs:{requisitesClicked:"requisitesClicked"},decls:4,vars:2,consts:[["class","settings-info","jTour","SETTINGS.INFO","jTourPosition","right",4,"ngIf"],["class","settings-info",4,"ngIf"],["infoTemplate",""],["jTour","SETTINGS.INFO","jTourPosition","right",1,"settings-info"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"settings-info"],[4,"ngIf"],[1,"settings-heading-wrapper"],["translate","",1,"settings-heading"],["class","btn-link-classic","translate","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["translate","",1,"btn-link-classic",3,"click"],["class","j-desc-row",4,"ngIf"],[1,"j-desc-row"],["translate","",1,"text-muted","j-desc-child"],["class","text-dark j-desc-child","translate","",4,"ngIf"],["class","text-dark j-desc-child",3,"href",4,"ngIf"],["translate","",1,"text-dark","j-desc-child"],[1,"text-dark","j-desc-child",3,"href"]],template:function(t,e){1&t&&(r.Rc(0,at,3,2,"section",0),r.Rc(1,rt,2,1,"section",1),r.Rc(2,ht,1,1,"ng-template",null,2,r.Sc)),2&t&&(r.uc("ngIf",e.hasTour),r.Ab(1),r.uc("ngIf",!e.hasTour))},directives:[i.u,it.a,i.B,d.a,i.t],pipes:[i.f],styles:[".btn-link-classic[_ngcontent-%COMP%]{margin-bottom:.5rem}"],changeDetection:0}),t})();const Tt=function(){return["/authorities"]};function St(t,e){1&t&&(r.Wb(0,"a",4),r.Tc(1),r.nc(2,"translate"),r.Vb()),2&t&&(r.uc("routerLink",r.yc(4,Tt)),r.Ab(1),r.Vc(" ",r.oc(2,2,"SETTINGS.AUTHORITIES.TITLE")," "))}function At(t,e){if(1&t){const t=r.Xb();r.Wb(0,"section",5),r.Wb(1,"div",6),r.ic("click",(function(e){return r.Ic(t),r.mc().hideSelector()})),r.Vb(),r.Wb(2,"section",7),r.Wb(3,"j-all-requisites",8),r.ic("closed",(function(e){return r.Ic(t),r.mc().hideSelector()})),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=r.mc();r.uc("ngClass",t.wrapperClasses),r.Ab(2),r.uc("ngClass",t.allRequisitesClasses)}}let Et=(()=>{class t{constructor(t,e,n,i){this.settingsService=t,this.translateService=e,this.companyService=n,this.document=i,this.subscription=new G.a,this.isAnimating=!1,this.wrapperClasses="",this.allRequisitesClasses="",this.isAllRequisitesShown=!1,this.isTourShown=!1,this.loadData();const s=Object(nt.a)([this.translateService.onLangChange,this.companyService.refresh$]).subscribe(()=>{this.loadData()});this.subscription.add(s)}ngOnDestroy(){this.subscription.unsubscribe()}loadData(){this.retrieveMainInfo(),this.retrieveContactsInfo(),this.retrievePrivateInfo(),this.retrieveUserLastSessionInfo()}retrieveMainInfo(){this.mainInfo=this.settingsService.generateMainInfo()}retrieveContactsInfo(){this.contactsInfo=this.settingsService.generateContactsInfo()}retrievePrivateInfo(){this.privateInfo=this.settingsService.generatePrivateInfo()}retrieveUserLastSessionInfo(){return Object(S.a)(this,void 0,void 0,(function*(){this.userLastSessionInfo=yield this.settingsService.generateUserLastSessionInfo()}))}showSelector(){this.isAnimating||(this.isAnimating=!0,this.isAllRequisitesShown=!0,this.wrapperClasses="animate__animated zoomInJ",setTimeout(()=>{this.document.body.classList.add("overflow-hidden"),this.allRequisitesClasses="is-shown"},250),setTimeout(()=>{this.wrapperClasses="",this.isAnimating=!1},300))}hideSelector(){this.isAnimating||(this.isAnimating=!0,this.allRequisitesClasses="",setTimeout(()=>{this.document.body.classList.remove("overflow-hidden"),this.wrapperClasses="animate__animated zoomOutJ"},250),setTimeout(()=>{this.wrapperClasses="",this.isAllRequisitesShown=!1,this.isAnimating=!1},300))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(j),r.Qb(d.e),r.Qb(y.a),r.Qb(i.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-main"]],decls:7,vars:6,consts:[[3,"info","hasTour","requisitesClicked"],["footerTemplate",""],[3,"info"],["class","f-page-wrapper is-shown",3,"ngClass",4,"ngIf"],[1,"mt-4","btn","btn-block","btn-primary",3,"routerLink"],[1,"f-page-wrapper","is-shown",3,"ngClass"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter",3,"ngClass"],[3,"closed"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-info",0),r.ic("requisitesClicked",(function(t){return e.showSelector()})),r.Rc(1,St,3,5,"ng-template",null,1,r.Sc),r.Vb(),r.Rb(3,"j-settings-info",2),r.Rb(4,"j-settings-info",2),r.Rb(5,"j-settings-info",2),r.Rc(6,At,4,2,"section",3)),2&t&&(r.uc("info",e.mainInfo)("hasTour",!0),r.Ab(3),r.uc("info",e.privateInfo),r.Ab(1),r.uc("info",e.userLastSessionInfo),r.Ab(1),r.uc("info",e.contactsInfo),r.Ab(1),r.uc("ngIf",e.isAllRequisitesShown))},directives:[ft,i.u,a.f,i.r,N],pipes:[d.d],styles:[""]}),t})();var yt=n("p6Hd"),Ct=n("tWFC"),kt=n("1kSV"),It=n("kUBv");const vt=["newPassword"];let Pt=(()=>{class t{constructor(t,e){this.userService=t,this.modalService=e,this.isLoading=!1}onSubmit(t){return Object(S.a)(this,void 0,void 0,(function*(){this.isLoading=!0,this.errorText=null;try{yield this.userService.changePassword(t.oldPassword,t.newPassword),this.newPassword.clearForm(),this.showSuccessModal()}catch(e){switch(e.code){case yt.b.INVALID_PASSWORD:this.errorText="SETTINGS.PASSWORD.OLD_ERROR";break;case yt.b.IDENTICAL_PASSWORDS:this.errorText="SETTINGS.PASSWORD.IDENTICAL";break;case yt.b.USED_PASSWORD:this.errorText="SETTINGS.PASSWORD.USED";break;default:this.errorText=e.description}}finally{this.isLoading=!1}}))}showSuccessModal(){return Object(S.a)(this,void 0,void 0,(function*(){const t=this.modalService.open(Ct.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",backdrop:"static",centered:!0});try{yield t.result}catch(e){}}))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(M.b),r.Qb(kt.q))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-password"]],viewQuery:function(t,e){var n;1&t&&r.Yc(vt,!0),2&t&&r.Ec(n=r.jc())&&(e.newPassword=n.first)},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-8","col-lg-7","col-xl-5"],[1,"password","my-4"],["translate","SETTINGS.PASSWORD.DESCRIPTION",1,"p2","mb-4"],[3,"isOldShown","isLoading","errorText","submitted"],["newPassword",""]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Rb(3,"div",3),r.Wb(4,"j-new-password",4,5),r.ic("submitted",(function(t){return e.onSubmit(t)})),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(4),r.uc("isOldShown",!0)("isLoading",e.isLoading)("errorText",e.errorText))},directives:[d.a,It.a],styles:[""]}),t})();var Ot=n("LRne");class Rt{constructor(t,e,n,i){this.numberOfPayments=t,this.depositAndWithdrawal=e,this.discountInRubles=n,this.discountInForeignCurrency=i}}class wt{constructor(t,e,n){this.title=t,this.helpText=e,this.description=Object(Ot.a)(n)}}class _t{constructor(t,e){this.totalCost=t,this.saving=e}}var Nt=function(t){return t.Loading="loading",t.Change="change",t.Success="success",t.NotFound="not_found",t.Error="error",t.Forbidden="forbidden",t}({});const Gt=[{checked:!1,currency:1e3,value:5},{checked:!1,currency:2e3,value:10},{checked:!1,currency:3e3,value:20},{checked:!1,currency:5e3,value:50}],xt=[{checked:!1,value:2,currency:2e3},{checked:!1,value:5,currency:8e3},{checked:!1,value:10,currency:15e3},{checked:!1,value:20,currency:25e3}],Vt=[{name:"SETTINGS.PACKAGE.SALE_DATA.NAME1",text:"SETTINGS.PACKAGE.SALE_DATA.TEXT1",currency:2e3,sale:50,checked:!1,key:"discountInRubles"},{name:"SETTINGS.PACKAGE.SALE_DATA.NAME2",text:"SETTINGS.PACKAGE.SALE_DATA.TEXT2",currency:3e3,sale:30,checked:!1,key:"discountInForeignCurrency"}],Wt=[Object.assign(Object.assign({},Vt[0]),{disabled:!0}),Object.assign(Object.assign({},Vt[1]),{disabled:!0})],Mt={current:0,total:0,description:Object(Ot.a)(""),color:""},Dt={current:0,total:0,description:Object(Ot.a)(""),color:""},Lt={totalCost:0,nextWriteOff:""},jt={backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0},Kt=[{height:"2.5rem",width:"z","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"8.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"12.5rem",width:"26rem","background-color":"#ECEEF1"},{height:"5rem",width:"26rem","background-color":"#ECEEF1"}];n("eIyQ");const Ut={connect:{title:"SETTINGS.PACKAGE.MESSAGE.CONNECT.TITLE",description:"SETTINGS.PACKAGE.MESSAGE.CONNECT.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.CONNECT.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.CONNECT.BUTTON_CLOSE.TEXT",key:"close"}},prepared:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.PREPARED.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.PREPARED.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.PREPARED.BUTTON_OK.TEXT",key:"returnMyPackage"}},error:{icon:"error",title:"SETTINGS.PACKAGE.MESSAGE.ERROR.TITLE",code:"50x",description:"SETTINGS.PACKAGE.MESSAGE.ERROR.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.ERROR.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.ERROR.BUTTON_CLOSE.TEXT",key:"close"}},change:{title:"SETTINGS.PACKAGE.MESSAGE.CHANGE.TITLE",description:"SETTINGS.PACKAGE.MESSAGE.CHANGE.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.CHANGE.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.CHANGE.BUTTON_CLOSE.TEXT",key:"close"}},connect_standart:{title:"SETTINGS.PACKAGE.MESSAGE.CONNECT_STANDART.TITLE",description:"SETTINGS.PACKAGE.MESSAGE.CONNECT_STANDART.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.CONNECT_STANDART.BUTTON_OK.TEXT",key:"smsAfter"},buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.CONNECT_STANDART.BUTTON_CLOSE.TEXT",key:"close"}},prepared_standart:{icon:"success",title:"SETTINGS.PACKAGE.MESSAGE.PREPARED_STANDART.TITLE",code:"204",description:"SETTINGS.PACKAGE.MESSAGE.PREPARED_STANDART.DESCRIPTION",buttonOk:{text:"SETTINGS.PACKAGE.MESSAGE.PREPARED_STANDART.BUTTON_OK.TEXT",key:"returnMyPackage"}},payment:{icon:"error",title:"SETTINGS.PACKAGE.MESSAGE.PAYMENT.TITLE",code:"402",description:"SETTINGS.PACKAGE.MESSAGE.PAYMENT.DESCRIPTION",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.PAYMENT.BUTTON_CLOSE.TEXT",key:"close"}},payment_locked:{icon:"error",title:"SETTINGS.PACKAGE.MESSAGE.PAYMENT_LOCKED.TITLE",description:"SETTINGS.PACKAGE.MESSAGE.PAYMENT_LOCKED.DESCRIPTION",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.PAYMENT_LOCKED.BUTTON_CLOSE.TEXT",key:"close"}},working_days:{icon:"error",description:"SETTINGS.PACKAGE.MESSAGE.WORKING_DAYS.DESCRIPTION",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.WORKING_DAYS.BUTTON_CLOSE.TEXT",key:"close"}},same_day:{icon:"error",description:"SETTINGS.PACKAGE.MESSAGE.SAME_DAY.DESCRIPTION",buttonClose:{text:"SETTINGS.PACKAGE.MESSAGE.SAME_DAY.BUTTON_CLOSE.TEXT",key:"close"}}};var qt=n("Ts65");function Ft(t,e){if(1&t&&(r.Wb(0,"div",2),r.Wb(1,"small"),r.Tc(2),r.Vb(),r.Vb()),2&t){const t=r.mc(2);r.Ab(2),r.Vc(" ",t.item.description," ")}}function Bt(t,e){if(1&t&&(r.Wb(0,"div",1),r.Wb(1,"div",2),r.Wb(2,"span"),r.Tc(3),r.nc(4,"translate"),r.Wb(5,"span",3),r.Tc(6),r.nc(7,"number"),r.Vb(),r.Tc(8),r.nc(9,"translate"),r.nc(10,"number"),r.Vb(),r.Vb(),r.Rc(11,Ft,3,1,"div",4),r.Wb(12,"div",5),r.Wb(13,"div",6),r.Rb(14,"div",7),r.Vb(),r.Vb(),r.Vb()),2&t){const t=r.mc();r.Ab(3),r.Vc("",r.oc(4,10,"SETTINGS.PACKAGE.PROGRESS_BAR.LEFT")," "),r.Ab(2),r.uc("title",null==t.item?null:t.item.current),r.Ab(1),r.Vc("",r.oc(7,12,null==t.item?null:t.item.current)," "),r.Ab(2),r.Wc(" ",r.oc(9,14,"SETTINGS.PACKAGE.PROGRESS_BAR.FROM")," ",r.oc(10,16,null==t.item?null:t.item.total),""),r.Ab(3),r.uc("ngIf",null==t.item?null:t.item.description),r.Ab(3),r.Eb("progress-bar ",null!=t.item&&t.item.color?t.item.color:"NONE",""),r.uc("ngStyle",t.style)}}function zt(t,e){1&t&&(r.Wb(0,"div",1),r.Wb(1,"div",2),r.Tc(2),r.nc(3,"translate"),r.Vb(),r.Wb(4,"div",2),r.Wb(5,"small"),r.Tc(6),r.nc(7,"translate"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.Ab(2),r.Vc(" ",r.oc(3,2,"SETTINGS.PACKAGE.PROGRESS_BAR.NOT_CONNECTED")," "),r.Ab(4),r.Vc(" ",r.oc(7,4,"SETTINGS.PACKAGE.PROGRESS_BAR.STANDARD")," "))}let Xt=(()=>{class t{constructor(){this.style={width:"0%"}}ngOnInit(){this.calculateRemaining(this.item)}calculateRemaining(t){var e,n;const i=Math.round((null===(e=t)||void 0===e?void 0:e.current)/(null===(n=t)||void 0===n?void 0:n.total)*100);this.style.width=`${i||1}%`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-progressbar"]],inputs:{item:"item",key:"key"},decls:2,vars:2,consts:[["class","row mx-1 justify-content-start",4,"ngIf"],[1,"row","mx-1","justify-content-start"],[1,"col-12","p-0"],[3,"title"],["class","col-12 p-0",4,"ngIf"],[1,"col-12","p-0","mt-1"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",3,"ngStyle"]],template:function(t,e){1&t&&(r.Rc(0,Bt,15,18,"div",0),r.Rc(1,zt,8,6,"div",0)),2&t&&(r.uc("ngIf",null==e.item?null:e.item.total),r.Ab(1),r.uc("ngIf",!(null!=e.item&&e.item.total)))},directives:[i.u,i.x],pipes:[d.d,i.g],styles:[".progress[_ngcontent-%COMP%]{height:.25rem!important;background-color:#e9ecf1!important;border-radius:.375rem!important}.progress-bar[_ngcontent-%COMP%]{border-radius:.375rem}.GREEN[_ngcontent-%COMP%]{background-color:#74ba72!important}.YELLOW[_ngcontent-%COMP%]{background-color:#ef8f00!important}.RED[_ngcontent-%COMP%]{background-color:red!important}.NONE[_ngcontent-%COMP%]{background-color:#e9ecf1!important}span[_ngcontent-%COMP%]{font-weight:500;font-size:1rem;line-height:1.5}small[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;color:#828282;line-height:1.125}"]}),t})();var Qt=n("Bl/x");function $t(t,e){if(1&t){const t=r.Xb();r.Wb(0,"j-switch",10),r.ic("change",(function(e){r.Ic(t);const n=r.mc().$implicit;return r.mc().setValue(n)})),r.Vb()}if(2&t){const t=r.mc().$implicit;r.uc("value",t.checked)}}function Yt(t,e){1&t&&r.Rb(0,"img",13)}function Ht(t,e){1&t&&r.Rb(0,"img",14)}function Jt(t,e){if(1&t&&(r.Ub(0),r.Rc(1,Yt,1,0,"img",11),r.Rc(2,Ht,1,0,"img",12),r.Tb()),2&t){const t=r.mc().$implicit;r.Ab(1),r.uc("ngIf",t.checked),r.Ab(1),r.uc("ngIf",!t.checked)}}function Zt(t,e){1&t&&r.Rb(0,"div",15)}function te(t,e){if(1&t&&(r.Ub(0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"span",4),r.Tc(5),r.Vb(),r.Tc(6),r.nc(7,"translate"),r.Vb(),r.Wb(8,"div",5),r.Tc(9),r.nc(10,"translate"),r.Vb(),r.Vb(),r.Wb(11,"div",6),r.Rc(12,$t,1,1,"j-switch",7),r.Rc(13,Jt,3,2,"ng-container",8),r.Vb(),r.Vb(),r.Rc(14,Zt,1,0,"div",9),r.Tb()),2&t){const t=e.$implicit,n=e.last;r.Ab(4),r.Hb("bg-sale-success-color",t.checked),r.Ab(1),r.Vc("-",t.sale,"%"),r.Ab(1),r.Vc(" ",r.oc(7,8,t.name)," "),r.Ab(3),r.Vc(" ",r.oc(10,10,t.text)," "),r.Ab(3),r.uc("ngIf",!(null!=t&&t.disabled)),r.Ab(1),r.uc("ngIf",null==t?null:t.disabled),r.Ab(1),r.uc("ngIf",!n)}}let ee=(()=>{class t{constructor(){this.getValue=new r.n}ngOnInit(){}set select(t){this.items[0].checked=t.discountInRubles,this.items[1].checked=t.discountInForeignCurrency}setValue(t){t.checked=!t.checked,this.getValue.emit({[t.key]:t.checked})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-form"]],inputs:{items:"items",select:"select"},outputs:{getValue:"getValue"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"row","mx-1","justify-content-between"],[1,"col-10","p-0"],[1,"main-title"],[1,"main-title__badge"],[1,"description"],[1,"col-2","p-0","align-middle"],["customClasses","mt-2",3,"value","change",4,"ngIf"],[4,"ngIf"],["class","jbr",4,"ngIf"],["customClasses","mt-2",3,"value","change"],["class","mt-3 mr-1","src","/assets/img/history/modals/success.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["class","mt-3 mr-1","src","/assets/img/history/modals/default.svg","style","width: 1.5rem; float: right","alt","",4,"ngIf"],["src","/assets/img/history/modals/success.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],["src","/assets/img/history/modals/default.svg","alt","",1,"mt-3","mr-1",2,"width","1.5rem","float","right"],[1,"jbr"]],template:function(t,e){1&t&&r.Rc(0,te,15,12,"ng-container",0),2&t&&r.uc("ngForOf",e.items)},directives:[i.t,i.u,Qt.a],pipes:[d.d],styles:[".main-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;width:100%}.main-title__badge[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;padding:.25rem .375rem;margin-right:.75rem;background:#474b52;border-radius:.375rem;color:#fff;font-size:.875rem;font-weight:500}.description[_ngcontent-%COMP%]{color:#4f4f4f;font-size:.75rem;margin-top:.1875rem;width:100%}.bg-sale-success-color[_ngcontent-%COMP%]{background-color:#74ba72!important}.jbr[_ngcontent-%COMP%]{height:1px;background:#e7e7f1;margin:1rem 0}.currency[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}"]}),t})();const ne=function(t){return{totalCost:t}},ie=function(){return["my_package"]},se=function(t){return{faq:t}},ce=function(t){return{outlets:t}},ae=function(t){return[t]};let re=(()=>{class t{constructor(t){this.translateService=t,this.isAnotherCompany=!1,this.payment=new wt("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","",""),this.refill=new wt("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","",""),this.sale=new wt("SETTINGS.PACKAGE.CALCULATE.SALES","",""),this.myPaymentData=Dt,this.myRefillData=Mt,this.myPriceData=Lt,this.mySaleData=Wt}ngOnInit(){this.defaultView()}defaultView(){this.isAnotherCompany||(this.payment=new wt("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new wt("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new wt("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""))}set data(t){this.myPaymentData.current=t.restOfPayments.currentNumberOfPayments,this.myPaymentData.total=t.restOfPayments.totalNumberOfPayments,this.translateService.get("SETTINGS.PACKAGE.CALCULATE.MY_PAYMENT_DESCRIPTION",{totalNumberOfPayments:t.restOfPayments.totalNumberOfPayments,payment:t.restOfPayments.costNextPayment}).subscribe(t=>{this.myPaymentData.description=t}),this.myPaymentData.color=t.restOfPayments.colorIndicator,this.myRefillData.current=t.depositAndWithdrawals.currentDepositAndWithdrawals,this.myRefillData.total=t.depositAndWithdrawals.totalDepositAndWithdrawals,this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:t.depositAndWithdrawals.totalDepositAndWithdrawals/1e6,depositingOverLimit:t.depositAndWithdrawals.depositingOverLimit,withdrawalOverLimit:t.depositAndWithdrawals.withdrawalOverLimit}).subscribe(t=>{this.myRefillData.description=this.refill.description=t}),this.myRefillData.color=t.depositAndWithdrawals.colorIndicator,this.mySaleData.find((e,n)=>{"discountInRubles"===e.key&&(this.mySaleData[n]=Object.assign(Object.assign({},this.mySaleData[n]),{checked:t.discountOnTransferInRubles.hasDiscount})),"discountInForeignCurrency"===e.key&&(this.mySaleData[n]=Object.assign(Object.assign({},this.mySaleData[n]),{checked:t.discountOnTransferInCurrency.hasDiscount}))}),this.myPriceData.totalCost=t.totalCost,this.myPriceData.nextWriteOff=t.nextWriteOff}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-my-package"]],inputs:{isAnotherCompany:"isAnotherCompany",data:"data"},decls:20,vars:32,consts:[[3,"itemCardSettingsPackage"],["key","payment",3,"item"],["key","refill",3,"item"],[3,"items"],[1,"total-cost","m-0","p-0"],[1,"write-off","m-0","p-0"],[1,"row","justify-content-center","faq-my-package"],[1,"d-flex"],[1,"faq-link",3,"routerLink"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-package-card",0),r.Rb(1,"j-settings-package-progressbar",1),r.Vb(),r.Wb(2,"j-settings-package-card",0),r.Rb(3,"j-settings-package-progressbar",2),r.Vb(),r.Wb(4,"j-settings-package-card",0),r.Rb(5,"j-settings-package-form",3),r.Vb(),r.Wb(6,"j-settings-package-card"),r.Wb(7,"p",4),r.Tc(8),r.nc(9,"translate"),r.nc(10,"number"),r.Vb(),r.Wb(11,"p",5),r.Tc(12),r.nc(13,"translate"),r.nc(14,"date"),r.Vb(),r.Vb(),r.Wb(15,"div",6),r.Wb(16,"div",7),r.Wb(17,"a",8),r.Tc(18),r.nc(19,"translate"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.uc("itemCardSettingsPackage",e.payment),r.Ab(1),r.uc("item",e.myPaymentData),r.Ab(1),r.uc("itemCardSettingsPackage",e.refill),r.Ab(1),r.uc("item",e.myRefillData),r.Ab(1),r.uc("itemCardSettingsPackage",e.sale),r.Ab(1),r.uc("items",e.mySaleData),r.Ab(3),r.Vc(" ",r.pc(9,11,"SETTINGS.PACKAGE.CALCULATE.COST",r.zc(23,ne,r.oc(10,14,null==e.myPriceData?null:e.myPriceData.totalCost)))," "),r.Ab(4),r.Wc("",r.oc(13,16,"SETTINGS.PACKAGE.CALCULATE.NEXT_WITHDRAW")," \u2014 ",r.pc(14,18,null==e.myPriceData?null:e.myPriceData.nextWriteOff,"dd.MM.yyyy"),""),r.Ab(5),r.uc("routerLink",r.zc(30,ae,r.zc(28,ce,r.zc(26,se,r.yc(25,ie))))),r.Ab(1),r.Vc(" ",r.oc(19,21,"SETTINGS.PACKAGE.FAQ.TITLE")," "))},directives:[qt.a,Xt,ee,a.f],pipes:[d.d,i.g,i.f],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}.faq-link[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:22px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;text-align:center;color:#ef5630;cursor:pointer}.faq-my-package[_ngcontent-%COMP%]{max-width:27.2rem;margin:1.875rem 0}"]}),t})();var oe=n("yZrb"),le=n("tk/3");let ue=(()=>{class t{constructor(t){this.apiService=t}getCompanyCurrentPackage(t){return Object(S.a)(this,void 0,void 0,(function*(){const e=`companies/${t}/packages/current`;return yield this.apiService.get(e)}))}calculatePackageCost(t,e){return Object(S.a)(this,void 0,void 0,(function*(){const n=`companies/${t}/packages/calculate`;return yield this.apiService.post(n,e)}))}changeCompanyPackage(t,e,n){return Object(S.a)(this,void 0,void 0,(function*(){const i=`companies/${t}/packages/current`,s=(new le.g).set(oe.b.PHONE,n);return yield this.apiService.put(i,e,s)}))}}return t.\u0275fac=function(e){return new(e||t)(r.ec(oe.a))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var be=n("2FF4"),de=n("4zJ+");function me(t,e){1&t&&(r.Rb(0,"img",8),r.nc(1,"translate")),2&t&&r.vc("alt",r.oc(1,1,"SHARED.DONE"))}function ge(t,e){1&t&&(r.Rb(0,"img",9),r.nc(1,"translate")),2&t&&r.vc("alt",r.oc(1,1,"SHARED.DONE"))}function pe(t,e){if(1&t&&(r.Wb(0,"h3",10),r.Tc(1),r.nc(2,"translate"),r.Vb()),2&t){const t=r.mc(2);r.Ab(1),r.Vc(" ",r.oc(2,1,t.alertMessage.title)," ")}}function he(t,e){if(1&t&&(r.Wb(0,"p",11),r.Tc(1),r.nc(2,"translate"),r.Vb()),2&t){const t=r.mc(2);r.Ab(1),r.Vc(" ",r.oc(2,1,t.alertMessage.description)," ")}}function fe(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",12),r.Wb(1,"button",13),r.ic("click",(function(e){r.Ic(t);const n=r.mc(2);return n.buttonClick(n.alertMessage.buttonOk.key)})),r.Tc(2),r.nc(3,"translate"),r.Vb(),r.Vb()}if(2&t){const t=r.mc(2);r.Ab(2),r.Vc(" ",r.oc(3,1,t.alertMessage.buttonOk.text)," ")}}function Te(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",12),r.Wb(1,"button",14),r.ic("click",(function(e){r.Ic(t);const n=r.mc(2);return n.buttonClick(n.alertMessage.buttonClose.key)})),r.Tc(2),r.nc(3,"translate"),r.Vb(),r.Vb()}if(2&t){const t=r.mc(2);r.Ab(2),r.Vc(" ",r.oc(3,1,t.alertMessage.buttonClose.text)," ")}}function Se(t,e){if(1&t&&(r.Ub(0),r.Rb(1,"div",1),r.Wb(2,"div",2),r.Rc(3,me,2,3,"img",3),r.Rc(4,ge,2,3,"img",4),r.Rc(5,pe,3,3,"h3",5),r.Rc(6,he,3,3,"p",6),r.Vb(),r.Rc(7,fe,4,3,"div",7),r.Rc(8,Te,4,3,"div",7),r.Tb()),2&t){const t=r.mc();r.Ab(3),r.uc("ngIf","success"===(null==t.alertMessage?null:t.alertMessage.icon)),r.Ab(1),r.uc("ngIf","error"===(null==t.alertMessage?null:t.alertMessage.icon)),r.Ab(1),r.uc("ngIf",null==t.alertMessage?null:t.alertMessage.title),r.Ab(1),r.uc("ngIf",null==t.alertMessage?null:t.alertMessage.description),r.Ab(1),r.uc("ngIf",null==t.alertMessage?null:t.alertMessage.buttonOk),r.Ab(1),r.uc("ngIf",null==t.alertMessage?null:t.alertMessage.buttonClose)}}function Ae(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",18),r.ic("click",(function(e){return r.Ic(t),r.mc(2).buttonClick("close")})),r.Rb(1,"img",19),r.nc(2,"translate"),r.Vb()}2&t&&(r.Ab(1),r.vc("alt",r.oc(2,1,"SHARED.CLOSE")))}function Ee(t,e){1&t&&(r.Wb(0,"div",20),r.Rb(1,"j-animated-loading"),r.Vb())}function ye(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"div",1),r.Rc(2,Ae,3,3,"button",15),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"j-sms",16),r.ic("loaded",(function(e){return r.Ic(t),r.mc().onSmsLoaded()}))("submitted",(function(e){return r.Ic(t),r.mc().onSubmit(e)})),r.Vb(),r.Rc(5,Ee,2,0,"div",17),r.Vb(),r.Tb()}if(2&t){const t=r.mc();r.Ab(2),r.uc("ngIf",t.isReady),r.Ab(2),r.uc("phone",t.phone)("countryCode",t.countryCode)("headers",t.headerParams)("hidden",!t.isReady),r.Ab(1),r.uc("ngIf",!t.isReady)}}let Ce=(()=>{class t{constructor(t,e){this.modal=t,this.packageRequestsService=e,this.refresh=new r.n,this.countryCode=JSON.parse(localStorage.getItem("countryCode")),this.headerParams={smsHeader:oe.c.SIGNING_PACKAGE}}ngOnInit(){this.smsAfterOpen=!1,this.isReady=!1,this.alertMessage=this.isWorkingDay?this.isSameDay?Ut.same_day:Ut[this.alertMessageType]:Ut.working_days}onSmsLoaded(){this.isReady=!0}onSubmit(t){this.isReady=!1,this.changePackage(t.signature)}changePackage(t){this.packageRequestsService.changeCompanyPackage(this.companyId,this.packageTerms,t).then(()=>{this.alertMessage="connect_standart"===this.alertMessageType?Ut.prepared_standart:Ut.prepared}).catch(t=>{this.alertMessage=402===t.status?Ut.payment:423===t.status?Ut.payment_locked:Ut.error}).finally(()=>{var t,e;const n="connect"===this.alertMessageType?"new":"old",i=(null===(t=this.alertMessage)||void 0===t?void 0:t.code)?null===(e=this.alertMessage)||void 0===e?void 0:e.code:"";this.smsAfterOpen=!1,this.refresh.emit({typeUser:n,statusCode:i})})}buttonClick(t){"smsAfter"===t&&(this.smsAfterOpen=!0,this.isReady=!1),"returnMyPackage"===t&&this.modal.close(),"close"===t&&this.modal.close()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(kt.a),r.Qb(ue))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-alert-package"]],inputs:{companyId:"companyId",packageTerms:"packageTerms",alertMessageType:"alertMessageType",isWorkingDay:"isWorkingDay",isSameDay:"isSameDay"},outputs:{refresh:"refresh"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header","j-modal-header"],[1,"modal-body","j-modal-body","text-center","pb-4"],["src","/assets/img/history/modals/success.svg",3,"alt",4,"ngIf"],["src","/assets/img/history/modals/error.svg",3,"alt",4,"ngIf"],["translate","","class","light mb-3 mt-2",4,"ngIf"],["translate","","class","m-0 text-muted",4,"ngIf"],["class","modal-footer px-3 justify-content-center",4,"ngIf"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","mb-3","mt-2"],["translate","",1,"m-0","text-muted"],[1,"modal-footer","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-primary","m-0",3,"click"],["translate","","type","button",1,"btn","btn-link","m-0",3,"click"],["type","button","class","close",3,"click",4,"ngIf"],[3,"phone","countryCode","headers","hidden","loaded","submitted"],["class","spinner-wrap",4,"ngIf"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"spinner-wrap"]],template:function(t,e){1&t&&(r.Rc(0,Se,9,6,"ng-container",0),r.Rc(1,ye,6,6,"ng-container",0)),2&t&&(r.uc("ngIf",!e.smsAfterOpen),r.Ab(1),r.uc("ngIf",e.smsAfterOpen))},directives:[i.u,d.a,be.a,de.a],pipes:[d.d],styles:[""]}),t})();var ke=n("5gsm");function Ie(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",7),r.ic("click",(function(e){return r.Ic(t),r.mc(3).resetPackageTerms.emit("cancel")})),r.Tc(1),r.nc(2,"translate"),r.Vb()}2&t&&(r.Ab(1),r.Vc(" ",r.oc(2,1,"SETTINGS.PACKAGE.RESET")," "))}function ve(t,e){if(1&t&&(r.Wb(0,"div",3),r.Rc(1,Ie,3,3,"button",6),r.Vb()),2&t){const t=r.mc(2);r.Ab(1),r.uc("ngIf","change"===t.status)}}function Pe(t,e){if(1&t){const t=r.Xb();r.Wb(0,"button",7),r.ic("click",(function(e){r.Ic(t),r.mc();const n=r.Fc(2),i=r.mc(2);return n.close(),i.resetPackageTerms.emit("change")})),r.Tc(1),r.nc(2,"translate"),r.Vb(),r.Wb(3,"button",11),r.ic("click",(function(e){r.Ic(t),r.mc();const n=r.Fc(2),i=r.mc(2);return n.close(),i.resetPackageTerms.emit("reset")})),r.Tc(4),r.nc(5,"translate"),r.Vb()}2&t&&(r.Ab(1),r.Vc(" ",r.oc(2,2,"SETTINGS.PACKAGE.CHANGE")," "),r.Ab(3),r.Vc(" ",r.oc(5,4,"SETTINGS.PACKAGE.BACK_TO_STANDARD")," "))}function Oe(t,e){if(1&t&&(r.Wb(0,"div",3),r.Wb(1,"button",8,9),r.Tc(3),r.nc(4,"translate"),r.Vb(),r.Rc(5,Pe,6,6,"ng-template",null,10,r.Sc),r.Vb()),2&t){const t=r.Fc(6);r.Ab(1),r.uc("autoClose","outside")("ngbPopover",t),r.Ab(2),r.Vc(" ",r.oc(4,3,"SETTINGS.PACKAGE.EDIT")," ")}}function Re(t,e){if(1&t&&(r.Wb(0,"section",1),r.Wb(1,"div",2),r.Wb(2,"div",3),r.Wb(3,"h4",4),r.Tc(4),r.nc(5,"translate"),r.Vb(),r.Vb(),r.Rc(6,ve,2,1,"div",5),r.Rc(7,Oe,7,5,"div",5),r.Vb(),r.Vb()),2&t){const t=r.mc();r.Ab(4),r.Uc(r.oc(5,3,t.packageTitle[t.status])),r.Ab(2),r.uc("ngIf","change"===t.status),r.Ab(1),r.uc("ngIf","success"===t.status)}}const we=function(){return["success","change","not_found"]};let _e=(()=>{class t{constructor(){this.status=Nt.Loading,this.resetPackageTerms=new r.n,this.packageTitle={not_found:"SETTINGS.PACKAGE.TITLE.NOT_FOUND",change:"SETTINGS.PACKAGE.TITLE.CHANGE",success:"SETTINGS.PACKAGE.TITLE.SUCCESS"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-header"]],inputs:{status:"status"},outputs:{resetPackageTerms:"resetPackageTerms"},decls:1,vars:2,consts:[["class","my-1 j-page package-header",4,"ngIf"],[1,"my-1","j-page","package-header"],[1,"row","mx-1","justify-content-between"],[1,"d-flex","my-auto"],[1,"m-0"],["class","d-flex my-auto",4,"ngIf"],["class","btn-link-classic mb-2",3,"click",4,"ngIf"],[1,"btn-link-classic","mb-2",3,"click"],["placement","bottom",1,"btn-link-classic",3,"autoClose","ngbPopover"],["popover","ngbPopover"],["popoverContent",""],[1,"btn-link-classic",3,"click"]],template:function(t,e){1&t&&r.Rc(0,Re,8,5,"section",0),2&t&&r.uc("ngIf",r.yc(1,we).includes(e.status))},directives:[i.u,kt.C],pipes:[d.d],styles:["section[_ngcontent-%COMP%]{max-width:27.2rem;padding-right:1rem}.package-header[_ngcontent-%COMP%]     .popover{margin-left:2.5rem;width:12rem;height:5.25rem;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:12px}.package-header[_ngcontent-%COMP%]     .popover .arrow{display:none!important}.package-header[_ngcontent-%COMP%]     .popover .popover-body{padding:1rem!important}.btn-link-classic[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:#ef5630!important}"]}),t})();function Ne(t,e){if(1&t){const t=r.Xb();r.Wb(0,"div",2),r.Wb(1,"label"),r.Wb(2,"input",3),r.ic("change",(function(n){r.Ic(t);const i=e.$implicit,s=e.index;return r.mc().setValue(i,s)})),r.Vb(),r.Wb(3,"div",4),r.Wb(4,"div",5),r.Tc(5),r.nc(6,"translate"),r.Vb(),r.Wb(7,"div",6),r.Tc(8),r.nc(9,"currency"),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&t){const t=e.$implicit,n=e.index,i=r.mc();r.Ab(2),r.uc("name",i.key+n)("value",t.value)("checked",t.checked),r.Ab(3),r.Wc("",t.value," ",r.oc(6,6,i.textType[i.key]),""),r.Ab(3),r.Vc(" ",r.rc(9,8,t.currency,"\u20b8","symbol","0.0-2")," ")}}let Ge=(()=>{class t{constructor(){this.key="numberOfPayments",this.getValue=new r.n,this.textType={numberOfPayments:"SETTINGS.PACKAGE.TABS.NUMBER_OF_PAYMENTS",depositAndWithdrawal:"SETTINGS.PACKAGE.TABS.DEPOSIT_AND_WITHDRAWAL"}}ngOnInit(){}set select(t){this.items.map(e=>e.checked=e.value===t)}setValue(t,e){t.checked=!t.checked,this.items.filter((t,n)=>n!==e).map(t=>t.checked=!1),this.getValue.emit({[this.key]:t.checked?t.value:0})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-tabs"]],inputs:{items:"items",key:"key",select:"select"},outputs:{getValue:"getValue"},decls:2,vars:1,consts:[[1,"row","mx-1","justify-content-start"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],["type","checkbox",1,"card-input-element",3,"name","value","checked","change"],[1,"panel","panel-default","card-input"],[1,"panel-heading"],[1,"panel-body"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Rc(1,Ne,10,13,"div",1),r.Vb()),2&t&&(r.Ab(1),r.uc("ngForOf",e.items))},directives:[i.t],pipes:[d.d,i.d],styles:["label[_ngcontent-%COMP%]{width:100%;min-width:5rem;margin-right:.5rem}.card-input-element[_ngcontent-%COMP%]{display:none}.card-input[_ngcontent-%COMP%]{border:.0625rem solid #e7e7f1;box-sizing:border-box;border-radius:.75rem;padding:.5rem}.card-input[_ngcontent-%COMP%]:hover{cursor:pointer}.panel-heading[_ngcontent-%COMP%]{font-size:.875rem}.panel-body[_ngcontent-%COMP%]{font-size:.75rem;color:#828282}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]{border:none;background-color:#ef5630;color:#fff!important}.card-input-element[_ngcontent-%COMP%]:checked + .card-input[_ngcontent-%COMP%]   .panel-body[_ngcontent-%COMP%]{color:#fff!important}"]}),t})(),xe=(()=>{class t{constructor(t){this.translateService=t,this.item={totalCost:0,saving:0},this.disabledButton=!0,this.isWorkingDay=!0,this.openModal=new r.n,this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY"),this.translateService.onLangChange.subscribe(()=>{this.currency=this.translateService.instant("SETTINGS.PACKAGE.PRICE.CURRENCY")})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package-price"]],inputs:{item:"item",disabledButton:"disabledButton",isWorkingDay:"isWorkingDay"},outputs:{openModal:"openModal"},decls:26,vars:30,consts:[[1,"row","mx-1","justify-content-between"],[1,"col-3","p-0"],[1,"row"],[1,"col-12"],[1,"currency-text"],[1,"currency-eco",3,"hidden"],["href","javascript:void(0)","tooltipClass","tooltip-light tooltip-large","triggers","mouseenter:mouseleave",1,"mr-1","link-yellow",3,"ngbTooltip","inlineSVG"],[1,"col-9","p-0"],["tooltipClass","tooltip-light tooltip-large","triggers","manual",1,"ml-auto","btn","btn-header","btn-shadow","btn-primary","float-right",3,"ngbTooltip","disabled","click"],["t","ngbTooltip"],[3,"hidden"]],template:function(t,e){if(1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"span",4),r.Tc(5),r.nc(6,"translate"),r.Vb(),r.Vb(),r.Wb(7,"div",3),r.Wb(8,"span"),r.Wb(9,"span",5),r.Tc(10),r.nc(11,"currency"),r.Vb(),r.Wb(12,"span",5),r.Tc(13,"-"),r.Vb(),r.Rb(14,"a",6),r.nc(15,"translate"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(16,"div",7),r.Wb(17,"button",8,9),r.ic("click",(function(t){return e.openModal.emit()})),r.nc(19,"translate"),r.Wb(20,"span"),r.Tc(21),r.nc(22,"translate"),r.Vb(),r.Wb(23,"span",10),r.Tc(24),r.nc(25,"currency"),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&t){const t=r.Fc(18);r.Ab(5),r.Uc(r.oc(6,12,"SETTINGS.PACKAGE.PRICE.TITLE")),r.Ab(4),r.uc("hidden",!(null!=e.item&&e.item.saving)),r.Ab(1),r.Uc(r.rc(11,14,null==e.item?null:e.item.saving,"\u20b8","symbol","0.0-2")),r.Ab(2),r.uc("hidden",null==e.item?null:e.item.saving),r.Ab(2),r.uc("ngbTooltip",r.oc(15,19,"SETTINGS.PACKAGE.PRICE.SAVING"))("inlineSVG","/assets/icons/payments/question.svg"),r.Ab(3),r.uc("ngbTooltip",r.oc(19,21,"SETTINGS.PACKAGE.PRICE.MANUAL"))("disabled",e.disabledButton),r.Ab(4),r.Wc("",r.oc(22,23,"SETTINGS.PACKAGE.PRICE.CONNECT")," ",e.isWorkingDay?t.close():t.open(),""),r.Ab(2),r.uc("hidden",!(null!=e.item&&e.item.saving)),r.Ab(1),r.Vc("\xa0",r.rc(25,25,null==e.item?null:e.item.totalCost,e.currency,"symbol","0.0-2"),"")}},directives:[kt.E,v.a],pipes:[d.d,i.d],styles:[".currence[_ngcontent-%COMP%], .currency-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400}.currency-eco[_ngcontent-%COMP%]{font-weight:400;color:#27ae60;font-size:.9375rem;margin-right:.75rem}.link-yellow[_ngcontent-%COMP%]{color:#ef8f00}.tooltip-package[_ngcontent-%COMP%]{width:241px;height:52px;background:#faf7f7;border:1px solid #eceef1;box-shadow:0 10px 20px rgba(0,0,0,.04),0 2px 6px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.04);border-radius:8px}"]}),t})();const Ve=function(){return["calculate"]},We=function(t){return{faq:t}},Me=function(t){return{outlets:t}},De=function(t){return[t]};let Le=(()=>{class t{constructor(t){this.translateService=t,this.calculatePackage=new r.n,this.openModal=new r.n,this.isWorkingDay=!0,this.packageRest=null,this.paymentData=Gt,this.refillData=xt,this.saleData=Vt,this.disabledButton=!0}ngOnInit(){this.packageTerms=new Rt(0,0,!1,!1),this.defaultView(),this.getPackageTerms(this.packageRest)}defaultView(){return this.disabledButton=!0,!Object.keys(this.packageTerms).every(t=>!this.packageTerms[t])||(this.payment=new wt("SETTINGS.PACKAGE.CALCULATE.PAYMENTS","payments",""),this.refill=new wt("SETTINGS.PACKAGE.CALCULATE.DEPOSITS","deposits",""),this.sale=new wt("SETTINGS.PACKAGE.CALCULATE.SALES","sales",""),this.price=new _t(0,0),!1)}packageCalculate(t){"depositAndWithdrawal"in t&&(t.depositAndWithdrawal*=1e6),this.packageTerms=Object.assign(Object.assign({},this.packageTerms),t),this.defaultView()&&this.calculatePackage.emit(this.packageTerms)}set data(t){t&&(this.price.totalCost=t.conditions.packageCost,this.price.saving=t.saving,this.payment.description=t.conditions.costNextPayment?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.PAYMENT_DESCRIPTION",{payment:t.conditions.costNextPayment}):Object(Ot.a)(""),this.refill.description=t.depositAndWithdrawal?this.translateService.get("SETTINGS.PACKAGE.CALCULATE.DEPOSITS_DESCRIPTION",{deposit:t.depositAndWithdrawal/1e6,depositingOverLimit:t.conditions.depositingOverLimit,withdrawalOverLimit:t.conditions.withdrawalOverLimit}):Object(Ot.a)(""),this.disabledButton=!this.isWorkingDay)}getPackageTerms(t){t&&(this.packageTerms.numberOfPayments=t.restOfPayments.totalNumberOfPayments||0,this.packageTerms.depositAndWithdrawal=t.depositAndWithdrawals.totalDepositAndWithdrawals||0,this.packageTerms.discountInRubles=t.discountOnTransferInRubles.hasDiscount,this.packageTerms.discountInForeignCurrency=t.discountOnTransferInCurrency.hasDiscount,this.calculatePackage.emit(this.packageTerms))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(d.e))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-calculate-package"]],inputs:{isWorkingDay:"isWorkingDay",packageRest:"packageRest",data:"data"},outputs:{calculatePackage:"calculatePackage",openModal:"openModal"},decls:13,vars:23,consts:[[3,"itemCardSettingsPackage"],["key","numberOfPayments",3,"items","select","getValue"],["key","depositAndWithdrawal",3,"items","select","getValue"],["type","sale",3,"items","select","getValue"],[3,"item","disabledButton","isWorkingDay","openModal"],[1,"row","justify-content-center","faq-calculate"],[1,"d-flex"],[1,"faq-link",3,"routerLink"]],template:function(t,e){1&t&&(r.Wb(0,"j-settings-package-card",0),r.Wb(1,"j-settings-package-tabs",1),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(2,"j-settings-package-card",0),r.Wb(3,"j-settings-package-tabs",2),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(4,"j-settings-package-card",0),r.Wb(5,"j-settings-package-form",3),r.ic("getValue",(function(t){return e.packageCalculate(t)})),r.Vb(),r.Vb(),r.Wb(6,"j-settings-package-card"),r.Wb(7,"j-settings-package-price",4),r.ic("openModal",(function(t){return e.openModal.emit(e.packageTerms)})),r.Vb(),r.Vb(),r.Wb(8,"div",5),r.Wb(9,"div",6),r.Wb(10,"a",7),r.Tc(11),r.nc(12,"translate"),r.Vb(),r.Vb(),r.Vb()),2&t&&(r.uc("itemCardSettingsPackage",e.payment),r.Ab(1),r.uc("items",e.paymentData)("select",e.packageTerms.numberOfPayments),r.Ab(1),r.uc("itemCardSettingsPackage",e.refill),r.Ab(1),r.uc("items",e.refillData)("select",e.packageTerms.depositAndWithdrawal/1e6),r.Ab(1),r.uc("itemCardSettingsPackage",e.sale),r.Ab(1),r.uc("items",e.saleData)("select",e.packageTerms),r.Ab(2),r.uc("item",e.price)("disabledButton",e.disabledButton)("isWorkingDay",e.isWorkingDay),r.Ab(3),r.uc("routerLink",r.zc(21,De,r.zc(19,Me,r.zc(17,We,r.yc(16,Ve))))),r.Ab(1),r.Uc(r.oc(12,14,"SETTINGS.PACKAGE.FAQ.TITLE")))},directives:[qt.a,Ge,ee,xe,a.f],pipes:[d.d],styles:[".total-cost[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:24px}.write-off[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:18px;color:#4f4f4f}.faq-link[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:22px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;text-align:center;color:#ef5630;cursor:pointer}.faq-calculate[_ngcontent-%COMP%], .faq-my-package[_ngcontent-%COMP%]{max-width:27.2rem;margin:1.875rem 0}"]}),t})();function je(t,e){if(1&t&&(r.Ub(0),r.Rb(1,"j-my-package",5),r.Tb()),2&t){const t=r.mc();r.Ab(1),r.uc("data",t.packageRest)}}function Ke(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-calculate-package",6),r.ic("openModal",(function(e){return r.Ic(t),r.mc().changePackageTerms("connect",e)}))("calculatePackage",(function(e){return r.Ic(t),r.mc().calculatePackageTerms(e)})),r.Vb(),r.Tb()}if(2&t){const t=r.mc();r.Ab(1),r.uc("data",t.packageCalculation)("isWorkingDay",t.packageRest.isWorkingDay)}}function Ue(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-calculate-package",7),r.ic("openModal",(function(e){return r.Ic(t),r.mc().changePackageTerms("change",e)}))("calculatePackage",(function(e){return r.Ic(t),r.mc().calculatePackageTerms(e)})),r.Vb(),r.Tb()}if(2&t){const t=r.mc();r.Ab(1),r.uc("data",t.packageCalculation)("packageRest",t.packageRest)}}function qe(t,e){1&t&&(r.Ub(0),r.Rb(1,"j-error-placeholder",8),r.nc(2,"translate"),r.nc(3,"translate"),r.Tb()),2&t&&(r.Ab(1),r.uc("errorText",r.oc(2,4,"SETTINGS.PACKAGE.FORBIDDEN"))("errorBadge",r.oc(3,6,"SHARED.SOON"))("imgLink","/assets/img/shared/empty.svg")("isRetryable",!1))}function Fe(t,e){if(1&t){const t=r.Xb();r.Ub(0),r.Wb(1,"j-error-placeholder",9),r.ic("retried",(function(e){return r.Ic(t),r.mc().getPackageRest()})),r.Vb(),r.Tb()}}function Be(t,e){1&t&&r.Rb(0,"ngx-skeleton-loader",11),2&t&&r.uc("theme",e.$implicit)}function ze(t,e){if(1&t&&(r.Ub(0),r.Rc(1,Be,1,1,"ngx-skeleton-loader",10),r.Tb()),2&t){const t=r.mc();r.Ab(1),r.uc("ngForOf",t.themes)}}const Xe=[{path:"",component:T,data:{title:"SETTINGS.TITLE"},children:[{path:"main",component:Et},{path:"authorities",component:et},{path:"password",component:Pt},{path:"package",component:(()=>{class t{constructor(t,e,n,i){this.packageRequestsService=t,this.companyService=e,this.analytics=n,this.modalService=i,this.subscription=new G.a,this.themes=Kt}ngOnInit(){this.subscription=this.companyService.refresh$.subscribe(t=>{this.companyId=t[1].companyId,this.getPackageRest()})}getPackageRest(){this.packageCalculation=void 0,this.packageResponseStatus=Nt.Loading,this.packageRequestsService.getCompanyCurrentPackage(this.companyId).then(t=>{var e;this.packageRest=t,this.packageResponseStatus=(null===(e=this.packageRest)||void 0===e?void 0:e.totalCost)?Nt.Success:Nt.NotFound,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"204"})}).catch(t=>{403===t.status?(this.packageResponseStatus=Nt.Forbidden,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"403"})):(this.packageResponseStatus=Nt.Error,this.analytics.logEvent("JBundleview_Show",{version:1,Status:"50x"}))})}calculatePackageTerms(t){this.packageRequestsService.calculatePackageCost(this.companyId,t).then(t=>{this.packageCalculation=t}).catch(()=>{this.packageResponseStatus=Nt.Error})}changePackageTerms(t,e){const n=this.modalService.open(Ce,jt);n.componentInstance.alertMessageType=t,n.componentInstance.packageTerms=e,n.componentInstance.companyId=this.companyId,n.componentInstance.isSameDay=this.packageRest.isSameDay,n.componentInstance.isWorkingDay=this.packageRest.isWorkingDay,n.componentInstance.refresh.subscribe(({typeUser:t,statusCode:e})=>{this.analytics.logEvent("JBundleConnect_Result",{version:1,TypeUser:t,Status:e}),this.getPackageRest()}),this.analytics.logEvent("JBundleEdit_Connect_Click",{version:1})}resetPackageTerms(t){if(this.packageCalculation=void 0,"change"===t)this.packageResponseStatus=Nt.Change;else if("cancel"===t)this.packageResponseStatus=Nt.Success;else if("reset"===t){const t=new Rt(0,0,!1,!1);this.changePackageTerms("connect_standart",t)}}ngOnDestroy(){this.subscription.unsubscribe(),this.packageCalculation=void 0}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ue),r.Qb(y.a),r.Qb(ke.b),r.Qb(kt.q))},t.\u0275cmp=r.Kb({type:t,selectors:[["j-settings-package"]],decls:10,vars:8,consts:[[1,"row","mt-4","px-4",3,"ngSwitch"],[1,"col-7","col-lg-9","col-md-11","col-sm-12","col-12"],[3,"status","resetPackageTerms"],[4,"ngSwitchCase"],["name","faq"],[3,"data"],[3,"data","isWorkingDay","openModal","calculatePackage"],[3,"data","packageRest","openModal","calculatePackage"],[1,"error-placeholder",3,"errorText","errorBadge","imgLink","isRetryable"],[1,"error-placeholder",3,"retried"],["class","col-12",3,"theme",4,"ngFor","ngForOf"],[1,"col-12",3,"theme"]],template:function(t,e){1&t&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"j-settings-package-header",2),r.ic("resetPackageTerms",(function(t){return e.resetPackageTerms(t)})),r.Vb(),r.Rc(3,je,2,1,"ng-container",3),r.Rc(4,Ke,2,2,"ng-container",3),r.Rc(5,Ue,2,2,"ng-container",3),r.Rc(6,qe,4,8,"ng-container",3),r.Rc(7,Fe,2,0,"ng-container",3),r.Vb(),r.Rc(8,ze,2,1,"ng-container",3),r.Vb(),r.Rb(9,"router-outlet",4)),2&t&&(r.uc("ngSwitch",e.packageResponseStatus),r.Ab(2),r.uc("status",e.packageResponseStatus),r.Ab(1),r.uc("ngSwitchCase","success"),r.Ab(1),r.uc("ngSwitchCase","not_found"),r.Ab(1),r.uc("ngSwitchCase","change"),r.Ab(1),r.uc("ngSwitchCase","forbidden"),r.Ab(1),r.uc("ngSwitchCase","error"),r.Ab(1),r.uc("ngSwitchCase","loading"))},directives:[i.y,_e,i.z,a.h,re,Le,$.a,i.t,Q.a],pipes:[d.d],encapsulation:2}),t})(),children:[{path:":key",component:n("KJdv").a,outlet:"faq"}]},{path:"**",redirectTo:"main"}]}];let Qe=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(Xe)],a.g]}),t})();var $e=n("MN0s");n("qcJj"),n("/Fsc"),n.d(e,"SettingsModule",(function(){return Ye}));let Ye=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},imports:[[i.c,s.a,Qe,c.n,c.D,$e.a]]}),t})()}}]);