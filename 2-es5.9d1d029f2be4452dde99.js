function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(c){a=!0,r=c}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+BgI":function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n("mrSG"),a=n("YMfE"),r=n("+/Tu"),o=n("Eajh"),s=n("NlNA"),c=n("i2Gl"),u=n("p6Hd"),d=n("HghS"),l=n("TwVa"),m=n("wd/R"),p=n("D1y2"),y=n.n(p),v=n("fXoL"),b=n("4Nuw"),f=n("0mgW"),h=n("bHA9"),k=n("B1Ao"),g=n("wtV8"),A=n("VnnJ"),R=n("1kSV"),S=n("VO+5"),P=n("mR7B"),I=n("sYmb"),C=n("O/Ur"),E=function(){var e=function(){function e(t,n,i,a,r,o,s,c,u,d,l,m){_classCallCheck(this,e),this.accounts=t,this.payments=n,this.dictionaries=i,this.recipients=a,this.api=r,this.bankFromAccount=o,this.company=s,this.modalService=c,this.notifier=u,this.maskService=d,this.translate=l,this.currencyPayments=m}return _createClass(e,[{key:"processPayment",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(n=e).body=this.constructPaymentBody(e.rawBody,e),!e.paymentId){t.next=23;break}if(e.status!==l.i.DRAFT){t.next=17;break}return t.next=7,this.api.updatePayment(n.body,{paymentId:e.paymentId});case 7:return n.response=t.sent,t.next=10,this.api.createFromDraft(n.body,{paymentId:e.paymentId});case 10:return n.response.status.code=l.i.CREATED,t.next=13,this.handlePaymentCreateResponse(n.response);case 13:n.verified=t.sent,this.showResult(!0,{amount:e.total,multySubscribers:this.company.currentCompany.signatureScheme===l.k.MULTIPLE_SIGN,hasRights:this.payments.isSignatureRequired},null,n.response),t.next=21;break;case 17:return t.next=19,this.api.updatePayment(n.body,{paymentId:e.paymentId});case 19:n.response=t.sent,this.showResult(!0,{amount:e.total,updateCreated:!0},null,n.response);case 21:t.next=30;break;case 23:return t.next=25,this.api.createPayment(n.body);case 25:return n.response=t.sent,t.next=28,this.handlePaymentCreateResponse(n.response);case 28:n.verified=t.sent,this.showResult(!0,{amount:e.total,multySubscribers:this.company.currentCompany.signatureScheme===l.k.MULTIPLE_SIGN,hasRights:this.payments.isSignatureRequired},null,n.response);case 30:return n.body.paymentRecipient&&this.checkRecipientsRefresh(n.body),t.abrupt("return",n.response);case 34:throw t.prev=34,t.t0=t.catch(0),t.t0&&this.showResult(!1,void 0,t.t0),t.t0;case 37:case"end":return t.stop()}}),t,this,[[0,34]])})))}},{key:"constructPaymentBody",value:function(e,t){var n,i;return e.type&&e.type!==l.j.INTERNAL&&e.type!==l.j.EXTERNAL?e.type===l.j.TAX?i=this.preparePaymentTaxBody(e,t):[l.j.PENSION,l.j.MEDICAL,l.j.SOCIAL].includes(e.type)?i=this.prepareEmployeePaymentBody(e,t):e.type===l.j.SALARY?i=this.prepareSalaryPaymentBody(e,t):e.type===l.j.IN_BETWEEN||e.type===l.j.CARD_TO_CARD||e.type===l.j.CARD_TO_ACCOUNT||e.type===l.j.ACCOUNT_TO_CARD?i=e:e.type===l.j.FOREIGN?i=this.prepareForeignPaymentBody(e):this.notifier.notify("error","NOT_IMPLEMENTED"):i=this.preparePaymentOrderBody(e,t),(null===(n=t)||void 0===n?void 0:n.userPurpose)&&y()(i,"details.associatedField.parameters.paymentPurpose",t.userPurpose),i}},{key:"handlePaymentCreateResponse",value:function(e){var t=this;return e.status.code===u.e.REJECTED?Promise.reject(e):this.payments.isSignatureRequired?new Promise((function(n,i){t.processPaymentVerify(e).then((function(e){console.log(e),n(e)})).catch((function(e){console.log(e),i(e)}))})):Promise.resolve()}},{key:"saveToDrafts",value:function(e,t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object.assign(this.constructPaymentBody(Object.assign({},e),t),{category:t.category,status:{code:l.i.DRAFT}}),n.prev=1,n.next=4,t.paymentId?this.api.updatePayment(i,{paymentId:t.paymentId}):this.api.createPayment(i);case 4:return a=n.sent,n.abrupt("return",(this.notifier.notify("success",this.translate.instant(t.paymentId?"PAYMENTS.PIPELINES.DRAFT_UPDATED":"PAYMENTS.PIPELINES.SAVED_TO_DRAFTS")),a));case 8:throw n.prev=8,n.t0=n.catch(1),this.notifier.notify("error",n.t0.description||"ERRORS.UNKNOWN_ERROR"),n.t0;case 11:case"end":return n.stop()}}),n,this,[[1,8]])})))}},{key:"processPaymentVerify",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.modalService.open(c.b,{backdropClass:"backdrop_light",windowClass:"modal_light modal_md",backdrop:"static",centered:!0}),t.abrupt("return",(Object.assign(n.componentInstance,{additionalParams:{actionIds:[e.id]}}),Object.assign(n.componentInstance,{headerParams:{smsHeader:u.d.SIGNING_PAYMENT}}),new Promise((function(t,a){n.componentInstance.submitted.subscribe((function(r){i.api.signPayment(r,e.id).then((function(i){n.close(),localStorage.setItem("preferredSignatureType",r.type===l.q.OTP?c.a.OTP:c.a.SMS),t(e)})).catch((function(e){a(e||null),n.dismiss()}))})),n.componentInstance.closed.subscribe((function(){a()}))}))));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"preparePaymentOrderBody",value:function(e,t){var n=e.bankAccount?Object(a.ibanPrefix)(e.bankAccount,r.a.KZT):"",i={iinOrBin:e.iinOrBin,name:e.name,kbe:{name:e.kbeCode,code:e.kbeCode},recipientAccount:{iban:n,bankName:n&&this.bankFromAccount.transform(n,"name"),bic:n&&this.bankFromAccount.transform(n)}},o=this.constructBasePaymentDetails(e,t),s=this.payments.checkPaymentTypeFromIban(o.payerIban,n);return{emailOnSuccess:e.emailOnSuccess,paymentRecipient:i,details:o,category:l.h.DOMESTIC,type:s}}},{key:"prepareForeignPaymentBody",value:function(e){return this.currencyPayments.mapForm(e)}},{key:"prepareEmployeePaymentBody",value:function(e,t){var n=e.commonPeriodEnabled&&e.period&&m(e.period).format(a.ISO_8061),i=this.constructBasePaymentDetails(e,t),r=e.employees.map((function(e){var t=e.fio.split(" "),i=t[0],a=t[1];t.splice(0,2);var r=t.length>0?t.join(" "):null;return{amount:{currency:e.currency,amount:e.amount||0},birthDate:e.birthDate,iin:e.iin,lastname:i,firstname:a,middlename:r,period:n||e.period}}));return{category:l.h.DOMESTIC,type:e.type,details:i,paymentEmployees:r}}},{key:"prepareSalaryPaymentBody",value:function(e,t){var n,i,o,s,c,u=this,d=this.dictionaries.bankDictionary.getItemsByIds(e.bankReceiver),m={iinOrBin:null===(n=d)||void 0===n?void 0:n.bin,name:null===(i=d)||void 0===i?void 0:i.name,kbe:{code:e.isResidents?"19":"29"},recipientAccount:{iban:(null===(o=d)||void 0===o?void 0:o.salaryTransitIban)||Object(a.ibanPrefix)(e.bankAccount,r.a.KZT),bic:null===(s=d)||void 0===s?void 0:s.bic}},p=this.constructBasePaymentDetails(e,t),y=null===(c=e.employees)||void 0===c?void 0:c.map((function(e){var t=_slicedToArray(e.fio.split(" ")||[],3),n=t[0],i=t[1],a=t[2],o=u.maskService.getNumberedAmount(e.amount);return{iban:e.iban,amount:{currency:r.a.KZT,amount:o||0},birthDate:e.birthDate,iin:e.iin.replace(" ",""),lastname:n,firstname:i,middlename:a}}));return{category:l.h.DOMESTIC,type:e.type,details:p,paymentEmployees:y,paymentRecipient:m}}},{key:"preparePaymentTaxBody",value:function(e,t){var n,i,o,s,c=e.bankAccount?Object(a.ibanPrefix)(e.bankAccount,r.a.KZT):"",u=this.dictionaries.UGDictionary.getItemByKey(e.ugd,"code"),d=this.dictionaries.KBKDictionary.getItemByKey(e.kbk,"code"),p={recipientAccount:{iban:c},iinOrBin:null===(n=u)||void 0===n?void 0:n.bin,name:null===(i=u)||void 0===i?void 0:i.name},y=["period","periodStart","periodEnd","vin","protocolNumber"].reduce((function(t,n){return e[n]&&(t[n]=e[n]instanceof Date?m(e[n]).format("MM.yyyy"):e[n]),t}),{});return{paymentRecipient:p,details:Object.assign(Object.assign({},this.constructBasePaymentDetails(e,t)),{associatedField:{parameters:y},kbk:{code:null===(o=d)||void 0===o?void 0:o.code,name:null===(s=d)||void 0===s?void 0:s.name}}),category:l.h.DOMESTIC,type:l.j.TAX}}},{key:"flattenPaymentToModel",value:function(e){var t,n,i,r,o,s,c,u,d,p,y,v,b,f,h,k,g,A,R,S,P,I=e.paymentRecipient,C=e.details,E=e.paymentEmployees,T=e.type,O=this.accounts.store.items.find((function(e){return e.iban===C.payerIban})),D={amount:this.maskService.getMaskedAmount(null===(t=C.paymentAmount)||void 0===t?void 0:t.amount),number:C.documentId,date:C.valueDate&&Object(a.dateToNgbStruct)(new Date(C.valueDate)),knp:null===(n=C.knp)||void 0===n?void 0:n.code,purpose:C.description,vat:C.vat,urgent:C.urgent,type:T,senderAccount:O,emailOnSuccess:e.emailOnSuccess},N=(null===(i=C.associatedField)||void 0===i?void 0:i.parameters)||{};if(E&&(D.employees=E.map((function(e){return{amount:e.amount.amount,iin:e.iin,fio:[e.lastname,e.firstname,e.middlename].join(" "),birthDate:e.birthDate,period:e.period,iban:e.iban}})),D.employees.length)){var B=D.employees[0].period;D.commonPeriodEnabled=D.employees.every((function(e){return e.period&&e.period===B})),D.commonPeriodEnabled&&(D.period=m(B,a.ISO_8061).toDate())}switch(T){case l.j.MEDICAL:case l.j.PENSION:case l.j.SOCIAL:break;case l.j.SALARY:var H=this.dictionaries.bankDictionary.getItemByKey(null===(o=null===(r=I)||void 0===r?void 0:r.recipientAccount)||void 0===o?void 0:o.bic,"bic");H&&(D.bankReceiver=H.id,H.salaryTransitIban||(D.bankAccount=null===(c=null===(s=I)||void 0===s?void 0:s.recipientAccount)||void 0===c?void 0:c.iban)),I&&(D.isResidents="19"===(null===(d=null===(u=I)||void 0===u?void 0:u.kbe)||void 0===d?void 0:d.code));break;case l.j.TAX:var x;(null===(p=I)||void 0===p?void 0:p.iinOrBin)&&(x=this.dictionaries.UGDictionary.getItemByKey(I.iinOrBin,"bin")),Object.assign(D,{ugd:null===(y=x)||void 0===y?void 0:y.code,kbk:null===(v=C.kbk)||void 0===v?void 0:v.code,vin:null===(b=N)||void 0===b?void 0:b.vin,protocolNumber:null===(f=N)||void 0===f?void 0:f.protocolNumber,bankAccount:(null===(k=null===(h=I)||void 0===h?void 0:h.recipientAccount)||void 0===k?void 0:k.iban)||l.p.TAX_ACCOUNT}),["period","periodStart","periodEnd"].forEach((function(e){var t,n=N[e],i=n&&m(n,"MM.yyyy");(null===(t=i)||void 0===t?void 0:t.isValid())&&(D[e]=i.toDate())})),(D.periodEnd||D.periodEnd)&&(D.intervalEnabled=!0);break;case l.j.FOREIGN:Object.assign(D,this.currencyPayments.mapPayment(e));break;default:Object.assign(D,{iinOrBin:null===(g=I)||void 0===g?void 0:g.iinOrBin,name:null===(A=I)||void 0===A?void 0:A.name,bankAccount:null===(S=null===(R=I)||void 0===R?void 0:R.recipientAccount)||void 0===S?void 0:S.iban,kbeCode:null===(P=I)||void 0===P?void 0:P.kbe.code})}return D}},{key:"showResult",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,c=this.modalService.open(d.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0,backdrop:"static"});Object.assign(c.componentInstance,{message:a?(null===(t=a)||void 0===t?void 0:t.description)||(null===(n=a)||void 0===n?void 0:n.colvirResultDescription)||"ERRORS.UNKNOWN_ERROR":null,result:e,currency:r.a.KZT,amount:this.maskService.getNumberedAmount(i.amount)||0,multySubscribers:i.multySubscribers,hasRights:this.company.authorityLevel!==s.a.NO_SIGNATURE,payment:o,updateCreated:i.updateCreated})}},{key:"constructBasePaymentDetails",value:function(e,t){var n,i,s,c=this.dictionaries.KNPDictionary.getItemByKey(e.knp,"code"),u=this.maskService.getNumberedAmount(e.amount);return{valueDate:e.date&&Object(a.ngbDateToUTCStartDay)(e.date).toISOString()||e.date,knp:{code:e.knp,name:c&&c.name||o.b},description:e.purpose,payerIban:null===(n=e.senderAccount)||void 0===n?void 0:n.iban,paymentAmount:{amount:u,currency:null===(s=null===(i=e.senderAccount)||void 0===i?void 0:i.balance)||void 0===s?void 0:s.currency},commission:{amount:t.commission,currency:r.a.KZT},vat:e.vat,urgent:e.urgent,documentId:e.number}}},{key:"checkRecipientsRefresh",value:function(e){var t=e.paymentRecipient.recipientAccount,n=this.recipients.isRecipientExist({companyId:this.company.currentId,iinOrBin:e.paymentRecipient.iinOrBin,name:e.paymentRecipient.name,kbe:e.paymentRecipient.kbe});return n&&this.recipients.isRecipientAccountExist(t.iban,n.id)||this.recipients.getRecipients("",!0),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(v.ec(b.c),v.ec(f.c),v.ec(h.a),v.ec(k.a),v.ec(g.a),v.ec(o.a),v.ec(A.a),v.ec(R.q),v.ec(S.c),v.ec(P.a),v.ec(I.e),v.ec(C.b))},e.\u0275prov=v.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},CVrE:function(e,t,n){"use strict";n("FSxY");var i=n("O/Ur");n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return i.b}));var a=n("wtV8");n.d(t,"c",(function(){return a.a})),n("gm23");var r=n("kFTB");n.d(t,"e",(function(){return r.a}));var o=n("+BgI");n.d(t,"f",(function(){return o.a}));var s=n("0mgW");n.d(t,"d",(function(){return s.b})),n.d(t,"g",(function(){return s.c}))},D1y2:function(e,t,n){var i=n("FZoo");e.exports=function(e,t,n){return null==e?e:i(e,t,n)}},FSxY:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("Stn5"),a=n("fXoL"),r=n("1kSV"),o=n("qXBG"),s=n("tyNb"),c=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.modal=t,this.auth=n,this.router=i}return _createClass(e,[{key:"canDeactivate",value:function(e,t,n,a){var r,o;if(null===(o=null===(r=this.router.getCurrentNavigation().extras)||void 0===r?void 0:r.state)||void 0===o?void 0:o.silent)return Promise.resolve(!0);if(e&&e.formDirective&&this.auth.isAuthenticated){var s=e.formDirective,c=e.form;if(!s.submitted&&c.dirty||s.submitted&&c.dirty)return this.modal.open(i.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_max-height",centered:!0}).result}return Promise.resolve(!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.ec(r.q),a.ec(o.a),a.ec(s.c))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},HghS:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("3Pt+"),a=n("y5b2"),r=n("TwVa"),o=n("fXoL"),s=n("1kSV"),c=n("tyNb"),u=n("VnnJ"),d=n("mR7B"),l=n("sYmb"),m=n("bsP8");function p(e,t){1&e&&o.Sb(0)}function y(e,t){if(1&e&&(o.Wb(0,"h3",15),o.Rb(1,"j-money",16),o.Vb()),2&e){var n=o.mc();o.Ab(1),o.uc("money",n.money)}}function v(e,t){if(1&e&&(o.Wb(0,"h3",15),o.Tc(1),o.nc(2,"translate"),o.Vb()),2&e){var n=o.mc();o.Ab(1),o.Vc(" ",o.oc(2,1,n.subtitle)," ")}}function b(e,t){if(1&e&&(o.Wb(0,"p",17),o.Wb(1,"span"),o.Tc(2),o.nc(3,"translate"),o.Vb(),o.Tc(4,"\xa0"),o.Rb(5,"j-money",16),o.Vb()),2&e){var n=o.mc();o.Ab(2),o.Vc("",o.oc(3,2,"PAYMENTS.RESULT_MODAL.COMMISSION"),":"),o.Ab(3),o.uc("money",n.payment.details.commission)}}function f(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",11),o.Wb(1,"button",18),o.ic("click",(function(e){return o.Ic(n),o.mc().goToHistory()})),o.Tc(2),o.nc(3,"translate"),o.Vb(),o.Vb()}2&e&&(o.Ab(2),o.Uc(o.oc(3,1,"PAYMENTS.RESULT_MODAL.CHECK_STATUS")))}function h(e,t){1&e&&(o.Rb(0,"img",19),o.nc(1,"translate")),2&e&&o.vc("alt",o.oc(1,1,"SHARED.DONE"))}function k(e,t){1&e&&(o.Rb(0,"img",20),o.nc(1,"translate")),2&e&&o.vc("alt",o.oc(1,1,"SHARED.ERROR"))}var g=function(){var e=function(){function e(t,n,a,o,s,c){_classCallCheck(this,e),this.modal=t,this.router=n,this.companyService=a,this.maskedService=o,this.translate=s,this.navService=c,this.hasRights=!0,this.PAYMENT_TYPE=r.j,this.subscribe=new i.h(!1)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"closeModal",value:function(e,t){this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),t&&this.router.navigate(["/"]),this.modal.close({subscribe:this.subscribe.value,createNew:e})}},{key:"goToHistory",value:function(){var e,t;if(this.navService.retrieveContractBadges(),this.navService.retrieveLetterBadges(),this.result){var n="tenge";(null===(e=this.payment)||void 0===e?void 0:e.category)==r.h.FOREIGN?n="foreign":(null===(t=this.payment)||void 0===t?void 0:t.category)==r.h.CONVERSION&&(n="conversion"),this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?this.router.navigate(["/history/".concat(n)],{queryParams:{paymentStatus:a.d.IN_PROGRESS}}):this.router.navigate(["/history/".concat(n)],{queryParams:{paymentStatus:a.d.FOR_SIGN}})}this.modal.close()}},{key:"money",get:function(){var e;return(null===(e=this.payment)||void 0===e?void 0:e.type)==r.j.FOREIGN?this.payment.details.paymentAmount:{amount:Math.abs(this.maskedService.getNumberedAmount(this.amount)),currency:this.currency}}},{key:"subtitle",get:function(){var e;return e=this.result?this.updateCreated?"PAYMENTS.PAYMENT_EDITED":this.hasRights?this.multySubscribers?this.companyService.isPrimaryAuthority()?"PAYMENTS.PAYMENT_SENT_FOR_SIGN":"PAYMENTS.PAYMENT_SIGNED":"PAYMENTS.PAYMENT_SIGNED_AND_SENT":"PAYMENTS.CREATED_FOR_SIGN":"SHARED.ERROR",this.translate.instant(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(s.a),o.Qb(c.c),o.Qb(u.a),o.Qb(d.a),o.Qb(l.e),o.Qb(m.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["j-payment-result"]],inputs:{result:"result",currency:"currency",amount:"amount",multySubscribers:"multySubscribers",hasRights:"hasRights",message:"message",payment:"payment",updateCreated:"updateCreated"},decls:22,vars:17,consts:[[1,"result-modal"],[1,"modal-header"],[1,"modal-body","result-body","pb-0"],[1,"text-center"],[1,"result-modal--label","mb-2"],[4,"ngIf","ngIfThen","ngIfElse"],["class","light mb-3 mt-2",4,"ngIf"],["class","text-muted mt-0 mb-1",4,"ngIf"],[1,"m-0","text-muted"],[1,"modal-body","result-body"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"btn","btn-block",3,"click"],["success",""],["failure",""],[1,"light","mb-3","mt-2"],[3,"money"],[1,"text-muted","mt-0","mb-1"],[1,"btn","btn-primary","btn-block",3,"click"],["src","/assets/img/history/modals/success.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"]],template:function(e,t){if(1&e&&(o.Wb(0,"div",0),o.Rb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"div",3),o.Wb(4,"div",4),o.Rc(5,p,1,0,"ng-container",5),o.Vb(),o.Rc(6,y,2,1,"h3",6),o.Rc(7,v,3,3,"h3",6),o.Rc(8,b,6,4,"p",7),o.Wb(9,"p",8),o.Tc(10),o.nc(11,"translate"),o.Vb(),o.Vb(),o.Vb(),o.Wb(12,"div",9),o.Rc(13,f,4,3,"div",10),o.Wb(14,"div",11),o.Wb(15,"button",12),o.ic("click",(function(e){return t.closeModal(!1,!0)})),o.Tc(16),o.nc(17,"translate"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Rc(18,h,2,3,"ng-template",null,13,o.Sc),o.Rc(20,k,2,3,"ng-template",null,14,o.Sc)),2&e){var n=o.Fc(19),i=o.Fc(21);o.Ab(5),o.uc("ngIf",t.result)("ngIfThen",n)("ngIfElse",i),o.Ab(1),o.uc("ngIf",t.result),o.Ab(1),o.uc("ngIf",!t.result),o.Ab(1),o.uc("ngIf",(null==t.payment?null:t.payment.type)==t.PAYMENT_TYPE.FOREIGN&&(null==t.payment?null:null==t.payment.details?null:t.payment.details.commission)),o.Ab(2),o.Uc(o.oc(11,13,t.message||t.subtitle)),o.Ab(3),o.uc("ngIf",t.result),o.Ab(2),o.Hb("btn-primary",!t.result)("btn-link",t.result),o.Ab(1),o.Uc(o.oc(17,15,"PAYMENTS.RESULT_MODAL.BACK_TO_HOME"))}},styles:["@-webkit-keyframes checkmark{0%{stroke-dashoffset:100px}to{stroke-dashoffset:200px}}@keyframes checkmark{0%{stroke-dashoffset:100px}to{stroke-dashoffset:0px}}@-webkit-keyframes checkmark-circle{0%{stroke-dashoffset:480px}to{stroke-dashoffset:960px}}@keyframes checkmark-circle{0%{stroke-dashoffset:480px}to{stroke-dashoffset:960px}}@-webkit-keyframes colored-circle{0%{opacity:0}to{opacity:1}}@keyframes colored-circle{0%{opacity:0}to{opacity:1}}.inlinesvg .svg svg{display:inline}.icon--order-success svg polyline{-webkit-animation:checkmark .25s ease-in-out .7s backwards;animation:checkmark .25s ease-in-out .7s backwards}.icon--order-success svg circle{-webkit-animation:checkmark-circle .6s ease-in-out backwards;animation:checkmark-circle .6s ease-in-out backwards}.icon--order-success svg circle#colored{-webkit-animation:colored-circle .6s ease-in-out .7s backwards;animation:colored-circle .6s ease-in-out .7s backwards}.result-body{padding:1.5rem}"],encapsulation:2}),e}()},"O/Ur":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return y}));var i=n("mrSG"),a=n("tk/3"),r=n("YMfE"),o=n("+/Tu"),s=n("TwVa"),c=n("fXoL"),u=n("p6Hd"),d=n("VnnJ"),l=n("mR7B"),m=n("bHA9"),p=function(e){return e.RU="RU",e.US="US",e.CN="CN",e.AU="AU",e.CA="CA",e.AE="AE",e}({}),y=function(){var e=function(){function e(t,n,i,a){_classCallCheck(this,e),this.api=t,this.companyService=n,this.maskedService=i,this.dictionaries=a}return _createClass(e,[{key:"getCountries",value:function(){return this.api.get("countries")}},{key:"getContractById",value:function(e){return this.api.get("companies/".concat(this.companyService.currentId,"/fx-contracts/").concat(e))}},{key:"getContracts",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.api.get("companies/".concat(this.companyService.currentId,"/fx-contracts")));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getCodeWords",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!this.cashedCodeWordsList||e!==this.cashedCodeWordsCountry){t.next=2;break}return t.abrupt("return",this.cashedCodeWordsList);case 2:return n=(n=new a.h).append("countryCode",e),t.next=6,this.api.get("dictionaries/codewords",null,n);case 6:return i=t.sent,t.abrupt("return",(this.cashedCodeWordsCountry=e,this.cashedCodeWordsList=i,this.cashedCodeWordsList));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"getBanks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==this.cashedBankQuery||t!==this.cashedBankCountryCode){n.next=2;break}return n.abrupt("return",this.cashedBankList);case 2:return this.cashedBankQuery=e,this.cashedBankCountryCode=t,i=new a.h,e&&(i=i.append("search",e)),t&&(i=i.append("countryCode",t)),n.next=7,this.api.get("dictionaries/banks",null,i);case 7:return r=n.sent,n.abrupt("return",(this.cashedBankList=r,r));case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getKbkList",value:function(){return this.api.get("dictionaries/kbk")}},{key:"getStatuses",value:function(){return this.api.get("dictionaries/payer-status")}},{key:"mapForm",value:function(e){var t,n,i,a,c,u,d,l,m,y,v,b,f={commission:{amount:e.comission,currency:e.comissionCurrency},description:e.purpose,documentId:e.number,foreignPaymentDetails:{commissionWithdrawalIban:null===(t=e.commissionAccount)||void 0===t?void 0:t.iban,intermediaryBankBic:null===(n=e.intermediaryBank)||void 0===n?void 0:n.bic,intermediaryBankName:null===(i=e.intermediaryBank)||void 0===i?void 0:i.name,type:e.payComission?"OUR":"SHA"},valueDate:e.date&&Object(r.ngbDateToUTCStartDay)(e.date).toISOString()||e.date,payerIban:null===(a=e.senderAccount)||void 0===a?void 0:a.iban,paymentAmount:{amount:this.maskedService.getNumberedAmount(e.amount),currency:null===(u=null===(c=e.senderAccount)||void 0===c?void 0:c.balance)||void 0===u?void 0:u.currency}};if(e.knp){var h;h=e.knpObject?e.knpObject.code:e.knp;var k=this.dictionaries.KNPDictionary.getItemByKey(h,"code");f.knp={code:k.code,name:k.name}}e.kbk&&(f.kbk={code:e.kbk.code,name:e.kbk.description}),e.withinContract&&(f.foreignPaymentDetails.fxContractId=e.contractId,f.foreignPaymentDetails.contract=e.contract,f.foreignPaymentDetails.fxContractRecipient=e.fxContractRecipient,f.foreignPaymentDetails.fxContractRecipientId=e.fxContractRecipientId),e.codeWord&&(f.foreignPaymentDetails.codeWord=e.codeWord),e.isRubNonRussia&&(f.foreignPaymentDetails.intermediaryBankBic=e.rubNonRussiaCorrespondentBank.bic,f.foreignPaymentDetails.intermediaryBankIban=e.rubNonRussiaCorrespondentIban);var g=e.bank;e.isRubNonRussia&&(g=e.rubNonRussiaBank);var A=e.countryCode||(null===(d=e.country)||void 0===d?void 0:d.code)||(null===(m=null===(l=e.fxContractRecipient)||void 0===l?void 0:l.country)||void 0===m?void 0:m.code)||(null===(y=e.fxContractRecipient)||void 0===y?void 0:y.countryCode),R={category:s.j.FOREIGN,companyId:this.companyService.currentId,details:f,emailOnSuccess:e.emailOnSuccess,paymentRecipient:{cityName:e.cityName,countryCode:A,kbe:{code:e.kbeCode},kpp:e.kpp,name:e.name,recipientAccount:{bankName:null===(v=g)||void 0===v?void 0:v.name,bic:null===(b=g)||void 0===b?void 0:b.bic,iban:e.bankAccount?this.removeSpaces(e.bankAccount):e.bankAccount}},type:s.j.FOREIGN};return A==p.AU&&(R.paymentRecipient.address=e.senderAccount.balance.currency===o.a.AUD?{index:e.audIndex,state:e.audState,street:e.audStreet,buildingNumber:e.audBuildingNumber}:{text:e.audAddress}),A==p.CA&&(R.paymentRecipient.address={text:e.canAddress}),e.kio&&(R.paymentRecipient.iinOrBin=e.kio),e.kvo&&(f.foreignPaymentDetails.currencyTransactionCode=e.kvo),e.isRussianBudget&&(f.foreignPaymentDetails.oktmo=e.oktmo,f.foreignPaymentDetails.payerInn=e.payerInn,f.foreignPaymentDetails.payerKpp=e.payerKpp,f.foreignPaymentDetails.payerStatus=e.payerStatus,f.foreignPaymentDetails.paymentBasis=e.paymentBasis,f.foreignPaymentDetails.period=e.budgetPeriod,f.foreignPaymentDetails.uip=e.uip,f.foreignPaymentDetails.budgetDocNumber=e.budgetDocNumber),R}},{key:"mapPayment",value:function(e){var t,n,i,a,o,c,u,d,l,m,p,y,v,b,f,h,k,g,A,R,S,P;return{type:s.j.FOREIGN,senderAccount:null,commissionAccount:null,comission:e.details.comission,payComission:"OUR"==e.details.foreignPaymentDetails.type,countryCode:(null===(t=e.paymentRecipient)||void 0===t?void 0:t.countryCode)||"",cityName:(null===(n=e.paymentRecipient)||void 0===n?void 0:n.cityName)||"",isNewPayment:e.isNewPayment||!1,contract:e.details.foreignPaymentDetails.fxContract,contractId:e.details.foreignPaymentDetails.fxContractId,fxContractRecipient:e.details.foreignPaymentDetails.fxContractRecipient,fxContractRecipientId:e.details.foreignPaymentDetails.fxContractRecipientId,withinContract:!!e.details.foreignPaymentDetails.fxContractId,name:(null===(i=e.paymentRecipient)||void 0===i?void 0:i.name)||"",bankAccount:(null===(a=e.paymentRecipient)||void 0===a?void 0:a.recipientAccount.iban)||"",kbeCode:(null===(c=null===(o=e.paymentRecipient)||void 0===o?void 0:o.kbe)||void 0===c?void 0:c.code)||"",number:e.details.documentId,date:e.details.valueDate&&Object(r.dateToNgbStruct)(new Date(e.details.valueDate)),knp:null===(u=e.details.knp)||void 0===u?void 0:u.code,purpose:e.details.description,amount:null===(d=e.details.paymentAmount)||void 0===d?void 0:d.amount,bankLabel:"",bank:null,hasIntermediaryBank:!!e.details.foreignPaymentDetails.intermediaryBankBic,intermediaryBankLabel:"",intermediaryBank:null,notify:!!e.emailOnSuccess,emailOnSuccess:e.emailOnSuccess,kpp:(null===(l=e.paymentRecipient)||void 0===l?void 0:l.kpp)||"",kvo:e.details.foreignPaymentDetails.currencyTransactionCode||"",kio:(null===(m=e.paymentRecipient)||void 0===m?void 0:m.iinOrBin)||"",isRussianBudget:null,isRussianTaxPayer:!(!e.details.foreignPaymentDetails.payerInn&&!e.details.foreignPaymentDetails.payerKpp),payerInn:e.details.foreignPaymentDetails.payerInn||"",payerKpp:e.details.foreignPaymentDetails.payerKpp||"",kbk:e.details.kbk?{code:e.details.kbk.code,description:e.details.kbk.name}:"",oktmo:e.details.foreignPaymentDetails.oktmo||"",payerStatus:e.details.foreignPaymentDetails.payerStatus||"",hasRussianBudgetExtras:!!(e.details.foreignPaymentDetails.paymentBasis||e.details.foreignPaymentDetails.budgetDocNumber||e.details.foreignPaymentDetails.period||e.details.foreignPaymentDetails.uip),paymentBasis:e.details.foreignPaymentDetails.paymentBasis||"",budgetDocNumber:e.details.foreignPaymentDetails.budgetDocNumber||"",budgetPeriod:e.details.foreignPaymentDetails.period||"",uip:e.details.foreignPaymentDetails.uip||"",codeWord:e.details.foreignPaymentDetails.codeWord,audIndex:(null===(y=null===(p=e.paymentRecipient)||void 0===p?void 0:p.address)||void 0===y?void 0:y.index)||"",audState:(null===(b=null===(v=e.paymentRecipient)||void 0===v?void 0:v.address)||void 0===b?void 0:b.state)||"",audStreet:(null===(h=null===(f=e.paymentRecipient)||void 0===f?void 0:f.address)||void 0===h?void 0:h.street)||"",audBuildingNumber:(null===(g=null===(k=e.paymentRecipient)||void 0===k?void 0:k.address)||void 0===g?void 0:g.buildingNumber)||"",audAddress:(null===(R=null===(A=e.paymentRecipient)||void 0===A?void 0:A.address)||void 0===R?void 0:R.text)||"",canAddress:(null===(P=null===(S=e.paymentRecipient)||void 0===S?void 0:S.address)||void 0===P?void 0:P.text)||""}}},{key:"removeSpaces",value:function(e){return e.replace(/ /g,"")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.ec(u.a),c.ec(d.a),c.ec(l.a),c.ec(m.a))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Stn5:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),a=n("1kSV"),r=n("sYmb"),o=function(){var e=function(){function e(t){_classCallCheck(this,e),this.modal=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.modal.close(!1)}},{key:"continue",value:function(){this.modal.close(!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Qb(a.a))},e.\u0275cmp=i.Kb({type:e,selectors:[["j-payment-guard-modal"]],decls:21,vars:15,consts:[[1,"result-modal"],[1,"modal-header"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[1,"modal-body","p-3"],[1,"text-center"],[1,"modal-body","text-center"],[1,"form-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-link",3,"click"]],template:function(e,t){1&e&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Wb(2,"button",2),i.ic("click",(function(e){return t.modal.dismiss()})),i.Rb(3,"img",3),i.nc(4,"translate"),i.Vb(),i.Vb(),i.Wb(5,"div",4),i.Wb(6,"div",5),i.Wb(7,"h5"),i.Tc(8),i.nc(9,"translate"),i.Vb(),i.Wb(10,"p"),i.Tc(11),i.nc(12,"translate"),i.Vb(),i.Vb(),i.Vb(),i.Wb(13,"div",6),i.Wb(14,"div",7),i.Wb(15,"button",8),i.ic("click",(function(e){return t.continue()})),i.Tc(16),i.nc(17,"translate"),i.Vb(),i.Wb(18,"button",9),i.ic("click",(function(e){return t.cancel()})),i.Tc(19),i.nc(20,"translate"),i.Vb(),i.Vb(),i.Vb(),i.Vb()),2&e&&(i.Ab(3),i.vc("alt",i.oc(4,5,"SHARED.CLOSE")),i.Ab(5),i.Uc(i.oc(9,7,"PAYMENTS.GUARD_MODAL.TITLE")),i.Ab(3),i.Uc(i.oc(12,9,"PAYMENTS.GUARD_MODAL.DESCRIPTION")),i.Ab(5),i.Uc(i.oc(17,11,"PAYMENTS.GUARD_MODAL.EXIT")),i.Ab(3),i.Uc(i.oc(20,13,"SHARED.CANCEL")))},pipes:[r.d],styles:[""]}),e}()},gm23:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("gzBp"),a=n("fXoL"),r=n("tyNb"),o=n("wtV8"),s=n("0mgW"),c=n("VO+5"),u=function(){var e=function(){function e(t,n,i,a,r){_classCallCheck(this,e),this.router=t,this.route=n,this.api=i,this.payments=a,this.notification=r}return _createClass(e,[{key:"canActivate",value:function(e,t){var n,a,r,o,s=this,c=null===(a=null===(n=this.router.getCurrentNavigation().extras)||void 0===n?void 0:n.state)||void 0===a?void 0:a.repeatPayment,u=(null===(r=e.params)||void 0===r?void 0:r.paymentId)||(null===(o=c)||void 0===o?void 0:o.id),d=i.a.tenge.order;return c&&(d=this.payments.getPaymentRouteByType(c.type)),u?this.api.getPaymentById(u).then((function(e){var t=[s.payments.getPaymentRouteByType(e.type)];c||t.push(u),s.router.navigate(t,{state:{resolvedPayment:e}})})).catch((function(e){s.router.navigate([i.a.tenge.order]),s.notification.show({type:"error",message:e})})):this.router.navigate([d]),!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.ec(r.c),a.ec(r.a),a.ec(o.a),a.ec(s.c),a.ec(c.c))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},kFTB:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("YMfE"),a=n("3Pt+"),r=n("SMdK"),o=n("TwVa"),s=n("+/Tu"),c=n("fXoL"),u=n("0mgW"),d=n("7rOj"),l=n("bHA9"),m=function(){var e=function(){function e(t,n,i,a){_classCallCheck(this,e),this.fb=t,this.paymentsService=n,this.bankFromAccount=i,this.dictionaries=a}return _createClass(e,[{key:"createPaymentInTengeForm",value:function(){var e=this,t=this.fb.group({type:void 0,iinOrBin:["",[a.H.required,a.H.minLength(12)]],name:["",[a.H.required,a.H.maxLength(250)]],bankAccount:[void 0,a.H.required],kbeCode:["",[a.H.required,r.a.kbe]],number:["",a.H.required],date:null,knp:[void 0,[a.H.required]],purpose:[""],senderAccount:[""],amount:["",[a.H.required,a.H.min(this.paymentsService.rules.minAmount),a.H.max(this.paymentsService.rules.maxAmount),function(e){var t;return 0===(null===(t=e)||void 0===t?void 0:t.value)?{cantBeZero:!0}:null}]],vat:[!1],urgent:[!1],notify:[!1],emailOnSuccess:[{value:"",disabled:!0},[a.H.required,a.H.email]]}),n=t.controls,c=n.bankAccount,u=n.senderAccount;return c.setValidators([a.H.required,function(e){var t=Object(i.ibanPrefix)(e.value,s.a.KZT),n=u.value;return!e.value||t.length<18||!n||t!==n.iban?null:{isEqual:!0}},function(t){return e.paymentsService.bankExist(Object(i.ibanPrefix)(t.value||"",s.a.KZT))},function(e){return"KZ".concat(e.value)!==o.p.TAX_ACCOUNT?null:{taxAccountError:!0}}]),u.setValidators([a.H.required,function(e){return e.value&&c.updateValueAndValidity(),null}]),t}},{key:"createTaxForm",value:function(){var e=this,t=this.fb.group({type:o.j.TAX,ugd:[void 0,a.H.required],kbk:["",[a.H.required]],number:["",a.H.required],date:void 0,knp:[{value:"",disabled:!0},[a.H.required]],bankAccount:["",a.H.required],senderAccount:["",a.H.required],purpose:[""],amount:["",[a.H.required,a.H.min(this.paymentsService.rules.minAmount),a.H.max(this.paymentsService.rules.maxAmount)]],urgent:[!1],vin:[{value:"",disabled:!0}],intervalEnabled:!1,period:[{value:"",disabled:!0},[a.H.required]],periodStart:[{value:"",disabled:!0}],periodEnd:[{value:"",disabled:!0}],protocolNumber:[{value:"",disabled:!0},[a.H.required]]}),n=t.controls,c=n.periodEnd,u=n.periodStart,d=r.a.isSmallerThan(c),l=r.a.isGreaterThan(u);u.setValidators([a.H.required,d,r.a.revalidateLinkControlIf((function(){return!d(u)&&c.hasError("isGreaterThan")}),c)]),c.setValidators([a.H.required,l,r.a.revalidateLinkControlIf((function(){return!l(c)&&u.hasError("isSmallerThan")}),u)]);var m=t.controls,p=m.bankAccount,y=m.senderAccount;return p.setValidators([a.H.required,function(e){var t=Object(i.ibanPrefix)(e.value,s.a.KZT),n=y.value;return!e.value||t.length<18||!n||t!==n.iban?null:{isEqual:!0}},function(t){return e.paymentsService.bankExist(Object(i.ibanPrefix)(t.value||"",s.a.KZT))},function(e){return"070"==="KZ".concat(e.value).substring(4,7)?null:{wrongTaxAccountError:!0}}]),t}},{key:"createPensionForm",value:function(){return this.fb.group({type:o.j.PENSION,date:void 0,period:[{value:void 0,disabled:!0},[a.H.required]],number:["",a.H.required],knp:["010",[a.H.required]],purpose:"",employees:[void 0,[a.H.required,a.H.minLength(1),this.paymentsService.employeeGroupControlValidator(o.j.PENSION)]],senderAccount:["",a.H.required],amount:[0,[a.H.required,a.H.min(.01)]],urgent:[!1],commonPeriodEnabled:!1})}},{key:"createSocialForm",value:function(){return this.fb.group({type:o.j.SOCIAL,date:void 0,period:[{value:void 0,disabled:!0},[a.H.required]],number:["",a.H.required],knp:["012",[a.H.required]],employees:[void 0,[a.H.required,a.H.minLength(1),this.paymentsService.employeeGroupControlValidator(o.j.SOCIAL)]],senderAccount:["",a.H.required],amount:[0,[a.H.required,a.H.min(.01)]],urgent:[!1],purpose:"",commonPeriodEnabled:!1})}},{key:"createMedicalForm",value:function(){return this.fb.group({type:o.j.MEDICAL,date:void 0,period:[{value:void 0,disabled:!0},[a.H.required]],number:["",a.H.required],knp:["121",[a.H.required]],employees:[void 0,[a.H.required,a.H.minLength(1),this.paymentsService.employeeGroupControlValidator(o.j.MEDICAL)]],senderAccount:["",a.H.required],amount:[0,[a.H.required,a.H.min(.01)]],urgent:[!1],purpose:"",commonPeriodEnabled:!1})}},{key:"createSalaryForm",value:function(){var e=this,t=this.fb.group({type:o.j.SALARY,bankReceiver:[""],bankAccount:[{value:"",disabled:!0}],date:void 0,number:["",a.H.required],knp:[void 0,[a.H.required]],employees:[void 0,[a.H.required,a.H.minLength(1),this.paymentsService.employeeGroupControlValidator(o.j.SALARY)]],senderAccount:["",a.H.required],amount:[0,[a.H.required,a.H.min(.01)]],urgent:[!1],purpose:[""],isResidents:!0}),n=t.controls,r=n.bankReceiver,c=n.bankAccount;return r.setValidators([a.H.required,function(e){return e.value&&c.updateValueAndValidity(),null}]),c.setValidators([a.H.required,function(t){var n=Object(i.ibanPrefix)(t.value,s.a.KZT);if(n.length<7||!r.value)return null;var a=e.dictionaries.bankDictionary.getItemsByIds(r.value),o=e.paymentsService.bankFromAccount.transform(n);return a&&a.bic!==o?{difReceiverAndBankBiq:!0}:null}]),t}},{key:"createCurrencyForm",value:function(){return this.fb.group({type:o.j.FOREIGN,senderAccount:["",a.H.required],commissionAccount:["",a.H.required],comission:[null],comissionCurrency:[null],payComission:[!1],countryCode:[void 0,a.H.required],country:[null],cityName:[void 0],contract:[null],contractId:[null],fxContractRecipient:[null],fxContractRecipientId:[null],withinContract:[!1],name:["",[a.H.required,a.H.maxLength(103)]],bankAccount:[""],kbeCode:["",[a.H.required,r.a.kbe]],number:["",a.H.required],date:[null],knp:[void 0,[a.H.required]],knpObject:[null],purpose:[""],amount:["",[a.H.required,a.H.min(this.paymentsService.rules.minAmount),a.H.max(this.paymentsService.rules.maxAmount),function(e){var t;return 0===(null===(t=e)||void 0===t?void 0:t.value)?{cantBeZero:!0}:null}]],bankLabel:["",a.H.required],bank:[null,a.H.required],hasIntermediaryBank:[!1],intermediaryBankLabel:[""],intermediaryBank:[null],notify:[!1],emailOnSuccess:[{value:"",disabled:!0},[a.H.required,a.H.email]],kpp:[""],kvo:[void 0],codeWord:[void 0],kio:[void 0,a.H.required],isRussianBudget:[null],isRussianTaxPayer:[null],payerInn:[null],payerKpp:[""],kbk:[null],oktmo:[""],payerStatus:["S08"],hasRussianBudgetExtras:[null],paymentBasis:[""],budgetDocNumber:[""],budgetPeriod:[""],uip:[null],isRubNonRussia:[!1],rubNonRussiaCorrespondentBankLabel:[""],rubNonRussiaCorrespondentBank:[null],rubNonRussiaBankLabel:[""],rubNonRussiaBank:[null],rubNonRussiaCorrespondentIban:[""],audIndex:[""],audState:[""],audStreet:[""],audBuildingNumber:[""],audAddress:[""],canAddress:[""]})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.ec(i.FormBuilderTypeSafe),c.ec(u.c),c.ec(d.b),c.ec(l.a))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);