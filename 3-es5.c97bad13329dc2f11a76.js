function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,a=!1,c=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(s){a=!0,c=s}finally{try{i||null==r.return||r.return()}finally{if(a)throw c}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"8Sq6":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),a=n("1kSV"),c=n("VnnJ"),o=n("sYmb"),r=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.modal=e,this.companyService=n}return _createClass(t,[{key:"ngOnInit",value:function(){this.mapDescription()}},{key:"dismissModal",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(){this.modal.close()}},{key:"mapDescription",value:function(){this.description=this.companyService.isSecondaryAuthority()?this.mapTranslate("SENT_FOR_PRIMARY_SIGN"):this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?this.mapTranslate("SENT_FOR_CHECK"):this.mapTranslate("SENT_FOR_SIGN")}},{key:"mapTranslate",value:function(t){return"CONTRACTS.SUCCESS_MODAL.".concat(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Qb(a.a),i.Qb(c.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["j-contract-success-modal"]],decls:12,vars:6,consts:[[1,"modal-body","j-modal-body","text-center","contract-modal__body"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],["src","/assets/img/history/modals/success.svg"],["translate","",1,"light","mb-3","mt-2"],[1,"p2","mb-0",3,"innerHTML"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"click"]],template:function(t,e){1&t&&(i.Wb(0,"div",0),i.Wb(1,"button",1),i.ic("click",(function(t){return e.dismissModal()})),i.Rb(2,"img",2),i.nc(3,"translate"),i.Vb(),i.Rb(4,"img",3),i.Wb(5,"h3",4),i.Tc(6," CONTRACTS.SUCCESS_MODAL.TITLE "),i.Vb(),i.Rb(7,"p",5),i.nc(8,"translate"),i.Vb(),i.Wb(9,"div",6),i.Wb(10,"button",7),i.ic("click",(function(t){return e.closeModal()})),i.Tc(11," SHARED.CLOSE "),i.Vb(),i.Vb()),2&t&&(i.Ab(2),i.vc("alt",i.oc(3,2,"SHARED.CLOSE")),i.Ab(5),i.uc("innerHTML",i.oc(8,4,e.description),i.Jc))},directives:[o.a],pipes:[o.d],styles:[".contract-modal__body[_ngcontent-%COMP%]{padding-top:56px;padding-bottom:0}"]}),t}()},"8xPB":function(t,e,n){"use strict";var i=function(t){return t.ON_SIGN="on-sign",t.APPROVED="approved",t.PENDING="pending",t.REJECTED="rejected",t}({});n.d(e,"a",(function(){return i}))},Rreu:function(t,e,n){"use strict";n.r(e);var i=n("gfTr"),a=n("mQSa"),c=n("PCNd"),o=n("tyNb"),r=n("mrSG"),s=n("TwVa"),l=n("quSY"),u=n("fXoL"),b=n("VnnJ"),d=n("YjsB"),p=n("ofXK"),m=n("S1F0"),g=n("oKsb"),f=n("fvpk"),h=n("e8Ap"),_=n("xJkR"),v=n("4wRv"),x=n("gzBp"),y=n("VO+5"),C=n("sYmb"),k=n("ZF+8"),w=n("Kx/q"),O=n("M6pS");function T(t,e){if(1&t&&(u.Wb(0,"li",15),u.Wb(1,"div",16),u.Tc(2),u.nc(3,"translate"),u.Vb(),u.Wb(4,"div",17),u.Tc(5),u.Vb(),u.Vb()),2&t){var n=e.$implicit;u.Ab(2),u.Vc(" ",u.oc(3,4,n.label)," "),u.Ab(2),u.Db(n.extraClass?n.extraClass:"text-dark"),u.Ab(1),u.Vc(" ",n.value," ")}}function S(t,e){if(1&t){var n=u.Xb();u.Wb(0,"button",18),u.ic("click",(function(t){return u.Ic(n),u.mc().onCreatePayment()})),u.Wb(1,"strong"),u.Tc(2),u.nc(3,"translate"),u.Vb(),u.Vb()}if(2&t){var i=u.mc();u.Ab(2),u.Uc(u.oc(3,1,i.mapTranslate("CREATE_PAYMENT")))}}function M(t,e){if(1&t){var n=u.Xb();u.Wb(0,"li",21),u.Wb(1,"a",22),u.ic("click",(function(t){u.Ic(n);var i=e.$implicit;return u.mc(2).onAttachmentDownload(t,i)})),u.Rb(2,"span",23),u.Wb(3,"span"),u.Tc(4),u.Vb(),u.Vb(),u.Wb(5,"div",24),u.Tc(6),u.nc(7,"date"),u.Vb(),u.Vb()}if(2&t){var i=e.$implicit;u.Ab(4),u.Uc(i.file.name),u.Ab(2),u.Uc(u.pc(7,2,i.created,"dd LLL yyyy"))}}function P(t,e){if(1&t&&(u.Wb(0,"div",3),u.Wb(1,"h6",7),u.Tc(2),u.nc(3,"translate"),u.Vb(),u.Wb(4,"ul",19),u.Rc(5,M,8,5,"li",20),u.Vb(),u.Vb()),2&t){var n=u.mc();u.Ab(2),u.Vc(" ",u.oc(3,2,n.mapTranslate("FILES"))," "),u.Ab(3),u.uc("ngForOf",n.contract.attachments)}}var A,R,E=((A=function(){function t(e,n,i,a,c,o){var r=this;_classCallCheck(this,t),this.notifierService=e,this.translateService=n,this.contractsService=i,this.featureFlagsService=a,this.filesService=c,this.router=o,this.isPaymentCreatable=!0,this.isContractErrored=!1,this.isDownloading=!1,this.subscription=new l.a,this.subscription.add(this.featureFlagsService.featureFlags$.subscribe((function(t){r.checkFeatureFlags()})))}return _createClass(t,[{key:"ngOnInit",value:function(){this.mapData()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onAttachmentDownload",value:function(t,e){t.preventDefault(),this.filesService.downloadFileById(e.file.id,e.file.name)}},{key:"onCreatePayment",value:function(){this.router.navigate(["/".concat(x.a.root,"/").concat(x.a.foreignCurrency)],{state:{resolvedPayment:{type:s.j.FOREIGN,isNewPayment:!0,details:{paymentRecipient:null,foreignPaymentDetails:{withinContract:!0,fxContract:this.contract,fxContractId:this.contract.id}}}}})}},{key:"onDownload",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDownloading){t.next=13;break}return this.isDownloading=!0,t.prev=2,t.next=5,this.contractsService.downloadContractCertificate(this.contract);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),this.notifierService.notify("error",this.translateService.instant("ERRORS.DOWNLOAD_ERROR"));case 10:return t.prev=10,this.isDownloading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[2,7,10,13]])})))}},{key:"mapTranslate",value:function(t){return"CONTRACTS.DETAILS.".concat(t)}},{key:"mapData",value:function(){var t,e,n,i,a,c;this.data=[];var o=this.contractsService.mapRemainderMessage(this.contract);o&&(this.isContractErrored=!0,this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("INFO"),value:this.translateService.instant(this.mapTranslate(o)),extraClass:"text-danger"}])),this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("TYPE"),value:this.contract.type.description},{label:this.mapTranslate("DATE_FROM"),value:this.contract.dateFrom?Object(p.K)(this.contract.dateFrom,"dd MMMM yyyy",this.translateService.currentLang):"-"},{label:this.mapTranslate("DATE_TO"),value:this.contract.dateTo?Object(p.K)(this.contract.dateTo,"dd MMMM yyyy",this.translateService.currentLang):"-"}]),this.contract.registrationNumberContract&&(this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("UNK"),value:this.contract.registrationNumberContract}])),this.contract.documentDate&&(this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("UNK_DATE"),value:Object(p.K)(this.contract.documentDate,"dd MMMM yyyy",this.translateService.currentLang)}])),this.data=[].concat(_toConsumableArray(this.data),[{label:this.mapTranslate("CURRENCY"),value:this.contract.amount.currency},{label:this.mapTranslate("COUNTRY"),value:"".concat((null===(e=null===(t=this.contract.contractor)||void 0===t?void 0:t.country)||void 0===e?void 0:e.code)||""," - ").concat((null===(i=null===(n=this.contract.contractor)||void 0===n?void 0:n.country)||void 0===i?void 0:i.name)||"")},{label:this.mapTranslate("CITY"),value:(null===(a=this.contract.contractor)||void 0===a?void 0:a.cityName)||"-"},{label:this.mapTranslate("BIC"),value:(null===(c=this.contract.contractor.bank)||void 0===c?void 0:c.code)||"-"}])}},{key:"checkFeatureFlags",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isPaymentCreatable=!this.featureFlagsService.isDisabled(v.a.FOREIGN_PAYMENT);case 1:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(t){return new(t||A)(u.Qb(y.c),u.Qb(C.e),u.Qb(d.b),u.Qb(v.b),u.Qb(k.b),u.Qb(o.c))},A.\u0275cmp=u.Kb({type:A,selectors:[["j-contracts-info"]],inputs:{contract:"contract"},decls:29,vars:20,consts:[[1,"contracts-info"],[1,"contracts-info__left"],[1,"contracts-info__amounts"],[1,"contracts-info__block"],[1,"contracts-info__heading","mb-1"],[3,"money"],[1,"p2","m-0","text-gray"],[1,"contracts-info__heading","mb-3"],[1,"contracts-info__list","j-desc-list"],["class","j-desc-row",4,"ngFor","ngForOf"],[1,"contracts-info__buttons"],[1,"btn","btn-outline-primary",3,"disabled","jLoading","jLoadingInverted","click"],["inlineSVG","/assets/icons/contracts/pdf.svg",1,"mr-2"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","contracts-info__block",4,"ngIf"],[1,"j-desc-row"],[1,"j-desc-child","text-muted"],[1,"j-desc-child"],[1,"btn","btn-primary",3,"click"],[1,"contracts-info__attachments"],["class","contracts-info__attachment",4,"ngFor","ngForOf"],[1,"contracts-info__attachment"],["href","#",1,"link-blue","contracts-info__filename",3,"click"],["inlineSVG","/assets/icons/contracts/file.svg",1,"contracts-info__icon"],[1,"contracts-info__date","text-muted"]],template:function(t,e){1&t&&(u.Wb(0,"section",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Wb(3,"article",3),u.Wb(4,"h6",4),u.Rb(5,"j-money",5),u.Vb(),u.Wb(6,"p",6),u.Tc(7),u.nc(8,"translate"),u.Vb(),u.Vb(),u.Wb(9,"article",3),u.Wb(10,"h6",4),u.Rb(11,"j-money",5),u.Vb(),u.Wb(12,"p",6),u.Tc(13),u.nc(14,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"div",3),u.Wb(16,"h6",7),u.Tc(17),u.nc(18,"translate"),u.Vb(),u.Wb(19,"ul",8),u.Rc(20,T,6,6,"li",9),u.Vb(),u.Wb(21,"div",10),u.Wb(22,"button",11),u.ic("click",(function(t){return e.onDownload()})),u.Rb(23,"span",12),u.Wb(24,"strong"),u.Tc(25),u.nc(26,"translate"),u.Vb(),u.Vb(),u.Rc(27,S,4,3,"button",13),u.Vb(),u.Vb(),u.Vb(),u.Rc(28,P,6,4,"div",14),u.Vb()),2&t&&(u.Ab(5),u.uc("money",e.contract.amount),u.Ab(2),u.Uc(u.oc(8,12,e.mapTranslate("AMOUNT"))),u.Ab(4),u.uc("money",e.contract.remainder),u.Ab(2),u.Uc(u.oc(14,14,e.mapTranslate("REMAINDER"))),u.Ab(4),u.Vc(" ",u.oc(18,16,e.mapTranslate("TITLE"))," "),u.Ab(3),u.uc("ngForOf",e.data),u.Ab(2),u.uc("disabled",e.isDownloading)("jLoading",e.isDownloading)("jLoadingInverted",!0),u.Ab(3),u.Uc(u.oc(26,18,e.mapTranslate("DOWNLOAD"))),u.Ab(2),u.uc("ngIf",e.isPaymentCreatable&&!e.isContractErrored),u.Ab(1),u.uc("ngIf",(null==e.contract.attachments?null:e.contract.attachments.length)>0))},directives:[w.a,p.t,O.a,h.a,p.u],pipes:[C.d,p.f],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),A),D=function(){return{height:"24px","margin-bottom":"3px",width:"50%","background-color":"#ECEEF1"}},V=function(){return{height:"32px","background-color":"#ECEEF1"}},I=((R=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"mapTranslate",value:function(t){return"CONTRACTS.DETAILS.".concat(t)}}]),t}()).\u0275fac=function(t){return new(t||R)},R.\u0275cmp=u.Kb({type:R,selectors:[["j-contracts-info-loading"]],decls:25,vars:20,consts:[[1,"contracts-info"],[1,"contracts-info__left"],[1,"contracts-info__amounts"],[1,"contracts-info__block"],[3,"theme"],[1,"p2","m-0","text-gray"],[1,"contracts-info__heading","mb-3"],[1,"contracts-info__list","j-desc-list"],["count","7",3,"theme"],[1,"contracts-info__attachments"],["count","3",3,"theme"]],template:function(t,e){1&t&&(u.Wb(0,"section",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Wb(3,"article",3),u.Rb(4,"ngx-skeleton-loader",4),u.Wb(5,"p",5),u.Tc(6),u.nc(7,"translate"),u.Vb(),u.Vb(),u.Wb(8,"article",3),u.Rb(9,"ngx-skeleton-loader",4),u.Wb(10,"p",5),u.Tc(11),u.nc(12,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"div",3),u.Wb(14,"h6",6),u.Tc(15),u.nc(16,"translate"),u.Vb(),u.Wb(17,"ul",7),u.Rb(18,"ngx-skeleton-loader",8),u.Vb(),u.Vb(),u.Vb(),u.Wb(19,"div",3),u.Wb(20,"h6",6),u.Tc(21),u.nc(22,"translate"),u.Vb(),u.Wb(23,"ul",9),u.Rb(24,"ngx-skeleton-loader",10),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Ab(4),u.uc("theme",u.yc(16,D)),u.Ab(2),u.Uc(u.oc(7,8,e.mapTranslate("AMOUNT"))),u.Ab(3),u.uc("theme",u.yc(17,D)),u.Ab(2),u.Uc(u.oc(12,10,e.mapTranslate("REMAINDER"))),u.Ab(4),u.Vc(" ",u.oc(16,12,e.mapTranslate("TITLE"))," "),u.Ab(3),u.uc("theme",u.yc(18,V)),u.Ab(3),u.Vc(" ",u.oc(22,14,e.mapTranslate("FILES"))," "),u.Ab(3),u.uc("theme",u.yc(19,V)))},directives:[_.a],pipes:[C.d],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),R);function j(t,e){if(1&t&&(u.Wb(0,"div",4),u.Wb(1,"div",5),u.Rb(2,"span",6),u.Wb(3,"span",7),u.Tc(4),u.Vb(),u.Vb(),u.Wb(5,"h1",8),u.Tc(6),u.Vb(),u.Vb()),2&t){var n=u.mc();u.Ab(2),u.Db(n.iconClassName),u.Ab(2),u.Vc(" ",n.companyName," "),u.Ab(2),u.Vc("\u2116 ",n.contract.contractNumber,"")}}var F=function(){return{height:"24px",width:"70%","background-color":"#ECEEF1"}},N=function(){return{height:"56px",width:"40%","margin-bottom":"8px","background-color":"#ECEEF1"}};function L(t,e){1&t&&(u.Ub(0),u.Rb(1,"ngx-skeleton-loader",9),u.Rb(2,"ngx-skeleton-loader",9),u.Tb()),2&t&&(u.Ab(1),u.uc("theme",u.yc(2,F)),u.Ab(1),u.uc("theme",u.yc(3,N)))}function W(t,e){if(1&t&&u.Rb(0,"j-contracts-info",10),2&t){var n=u.mc();u.uc("contract",n.contract)}}function G(t,e){1&t&&u.Rb(0,"j-contracts-info-loading")}var z,Q,U=((z=function(){function t(e,n,i,a){var c=this;_classCallCheck(this,t),this.companyService=e,this.contractsService=n,this.location=i,this.route=a,this.isLoading=!1,this.subscription=new l.a;var o=this.route.params.subscribe((function(t){c.contractId=t.id})),r=this.companyService.refresh$.subscribe((function(){c.companyName=c.companyService.currentCompany.name,c.loadContract()}));this.subscription.add(r),this.subscription.add(o)}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClose",value:function(){this.location.back()}},{key:"loadContract",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.prev=1,t.next=4,this.contractsService.getContractById(this.contractId);case 4:this.contract=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.onClose();case 10:return t.prev=10,this.isLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,7,10,13]])})))}},{key:"iconClassName",get:function(){switch(this.contract.status){case s.c.REGISTERED:case s.c.PROCESSING:return"text-warning";case s.c.REGED:return"text-success";case s.c.REJECTED:case s.c.CLOSED:return"text-danger"}}}]),t}()).\u0275fac=function(t){return new(t||z)(u.Qb(b.a),u.Qb(d.b),u.Qb(p.o),u.Qb(o.a))},z.\u0275cmp=u.Kb({type:z,selectors:[["j-contracts-details"]],decls:7,vars:4,consts:[["closePosition","outside","colsClassList","offset-xl-1 col-xl-10","headerClassList","bg-white",3,"closed"],["class","contract-details__header",4,"ngIf"],[4,"ngIf"],[3,"contract",4,"ngIf"],[1,"contract-details__header"],[1,"contracts__top"],["inlineSVG","/assets/icons/contracts/icon.svg",1,"contracts__icon"],[1,"text-muted"],[1,"mb-3"],[3,"theme"],[3,"contract"]],template:function(t,e){1&t&&(u.Wb(0,"f-page",0),u.ic("closed",(function(t){return e.onClose()})),u.Wb(1,"f-page-header"),u.Rc(2,j,7,4,"div",1),u.Rc(3,L,3,4,"ng-container",2),u.Vb(),u.Wb(4,"f-page-body"),u.Rc(5,W,1,1,"j-contracts-info",3),u.Rc(6,G,1,0,"j-contracts-info-loading",2),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("ngIf",e.contract&&!e.isLoading),u.Ab(1),u.uc("ngIf",e.isLoading),u.Ab(2),u.uc("ngIf",e.contract&&!e.isLoading),u.Ab(1),u.uc("ngIf",e.isLoading))},directives:[m.a,g.a,p.u,f.a,h.a,_.a,E,I],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),z),B=n("8xPB"),H=n("bsP8"),K=((Q=function(){function t(){_classCallCheck(this,t),this.label="CONTRACTS.ERRORED",this.retried=new u.n}return _createClass(t,[{key:"onRetry",value:function(t){t.preventDefault(),this.retried.emit()}}]),t}()).\u0275fac=function(t){return new(t||Q)},Q.\u0275cmp=u.Kb({type:Q,selectors:[["j-contracts-error"]],inputs:{label:"label"},outputs:{retried:"retried"},decls:8,vars:7,consts:[[1,"empty"],["src","/assets/img/contracts/empty.svg",1,"empty-img",3,"alt"],["translate","",1,"text-muted","empty-text","my-3"],["href","#",1,"link",3,"click"]],template:function(t,e){1&t&&(u.Wb(0,"section",0),u.Rb(1,"img",1),u.nc(2,"translate"),u.Wb(3,"div",2),u.Tc(4),u.Vb(),u.Wb(5,"a",3),u.ic("click",(function(t){return e.onRetry(t)})),u.Tc(6),u.nc(7,"translate"),u.Vb(),u.Vb()),2&t&&(u.Ab(1),u.uc("alt",u.oc(2,3,e.label)),u.Ab(3),u.Vc(" ",e.label," "),u.Ab(2),u.Vc(" ",u.oc(7,5,"CONTRACTS.RETRY")," "))},directives:[C.a],pipes:[C.d],styles:["[_nghost-%COMP%]{min-height:478px}.empty[_ngcontent-%COMP%], [_nghost-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.empty[_ngcontent-%COMP%]{padding:1.5rem 0;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.empty-text[_ngcontent-%COMP%]{line-height:24px}.empty-img[_ngcontent-%COMP%]{border-radius:50%;box-shadow:0 14px 16px rgba(0,0,0,.05);margin:1rem 0}"]}),Q),$=n("4cI0"),X=function(){return{width:"25%",height:"33px","background-color":"#ECEEF1"}};function J(t,e){1&t&&u.Rb(0,"ngx-skeleton-loader",2),2&t&&u.uc("theme",u.yc(1,X))}var Y,Z=function(){return{height:"52px","background-color":"#ECEEF1"}},q=((Y=function(){function t(){_classCallCheck(this,t),this.hasTitle=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Y)},Y.\u0275cmp=u.Kb({type:Y,selectors:[["j-contracts-loading"]],inputs:{hasTitle:"hasTitle"},decls:2,vars:3,consts:[[3,"theme",4,"ngIf"],["count","6",3,"theme"],[3,"theme"]],template:function(t,e){1&t&&(u.Rc(0,J,1,2,"ngx-skeleton-loader",0),u.Rb(1,"ngx-skeleton-loader",1)),2&t&&(u.uc("ngIf",e.hasTitle),u.Ab(1),u.uc("theme",u.yc(2,Z)))},directives:[p.u,_.a],styles:[""]}),Y),tt=["itemTemplate"],et=["headerTemplate"],nt=function(t){return{$implicit:t}};function it(t,e){if(1&t&&u.Sb(0,8),2&t){var n=e.$implicit,i=u.mc(3);u.uc("ngTemplateOutlet",i.itemTemplate)("ngTemplateOutletContext",u.zc(2,nt,n))}}function at(t,e){if(1&t&&(u.Ub(0),u.Sb(1,6),u.Rc(2,it,1,4,"ng-container",7),u.Tb()),2&t){var n=u.mc(2);u.Ab(1),u.uc("ngTemplateOutlet",n.headerTemplate),u.Ab(1),u.uc("ngForOf",n.contractsList)}}function ct(t,e){if(1&t){var n=u.Xb();u.Wb(0,"j-contracts-error",9),u.ic("retried",(function(t){return u.Ic(n),u.mc(2).loadContracts()})),u.Vb()}}function ot(t,e){1&t&&u.Rb(0,"j-empty-placeholder",10),2&t&&u.uc("minHeight",478)("label","CONTRACTS.LIST.EMPTY.APPROVED")}function rt(t,e){if(1&t&&(u.Wb(0,"div",2),u.Rc(1,at,3,2,"ng-container",3),u.Rc(2,ct,1,0,"j-contracts-error",4),u.Rc(3,ot,1,2,"j-empty-placeholder",5),u.Vb()),2&t){var n=u.mc();u.Ab(1),u.uc("ngIf",(null==n.contractsList?null:n.contractsList.length)>0),u.Ab(1),u.uc("ngIf",n.errorText),u.Ab(1),u.uc("ngIf",0==(null==n.contractsList?null:n.contractsList.length))}}function st(t,e){1&t&&(u.Wb(0,"div",11),u.Rb(1,"j-contracts-loading"),u.Vb())}var lt,ut=((lt=function(){function t(e,n,i){_classCallCheck(this,t),this.contractsService=e,this.companyService=n,this.navService=i,this.isLoading=!1,this.subscription=new l.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this,e=this.companyService.refresh$.subscribe((function(){t.loadContracts()}));this.subscription.add(e)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"loadContracts",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorText=null,this.isLoading=!0,t.prev=1,e=null,this.onSignForMe&&(e={onSignForMe:!0}),this.onSignForOthers&&(e={onSignForOthers:!0}),t.next=7,this.contractsService.getContracts(this.contractType,e);case 7:this.contractsList=t.sent,this.navService.retrieveContractBadges(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),this.errorText=t.t0.description||t.t0.code||t.t0||!0;case 14:return t.prev=14,this.isLoading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})))}}]),t}()).\u0275fac=function(t){return new(t||lt)(u.Qb(d.b),u.Qb(b.a),u.Qb(H.a))},lt.\u0275cmp=u.Kb({type:lt,selectors:[["j-contracts-list"]],contentQueries:function(t,e,n){var i;1&t&&(u.Ib(n,tt,!0),u.Ib(n,et,!0)),2&t&&(u.Ec(i=u.jc())&&(e.itemTemplate=i.first),u.Ec(i=u.jc())&&(e.headerTemplate=i.first))},inputs:{translatePrefix:"translatePrefix",contractType:"contractType",onSignForMe:"onSignForMe",onSignForOthers:"onSignForOthers"},decls:2,vars:2,consts:[["class","contracts__table contracts-list",4,"ngIf"],["class","contracts__table j-list__loading",4,"ngIf"],[1,"contracts__table","contracts-list"],[4,"ngIf"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"retried"],[3,"minHeight","label"],[1,"contracts__table","j-list__loading"]],template:function(t,e){1&t&&(u.Rc(0,rt,4,3,"div",0),u.Rc(1,st,2,0,"div",1)),2&t&&(u.uc("ngIf",!e.isLoading),u.Ab(1),u.uc("ngIf",e.isLoading))},directives:[p.u,p.B,p.t,K,$.a,q],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),lt),bt=n("1kSV"),dt=n("wV3k");function pt(t,e){if(1&t&&(u.Wb(0,"div",5),u.Tc(1),u.nc(2,"translate"),u.Vb()),2&t){var n=e.$implicit,i=u.mc(2);u.Ab(1),u.Uc(u.oc(2,1,i.mapTranslate(n)))}}function mt(t,e){if(1&t&&(u.Wb(0,"div",3),u.Rc(1,pt,3,3,"div",4),u.Vb()),2&t){var n=u.mc();u.Ab(1),u.uc("ngForOf",n.headings)}}function gt(t,e){if(1&t&&(u.Wb(0,"div",19),u.Wb(1,"span",20),u.Tc(2," \u2116 "),u.Vb(),u.Wb(3,"div",21),u.Tc(4),u.Vb(),u.Vb()),2&t){var n=u.mc().$implicit;u.uc("ngbTooltip","\u2116 "+n.contractNumber),u.Ab(4),u.Vc(" ",n.contractNumber," ")}}function ft(t,e){1&t&&(u.Wb(0,"div"),u.Tc(1," - "),u.Vb())}function ht(t,e){if(1&t&&(u.Wb(0,"div",22),u.Tc(1),u.nc(2,"translate"),u.Vb()),2&t){var n=u.mc(2);u.Ab(1),u.Vc(" ",u.oc(2,1,n.mapTranslate("HAS_UNK"))," ")}}function _t(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"div",14),u.nc(2,"money"),u.Rb(3,"j-money",15),u.Vb(),u.Tb()),2&t){var n=u.mc().$implicit;u.Ab(1),u.uc("ngbTooltip",u.oc(2,2,n.amount)),u.Ab(2),u.uc("money",n.amount)}}function vt(t,e){if(1&t&&(u.Wb(0,"div",23),u.Tc(1),u.nc(2,"translate"),u.Vb()),2&t){var n=u.mc().$implicit,i=u.mc();u.Ab(1),u.Vc(" ",u.oc(2,1,i.mapRemainderMessage(n))," ")}}function xt(t,e){if(1&t){var n=u.Xb();u.Wb(0,"div",6),u.ic("click",(function(t){u.Ic(n);var i=e.$implicit;return u.mc().onContractClick(i)})),u.Wb(1,"div",7),u.Wb(2,"div",8),u.Tc(3),u.nc(4,"translate"),u.Vb(),u.Wb(5,"div",9),u.Rb(6,"span",10),u.Rc(7,gt,5,2,"div",11),u.Rc(8,ft,2,0,"div",12),u.Vb(),u.Rc(9,ht,3,3,"div",13),u.Vb(),u.Wb(10,"div",7),u.Wb(11,"div",8),u.Tc(12),u.nc(13,"translate"),u.Vb(),u.Wb(14,"div",14),u.Tc(15),u.Vb(),u.Vb(),u.Wb(16,"div",7),u.Wb(17,"div",8),u.Tc(18),u.nc(19,"translate"),u.Vb(),u.Rc(20,_t,4,4,"ng-container",12),u.Vb(),u.Wb(21,"div",7),u.Wb(22,"div",8),u.Tc(23),u.nc(24,"translate"),u.Vb(),u.Wb(25,"div",14),u.nc(26,"money"),u.Rb(27,"j-money",15),u.Vb(),u.Rc(28,vt,3,3,"div",16),u.Vb(),u.Wb(29,"div",7),u.Wb(30,"div",17),u.Wb(31,"button",18),u.ic("click",(function(t){u.Ic(n);var i=e.$implicit;return u.mc().onDownload(t,i)})),u.nc(32,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var i=e.$implicit,a=u.mc();u.Ab(3),u.Vc(" ",u.oc(4,17,a.mapTranslate(a.headings[0]))," "),u.Ab(4),u.uc("ngIf",i.contractNumber),u.Ab(1),u.uc("ngIf",!i.contractNumber),u.Ab(1),u.uc("ngIf",a.hasUnk(i)),u.Ab(3),u.Vc(" ",u.oc(13,19,a.mapTranslate(a.headings[1]))," "),u.Ab(2),u.uc("ngbTooltip",null==i.contractor?null:i.contractor.name),u.Ab(1),u.Vc(" ",(null==i.contractor?null:i.contractor.name)||"-"," "),u.Ab(3),u.Vc(" ",u.oc(19,21,a.mapTranslate(a.headings[2]))," "),u.Ab(2),u.uc("ngIf",i.amount),u.Ab(3),u.Vc(" ",u.oc(24,23,a.mapTranslate(a.headings[3]))," "),u.Ab(2),u.uc("ngbTooltip",u.oc(26,25,i.remainder)),u.Ab(2),u.uc("money",i.remainder),u.Ab(1),u.uc("ngIf",a.mapRemainderMessage(i)),u.Ab(3),u.Hb("j-list__action--disabled",a.loadingIds.includes(i.id)),u.uc("ngbTooltip",u.oc(32,27,a.mapTranslate(a.loadingIds.includes(i.id)?"DOWNLOADING":"DOWNLOAD")))("inlineSVG","/assets/icons/transaction/pdf.svg")}}var yt,Ct=["01","02"],kt=((yt=function(){function t(e,n,i,a,c){_classCallCheck(this,t),this.contractsService=e,this.route=n,this.router=i,this.notifierService=a,this.translateService=c,this.headings=["CONTRACT_NUMBER","CONTRACT_NAME","CONTRACT_AMOUNT","CONTRACT_REMAINDER"],this.translatePrefix="CONTRACTS.APPROVED",this.contractType=B.a.APPROVED,this.loadingIds=[]}return _createClass(t,[{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"hasUnk",value:function(t){return t.status==s.c.REGED&&Ct.includes(t.type.colvirCode)}},{key:"mapRemainderMessage",value:function(t){var e=this.contractsService.mapRemainderMessage(t);return e?this.mapTranslate(e):null}},{key:"onContractClick",value:function(t){this.router.navigate([t.id],{relativeTo:this.route.parent.parent})}},{key:"onDownload",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.stopPropagation(),this.loadingIds.includes(e.id)){n.next=14;break}return this.loadingIds.push(e.id),n.prev=2,n.next=5,this.contractsService.downloadContractCertificate(e);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),this.notifierService.notify("error",this.translateService.instant("ERRORS.DOWNLOAD_ERROR"));case 10:return n.prev=10,i=this.loadingIds.indexOf(e.id),this.loadingIds.splice(i,1),n.finish(10);case 14:case"end":return n.stop()}}),n,this,[[2,7,10,14]])})))}}]),t}()).\u0275fac=function(t){return new(t||yt)(u.Qb(d.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.c),u.Qb(C.e))},yt.\u0275cmp=u.Kb({type:yt,selectors:[["j-contracts-approved"]],decls:5,vars:2,consts:[[3,"translatePrefix","contractType"],["headerTemplate",""],["itemTemplate",""],[1,"contracts__row","contracts__row--approved","contracts__header"],["class","text-muted p4",4,"ngFor","ngForOf"],[1,"text-muted","p4"],[1,"contracts__row","contracts__row--approved","contracts__item","contracts__item--hoverable","p3",3,"click"],[1,"contracts__cell"],[1,"text-muted","p4","contracts__label"],[1,"contracts__top"],["inlineSVG","/assets/icons/contracts/icon.svg",1,"text-success","contracts__icon"],["tooltipClass","tooltip-light","placement","top","class","contracts__number text-truncate",3,"ngbTooltip",4,"ngIf"],[4,"ngIf"],["class","text-muted",4,"ngIf"],["tooltipClass","tooltip-light","placement","top",1,"text-truncate",3,"ngbTooltip"],[3,"money"],["class","text-danger",4,"ngIf"],[1,"j-list__actions"],["tooltipClass","tooltip-light",1,"j-list__action",3,"ngbTooltip","inlineSVG","click"],["tooltipClass","tooltip-light","placement","top",1,"contracts__number","text-truncate",3,"ngbTooltip"],[1,"text-muted","mr-1"],[1,"text-truncate"],[1,"text-muted"],[1,"text-danger"]],template:function(t,e){1&t&&(u.Wb(0,"j-contracts-list",0),u.Rc(1,mt,2,1,"ng-template",null,1,u.Sc),u.Rc(3,xt,33,29,"ng-template",null,2,u.Sc),u.Vb()),2&t&&u.uc("translatePrefix",e.translatePrefix)("contractType",e.contractType)},directives:[ut,p.t,h.a,p.u,bt.E,w.a],pipes:[C.d,dt.a],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}.contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}.contracts__row--approved[_ngcontent-%COMP%]{grid-template-columns:minmax(90px,140px) minmax(170px,2fr) minmax(160px,1fr) minmax(160px,1fr) 56px}"]}),yt),wt=n("paXB"),Ot=n("7/bn"),Tt=n("oMXN"),St=n("EiG8");function Mt(t,e){if(1&t&&(u.Wb(0,"span",8),u.Wb(1,"span",9),u.Tc(2),u.nc(3,"translate"),u.Vb(),u.Wb(4,"span",10),u.Tc(5),u.nc(6,"translate"),u.Vb(),u.Vb()),2&t){var n=u.mc().$implicit;u.Ab(2),u.Vc(" ",u.oc(3,2,n.label)," "),u.Ab(3),u.Vc(" ",u.oc(6,4,"SHARED.SOON")," ")}}function Pt(t,e){if(1&t&&(u.Wb(0,"a",11),u.Tc(1),u.nc(2,"translate"),u.Vb()),2&t){var n=u.mc().$implicit;u.uc("routerLink",n.url),u.Ab(1),u.Uc(u.oc(2,2,n.label))}}function At(t,e){if(1&t&&(u.Ub(0),u.Rc(1,Mt,7,6,"span",6),u.Rc(2,Pt,3,4,"a",7),u.Tb()),2&t){var n=e.$implicit;u.Ab(1),u.uc("ngIf",n.soon),u.Ab(1),u.uc("ngIf",!n.soon)}}var Rt,Et,Dt,Vt=((Rt=function(){function t(e,n){_classCallCheck(this,t),this.contractsModalsService=e,this.featureFlagsService=n,this.isAddingDisabled=!1,this.contractTabs=[{label:"CONTRACTS.TABS.OUTCOMING",url:"/contracts/outcoming"},{label:"CONTRACTS.TABS.INCOMING",url:"/contracts/incoming",soon:!0}],this.subscription=new l.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.checkFeatureFlag(),this.subscription.add(this.featureFlagsService.featureFlags$.subscribe((function(e){t.checkFeatureFlag()})))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"showAddContractModal",value:function(){this.contractsModalsService.showAddContractModal(!0)}},{key:"checkFeatureFlag",value:function(){this.isAddingDisabled=this.featureFlagsService.isDisabled(v.a.FX_CONTRACTS)}}]),t}()).\u0275fac=function(t){return new(t||Rt)(u.Qb(d.a),u.Qb(v.b))},Rt.\u0275cmp=u.Kb({type:Rt,selectors:[["j-contracts-nav"]],decls:8,vars:4,consts:[[1,"j-tabs"],[1,"j-tabs__list"],[4,"ngFor","ngForOf"],[1,"ml-auto","btn","btn-link","j-tabs__add",3,"click"],["inlineSVG","/assets/icons/contracts/add.svg",1,"j-tabs__add-icon"],[1,"d-none","d-md-block"],["class","j-tabs__item j-tabs__item--soon",4,"ngIf"],["routerLinkActive","active","class","j-tabs__item",3,"routerLink",4,"ngIf"],[1,"j-tabs__item","j-tabs__item--soon"],[1,"j-tabs__label"],[1,"j-tabs__badge","badge","badge-warning"],["routerLinkActive","active",1,"j-tabs__item",3,"routerLink"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"nav",1),u.Rc(2,At,3,2,"ng-container",2),u.Wb(3,"button",3),u.ic("click",(function(t){return e.showAddContractModal()})),u.Rb(4,"span",4),u.Wb(5,"span",5),u.Tc(6),u.nc(7,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Ab(2),u.uc("ngForOf",e.contractTabs),u.Ab(4),u.Uc(u.oc(7,2,"CONTRACTS.ADD_NEW")))},directives:[p.t,h.a,p.u,o.f,o.e],pipes:[C.d],styles:[""]}),Rt),It=n("I+WJ"),jt=n("zdqJ"),Ft=((Et=function(){function t(e,n){var i=this;_classCallCheck(this,t),this.router=e,this.navService=n,this.statuses=[{count:0,isSelected:!0,label:"CONTRACTS.TYPES.ON_SIGN",value:B.a.ON_SIGN},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.APPROVED",value:B.a.APPROVED},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.PENDING",value:B.a.PENDING},{count:0,isSelected:!1,label:"CONTRACTS.TYPES.REJECTED",value:B.a.REJECTED}],this.subscription=new l.a;var a=e.events.subscribe((function(t){t instanceof o.b&&(i.statuses=i.statuses.map((function(e){return e.isSelected=t.urlAfterRedirects==="/contracts/outcoming/".concat(e.value),e})))})),c=this.navService.getContractBadges().subscribe((function(t){var e=t.onSignForMe,n=t.onSignForOthers,a=e>0;Object.assign(i.statuses[0],{count:a?e:n,classList:a?"badge-primary":"badge-light"})}));this.subscription.add(a),this.subscription.add(c)}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onStatusSelect",value:function(t){this.router.navigate(["/contracts/outcoming",t])}}]),t}()).\u0275fac=function(t){return new(t||Et)(u.Qb(o.c),u.Qb(H.a))},Et.\u0275cmp=u.Kb({type:Et,selectors:[["j-contracts-outcoming"]],decls:16,vars:1,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"],[1,"j-page"],["translate","",1,"d-none","d-lg-block","j-page__title"],[1,"j-page__body"],[1,"j-list"],[1,"j-list__nav"],[1,"j-list__filter"],["jTour","CONTRACTS.STATUSES","jTourPosition","bottom",3,"statuses","selected"]],template:function(t,e){1&t&&(u.Wb(0,"j-layout-home"),u.Wb(1,"j-aside"),u.Rb(2,"j-nav-main"),u.Vb(),u.Wb(3,"j-main"),u.Wb(4,"section",0),u.Wb(5,"section",1),u.Wb(6,"section",2),u.Wb(7,"h2",3),u.Tc(8,"CONTRACTS.TITLE"),u.Vb(),u.Wb(9,"section",4),u.Wb(10,"section",5),u.Wb(11,"div",6),u.Rb(12,"j-contracts-nav"),u.Vb(),u.Wb(13,"div",7),u.Wb(14,"j-statuses",8),u.ic("selected",(function(t){return e.onStatusSelect(t)})),u.Vb(),u.Vb(),u.Rb(15,"router-outlet"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Ab(14),u.uc("statuses",e.statuses))},directives:[wt.a,Ot.a,Tt.a,St.a,C.a,Vt,It.a,jt.a,o.h],styles:[""]}),Et),Nt=n("hJI6"),Lt=((Dt=function(){function t(){_classCallCheck(this,t),this.translatePrefix="CONTRACTS.DATE"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"tooltip",get:function(){if(this.contract)switch(this.contract.status){case s.c.ON_SIGN:case s.c.REGED:case s.c.REGISTERED:case s.c.PROCESSING:return this.mapTranslate("SENT");case s.c.REJECTED:return this.mapTranslate("REJECTED")}}}]),t}()).\u0275fac=function(t){return new(t||Dt)},Dt.\u0275cmp=u.Kb({type:Dt,selectors:[["j-contracts-date"]],inputs:{contract:"contract"},decls:8,vars:11,consts:[["tooltipClass","tooltip-light",1,"contract__date",3,"ngbTooltip"],[1,"text-dark"],[1,"ml-1","text-muted"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.nc(1,"translate"),u.Wb(2,"span",1),u.Tc(3),u.nc(4,"date"),u.Vb(),u.Wb(5,"span",2),u.Tc(6),u.nc(7,"date"),u.Vb(),u.Vb()),2&t&&(u.uc("ngbTooltip",u.oc(1,3,e.tooltip)),u.Ab(3),u.Uc(u.pc(4,5,e.contract.created,"d MMMM yyyy,")),u.Ab(3),u.Uc(u.pc(7,8,e.contract.created,"HH:mm")))},directives:[bt.E],pipes:[C.d,p.f],styles:[""]}),Dt);function Wt(t,e){if(1&t&&u.Rb(0,"span",1),2&t){var n=u.mc();u.Db(n.statusClassname)}}var Gt,zt=((Gt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){this.mapContractType()}},{key:"mapContractType",value:function(){switch(this.contract.status){case s.c.REGED:this.statusClassname="text-success";break;case s.c.PROCESSING:case s.c.REGISTERED:this.statusClassname="text-warning";break;case s.c.REJECTED:this.statusClassname="text-danger"}}}]),t}()).\u0275fac=function(t){return new(t||Gt)},Gt.\u0275cmp=u.Kb({type:Gt,selectors:[["j-contracts-status"]],inputs:{contract:"contract"},decls:1,vars:1,consts:[["class","contracts__icon mr-2","inlineSVG","/assets/icons/contracts/icon.svg",3,"class",4,"ngIf"],["inlineSVG","/assets/icons/contracts/icon.svg",1,"contracts__icon","mr-2"]],template:function(t,e){1&t&&u.Rc(0,Wt,1,2,"span",0),2&t&&u.uc("ngIf",e.statusClassname)},directives:[p.u,h.a],styles:[""]}),Gt);function Qt(t,e){if(1&t&&(u.Wb(0,"button",15),u.Tc(1),u.nc(2,"async"),u.Vb()),2&t){var n=u.mc().$implicit,i=u.mc();u.Ab(1),u.Vc(" ",u.oc(2,1,i.mapAttachmentsTitle(n))," ")}}function Ut(t,e){if(1&t&&(u.Wb(0,"button",16),u.Tc(1),u.nc(2,"async"),u.Vb()),2&t){var n=u.mc().$implicit,i=u.mc();u.Ab(1),u.Vc(" ",u.oc(2,1,i.mapAttachmentsTitle(n))," ")}}function Bt(t,e){if(1&t&&(u.Wb(0,"div",17),u.Tc(1),u.Vb()),2&t){var n=u.mc().$implicit;u.Ab(1),u.Vc(" ",n.statusMessage," ")}}function Ht(t,e){if(1&t&&(u.Wb(0,"div",8),u.Rb(1,"j-contracts-status",4),u.Wb(2,"article",9),u.Wb(3,"div",10),u.Wb(4,"span",11),u.Tc(5),u.nc(6,"translate"),u.Vb(),u.Rc(7,Qt,3,3,"button",12),u.Rc(8,Ut,3,3,"button",13),u.Vb(),u.Rc(9,Bt,2,1,"div",14),u.Vb(),u.Vb()),2&t){var n=e.$implicit,i=u.mc();u.Ab(1),u.uc("contract",n),u.Ab(4),u.Vc(" ",u.oc(6,5,i.mapTranslate("TITLE"))," "),u.Ab(2),u.uc("ngIf",n.hasTour),u.Ab(1),u.uc("ngIf",!n.hasTour),u.Ab(1),u.uc("ngIf",n.statusMessage)}}var Kt=function(t){return{$implicit:t}};function $t(t,e){if(1&t){var n=u.Xb();u.Wb(0,"ul",18),u.ic("click",(function(t){return u.Ic(n),t.stopPropagation()})),u.Sb(1,3),u.Vb()}if(2&t){var i=e.$implicit,a=u.mc(),c=u.Fc(12);u.Qc("margin-top",i.isCollapsed?"1rem":0)("margin-bottom",i.isCollapsed&&a.hasMoreAttachments?"-1rem":0)("opacity",i.isCollapsed?1:0)("max-height",a.attachmentsMaxHeight),u.Hb("contract-attachments--one-action",!a.isSignable&&a.isDeletable||a.isSignable&&!a.isDeletable)("contract-attachments--two-actions",a.isSignable&&a.isDeletable)("contract-attachments--selectable",a.isSelectable),u.Ab(1),u.uc("ngTemplateOutlet",c)("ngTemplateOutletContext",u.zc(16,Kt,i))}}function Xt(t,e){if(1&t){var n=u.Xb();u.Wb(0,"li",21),u.Wb(1,"div",22),u.Rb(2,"span",23),u.Wb(3,"div",24),u.Tc(4),u.Vb(),u.Wb(5,"button",25),u.ic("click",(function(t){u.Ic(n);var i=e.$implicit;return u.mc(2).onAttachmentDownload(t,i)})),u.Vb(),u.Vb(),u.Vb()}if(2&t){var i=e.$implicit;u.uc("jLoading",i.isLoading),u.Ab(4),u.Uc((null==i.file?null:i.file.name)||"-")}}function Jt(t,e){if(1&t){var n=u.Xb();u.Wb(0,"li",26),u.ic("click",(function(t){return u.Ic(n),u.mc(2).showMoreAttachments()})),u.Tc(1),u.nc(2,"async"),u.Vb()}if(2&t){var i=u.mc(2);u.Ab(1),u.Vc(" ",u.oc(2,1,i.mapMoreTitle())," ")}}function Yt(t,e){if(1&t&&(u.Rc(0,Xt,6,2,"li",19),u.Rc(1,Jt,3,3,"li",20)),2&t){var n=u.mc();u.uc("ngForOf",n.attachments),u.Ab(1),u.uc("ngIf",n.hasMoreAttachments)}}var Zt,qt=((Zt=function(){function t(e,n){_classCallCheck(this,t),this.translateService=e,this.filesService=n,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.translatePrefix="CONTRACTS.ITEM",this.maxAllowedAttachments=10}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onAttachmentDownload",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.stopPropagation(),e.isLoading){n.next=12;break}return e.isLoading=!0,n.prev=2,n.next=5,this.filesService.downloadFileById(e.file.id,e.file.name);case 5:n.next=9;break;case 7:n.prev=7,n.t0=n.catch(2);case 9:return n.prev=9,e.isLoading=!1,n.finish(9);case 12:case"end":return n.stop()}}),n,this,[[2,7,9,12]])})))}},{key:"showMoreAttachments",value:function(){this.maxAllowedAttachments+=10}},{key:"mapAttachmentsTitle",value:function(t){var e;return this.mapAttachmentsKey("ATTACHMENTS_TITLE",null===(e=t.attachments)||void 0===e?void 0:e.length)}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"mapMoreTitle",value:function(){return this.mapAttachmentsKey("MORE",Math.min(this.contract.attachments.length-this.maxAllowedAttachments,10))}},{key:"mapAttachmentsKey",value:function(t,e){var n={count:e},i="".concat(t,".").concat(this.mapPluralKey(e));return this.translateService.stream(this.mapTranslate(i),n)}},{key:"mapPluralKey",value:function(t){switch(t%20){case 1:return"ONE";case 2:case 3:case 4:return"FEW";default:return"OTHER"}}},{key:"attachments",get:function(){return this.contract.attachments.slice(0,this.maxAllowedAttachments)}},{key:"hasMoreAttachments",get:function(){return this.maxAllowedAttachments<this.contract.attachments.length}},{key:"attachmentsMaxHeight",get:function(){if(!this.contract.isCollapsed)return 0;var t=56*this.attachments.length;return this.hasMoreAttachments&&(t+=42),"".concat(t,"px")}}]),t}()).\u0275fac=function(t){return new(t||Zt)(u.Qb(C.e),u.Qb(k.b))},Zt.\u0275cmp=u.Kb({type:Zt,selectors:[["j-contracts-item"]],inputs:{contract:"contract",isDeletable:"isDeletable",isSelectable:"isSelectable",isSignable:"isSignable"},decls:13,vars:9,consts:[[1,"contracts-item-wrap"],[1,"p3","contracts-item"],[1,"contracts__cell"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"contract"],["mainTemplate",""],["attachmentsTemplate",""],["attachmentsCollapsedTemplate",""],[1,"contracts-item__main"],[1,"contracts-item__content"],[1,"contracts-item__title"],[1,"text-dark"],["jTour","CONTRACTS.FILES","jTourPosition","bottom","class","contracts-item__attachments-title",4,"ngIf"],["class","contracts-item__attachments-title",4,"ngIf"],["class","text-muted contracts-item__message",4,"ngIf"],["jTour","CONTRACTS.FILES","jTourPosition","bottom",1,"contracts-item__attachments-title"],[1,"contracts-item__attachments-title"],[1,"text-muted","contracts-item__message"],[1,"contract-attachments",3,"click"],["class","contract-attachment",3,"jLoading",4,"ngFor","ngForOf"],["class","contract-attachment contract-attachment--more p3",3,"click",4,"ngIf"],[1,"contract-attachment",3,"jLoading"],[1,"contract-attachment__content"],["inlineSVG","/assets/icons/contracts/attachment-prefix.svg"],[1,"p3","text-muted","text-truncate"],["inlineSVG","/assets/icons/contracts/attachment-download.svg",1,"contract-attachment__download",3,"click"],[1,"contract-attachment","contract-attachment--more","p3",3,"click"]],template:function(t,e){if(1&t&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Sb(3,3),u.Vb(),u.Wb(4,"div",2),u.Rb(5,"j-contracts-date",4),u.Vb(),u.Vb(),u.Sb(6,3),u.Vb(),u.Rc(7,Ht,10,7,"ng-template",null,5,u.Sc),u.Rc(9,$t,2,18,"ng-template",null,6,u.Sc),u.Rc(11,Yt,2,2,"ng-template",null,7,u.Sc)),2&t){var n=u.Fc(8),i=u.Fc(10);u.Ab(3),u.uc("ngTemplateOutlet",n)("ngTemplateOutletContext",u.zc(5,Kt,e.contract)),u.Ab(2),u.uc("contract",e.contract),u.Ab(1),u.uc("ngTemplateOutlet",i)("ngTemplateOutletContext",u.zc(7,Kt,e.contract))}},directives:[p.B,Lt,zt,p.u,jt.a,p.t,O.a,h.a],pipes:[C.d,p.b],styles:['.contract[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.contract[_ngcontent-%COMP%], .contracts-item[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.contracts-item[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:minmax(0,1fr) 150px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.contracts-item-wrap[_ngcontent-%COMP%]{position:relative}.contracts-item__attachments-title[_ngcontent-%COMP%]{font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;color:#666c72;position:relative;margin-left:4px;padding:0}.contracts-item__attachments-title[_ngcontent-%COMP%], .contracts-item__attachments-title[_ngcontent-%COMP%]:after{display:inline-block;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts-item__attachments-title[_ngcontent-%COMP%]:after{content:"";bottom:2px;left:8px;right:8px;position:absolute;border-bottom:1px dashed #666c72}.contracts-item__attachments-title[_ngcontent-%COMP%]:hover{color:#ef5630}.contracts-item__attachments-title[_ngcontent-%COMP%]:hover:after{border-color:#ef5630}.contract__date[_ngcontent-%COMP%], .contracts-item__main[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.contract__date[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center}.contract-attachments[_ngcontent-%COMP%]{padding:0;overflow:hidden;max-height:0;margin:0 -16px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachments--selectable[_ngcontent-%COMP%]{margin-left:-56px}.contract-attachments--one-action[_ngcontent-%COMP%]{margin-right:-66px}.contract-attachments--two-actions[_ngcontent-%COMP%]{margin-right:-116px}.contract-attachment[_ngcontent-%COMP%]{position:relative;padding:0 1rem}.contract-attachment.is-loading[_ngcontent-%COMP%]{cursor:not-allowed}.contract-attachment.is-loading[_ngcontent-%COMP%]   .contract-attachment__content[_ngcontent-%COMP%]{opacity:.5}.contract-attachment.is-loading[_ngcontent-%COMP%]   .contract-attachment__download[_ngcontent-%COMP%]:hover{color:#b7bec5}.contract-attachment--more[_ngcontent-%COMP%]{background:#f6f7f8;height:42px;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;border-radius:0;-webkit-box-align:center;align-items:center;color:#1586bb;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachment--more[_ngcontent-%COMP%]:hover{color:#ef5630}.contract-attachment__content[_ngcontent-%COMP%]{height:56px;display:grid;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;-webkit-box-align:center;align-items:center;grid-template-columns:24px 1fr 40px;position:relative;z-index:1}.contract-attachment__download[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:0;color:#b7bec5;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contract-attachment__download[_ngcontent-%COMP%]:hover{color:#ef5630}']}),Zt);function te(t,e){if(1&t&&u.Rb(0,"j-contracts-item",2),2&t){var n=e.$implicit,i=u.mc();u.uc("contract",n)("isDeletable",i.isDeletable)("isSelectable",i.isSelectable)("isSignable",i.isSignable)}}var ee,ne=((ee=function(){function t(e,n,i){_classCallCheck(this,t),this.navService=e,this.translateService=n,this.locale=i,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.scrolled=new u.n,this.signed=new u.n,this.translatePrefix="CONTRACTS.LIST",this.urlPath="fx-contracts",this.collapsedIds=[],this.modalPartialTitleFn=this.mapModalPartialTitle.bind(this)}return _createClass(t,[{key:"mapModalPartialTitle",value:function(t){var e=this.translateService.instant(this.mapTranslate("ITEM_TITLE"),{date:Object(p.K)(t.created,"d MMMM yyyy",this.locale)});return e?"".concat(e,":"):""}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"onClick",value:function(t){t.isCollapsed=!t.isCollapsed}},{key:"onScroll",value:function(){this.scrolled.emit()}},{key:"onClear",value:function(){this.navService.retrieveContractBadges()}},{key:"onSign",value:function(){this.signed.emit()}}]),t}()).\u0275fac=function(t){return new(t||ee)(u.Qb(H.a),u.Qb(C.e),u.Qb(u.u))},ee.\u0275cmp=u.Kb({type:ee,selectors:[["j-contracts-group"]],inputs:{title:"title",list:"list",contractType:"contractType",isDeletable:"isDeletable",isSelectable:"isSelectable",isSignable:"isSignable"},outputs:{scrolled:"scrolled",signed:"signed"},decls:3,vars:9,consts:[[3,"list","title","urlPath","translatePrefix","isHoverable","isDeletable","isSelectable","isSignable","partialTitleFn","clicked","scrolled","cleared","signed"],["defaultTemplate",""],[3,"contract","isDeletable","isSelectable","isSignable"]],template:function(t,e){1&t&&(u.Wb(0,"j-list",0),u.ic("clicked",(function(t){return e.onClick(t)}))("scrolled",(function(t){return e.onScroll()}))("cleared",(function(t){return e.onClear()}))("signed",(function(t){return e.onSign()})),u.Rc(1,te,1,4,"ng-template",null,1,u.Sc),u.Vb()),2&t&&u.uc("list",e.list)("title",e.title)("urlPath",e.urlPath)("translatePrefix",e.translatePrefix)("isHoverable",!0)("isDeletable",e.isDeletable)("isSelectable",e.isSelectable)("isSignable",e.isSignable)("partialTitleFn",e.modalPartialTitleFn)},directives:[Nt.a,qt],styles:[""]}),ee);function ie(t,e){if(1&t){var n=u.Xb();u.Wb(0,"j-contracts-error",7),u.ic("retried",(function(t){return u.Ic(n),u.mc(2).onRetry()})),u.Vb()}}function ae(t,e){if(1&t&&u.Rb(0,"j-empty-placeholder",8),2&t){var n=u.mc(2);u.uc("minHeight",478)("label",n.mapTranslate("EMPTY.ON_SIGN"))}}function ce(t,e){if(1&t){var n=u.Xb();u.Ub(0),u.Wb(1,"j-contracts-group",3),u.ic("signed",(function(t){return u.Ic(n),u.mc().onSign()})),u.Vb(),u.Rb(2,"j-contracts-group",4),u.Rc(3,ie,1,0,"j-contracts-error",5),u.Rc(4,ae,1,2,"j-empty-placeholder",6),u.Tb()}if(2&t){var i=u.mc();u.Ab(1),u.uc("list",i.onSignForMeList)("isSignable",!0)("isSelectable",!0)("isDeletable",!1),u.Ab(1),u.uc("list",i.onSignForOthersList)("title",i.mapTranslate("OTHERS_FOR_SIGN")),u.Ab(1),u.uc("ngIf",i.errorText),u.Ab(1),u.uc("ngIf",0===i.onSignForMeList.length&&0===i.onSignForOthersList.length&&!i.errorText)}}function oe(t,e){1&t&&(u.Wb(0,"section",9),u.Rb(1,"j-contracts-loading"),u.Rb(2,"j-contracts-loading",10),u.Vb()),2&t&&(u.Ab(2),u.uc("hasTitle",!0))}var re,se=((re=function(){function t(e,n,i,a,c){var o=this;_classCallCheck(this,t),this.contractsService=e,this.navService=n,this.companyService=i,this.router=a,this.featureFlagsService=c,this.translatePrefix="CONTRACTS.LIST",this.contractType=B.a.ON_SIGN,this.isLoading=!0,this.onSignForMeList=[],this.onSignForOthersList=[],this.errorText=null,this.subscription=new l.a,this.subscription.add(this.companyService.refresh$.subscribe((function(t){var e=_slicedToArray(t,3);e[0],e[1],e[2]&&o.retrieveContracts()}))),this.subscription.add(this.contractsService.getContractsSubmitted().subscribe((function(){o.retrieveContracts()})))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSign",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.retrieveContracts();case 2:0==this.onSignForMeList.length&&this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()&&this.router.navigateByUrl("contracts/outcoming/".concat(B.a.PENDING));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onRetry",value:function(){this.navService.getContractBadges(),this.retrieveContracts()}},{key:"retrieveContracts",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorText=null,t.prev=1,t.next=4,Promise.all([this.retrieveOnSignForMe(),this.retrieveOnSignForOthers()]);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),this.errorText=t.t0.description||t.t0;case 9:return t.prev=9,this.isLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[1,6,9,12]])})))}},{key:"retrieveOnSignForMe",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractsService.getContracts(B.a.ON_SIGN,{onSignForMe:!0});case 2:this.onSignForMeList=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"retrieveOnSignForOthers",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractsService.getContracts(B.a.ON_SIGN,{onSignForOthers:!0});case 2:this.onSignForOthersList=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"startContractsTour",value:function(){var t=[];this.featureFlagsService.isDisabled(v.a.FX_CONTRACTS)||t.push("CONTRACTS.NEW"),t.push("CONTRACTS.STATUSES"),this.onSignForMeList.length>0?(this.onSignForMeList[0].hasTour=!0,t.push("CONTRACTS.FILES")):this.onSignForOthersList.length>0&&(this.onSignForOthersList[0].hasTour=!0,t.push("CONTRACTS.FILES"))}}]),t}()).\u0275fac=function(t){return new(t||re)(u.Qb(d.b),u.Qb(H.a),u.Qb(b.a),u.Qb(o.c),u.Qb(v.b))},re.\u0275cmp=u.Kb({type:re,selectors:[["j-contracts-on-sign"]],decls:3,vars:2,consts:[[1,"contracts-list"],[4,"ngIf"],["class","py-5 px-4",4,"ngIf"],[3,"list","isSignable","isSelectable","isDeletable","signed"],[1,"d-block","pt-3",3,"list","title"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"retried"],[3,"minHeight","label"],[1,"py-5","px-4"],[3,"hasTitle"]],template:function(t,e){1&t&&(u.Wb(0,"section",0),u.Rc(1,ce,5,8,"ng-container",1),u.Rc(2,oe,3,1,"section",2),u.Vb()),2&t&&(u.Ab(1),u.uc("ngIf",!e.isLoading),u.Ab(1),u.uc("ngIf",e.isLoading))},directives:[p.u,ne,K,$.a,q],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}"]}),re),le=n("itXk");function ue(t,e){if(1&t){var n=u.Xb();u.Wb(0,"j-contracts-error",6),u.ic("retried",(function(t){return u.Ic(n),u.mc(2).retrieveContracts()})),u.Vb()}}function be(t,e){if(1&t&&u.Rb(0,"j-empty-placeholder",7),2&t){var n=u.mc(2);u.uc("minHeight",478)("label",n.emptyLabel)}}function de(t,e){if(1&t&&(u.Ub(0),u.Rb(1,"j-contracts-group",3),u.Rc(2,ue,1,0,"j-contracts-error",4),u.Rc(3,be,1,2,"j-empty-placeholder",5),u.Tb()),2&t){var n=u.mc();u.Ab(1),u.uc("list",n.contractsList)("contractType",n.contractType)("isSignable",n.isSignable)("isSelectable",n.isSelectable)("isDeletable",n.isDeletable),u.Ab(1),u.uc("ngIf",n.errorText),u.Ab(1),u.uc("ngIf",0==(null==n.contractsList?null:n.contractsList.length))}}function pe(t,e){1&t&&(u.Wb(0,"section",8),u.Rb(1,"j-contracts-loading"),u.Vb())}var me,ge,fe,he=((me=function(){function t(e,n,i,a){_classCallCheck(this,t),this.navService=e,this.contractsService=n,this.companyService=i,this.route=a,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.translatePrefix="CONTRACTS.LIST",this.isLoading=!1,this.subscription=new l.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.subscription.add(Object(le.a)([this.route.data,this.companyService.refresh$]).subscribe((function(e){var n=_slicedToArray(e,2),i=n[0];n[1],t.contractType=i.contractType,t.mapListActions(),t.mapEmptyLabel(),t.retrieveContracts()}))),this.subscription.add(this.contractsService.getContractsSubmitted().subscribe((function(){t.retrieveContracts()})))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"mapTranslate",value:function(t){return"".concat(this.translatePrefix,".").concat(t)}},{key:"retrieveContracts",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.errorText=null,this.isLoading=!0,t.prev=1,t.next=4,this.contractsService.getContracts(this.contractType);case 4:this.contractsList=t.sent,this.navService.retrieveContractBadges(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.errorText=t.t0.description||t.t0.code||t.t0||!0;case 11:return t.prev=11,this.isLoading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[1,8,11,14]])})))}},{key:"mapListActions",value:function(){switch(this.contractType){case B.a.REJECTED:this.isSelectable=!0}}},{key:"mapEmptyLabel",value:function(){var t="EMPTY.";switch(this.contractType){case B.a.APPROVED:t+="APPROVED";break;case B.a.REJECTED:t+="REJECTED";break;case B.a.PENDING:t+="PENDING"}this.emptyLabel=this.mapTranslate(t)}}]),t}()).\u0275fac=function(t){return new(t||me)(u.Qb(H.a),u.Qb(d.b),u.Qb(b.a),u.Qb(o.a))},me.\u0275cmp=u.Kb({type:me,selectors:[["j-contracts-list-base"]],decls:3,vars:2,consts:[[1,"contracts-list"],[4,"ngIf"],["class","py-5 px-4",4,"ngIf"],[3,"list","contractType","isSignable","isSelectable","isDeletable"],[3,"retried",4,"ngIf"],[3,"minHeight","label",4,"ngIf"],[3,"retried"],[3,"minHeight","label"],[1,"py-5","px-4"]],template:function(t,e){1&t&&(u.Wb(0,"section",0),u.Rc(1,de,4,7,"ng-container",1),u.Rc(2,pe,2,0,"section",2),u.Vb()),2&t&&(u.Ab(1),u.uc("ngIf",!e.isLoading),u.Ab(1),u.uc("ngIf",e.isLoading))},directives:[p.u,ne,K,$.a,q],styles:[".contracts-list[_ngcontent-%COMP%]{background:#fff;border-radius:0 0 .75rem .75rem}"]}),me),_e=[{path:"",component:(ge=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),ge.\u0275fac=function(t){return new(t||ge)},ge.\u0275cmp=u.Kb({type:ge,selectors:[["j-contracts"]],decls:1,vars:0,template:function(t,e){1&t&&u.Rb(0,"router-outlet")},directives:[o.h],styles:[".contracts__row[_ngcontent-%COMP%]{display:block}@media(min-width:960px){.contracts__row[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}}.contracts__header[_ngcontent-%COMP%]{border-bottom:1px solid rgba(183,190,197,.5);padding:20px 1rem;display:none}@media(min-width:960px){.contracts__header[_ngcontent-%COMP%]{display:grid}}.contracts__item[_ngcontent-%COMP%]{padding:1rem 1rem .5rem;align-content:center;min-height:52px}@media(min-width:960px){.contracts__item[_ngcontent-%COMP%]{padding:.5rem 1rem}}.contracts__item--hoverable[_ngcontent-%COMP%]{cursor:pointer;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.contracts__item--hoverable[_ngcontent-%COMP%]:hover{background:#f5f9fd}.contracts__top[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.contracts__table[_ngcontent-%COMP%]{background:#fff;overflow:hidden;box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:0 0 .5rem .5rem}.contracts__cell[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-bottom:.75rem}@media(min-width:960px){.contracts__cell[_ngcontent-%COMP%]{margin-bottom:0}}.contracts__icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:block;margin-right:.5rem}.contracts__number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:baseline;align-items:baseline}.contracts__label[_ngcontent-%COMP%]{margin-bottom:.25rem}@media(min-width:960px){.contracts__label[_ngcontent-%COMP%]{display:none}}.contracts-info[_ngcontent-%COMP%]{display:grid;row-gap:20px}@media(min-width:1280px){.contracts-info[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:20px;-moz-column-gap:20px;column-gap:20px;grid-template-columns:repeat(2,calc(50% - 10px))}}.contracts-info__amounts[_ngcontent-%COMP%]{display:grid;margin-bottom:16px;row-gap:16px}@media(min-width:960px){.contracts-info__amounts[_ngcontent-%COMP%]{row-gap:0;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:repeat(2,calc(50% - 8px))}}.contracts-info__block[_ngcontent-%COMP%]{background:#fff;padding:22px 18px;border-radius:12px}.contracts-info__heading[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.contracts-info__buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin-top:24px}.contracts-info__buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:12px}.contracts-info__attachments[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.contracts-info__attachment[_ngcontent-%COMP%] + .contracts-info__attachment[_ngcontent-%COMP%]{margin-top:1rem}.contracts-info__filename[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;margin-bottom:8px;word-break:break-all}@media(min-width:960px){.contracts-info__filename[_ngcontent-%COMP%]{margin-bottom:0}}@media(min-width:960px){.contracts-info__attachment[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between}}.contracts-info__icon[_ngcontent-%COMP%]{margin-right:8px}@media(min-width:960px){.contracts-info__icon[_ngcontent-%COMP%]{margin-right:16px}}.contracts-info__date[_ngcontent-%COMP%]{flex-shrink:0;margin-left:20px}"]}),ge),data:{title:"CONTRACTS.TITLE"},children:[{path:"outcoming",component:Ft,children:[{path:B.a.ON_SIGN,component:se,data:{contractType:B.a.ON_SIGN}},{path:B.a.APPROVED,component:kt,data:{contractType:B.a.APPROVED}},{path:B.a.PENDING,component:he,data:{contractType:B.a.PENDING}},{path:B.a.REJECTED,component:he,data:{contractType:B.a.REJECTED}},{path:"**",redirectTo:B.a.ON_SIGN}]},{path:":id",component:U},{path:"**",redirectTo:"outcoming"}]},{path:"**",redirectTo:""}],ve=((fe=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:fe}),fe.\u0275inj=u.Nb({factory:function(t){return new(t||fe)},imports:[[o.g.forChild(_e)],o.g]}),fe);n("i/as"),n("8Sq6"),n("w657"),n.d(e,"ContractsModule",(function(){return Ce}));var xe,ye=[c.a,ve,i.c,a.a],Ce=((xe=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:xe}),xe.\u0275inj=u.Nb({factory:function(t){return new(t||xe)},imports:[[ye]]}),xe)},XMRP:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("mrSG"),a=n("tk/3"),c=n("XNiG"),o=n("Wgwc"),r=n.n(o),s=n("TwVa"),l=n("8xPB"),u=n("fXoL"),b=n("VnnJ"),d=n("yZrb"),p=n("ZF+8"),m=n("FhWM"),g=n("tyNb"),f=function(){var t=function(){function t(e,n,i,a,o){_classCallCheck(this,t),this.companyService=e,this.apiService=n,this.filesService=i,this.listService=a,this.router=o,this.contractsSubmitted$=new c.a}return _createClass(t,[{key:"getContractsSubmitted",value:function(){return this.contractsSubmitted$.asObservable()}},{key:"mapRemainderMessage",value:function(t){var e;return(null===(e=t.remainder)||void 0===e?void 0:e.amount)<=0?"AMOUNT_CLOSED":r()().isAfter(t.dateTo,"date")?"HAS_EXPIRED":null}},{key:"submitContracts",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,c,o,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=this.mapApiUrl(),c={commissionWithdrawalIban:e,attachments:t.filter((function(t){return!t.error&&t.file})).map((function(t){return{fileId:t.file.id}}))},i.next=4,this.apiService.post(a,c);case 4:return o=i.sent,i.next=7,this.checkAndSignIfNeeded(o);case 7:if(this.contractsSubmitted$.next(),!n){i.next=11;break}r="contracts/outcoming/",this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?r+=l.a.PENDING:r+=l.a.ON_SIGN,this.router.navigateByUrl(r);case 11:return i.abrupt("return",o);case 12:case"end":return i.stop()}}),i,this)})))}},{key:"getContracts",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.mapApiUrl(),i=new a.h;if(i=i.set("fetchAttachments","true"),e)for(var c in e)if(Object.hasOwnProperty.call(e,c)){var o=e[c];o&&(i=i.append(c,o))}switch(t){case l.a.ON_SIGN:i=i.append("status",s.c.ON_SIGN);break;case l.a.APPROVED:i=i.append("status",s.c.REGED);break;case l.a.PENDING:i=(i=i.append("status",s.c.REGISTERED)).append("status",s.c.PROCESSING);break;case l.a.REJECTED:i=i.append("status",s.c.REJECTED)}return this.apiService.get(n,null,i)}},{key:"getContractCertificate",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mapApiUrl("".concat(t,"/certificate")),i=new a.g,e.abrupt("return",(i=(i=i.set("Accept-File","application/pdf")).set("Content-Type","application/octet-stream"),this.apiService.get(n,i,null,{responseType:"blob"})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"downloadContractCertificate",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractCertificate(t.id);case 2:return n=e.sent,e.next=5,this.filesService.downloadFile(n,"".concat(t.contractor.name,".pdf"));case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"sign",value:function(t){return this.listService.sign("fx-contracts",t.id)}},{key:"checkAndSignIfNeeded",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.companyService.isSecondaryAuthority()||this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme())){e.next=7;break}return e.next=3,this.sign(t);case 3:if(n=e.sent){e.next=6;break}throw!1;case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getContractById",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mapApiUrl(t),e.abrupt("return",this.apiService.get(n));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"mapApiUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"companies/".concat(this.companyService.currentId,"/fx-contracts").concat(t?"/".concat(t):"")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.ec(b.a),u.ec(d.a),u.ec(p.b),u.ec(m.a),u.ec(g.c))},t.\u0275prov=u.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},YjsB:function(t,e,n){"use strict";var i,a=n("XMRP"),c=n("mrSG"),o=n("4wRv"),r=n("i/as"),s=n("w657"),l=n("8Sq6"),u=n("fXoL"),b=n("1kSV"),d=n("ZF+8"),p=((i=function(){function t(e,n,i){_classCallCheck(this,t),this.modalService=e,this.jModalService=n,this.featureFlagsService=i}return _createClass(t,[{key:"showAddContractModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.featureFlagsService.isDisabledPromise(o.a.FX_CONTRACTS);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",void this.jModalService.showMaintenanceModal());case 4:return(n=this.modalService.open(r.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",centered:!0})).componentInstance.shouldNavigateToContracts=t,e.prev=6,e.next=9,n.result;case 9:this.showSuccessModal(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(6),i=e.t0.error,a=e.t0.uploadingFiles,c=e.t0.iban,a&&this.showErrorModal(i,a,c);case 18:case"end":return e.stop()}}),e,this,[[6,12]])})))}},{key:"showSuccessModal",value:function(){this.modalService.open(l.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0})}},{key:"showErrorModal",value:function(t,e,n){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return(a=this.modalService.open(s.a,{backdropClass:"backdrop_light",windowClass:"modal_light modal_sm",centered:!0})).componentInstance.iban=n,a.componentInstance.uploadingFiles=e,a.componentInstance.error=t,i.prev=2,i.next=5,a.result;case 5:this.showSuccessModal(),i.next=10;break;case 8:i.prev=8,i.t0=i.catch(2);case 10:case"end":return i.stop()}}),i,this,[[2,8]])})))}}]),t}()).\u0275fac=function(t){return new(t||i)(u.ec(b.q),u.ec(d.c),u.ec(o.b))},i.\u0275prov=u.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);n.d(e,"b",(function(){return a.a})),n.d(e,"a",(function(){return p}))},gfTr:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return g}));var i=n("fXoL"),a=n("PqYM"),c=n("ofXK"),o=["fileSelector"];function r(t,e){if(1&t&&(i.Wb(0,"div",7),i.Tc(1),i.Vb()),2&t){var n=i.mc(2);i.Ab(1),i.Uc(n.dropZoneLabel)}}function s(t,e){if(1&t){var n=i.Xb();i.Wb(0,"div"),i.Wb(1,"input",8),i.ic("click",(function(t){return i.Ic(n),i.mc(2).openFileSelector(t)})),i.Vb(),i.Vb()}if(2&t){var a=i.mc(2);i.Ab(1),i.Db(a.browseBtnClassName),i.vc("value",a.browseBtnLabel)}}function l(t,e){if(1&t&&(i.Rc(0,r,2,1,"div",5),i.Rc(1,s,2,3,"div",6)),2&t){var n=i.mc();i.uc("ngIf",n.dropZoneLabel),i.Ab(1),i.uc("ngIf",n.showBrowseBtn)}}function u(t,e){}var b=function(t){return{openFileSelector:t}},d=function t(e,n){_classCallCheck(this,t),this.relativePath=e,this.fileEntry=n},p=function(){var t=function t(e){_classCallCheck(this,t),this.template=e};return t.\u0275fac=function(e){return new(e||t)(i.Qb(i.L))},t.\u0275dir=i.Lb({type:t,selectors:[["","ngx-file-drop-content-tmp",""]]}),t}(),m=function(){var t=function(){function t(e,n){var a=this;_classCallCheck(this,t),this.zone=e,this.renderer=n,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new i.n,this.onFileOver=new i.n,this.onFileLeave=new i.n,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=function(t){a.fileSelector&&a.fileSelector.nativeElement&&a.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",(function(t){a.globalDraggingInProgress=!0})),this.globalDragEndListener=this.renderer.listen("document","dragend",(function(t){a.globalDraggingInProgress=!1}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}},{key:"onDragOver",value:function(t){this.useDragEnter?(this.preventAndStop(t),t.dataTransfer&&(t.dataTransfer.dropEffect="copy")):this.isDropzoneDisabled()||this.useDragEnter||!t.dataTransfer||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(t)),this.preventAndStop(t),t.dataTransfer.dropEffect="copy")}},{key:"onDragEnter",value:function(t){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(t)),this.preventAndStop(t))}},{key:"onDragLeave",value:function(t){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(t)),this.preventAndStop(t))}},{key:"dropFiles",value:function(t){var e;!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,t.dataTransfer)&&(e=t.dataTransfer.items?t.dataTransfer.items:t.dataTransfer.files,this.preventAndStop(t),this.checkFiles(e))}},{key:"uploadFiles",value:function(t){!this.isDropzoneDisabled()&&t.target&&(this.checkFiles(t.target.files||[]),this.resetFileInput())}},{key:"checkFiles",value:function(t){for(var e=this,n=function(n){var i=t[n],a=null;if(e.canGetAsEntry(i)&&(a=i.webkitGetAsEntry()),a)if(a.isFile){var c=new d(a.name,a);e.addToQueue(c)}else a.isDirectory&&e.traverseFileTree(a,a.name);else if(i){var o={name:i.name,isDirectory:!1,isFile:!0,file:function(t){return t(i)}},r=new d(o.name,o);e.addToQueue(r)}},i=0;i<t.length;i++)n(i);this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(a.a)(200,200).subscribe((function(){if(e.files.length>0&&0===e.numOfActiveReadEntries){var t=e.files;e.files=[],e.onFileDrop.emit(t)}}))}},{key:"traverseFileTree",value:function(t,e){var n=this;if(t.isFile){var i=new d(e,t);this.files.push(i)}else{e+="/";var a=t.createReader(),c=[];!function i(){n.numOfActiveReadEntries++,a.readEntries((function(a){if(a.length)c=c.concat(a),i();else if(0===c.length){var o=new d(e,t);n.zone.run((function(){n.addToQueue(o)}))}else for(var r=function(t){n.zone.run((function(){n.traverseFileTree(c[t],e+c[t].name)}))},s=0;s<c.length;s++)r(s);n.numOfActiveReadEntries--}))}()}}},{key:"resetFileInput",value:function(){if(this.fileSelector&&this.fileSelector.nativeElement){var t=this.fileSelector.nativeElement,e=t.parentElement,n=this.getHelperFormElement(),i=this.getFileInputPlaceholderElement();e!==n&&(this.renderer.insertBefore(e,i,t),this.renderer.appendChild(n,t),n.reset(),this.renderer.insertBefore(e,t,i),this.renderer.removeChild(e,i))}}},{key:"getHelperFormElement",value:function(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}},{key:"getFileInputPlaceholderElement",value:function(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}},{key:"canGetAsEntry",value:function(t){return!!t.webkitGetAsEntry}},{key:"isDropzoneDisabled",value:function(){return this.globalDraggingInProgress||this.disabled}},{key:"addToQueue",value:function(t){this.files.push(t)}},{key:"preventAndStop",value:function(t){t.stopPropagation(),t.preventDefault()}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=null!=t&&"false"!=="".concat(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Qb(i.z),i.Qb(i.D))},t.\u0275cmp=i.Kb({type:t,selectors:[["ngx-file-drop"]],contentQueries:function(t,e,n){var a;1&t&&i.Ib(n,p,!0,i.L),2&t&&i.Ec(a=i.jc())&&(e.contentTemplate=a.first)},viewQuery:function(t,e){var n;1&t&&i.Oc(o,!0),2&t&&i.Ec(n=i.jc())&&(e.fileSelector=n.first)},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:17,consts:[[3,"drop","dragover","dragenter","dragleave"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"value","click"]],template:function(t,e){if(1&t&&(i.Wb(0,"div",0),i.ic("drop",(function(t){return e.dropFiles(t)}))("dragover",(function(t){return e.onDragOver(t)}))("dragenter",(function(t){return e.onDragEnter(t)}))("dragleave",(function(t){return e.onDragLeave(t)})),i.Wb(1,"div"),i.Wb(2,"input",1,2),i.ic("change",(function(t){return e.uploadFiles(t)})),i.Vb(),i.Rc(4,l,2,2,"ng-template",null,3,i.Sc),i.Rc(6,u,0,0,"ng-template",4),i.Vb(),i.Vb()),2&t){var n=i.Fc(5);i.Db(e.dropZoneClassName),i.Hb("ngx-file-drop__drop-zone--over",e.isDraggingOverDropZone),i.Ab(1),i.Db(e.contentClassName),i.Ab(1),i.uc("accept",e.accept)("multiple",e.multiple),i.Bb("directory",e.directory||void 0)("webkitdirectory",e.directory||void 0)("mozdirectory",e.directory||void 0)("msdirectory",e.directory||void 0)("odirectory",e.directory||void 0),i.Ab(4),i.uc("ngTemplateOutlet",e.contentTemplate||n)("ngTemplateOutletContext",i.zc(15,b,e.openFileSelector))}},directives:[c.B,c.u],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),t}(),g=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=i.Ob({type:t,bootstrap:function(){return[m]}}),t.\u0275inj=i.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[c.c]]}),t}()},"i/as":function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var i=n("mrSG"),a=n("L+ju"),c=n("+/Tu"),o=n("fXoL"),r=n("1kSV"),s=n("VnnJ"),l=n("XMRP"),u=n("ZF+8"),b=n("bsP8"),d=n("4Nuw"),p=n("e8Ap"),m=n("gfTr"),g=n("LFY/"),f=n("hsBV"),h=n("M6pS"),_=n("sYmb"),v=["commissionAccountDropdown"],x=["fileDrop"];function y(t,e){1&t&&o.Rb(0,"img",24)}var C=function(){var t=function(){function t(e,n,i,a,c,o){var r=this;_classCallCheck(this,t),this.modal=e,this.companyService=n,this.contractsService=i,this.filesService=a,this.navService=c,this.accountsService=o,this.shouldNavigateToContracts=!1,this.acceptedFormats=".pdf, .jpg, .jpeg, .doc, .png, .tif",this.uploadingFiles=[],this.isLoading=!1,this.isAccountsLoading=!1,this.companyService.refresh$.subscribe((function(t){var e=_slicedToArray(t,3);e[0],e[1];e[2]&&r.retrieveAccounts()}))}return _createClass(t,[{key:"ngOnInit",value:function(){this.uploadingFiles=[],this.mapSubmitLabel()}},{key:"ngOnDestroy",value:function(){this.uploadingFiles=[]}},{key:"onCommissionAccountSelect",value:function(t){this.selectedAccount=t}},{key:"onFileDrop",value:function(t){var e=this,n=!0,i=!1,a=void 0;try{for(var c,o=t[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var r=c.value;r.fileEntry.isFile&&r.fileEntry.file((function(t){e.filesService.uploading$.next([t])}))}}catch(s){i=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}}},{key:"onUploadingFilesUpdate",value:function(t){this.uploadingFiles=t}},{key:"mapTranslate",value:function(t){return"CONTRACTS.ADD_CONTRACT_MODAL.".concat(t)}},{key:"dismissModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.modal.dismiss({error:t,uploadingFiles:e,iban:n}),this.uploadingFiles=[]}},{key:"closeModal",value:function(){this.uploadingFiles=[],this.modal.close()}},{key:"openFileSelector",value:function(){this.fileDrop.openFileSelector()}},{key:"submitFiles",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.filesService.checkIfCanBeUploadedAndNotify(this.uploadingFiles)||!this.selectedAccount){t.next=15;break}return this.isLoading=!0,t.prev=2,t.next=5,this.contractsService.submitContracts(this.uploadingFiles,this.selectedAccount.iban);case 5:this.navService.retrieveContractBadges(),this.closeModal(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0?this.dismissModal(t.t0,this.uploadingFiles,this.selectedAccount.iban):this.dismissModal(t.t0);case 12:return t.prev=12,this.isLoading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[2,9,12,15]])})))}},{key:"mapSubmitLabel",value:function(){this.submitLabel=this.companyService.isSecondaryAuthority()?this.mapTranslate("SIGN"):this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()?this.mapTranslate("SIGN_AND_SEND"):this.mapTranslate("SENT_FOR_SIGN")}},{key:"retrieveAccounts",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isAccountsLoading=!0,t.prev=1,t.next=4,this.accountsService.getAccounts();case 4:e=t.sent,this.accounts=e.filter((function(t){var e;return(null===(e=t.balance)||void 0===e?void 0:e.currency)===c.a.KZT&&t.accountType===a.a.ACCOUNT})),this.accounts.length&&(this.selectedAccount=this.accounts[0],this.commissionAccountDropdown.selectAccount(this.selectedAccount)),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:return t.prev=10,this.isAccountsLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,8,10,13]])})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Qb(r.a),o.Qb(s.a),o.Qb(l.a),o.Qb(u.b),o.Qb(b.a),o.Qb(d.c))},t.\u0275cmp=o.Kb({type:t,selectors:[["j-add-contract-modal"]],viewQuery:function(t,e){var n;1&t&&(o.Yc(v,!0),o.Yc(x,!0)),2&t&&(o.Ec(n=o.jc())&&(e.commissionAccountDropdown=n.first),o.Ec(n=o.jc())&&(e.fileDrop=n.first))},inputs:{shouldNavigateToContracts:"shouldNavigateToContracts"},decls:43,vars:42,consts:[[1,"modal-body","j-modal-body","p-5"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],[3,"hidden"],[1,"add-contract-modal__header"],[1,"btn","btn-outline-primary","add-contract-modal__back-button","mr-3",3,"click"],[3,"inlineSVG"],[1,"m-0"],[1,"add-contract-modal__wrap"],[3,"dropZoneLabel","accept","onFileDrop"],["fileDrop",""],["ngx-file-drop-content-tmp",""],[1,"text-muted","text-center","my-4",3,"innerHTML"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[3,"isLoading","acceptedFormats","updated"],[1,"form-group"],[3,"isLoading","accounts","label","selected"],["commissionAccountDropdown",""],[1,"commission__helper","text-muted"],[1,"add-contract-modal__footer"],[1,"p4","text-muted",3,"innerHTML"],[1,"add-contract-modal__buttons"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","jLoading","click"],["src","/assets/img/contracts/upload.svg"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"button",1),o.ic("click",(function(t){return e.dismissModal()})),o.Rb(2,"img",2),o.nc(3,"translate"),o.Vb(),o.Wb(4,"section",3),o.Wb(5,"div",4),o.Wb(6,"button",5),o.ic("click",(function(t){return e.dismissModal()})),o.Rb(7,"span",6),o.Vb(),o.Wb(8,"h5",7),o.Tc(9),o.nc(10,"translate"),o.Vb(),o.Vb(),o.Wb(11,"div",8),o.Wb(12,"ngx-file-drop",9,10),o.ic("onFileDrop",(function(t){return e.onFileDrop(t)})),o.nc(14,"translate"),o.Rc(15,y,1,0,"ng-template",11),o.Vb(),o.Rb(16,"p",12),o.nc(17,"translate"),o.Wb(18,"button",13),o.ic("click",(function(t){return e.openFileSelector()})),o.Tc(19),o.nc(20,"translate"),o.Vb(),o.Vb(),o.Vb(),o.Wb(21,"section",3),o.Wb(22,"div",4),o.Wb(23,"h5",7),o.Tc(24),o.nc(25,"translate"),o.Vb(),o.Vb(),o.Wb(26,"j-uploading-files",14),o.ic("updated",(function(t){return e.onUploadingFilesUpdate(t)})),o.Vb(),o.Wb(27,"div",15),o.Wb(28,"j-account-dropdown",16,17),o.ic("selected",(function(t){return e.onCommissionAccountSelect(t)})),o.Vb(),o.Wb(30,"small",18),o.Tc(31),o.nc(32,"translate"),o.Vb(),o.Vb(),o.Wb(33,"div",19),o.Rb(34,"p",20),o.nc(35,"translate"),o.Vb(),o.Wb(36,"div",21),o.Wb(37,"button",22),o.ic("click",(function(t){return e.openFileSelector()})),o.Tc(38),o.nc(39,"translate"),o.Vb(),o.Wb(40,"button",23),o.ic("click",(function(t){return e.submitFiles()})),o.Tc(41),o.nc(42,"translate"),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t&&(o.Ab(2),o.vc("alt",o.oc(3,22,"SHARED.CLOSE")),o.Ab(2),o.uc("hidden",e.uploadingFiles.length>0),o.Ab(3),o.uc("inlineSVG","assets/icons/arrow-left.svg"),o.Ab(2),o.Vc(" ",o.oc(10,24,e.mapTranslate("HEADING"))," "),o.Ab(3),o.uc("dropZoneLabel",o.oc(14,26,e.mapTranslate("UPLOAD")))("accept",e.acceptedFormats),o.Ab(4),o.uc("innerHTML",o.oc(17,28,e.mapTranslate("DESCRIPTION")),o.Jc),o.Ab(3),o.Vc(" ",o.oc(20,30,e.mapTranslate("UPLOAD"))," "),o.Ab(2),o.uc("hidden",0==e.uploadingFiles.length),o.Ab(3),o.Vc(" ",o.oc(25,32,e.mapTranslate("UPLOADED_HEADING"))," "),o.Ab(2),o.uc("isLoading",e.isLoading)("acceptedFormats",e.acceptedFormats),o.Ab(2),o.uc("isLoading",e.isAccountsLoading)("accounts",e.accounts)("label",e.mapTranslate("COMMISSION_ACCOUNT")),o.Ab(3),o.Uc(o.oc(32,34,e.mapTranslate("COMMISSION_HELPER"))),o.Ab(3),o.uc("innerHTML",o.oc(35,36,e.mapTranslate("AGREEMENT")),o.Jc),o.Ab(3),o.uc("disabled",e.isLoading),o.Ab(1),o.Vc(" ",o.oc(39,38,e.mapTranslate("UPLOAD_FILE"))," "),o.Ab(2),o.uc("disabled",e.isLoading)("jLoading",e.isLoading),o.Ab(1),o.Vc(" ",o.oc(42,40,e.submitLabel)," "))},directives:[p.a,m.a,m.b,g.a,f.a,h.a],pipes:[_.d],styles:[":host{position:relative}.add-contract-modal__file-selector{border-radius:30px;border:0;background:none;outline:0;width:100%;height:100%}.commission__helper{margin-top:-12px;display:block}ngx-file-drop .ngx-file-drop__drop-zone{border-radius:30px!important;border:0!important;background-image:url(/assets/img/contracts/dropzone.svg);width:335px;height:165px!important;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}ngx-file-drop .ngx-file-drop__drop-zone--over,ngx-file-drop .ngx-file-drop__drop-zone:hover{background-color:#f5f9fd!important}ngx-file-drop .ngx-file-drop__content{border-radius:30px!important;width:335px!important;height:165px!important}.add-contract-modal__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.add-contract-modal__header h5{font-size:22px}.add-contract-modal__back-button{width:40px;height:40px;padding:0}.add-contract-modal__back-button,.add-contract-modal__wrap{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.add-contract-modal__wrap{padding:50px 0 0;max-width:360px;margin:0 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.add-contract-modal__close{position:absolute;right:24px;top:24px}.modal-body{position:relative}.add-contract-modal__footer{padding-top:20px;border-top:1px solid rgba(183,190,197,.5)}.add-contract-modal__footer p{line-height:18px}.add-contract-modal__buttons{display:grid;-webkit-column-gap:12px;-moz-column-gap:12px;column-gap:12px;grid-template-columns:repeat(2,calc(50% - 6px))}.add-contract-modal__buttons .btn{padding-left:0;padding-right:0}"],encapsulation:2}),t}()},w657:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("mrSG"),a=n("jtnZ"),c=n("fXoL"),o=n("1kSV"),r=n("XMRP"),s=n("sYmb"),l=n("M6pS"),u=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.modal=e,this.contractsService=n,this.isLoading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.errorText=this.error.code===a.a.FORBIDDEN?"CONTRACTS.ERROR_MODAL.FORBIDDEN":"CONTRACTS.ERROR_MODAL.GENERAL"}},{key:"submitContracts",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.prev=1,t.next=4,this.contractsService.submitContracts(this.uploadingFiles,this.iban);case 4:this.closeModal(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return t.prev=9,this.isLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[1,7,9,12]])})))}},{key:"dismissModal",value:function(){this.modal.dismiss()}},{key:"closeModal",value:function(){this.modal.close()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Qb(o.a),c.Qb(r.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["j-contract-error-modal"]],inputs:{description:"description",error:"error",iban:"iban",uploadingFiles:"uploadingFiles"},decls:16,vars:12,consts:[[1,"modal-body","j-modal-body","text-center","contract-modal__body"],["type","button",1,"close",3,"click"],["src","/assets/icons/close.svg",3,"alt"],["src","/assets/img/history/modals/error.svg",3,"alt"],["translate","",1,"light","my-2"],[1,"m-0","text-muted"],[1,"modal-footer","py-4","px-3","justify-content-center"],["translate","","type","button",1,"btn","btn-primary","btn-block","mb-3",3,"disabled","jLoading","click"],["translate","","type","button",1,"btn","btn-static","btn-link","m-0",3,"disabled","click"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"button",1),c.ic("click",(function(t){return e.dismissModal()})),c.Rb(2,"img",2),c.nc(3,"translate"),c.Vb(),c.Rb(4,"img",3),c.nc(5,"translate"),c.Wb(6,"h3",4),c.Tc(7," SHARED.ERROR "),c.Vb(),c.Wb(8,"p",5),c.Tc(9),c.nc(10,"translate"),c.Vb(),c.Vb(),c.Wb(11,"div",6),c.Wb(12,"button",7),c.ic("click",(function(t){return e.submitContracts()})),c.Tc(13," SHARED.TRY_AGAIN "),c.Vb(),c.Wb(14,"button",8),c.ic("click",(function(t){return e.dismissModal()})),c.Tc(15," SHARED.BACK_TO_HOME "),c.Vb(),c.Vb()),2&t&&(c.Ab(2),c.vc("alt",c.oc(3,6,"SHARED.CLOSE")),c.Ab(2),c.vc("alt",c.oc(5,8,"SHARED.ERROR")),c.Ab(5),c.Vc(" ",c.oc(10,10,e.errorText)," "),c.Ab(3),c.uc("disabled",e.isLoading)("jLoading",e.isLoading),c.Ab(2),c.uc("disabled",e.isLoading))},directives:[s.a,l.a],pipes:[s.d],styles:[".contract-modal__body[_ngcontent-%COMP%]{padding:56px 32px 0}"]}),t}()}}]);