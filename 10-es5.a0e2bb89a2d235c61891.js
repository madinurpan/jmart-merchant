function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(c){r=!0,s=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{gfTr:function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return g}));var n=i("fXoL"),r=i("PqYM"),s=i("ofXK"),a=["fileSelector"];function o(e,t){if(1&e&&(n.Wb(0,"div",7),n.Tc(1),n.Vb()),2&e){var i=n.mc(2);n.Ab(1),n.Uc(i.dropZoneLabel)}}function c(e,t){if(1&e){var i=n.Xb();n.Wb(0,"div"),n.Wb(1,"input",8),n.ic("click",(function(e){return n.Ic(i),n.mc(2).openFileSelector(e)})),n.Vb(),n.Vb()}if(2&e){var r=n.mc(2);n.Ab(1),n.Db(r.browseBtnClassName),n.vc("value",r.browseBtnLabel)}}function l(e,t){if(1&e&&(n.Rc(0,o,2,1,"div",5),n.Rc(1,c,2,3,"div",6)),2&e){var i=n.mc();n.uc("ngIf",i.dropZoneLabel),n.Ab(1),n.uc("ngIf",i.showBrowseBtn)}}function u(e,t){}var d=function(e){return{openFileSelector:e}},b=function e(t,i){_classCallCheck(this,e),this.relativePath=t,this.fileEntry=i},h=function(){var e=function e(t){_classCallCheck(this,e),this.template=t};return e.\u0275fac=function(t){return new(t||e)(n.Qb(n.L))},e.\u0275dir=n.Lb({type:e,selectors:[["","ngx-file-drop-content-tmp",""]]}),e}(),p=function(){var e=function(){function e(t,i){var r=this;_classCallCheck(this,e),this.zone=t,this.renderer=i,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new n.n,this.onFileOver=new n.n,this.onFileLeave=new n.n,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=function(e){r.fileSelector&&r.fileSelector.nativeElement&&r.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",(function(e){r.globalDraggingInProgress=!0})),this.globalDragEndListener=this.renderer.listen("document","dragend",(function(e){r.globalDraggingInProgress=!1}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null}},{key:"onDragOver",value:function(e){this.useDragEnter?(this.preventAndStop(e),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")):this.isDropzoneDisabled()||this.useDragEnter||!e.dataTransfer||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e),e.dataTransfer.dropEffect="copy")}},{key:"onDragEnter",value:function(e){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))}},{key:"onDragLeave",value:function(e){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))}},{key:"dropFiles",value:function(e){var t;!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,e.dataTransfer)&&(t=e.dataTransfer.items?e.dataTransfer.items:e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t))}},{key:"uploadFiles",value:function(e){!this.isDropzoneDisabled()&&e.target&&(this.checkFiles(e.target.files||[]),this.resetFileInput())}},{key:"checkFiles",value:function(e){for(var t=this,i=function(i){var n=e[i],r=null;if(t.canGetAsEntry(n)&&(r=n.webkitGetAsEntry()),r)if(r.isFile){var s=new b(r.name,r);t.addToQueue(s)}else r.isDirectory&&t.traverseFileTree(r,r.name);else if(n){var a={name:n.name,isDirectory:!1,isFile:!0,file:function(e){return e(n)}},o=new b(a.name,a);t.addToQueue(o)}},n=0;n<e.length;n++)i(n);this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=Object(r.a)(200,200).subscribe((function(){if(t.files.length>0&&0===t.numOfActiveReadEntries){var e=t.files;t.files=[],t.onFileDrop.emit(e)}}))}},{key:"traverseFileTree",value:function(e,t){var i=this;if(e.isFile){var n=new b(t,e);this.files.push(n)}else{t+="/";var r=e.createReader(),s=[];!function n(){i.numOfActiveReadEntries++,r.readEntries((function(r){if(r.length)s=s.concat(r),n();else if(0===s.length){var a=new b(t,e);i.zone.run((function(){i.addToQueue(a)}))}else for(var o=function(e){i.zone.run((function(){i.traverseFileTree(s[e],t+s[e].name)}))},c=0;c<s.length;c++)o(c);i.numOfActiveReadEntries--}))}()}}},{key:"resetFileInput",value:function(){if(this.fileSelector&&this.fileSelector.nativeElement){var e=this.fileSelector.nativeElement,t=e.parentElement,i=this.getHelperFormElement(),n=this.getFileInputPlaceholderElement();t!==i&&(this.renderer.insertBefore(t,n,e),this.renderer.appendChild(i,e),i.reset(),this.renderer.insertBefore(t,e,n),this.renderer.removeChild(t,n))}}},{key:"getHelperFormElement",value:function(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl}},{key:"getFileInputPlaceholderElement",value:function(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl}},{key:"canGetAsEntry",value:function(e){return!!e.webkitGetAsEntry}},{key:"isDropzoneDisabled",value:function(){return this.globalDraggingInProgress||this.disabled}},{key:"addToQueue",value:function(e){this.files.push(e)}},{key:"preventAndStop",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&"false"!=="".concat(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Qb(n.z),n.Qb(n.D))},e.\u0275cmp=n.Kb({type:e,selectors:[["ngx-file-drop"]],contentQueries:function(e,t,i){var r;1&e&&n.Ib(i,h,!0,n.L),2&e&&n.Ec(r=n.jc())&&(t.contentTemplate=r.first)},viewQuery:function(e,t){var i;1&e&&n.Oc(a,!0),2&e&&n.Ec(i=n.jc())&&(t.fileSelector=i.first)},inputs:{accept:"accept",directory:"directory",multiple:"multiple",dropZoneLabel:"dropZoneLabel",dropZoneClassName:"dropZoneClassName",useDragEnter:"useDragEnter",contentClassName:"contentClassName",showBrowseBtn:"showBrowseBtn",browseBtnClassName:"browseBtnClassName",browseBtnLabel:"browseBtnLabel",disabled:"disabled"},outputs:{onFileDrop:"onFileDrop",onFileOver:"onFileOver",onFileLeave:"onFileLeave"},decls:7,vars:17,consts:[[3,"drop","dragover","dragenter","dragleave"],["type","file",1,"ngx-file-drop__file-input",3,"accept","multiple","change"],["fileSelector",""],["defaultContentTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ngx-file-drop__drop-zone-label",4,"ngIf"],[4,"ngIf"],[1,"ngx-file-drop__drop-zone-label"],["type","button",3,"value","click"]],template:function(e,t){if(1&e&&(n.Wb(0,"div",0),n.ic("drop",(function(e){return t.dropFiles(e)}))("dragover",(function(e){return t.onDragOver(e)}))("dragenter",(function(e){return t.onDragEnter(e)}))("dragleave",(function(e){return t.onDragLeave(e)})),n.Wb(1,"div"),n.Wb(2,"input",1,2),n.ic("change",(function(e){return t.uploadFiles(e)})),n.Vb(),n.Rc(4,l,2,2,"ng-template",null,3,n.Sc),n.Rc(6,u,0,0,"ng-template",4),n.Vb(),n.Vb()),2&e){var i=n.Fc(5);n.Db(t.dropZoneClassName),n.Hb("ngx-file-drop__drop-zone--over",t.isDraggingOverDropZone),n.Ab(1),n.Db(t.contentClassName),n.Ab(1),n.uc("accept",t.accept)("multiple",t.multiple),n.Bb("directory",t.directory||void 0)("webkitdirectory",t.directory||void 0)("mozdirectory",t.directory||void 0)("msdirectory",t.directory||void 0)("odirectory",t.directory||void 0),n.Ab(4),n.uc("ngTemplateOutlet",t.contentTemplate||i)("ngTemplateOutletContext",n.zc(15,d,t.openFileSelector))}},directives:[s.B,s.u],styles:[".ngx-file-drop__drop-zone[_ngcontent-%COMP%]{border:2px dotted #0782d0;border-radius:30px;height:100px;margin:auto}.ngx-file-drop__drop-zone--over[_ngcontent-%COMP%]{background-color:hsla(0,0%,57.6%,.5)}.ngx-file-drop__content[_ngcontent-%COMP%]{align-items:center;color:#0782d0;display:flex;height:100px;justify-content:center}.ngx-file-drop__drop-zone-label[_ngcontent-%COMP%]{text-align:center}.ngx-file-drop__file-input[_ngcontent-%COMP%]{display:none}"]}),e}(),g=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=n.Ob({type:e,bootstrap:function(){return[p]}}),e.\u0275inj=n.Nb({factory:function(t){return new(t||e)},providers:[],imports:[[s.c]]}),e}()},mCIM:function(e,t,i){"use strict";i.r(t);var n,r,s=i("ofXK"),a=i("3Pt+"),o=i("xJkR"),c=i("dlKe"),l=i("gfTr"),u=i("5cNS"),d=i("PCNd"),b=i("mQSa"),h=i("tyNb"),p=function(e){return e.INBOX="inbox",e.OUTBOX="outbox",e.DRAFTS="drafts",e}({}),g=function(e){return e.ON_SIGN="ON_SIGN",e.SENT="SENT",e}({}),f=function(e){return e.CERTIFICATE="CERTIFICATE",e.APPLICATION="APPLICATION",e}({}),v=[{id:"919fbae5-ca24-4b3a-9323-a5b0c96a4512",displayName:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e\u0435 \u043f\u0438\u0441\u044c\u043c\u043e",description:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u043e\u0435 \u043f\u0438\u0441\u044c\u043c\u043e",type:"APPLICATION"},{id:"d61a02d0-50ea-4867-9c3b-ec318cb569ac",displayName:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043f\u043e \u0432\u0430\u043b\u044e\u0442\u043d\u044b\u043c \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430\u043c",description:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043f\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u0443 \u0432\u0430\u043b\u044e\u0442\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0440\u0430\u043a\u0442\u0430",type:"APPLICATION"},{id:"fba22715-756c-41d7-b100-e29f80ab0ea9",displayName:"\u041d\u0430 \u0432\u044b\u0434\u0430\u0447\u0443 \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0445 \u0434\u0435\u043d\u0435\u0433",description:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0432\u044b\u0434\u0430\u0447\u0443 \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0445 \u0434\u0435\u043d\u0435\u0433 \u0432 \u043e\u0442\u0434\u0435\u043b\u0435\u043d\u0438\u0438",type:"APPLICATION"},{id:"fa1be069-e728-4a2f-950f-ec4893dc42ac",displayName:"\u041d\u0430 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e\u0435 \u0438\u0437\u044a\u044f\u0442\u0438\u0435 \u0441 \u0434\u0435\u043f\u043e\u0437\u0438\u0442\u0430",description:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e\u0435 \u0438\u0437\u044a\u044f\u0442\u0438\u0435 \u0441 \u0434\u0435\u043f\u043e\u0437\u0438\u0442\u0430",type:"APPLICATION"},{id:"d6d2fb09-6d94-4be1-b75c-f4f3dbfd0d75",displayName:"\u0421\u043c\u0435\u043d\u0430 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f, \u0430\u0434\u0440\u0435\u0441\u0430, \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0438 \u0442.\u0434",description:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0441\u043c\u0435\u043d\u0443 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f, \u0430\u0434\u0440\u0435\u0441\u0430, \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0438 \u0442.\u0434. \u0441 \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 (\u043f\u0440\u0438\u043a\u0430\u0437\u044b, \u0440\u0435\u0448\u0435\u043d\u0438\u044f, \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430)",type:"APPLICATION"},{id:"4a7c08ee-f640-4feb-a012-15f99084f8a1",displayName:"\u041d\u0430 \u0437\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0432\u0430\u043b\u044e\u0442\u044b \u043d\u0430 \u0441\u0447\u0435\u0442",description:"\u0417\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u043e \u0437\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0438 \u0432\u0430\u043b\u044e\u0442\u044b \u043d\u0430 \u0441\u0447\u0435\u0442",type:"APPLICATION"},{id:"07e410d5-3283-4f8c-902c-6c86e2436677",displayName:"\u041e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0441\u0447\u0435\u0442\u0430",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430",type:"CERTIFICATE"},{id:"8295913a-b8ba-472f-af7c-8e12195b8ddf",displayName:"\u041e\u0431 \u043e\u0441\u0442\u0430\u0442\u043a\u0430\u0445 \u043d\u0430 \u0441\u0447\u0435\u0442\u0435",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e\u0431 \u043e\u0441\u0442\u0430\u0442\u043a\u0430\u0445 \u043d\u0430 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u043c \u0441\u0447\u0435\u0442\u0435",type:"CERTIFICATE"},{id:"a66d0329-8956-4bce-89ee-bdc9e3571349",displayName:"\u041e\u0431 \u043e\u0431\u043e\u0440\u043e\u0442\u0430\u0445 \u043d\u0430 \u0441\u0447\u0435\u0442\u0435",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e\u0431 \u043e\u0431\u043e\u0440\u043e\u0442\u0430\u0445 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430",type:"CERTIFICATE"},{id:"affb46a1-2012-47d2-9222-96b12603771c",displayName:"\u041e \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u0430\u0445 \u0441\u0447\u0435\u0442\u0430",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u0430\u0445 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430",type:"CERTIFICATE"},{id:"48e07781-bc49-4e04-b24c-3136366b913f",displayName:"\u0414\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0441\u043a\u0438\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u043b\u044f \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0441\u043a\u0438\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439",type:"CERTIFICATE"},{id:"903dabe2-5b6a-405a-93ab-5df77f8c1b7f",displayName:"\u0414\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f \u0432 \u0442\u0435\u043d\u0434\u0435\u0440\u0435",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f \u0432 \u0442\u0435\u043d\u0434\u0435\u0440\u0435",type:"CERTIFICATE"},{id:"34ce1113-6f15-4f64-92af-fc97db0599be",displayName:"\u041e\u0431 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e\u0431 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u0437\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438",type:"CERTIFICATE"},{id:"e4da4358-f6fe-42dc-8099-07026932f2cf",displayName:"\u041e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 3-\u0438\u0445 \u043b\u0438\u0446",description:"\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 3-\u0438\u0445 \u043b\u0438\u0446 (\u0415\u041a\u041e)",type:"CERTIFICATE"}],m=function(e){return e.ACCOUNT_AVAILABILITY="ACCOUNT_AVAILABILITY",e.ACCOUNT_BALANCES="ACCOUNT_BALANCES",e.ACCOUNT_DETAILS="ACCOUNT_DETAILS",e.ACCOUNT_TURNOVER="ACCOUNT_TURNOVER",e}({}),S=i("R0Ic"),T=i("fXoL"),y=i("mrSG"),_=i("tk/3"),k=i("2Vo4"),O=i("Wgwc"),w=i.n(O),C=i("kAiJ"),E=i("VnnJ"),A=i("ZF+8"),x=i("yZrb"),R=i("FhWM"),I=((r=function(){function e(t,i,n,r,s){_classCallCheck(this,e),this.companyService=t,this.filesService=i,this.apiService=n,this.listService=r,this.locale=s,this.files=[],this.lastLettersListPath$=new k.a("outbox"),this.retrieveTopics()}return _createClass(e,[{key:"clearFiles",value:function(){this.files=[],this.filesService.uploading$.next([])}},{key:"onFileDrop",value:function(e){var t=[],i=!0,n=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var o=s.value;t.push(o)}}catch(c){n=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}t.length>0&&(this.files=[].concat(t),this.filesService.uploading$.next(this.files))}},{key:"mapLetterDate",value:function(e){var t=e.created,i=w()().isSame(t,"day"),n=w()().subtract(1,"date").isSame(t,"day"),r=w()(t).format("HH:mm");if(i)return{key:"LETTERS.DATE.TODAY",params:{time:r}};if(n)return{key:"LETTERS.DATE.YESTERDAY",params:{time:r}};var a=w()().isSame(t,"year")?"d MMMM HH:mm":"d MMMM yyyy HH:mm";return Object(s.K)(t,a,this.locale)}},{key:"getById",value:function(e){var t=this.mapUrl("/".concat(e));return this.apiService.get(t)}},{key:"getLetterSignatures",value:function(e){var t=this.mapUrl("/".concat(e,"/signatures"));return this.apiService.get(t)}},{key:"sign",value:function(e){return this.listService.sign("letters",e)}},{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,n,r,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in i=this.mapUrl(),n=new _.h,e)Object.prototype.hasOwnProperty.call(e,r)&&(s=e[r])&&("dateFrom"!=r&&"dateTo"!=r||(s=Object(C.b)(s)),n=n.append(r,s));return t.next=5,this.apiService.get(i,null,n,{observe:"response"});case 5:return a=t.sent,t.abrupt("return",{items:a.body,totalCount:+a.headers.get("X-Total-Count")});case 7:case"end":return t.stop()}}),t,this)})))}},{key:"retrieveTopics",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mapUrl("/topics"),e.prev=1,e.next=4,this.apiService.get(t);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i=v;case 10:return e.abrupt("return",(this.cashedTopics=i,this.cashedTopics));case 11:case"end":return e.stop()}}),e,this,[[1,7]])})))}},{key:"getTopics",value:function(e){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cashedTopics){t.next=4;break}t.t0=this.filterTopicsByType(e),t.next=8;break;case 4:return t.next=6,this.retrieveTopics();case 6:this.cashedTopics=t.sent,t.t0=this.filterTopicsByType(e);case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"getTopicValues",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cashedTopics){e.next=4;break}e.t0=this.mapTopicValues(),e.next=8;break;case 4:return e.next=6,this.retrieveTopics();case 6:this.cashedTopics=e.sent,e.t0=this.mapTopicValues();case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})))}},{key:"edit",value:function(e){var t=this.mapUrl("/".concat(e.id));return this.apiService.put(t,e)}},{key:"create",value:function(e){var t=this.mapUrl();return this.apiService.post(t,e)}},{key:"sendToSign",value:function(e){var t=Array.isArray(e),i=this.mapUrl(t?":on-sign":"/".concat(e,":on-sign"));return this.apiService.patch(i,t?{itemIds:e}:null)}},{key:"filterTopicsByType",value:function(e){return this.cashedTopics.filter((function(t){return t.type===e}))}},{key:"mapTopicValues",value:function(){return this.cashedTopics.map((function(e){return e.displayName}))}},{key:"mapUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"companies/".concat(this.companyService.currentId,"/letters").concat(e)}}]),e}()).\u0275fac=function(e){return new(e||r)(T.ec(E.a),T.ec(A.b),T.ec(x.a),T.ec(R.a),T.ec(T.u))},r.\u0275prov=T.Mb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),L=((n=function(){function e(t,i){_classCallCheck(this,e),this.apiService=t,this.companyService=i,this.cashedCertificateTypes$=new k.a([]),this.retrieveCertificateTypes()}return _createClass(e,[{key:"getCertificate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var n,r,s,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,n=this.mapUrl(),r={certificateTypeCode:e,params:t},i.next=4,this.apiService.post(n,r,null,null,{responseType:"blob"});case 4:return i.abrupt("return",i.sent);case 7:throw i.prev=7,i.t0=i.catch(0),s=new FileReader,a=new Promise((function(e){s.onloadend=function(){e(JSON.parse(s.result))}})),s.readAsText(i.t0.error),a;case 11:case"end":return i.stop()}}),i,this,[[0,7]])})))}},{key:"getCertificateTypes",value:function(){return this.cashedCertificateTypes$.asObservable()}},{key:"retrieveCertificateTypes",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mapUrl("/types"),e.prev=1,e.next=4,this.apiService.get(t);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i=[];case 10:return e.abrupt("return",(this.cashedCertificateTypes$.next(i),i));case 11:case"end":return e.stop()}}),e,this,[[1,7]])})))}},{key:"mapUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"companies/".concat(this.companyService.currentId,"/certificates").concat(e)}}]),e}()).\u0275fac=function(e){return new(e||n)(T.ec(x.a),T.ec(E.a))},n.\u0275prov=T.Mb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),F=i("e8Ap"),D=i("fK/r"),j=i("PGAL"),P=i("Kcpt"),N=i("Hjq/"),V=i("sYmb"),M=i("g1SY");function W(e,t){if(1&e&&(T.Ub(0),T.Tc(1),T.Tb()),2&e){var i=T.mc(2);T.Ab(1),T.Vc(" ",i.dateText," ")}}function U(e,t){if(1&e&&(T.Ub(0),T.Tc(1),T.nc(2,"translate"),T.Tb()),2&e){var i=T.mc(2);T.Ab(1),T.Vc(" ",T.pc(2,1,i.date.key,i.date.params)," ")}}function B(e,t){if(1&e&&(T.Wb(0,"div",10),T.Rc(1,W,2,1,"ng-container",11),T.Rc(2,U,3,4,"ng-container",11),T.Vb()),2&e){var i=T.mc();T.Ab(1),T.uc("ngIf",i.dateText),T.Ab(1),T.uc("ngIf",i.date)}}function G(e,t){if(1&e){var i=T.Xb();T.Wb(0,"button",14),T.ic("click",(function(e){T.Ic(i);var n=t.$implicit;return T.mc(3).onFileClick(n)})),T.Rb(1,"span",15),T.Wb(2,"div",16),T.Tc(3),T.Vb(),T.Vb()}if(2&e){var n=t.$implicit;T.Ab(3),T.Vc(" ",null==n?null:n.name," ")}}function Q(e,t){if(1&e&&(T.Ub(0),T.Rc(1,G,4,1,"button",13),T.Tb()),2&e){var i=T.mc(2);T.Ab(1),T.uc("ngForOf",i.letter.files)}}var X=function(){return{height:"32px","background-color":"#ECEEF1"}};function z(e,t){1&e&&T.Rb(0,"ngx-skeleton-loader",17),2&e&&T.uc("theme",T.yc(1,X))}function H(e,t){if(1&e&&(T.Rc(0,Q,2,1,"ng-container",11),T.Rc(1,z,1,2,"ngx-skeleton-loader",12)),2&e){var i=T.mc();T.uc("ngIf",!i.isFilesLoading),T.Ab(1),T.uc("ngIf",i.isFilesLoading)}}function $(e,t){if(1&e){var i=T.Xb();T.Wb(0,"div",19),T.Wb(1,"button",20),T.ic("click",(function(e){return T.Ic(i),T.mc(2).onReply()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb()}if(2&e){var n=T.mc(2);T.Ab(2),T.Vc(" ",T.oc(3,1,n.mapTranslate("REPLY"))," ")}}function Y(e,t){if(1&e&&T.Rc(0,$,4,3,"div",18),2&e){var i=T.mc();T.uc("ngIf",i.letter.incoming)}}function K(e,t){if(1&e&&(T.Wb(0,"div",27),T.Wb(1,"div",28),T.Tc(2),T.Vb(),T.Wb(3,"div",29),T.Tc(4),T.Vb(),T.Vb()),2&e){var i=t.$implicit;T.Ab(2),T.Uc(i.name),T.Ab(1),T.Db(i.classList),T.Ab(1),T.Uc(i.label)}}function Z(e,t){if(1&e&&(T.Wb(0,"section",4),T.Wb(1,"j-collapsible"),T.Wb(2,"j-collapsible-trigger"),T.Wb(3,"div",22),T.Wb(4,"h5",23),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Rb(7,"j-icon",24),T.Vb(),T.Vb(),T.Wb(8,"j-collapsible-body"),T.Wb(9,"div",25),T.Rc(10,K,5,4,"div",26),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e){var i=T.mc(2);T.Ab(5),T.Vc(" ",T.oc(6,3,i.mapTranslate("SIGNERS"))," "),T.Ab(2),T.uc("isStroke",!0),T.Ab(3),T.uc("ngForOf",i.signers)}}function J(e,t){if(1&e&&T.Rc(0,Z,11,5,"section",21),2&e){var i=T.mc();T.uc("ngIf",(null==i.signers?null:i.signers.length)>0)}}var q,ee=((q=function(){function e(t,i,n,r){_classCallCheck(this,e),this.router=t,this.lettersService=i,this.filesService=n,this.companyService=r,this.closed=new T.n,this.isFilesLoading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.mapDateText(),this.loadAttachments()}},{key:"onClose",value:function(){this.closed.emit()}},{key:"onFileClick",value:function(e){this.filesService.downloadFileById(e.id,e.name)}},{key:"onReply",value:function(){this.router.navigate(["/letters/create"],{state:{title:this.mapTranslate("TITLE")}})}},{key:"mapTranslate",value:function(e){return"LETTERS.DETAILS.".concat(e)}},{key:"loadAttachments",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isFilesLoading=!0,e.prev=1,e.next=4,this.lettersService.getById(this.letter.id);case 4:t=e.sent,this.letter=Object.assign(Object.assign({},this.letter),t),this.loadSignatures(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,this.isFilesLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,8,10,13]])})))}},{key:"loadSignatures",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.letter.incoming||(this.signers=this.companyService.generateSignersList(this.letter.statusCode,this.letter.signatureScheme,this.letter.signatures));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"mapDateText",value:function(){var e=this.lettersService.mapLetterDate(this.letter);"string"==typeof e?this.dateText=e:this.date=e}}]),e}()).\u0275fac=function(e){return new(e||q)(T.Qb(h.c),T.Qb(I),T.Qb(A.b),T.Qb(E.a))},q.\u0275cmp=T.Kb({type:q,selectors:[["j-letters-details-content"]],inputs:{letter:"letter"},outputs:{closed:"closed"},decls:20,vars:8,consts:[[1,"letter-details"],[1,"letter-details__header"],[3,"ngTemplateOutlet"],["inlineSVG","/assets/icons/letters/close.svg",1,"letter-details__close",3,"click"],[1,"letter-details__body"],[1,"p2",3,"innerHtml"],["dateTemplate",""],["filesTemplate",""],["actionsTemplate",""],["signersTemplate",""],[1,"text-muted","p3"],[4,"ngIf"],["count","5",3,"theme",4,"ngIf"],["class","letter-details__file",3,"click",4,"ngFor","ngForOf"],[1,"letter-details__file",3,"click"],["inlineSVG","/assets/icons/contracts/file.svg",1,"mr-3"],[1,"text-truncate","p2"],["count","5",3,"theme"],["class","letter-details__actions",4,"ngIf"],[1,"letter-details__actions"],[1,"btn","btn-primary","btn-block",3,"click"],["class","letter-details__body",4,"ngIf"],[1,"letter-details__collapse"],[1,"m-0"],["name","arrowUp",1,"ml-auto","details__arrow",3,"isStroke"],[1,"letter-details__signers","p2"],["class","j-desc-row letter-details__signer",4,"ngFor","ngForOf"],[1,"j-desc-row","letter-details__signer"],[1,"text-dark","j-desc-child"],["translate","",1,"text-muted","j-desc-child"]],template:function(e,t){if(1&e&&(T.Wb(0,"div",0),T.Wb(1,"div",1),T.Sb(2,2),T.Wb(3,"button",3),T.ic("click",(function(e){return t.onClose()})),T.Vb(),T.Vb(),T.Wb(4,"article",4),T.Wb(5,"h6"),T.Tc(6),T.Vb(),T.Rb(7,"p",5),T.nc(8,"linkifyPipe"),T.Sb(9,2),T.Sb(10,2),T.Vb(),T.Sb(11,2),T.Vb(),T.Rc(12,B,3,2,"ng-template",null,6,T.Sc),T.Rc(14,H,2,2,"ng-template",null,7,T.Sc),T.Rc(16,Y,1,1,"ng-template",null,8,T.Sc),T.Rc(18,J,1,1,"ng-template",null,9,T.Sc)),2&e){var i=T.Fc(13),n=T.Fc(15),r=T.Fc(17),s=T.Fc(19);T.Ab(2),T.uc("ngTemplateOutlet",i),T.Ab(4),T.Uc(t.letter.title),T.Ab(1),T.uc("innerHtml",T.oc(8,6,t.letter.body),T.Jc),T.Ab(2),T.uc("ngTemplateOutlet",n),T.Ab(1),T.uc("ngTemplateOutlet",r),T.Ab(1),T.uc("ngTemplateOutlet",s)}},directives:[s.B,F.a,s.u,s.t,o.a,D.a,j.a,P.a,N.a,V.a],pipes:[M.a,V.d],styles:[".letter-details__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between}.letter-details__close[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;color:#666c72;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.letter-details__close[_ngcontent-%COMP%]:hover{color:#ef5630}.letter-details__body[_ngcontent-%COMP%]{margin-top:1.5rem;background:#fff;overflow:hidden;padding:1.5rem 1rem;border-radius:12px}.letter-details__file[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;width:100%;padding:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;color:#1586bb}.letter-details__file[_ngcontent-%COMP%]:hover{color:#ef5630}.letter-details__file[_ngcontent-%COMP%] + .letter-details__file[_ngcontent-%COMP%]{margin-top:1.5rem}.letter-details__actions[_ngcontent-%COMP%]{margin-top:2.5rem}.letter-details__trigger[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.letter-details__signers[_ngcontent-%COMP%]{padding-top:1rem}.letter-details__collapse[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;cursor:pointer;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.letter-details__signer[_ngcontent-%COMP%]{grid-template-columns:1fr 100px}"]}),q),te=i("quSY");function ie(e,t){if(1&e){var i=T.Xb();T.Wb(0,"button",3),T.ic("click",(function(e){T.Ic(i);var n=t.$implicit;return T.mc(2).onLinkSelect(n)})),T.Wb(1,"span"),T.Tc(2),T.Vb(),T.Rb(3,"span",4),T.Vb()}if(2&e){var n=t.$implicit;T.Ab(2),T.Uc(n.displayName)}}function ne(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"div",1),T.Wb(2,"h6"),T.Tc(3),T.nc(4,"translate"),T.Vb(),T.Rc(5,ie,4,1,"button",2),T.Vb(),T.Tb()),2&e){var i=T.mc();T.Ab(3),T.Uc(T.oc(4,2,i.mapTranslate(i.topicType))),T.Ab(2),T.uc("ngForOf",i.topics)}}var re=function(){return{height:"450px","background-color":"#ECEEF1"}};function se(e,t){1&e&&(T.Ub(0),T.Rb(1,"ngx-skeleton-loader",5),T.Tb()),2&e&&(T.Ab(1),T.uc("theme",T.yc(1,re)))}var ae,oe,ce=((ae=function(){function e(t,i){_classCallCheck(this,e),this.lettersService=t,this.router=i,this.isLoading=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadTopics()}},{key:"mapTranslate",value:function(e){return"LETTERS.CREATE_CONTENT.".concat(e)}},{key:"onLinkSelect",value:function(e){this.router.navigate(["/letters/create"],{state:{title:e.displayName}})}},{key:"loadTopics",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.lettersService.getTopics(this.topicType);case 3:this.topics=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.prev=8,this.isLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[0,6,8,11]])})))}}]),e}()).\u0275fac=function(e){return new(e||ae)(T.Qb(I),T.Qb(h.c))},ae.\u0275cmp=T.Kb({type:ae,selectors:[["j-letters-create-group"]],inputs:{topicType:"topicType"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"letters-create-group"],["class","letters-create-group__button p2",3,"click",4,"ngFor","ngForOf"],[1,"letters-create-group__button","p2",3,"click"],["inlineSVG","/assets/icons/letters/next.svg",1,"d-inline-block","ml-3"],[3,"theme"]],template:function(e,t){1&e&&(T.Rc(0,ne,6,4,"ng-container",0),T.Rc(1,se,2,2,"ng-container",0)),2&e&&(T.uc("ngIf",!t.isLoading),T.Ab(1),T.uc("ngIf",t.isLoading))},directives:[s.u,s.t,F.a,o.a],pipes:[V.d],styles:["[_nghost-%COMP%]{display:block}.letters-create-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:1.25rem 1rem}.letters-create-group[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:1rem}.letters-create-group__button[_ngcontent-%COMP%]{display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;display:-webkit-box;display:flex;padding:0;text-align:left;width:100%;-webkit-box-align:baseline;align-items:baseline;-webkit-box-pack:justify;justify-content:space-between;color:#1a1c1f;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.letters-create-group__button[_ngcontent-%COMP%]:hover{color:#ef5630}.letters-create-group__button[_ngcontent-%COMP%] + .letters-create-group__button[_ngcontent-%COMP%]{margin-top:1rem}"]}),ae),le=i("itXk"),ue=i("L+ju"),de=i("1kSV"),be=i("l/gM"),he=((oe=function(){function e(t){_classCallCheck(this,e),this.modal=t}return _createClass(e,[{key:"onClose",value:function(){this.modal.dismiss()}},{key:"onSubmit",value:function(e){this.modal.close(e)}},{key:"ngOnInit",value:function(){}},{key:"mapTranslate",value:function(e){return"LETTERS.CERTIFICATES.MODAL.".concat(e)}}]),e}()).\u0275fac=function(e){return new(e||oe)(T.Qb(de.a))},oe.\u0275cmp=T.Kb({type:oe,selectors:[["j-letters-certificates-modal"]],decls:5,vars:5,consts:[[1,"modal-body","px-4","pt-4","pb-0"],[3,"hideBorders","submitLabel","closed","submitted"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"h5"),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Vb(),T.Wb(4,"j-range-input",1),T.ic("closed",(function(e){return t.onClose()}))("submitted",(function(e){return t.onSubmit(e)})),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,3,t.mapTranslate("TITLE"))),T.Ab(2),T.uc("hideBorders",!0)("submitLabel",t.mapTranslate("SUBMIT")))},directives:[be.a],pipes:[V.d],styles:[""]}),oe),pe=i("xErE"),ge=i("VO+5"),fe=i("hsBV"),ve=["accountDropdown"];function me(e,t){if(1&e){var i=T.Xb();T.Wb(0,"button",5),T.ic("click",(function(e){T.Ic(i);var n=t.$implicit;return T.mc(2).onTypeSelect(n)})),T.Rb(1,"span",6),T.Wb(2,"span"),T.Tc(3),T.Vb(),T.Vb()}if(2&e){var n=t.$implicit;T.Ab(3),T.Uc(n.description)}}function Se(e,t){if(1&e&&(T.Wb(0,"div"),T.Rc(1,me,4,1,"button",4),T.Vb()),2&e){var i=T.mc();T.Ab(1),T.uc("ngForOf",i.types)}}var Te=function(){return{height:"138.06px","background-color":"#ECEEF1"}};function ye(e,t){1&e&&(T.Ub(0),T.Rb(1,"ngx-skeleton-loader",7),T.Tb()),2&e&&(T.Ab(1),T.uc("theme",T.yc(1,Te)))}var _e,ke={backdropClass:"backdrop_light",windowClass:"modal_light modal_dictionary",backdrop:"static",centered:!0},Oe=((_e=function(){function e(t,i,n,r,s,a,o){var c=this;_classCallCheck(this,e),this.companyService=t,this.certificatesService=i,this.accountsService=n,this.filesService=r,this.notifierService=s,this.translateService=a,this.modalService=o,this.isLoading=!0,Object(le.a)([this.accountsService.getAccountsList(),this.certificatesService.getCertificateTypes()]).subscribe((function(e){var t=_slicedToArray(e,2),i=t[0],n=t[1];c.mapAccounts(i),c.types=n,c.isLoading=!1}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"mapTranslate",value:function(e){return"LETTERS.CERTIFICATES.".concat(e)}},{key:"onTypeSelect",value:function(e){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.code===m.ACCOUNT_TURNOVER?this.showSertificatesModal(e):this.downloadCertificate(e,this.params);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onAccountSelect",value:function(e){this.params=e.accountType===ue.a.ALL?null:{iban:e.iban}}},{key:"showSertificatesModal",value:function(e){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.modalService.open(he,ke),t.prev=1,t.next=4,i.result;case 4:n=t.sent,this.downloadCertificate(e,Object.assign(Object.assign({},this.params),{dateFrom:Object(C.b)(n.from),dateTo:Object(C.b)(n.to)})),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,this,[[1,8]])})))}},{key:"downloadCertificate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,this.certificatesService.getCertificate(e.code,t);case 3:n=i.sent,this.filesService.downloadFile(n,"".concat(e.description," - ").concat(this.companyService.currentCompany.name,".pdf")),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),this.mapError(i.t0);case 10:case"end":return i.stop()}}),i,this,[[0,7]])})))}},{key:"mapError",value:function(e){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:i=t.sent,n=i.description||i.code||this.translateService.instant(this.mapTranslate("ERROR")),this.notifierService.notify("error",n);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"mapAccounts",value:function(e){var t=this,i=e.filter((function(e){return e.accountType===ue.a.ACCOUNT}));this.accounts=i.length>1?[].concat(_toConsumableArray(i),[{accountType:ue.a.ALL}]):i,setTimeout((function(){t.accountDropdown.selectAccount(t.accounts[t.accounts.length-1])}),0)}}]),e}()).\u0275fac=function(e){return new(e||_e)(T.Qb(E.a),T.Qb(L),T.Qb(pe.a),T.Qb(A.b),T.Qb(ge.c),T.Qb(V.e),T.Qb(de.q))},_e.\u0275cmp=T.Kb({type:_e,selectors:[["j-letters-certificates"]],viewQuery:function(e,t){var i;1&e&&T.Yc(ve,!0),2&e&&T.Ec(i=T.jc())&&(t.accountDropdown=i.first)},decls:8,vars:9,consts:[[1,"letters-create-group"],[3,"isLoading","accounts","isDisabledSelectable","label","selected"],["accountDropdown",""],[4,"ngIf"],["class","letters-certificate__button p2",3,"click",4,"ngFor","ngForOf"],[1,"letters-certificate__button","p2",3,"click"],["inlineSVG","/assets/icons/v2/file-24.svg",1,"d-inline-block","mr-3"],[3,"theme"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"h6"),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Wb(4,"j-account-dropdown",1,2),T.ic("selected",(function(e){return t.onAccountSelect(e)})),T.Vb(),T.Rc(6,Se,2,1,"div",3),T.Rc(7,ye,2,2,"ng-container",3),T.Vb()),2&e&&(T.Ab(2),T.Uc(T.oc(3,7,t.mapTranslate("TITLE"))),T.Ab(2),T.uc("isLoading",t.isLoading)("accounts",t.accounts)("isDisabledSelectable",!0)("label",t.mapTranslate("ACCOUNTS_DROPDOWN")),T.Ab(2),T.uc("ngIf",!t.isLoading),T.Ab(1),T.uc("ngIf",t.isLoading))},directives:[fe.a,s.u,s.t,F.a,o.a],pipes:[V.d],styles:["[_nghost-%COMP%]{display:block}.letters-create-group[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:1.25rem 1rem}.letters-create-group[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:1rem}.letters-certificate__button[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:0;display:-webkit-box;display:flex;color:#1586bb;-webkit-box-align:center;align-items:center;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.letters-certificate__button[_ngcontent-%COMP%]:hover{color:#ef5630}.letters-certificate__button[_ngcontent-%COMP%] + .letters-certificate__button[_ngcontent-%COMP%]{margin-top:1rem}"]}),_e);function we(e,t){1&e&&T.Rb(0,"j-letters-certificates")}var Ce,Ee=((Ce=function(){function e(t){var i=this;_classCallCheck(this,e),this.certificatesService=t,this.closed=new T.n,this.LETTER_TOPIC_TYPE=f,this.subscription=new te.a,this.isCertificatesShown=!1;var n=this.certificatesService.getCertificateTypes().subscribe((function(e){var t;i.isCertificatesShown=(null===(t=e)||void 0===t?void 0:t.length)>0}));this.subscription.add(n)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"mapTranslate",value:function(e){return"LETTERS.CREATE_CONTENT.".concat(e)}},{key:"onClose",value:function(){this.closed.emit()}}]),e}()).\u0275fac=function(e){return new(e||Ce)(T.Qb(L))},Ce.\u0275cmp=T.Kb({type:Ce,selectors:[["j-letters-create-content"]],outputs:{closed:"closed"},decls:10,vars:6,consts:[[1,"letters-create-content"],[1,"letters-create-content__header"],[1,"m-0"],["inlineSVG","/assets/icons/letters/close.svg",1,"letters-create-content__close",3,"click"],[1,"letters-create-content__body"],[4,"ngIf"],[1,"mt-3",3,"topicType"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"div",1),T.Wb(2,"h5",2),T.Tc(3),T.nc(4,"translate"),T.Vb(),T.Wb(5,"button",3),T.ic("click",(function(e){return t.onClose()})),T.Vb(),T.Vb(),T.Wb(6,"div",4),T.Rc(7,we,1,0,"j-letters-certificates",5),T.Rb(8,"j-letters-create-group",6),T.Rb(9,"j-letters-create-group",6),T.Vb(),T.Vb()),2&e&&(T.Ab(3),T.Uc(T.oc(4,4,t.mapTranslate("TITLE"))),T.Ab(4),T.uc("ngIf",t.isCertificatesShown),T.Ab(1),T.uc("topicType",t.LETTER_TOPIC_TYPE.CERTIFICATE),T.Ab(1),T.uc("topicType",t.LETTER_TOPIC_TYPE.APPLICATION))},directives:[F.a,s.u,ce,Oe],pipes:[V.d],styles:["[_nghost-%COMP%]{margin:-1rem;display:block}.letters-create-content__close[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;color:#666c72;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.letters-create-content__close[_ngcontent-%COMP%]:hover{color:#ef5630}.letters-create-content__header[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between}.letters-create-content__body[_ngcontent-%COMP%]{padding:1.5rem}"]}),Ce);function Ae(e,t){if(1&e){var i=T.Xb();T.Wb(0,"j-letters-details-content",5),T.ic("closed",(function(e){return T.Ic(i),T.mc().hideAside()})),T.Vb()}if(2&e){var n=T.mc();T.uc("letter",n.letter)}}function xe(e,t){if(1&e){var i=T.Xb();T.Wb(0,"j-letters-create-content",6),T.ic("closed",(function(e){return T.Ic(i),T.mc().hideAside()})),T.Vb()}}var Re,Ie=((Re=function(){function e(t){_classCallCheck(this,e),this.document=t,this.isContentShown=!1,this.isDetailsShowing=!1,this.isCreateShowing=!1,this.closed=new T.n}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.document.body.classList.remove("overflow-hidden")}},{key:"showDetails",value:function(e){this.isDetailsShowing=!0,this.isCreateShowing=!1,this.letter=e,this.showContent()}},{key:"showCreate",value:function(){this.isCreateShowing=!0,this.isDetailsShowing=!1,this.showContent()}},{key:"hideAside",value:function(){this.letter=null,this.isCreateShowing=!1,this.isDetailsShowing=!1,this.document.body.classList.remove("overflow-hidden"),this.isContentShown=!1,this.closed.emit()}},{key:"showContent",value:function(){this.document.body.classList.add("overflow-hidden"),this.isContentShown=!0}}]),e}()).\u0275fac=function(e){return new(e||Re)(T.Qb(s.e))},Re.\u0275cmp=T.Kb({type:Re,selectors:[["j-letters-aside"]],outputs:{closed:"closed"},decls:5,vars:4,consts:[[1,"f-page-wrapper","is-shown"],[1,"f-page-backdrop",3,"click"],[1,"f-page-content","f-page-content--gray","f-page-content--quarter","is-shown","letters-aside"],[3,"letter","closed",4,"ngIf"],[3,"closed",4,"ngIf"],[3,"letter","closed"],[3,"closed"]],template:function(e,t){1&e&&(T.Wb(0,"section",0),T.Wb(1,"div",1),T.ic("click",(function(e){return t.hideAside()})),T.Vb(),T.Wb(2,"section",2),T.Rc(3,Ae,1,1,"j-letters-details-content",3),T.Rc(4,xe,1,0,"j-letters-create-content",4),T.Vb(),T.Vb()),2&e&&(T.uc("@wrapper",t.isContentShown?"shown":"hidden"),T.Ab(2),T.uc("@content",t.isContentShown?"shown":"hidden"),T.Ab(1),T.uc("ngIf",t.isDetailsShowing),T.Ab(1),T.uc("ngIf",t.isCreateShowing))},directives:[s.u,ee,Ee],styles:[".letters-aside[_ngcontent-%COMP%]{padding:1rem;top:62px}@media(min-width:960px){.letters-aside[_ngcontent-%COMP%]{top:98px}}@media(min-width:1280px){.letters-aside[_ngcontent-%COMP%]{top:0}}"],data:{animation:[Object(S.n)("wrapper",[Object(S.k)("shown",Object(S.l)({transform:"scale(1)",visibility:"visible",opacity:"1"})),Object(S.k)("hidden",Object(S.l)({transform:"scale(0.9)",visibility:"hidden",opacity:"0"})),Object(S.m)("shown<=>hidden",Object(S.e)("250ms"))]),Object(S.n)("content",[Object(S.k)("shown",Object(S.l)({right:"0%"})),Object(S.k)("hidden",Object(S.l)({right:"-25%"})),Object(S.m)("shown<=>hidden",Object(S.e)("500ms ease-in-out"))])]}}),Re),Le=i("570E"),Fe=i("S1F0"),De=i("oKsb"),je=i("fvpk"),Pe=i("lJxs"),Ne=i("TwVa"),Ve=i("h7tf"),Me=i("9odQ"),We=i("LFY/"),Ue=i("M6pS");function Be(e,t){if(1&e&&(T.Ub(0),T.Wb(1,"form",5),T.Sb(2,6),T.Sb(3,6),T.Sb(4,6),T.Sb(5,6),T.Vb(),T.Tb()),2&e){var i=T.mc(),n=T.Fc(3),r=T.Fc(5),s=T.Fc(7),a=T.Fc(9);T.Ab(1),T.uc("formGroup",i.form),T.Ab(1),T.uc("ngTemplateOutlet",n),T.Ab(1),T.uc("ngTemplateOutlet",r),T.Ab(1),T.uc("ngTemplateOutlet",s),T.Ab(1),T.uc("ngTemplateOutlet",a)}}var Ge=function(){return{height:"56px","background-color":"#ECEEF1"}},Qe=function(){return{height:"335px","background-color":"#ECEEF1"}},Xe=function(){return{"margin-bottom":"50px",width:"50%",height:"32px","background-color":"#ECEEF1"}};function ze(e,t){if(1&e&&(T.Wb(0,"div"),T.Rb(1,"ngx-skeleton-loader",7),T.Rb(2,"ngx-skeleton-loader",7),T.Rb(3,"ngx-skeleton-loader",7),T.Sb(4,6),T.Wb(5,"div",8),T.Rb(6,"ngx-skeleton-loader",7),T.Vb(),T.Vb()),2&e){T.mc();var i=T.Fc(7);T.Ab(1),T.uc("theme",T.yc(5,Ge)),T.Ab(1),T.uc("theme",T.yc(6,Qe)),T.Ab(1),T.uc("theme",T.yc(7,Xe)),T.Ab(1),T.uc("ngTemplateOutlet",i),T.Ab(2),T.uc("theme",T.yc(8,Ge))}}function He(e,t){if(1&e&&(T.Wb(0,"span",14),T.Tc(1),T.Vb()),2&e){var i=t.$implicit;T.Ab(1),T.Vc(" ",i," ")}}function $e(e,t){if(1&e){var i=T.Xb();T.Wb(0,"div",9),T.Wb(1,"j-dropdown-input",10,11),T.ic("selected",(function(e){return T.Ic(i),T.mc().onTitleSelect(e)})),T.Rc(3,He,2,1,"ng-template",null,12,T.Sc),T.Vb(),T.Vb(),T.Wb(5,"div",9),T.Rb(6,"j-input",13),T.nc(7,"async"),T.Vb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("options",n.topics)("hasError",n.f.title.invalid&&n.isSubmitted)("selectedItem",n.f.title.value)("label",n.mapTranslate("TITLE")),T.Ab(5),T.uc("label",n.mapTranslate("BODY"))("inputExtra",T.oc(7,11,n.bodyLengthMessage$))("formControl",n.f.body)("hasError",n.f.body.invalid&&n.isSubmitted)("errorText",n.mapBodyErrors())("maxLength",n.bodyMaxLength)("isClearable",!1)}}function Ye(e,t){if(1&e&&(T.Wb(0,"div",23),T.Tc(1),T.nc(2,"translate"),T.Vb()),2&e){var i=T.mc(2);T.Ab(1),T.Vc(" ",T.oc(2,1,i.mapTranslate("MAX_FILES_REACHED"))," ")}}var Ke=function(e){return{acceptedFormats:e}};function Ze(e,t){if(1&e){var i=T.Xb();T.Wb(0,"div",15),T.Wb(1,"div",16),T.Wb(2,"input",17),T.ic("change",(function(e){return T.Ic(i),T.mc().onAddFile(e)})),T.Vb(),T.Wb(3,"label",18),T.Rb(4,"span",19),T.Wb(5,"span"),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Vb(),T.Wb(8,"span",20),T.Tc(9),T.nc(10,"translate"),T.Vb(),T.Vb(),T.Wb(11,"j-uploading-files",21),T.ic("updated",(function(e){return T.Ic(i),T.mc().onUploadingFilesUpdate(e)})),T.Vb(),T.Rc(12,Ye,3,3,"div",22),T.Vb()}if(2&e){var n=T.mc();T.Ab(2),T.uc("formControl",n.f.uploadModel)("accept",n.acceptedFormats),T.Ab(4),T.Vc(" ",T.oc(7,9,n.mapTranslate("ADD_FILE"))," "),T.Ab(3),T.Vc(" ",T.pc(10,11,n.mapTranslate("ADD_FILE_DESCRIPTION"),T.zc(14,Ke,n.acceptedFormats))," "),T.Ab(2),T.uc("isLoading",n.isLoading)("acceptedFormats",n.acceptedFormats)("uploadingFiles",n.uploadingFiles)("maxSize",n.maxSize),T.Ab(1),T.uc("ngIf",(null==n.uploadingFiles?null:n.uploadingFiles.length)>10)}}function Je(e,t){if(1&e&&(T.Wb(0,"div",24),T.Rb(1,"span",25),T.Wb(2,"span"),T.Tc(3),T.nc(4,"translate"),T.Vb(),T.Vb()),2&e){var i=T.mc();T.Ab(3),T.Vc(" ",T.oc(4,1,i.mapTranslate("INFO"))," ")}}function qe(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"button",27),T.ic("click",(function(e){return T.Ic(i),T.mc(2).edit()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()}if(2&e){var n=T.mc(2);T.Ab(1),T.uc("jLoadingInverted",!0)("disabled",n.isSubmitting||(null==n.uploadingFiles?null:n.uploadingFiles.length)>10)("jLoading",n.isSubmitting),T.Ab(1),T.Vc(" ",T.oc(3,4,n.mapTranslate("SAVE_EDITING"))," ")}}function et(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"button",28),T.ic("click",(function(e){return T.Ic(i),T.mc(2).saveToDraft()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()}if(2&e){var n=T.mc(2);T.Ab(1),T.uc("disabled",n.isSubmitting||(null==n.uploadingFiles?null:n.uploadingFiles.length)>10)("jLoading",n.isSubmitting)("jLoadingInverted",!0),T.Ab(1),T.Vc(" ",T.oc(3,4,n.mapTranslate("SAVE_TO_DRAFT"))," ")}}function tt(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"button",29),T.ic("click",(function(e){return T.Ic(i),T.mc(2).createAndSign()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()}if(2&e){var n=T.mc(2);T.Ab(1),T.uc("disabled",n.isSubmitting||(null==n.uploadingFiles?null:n.uploadingFiles.length)>10)("jLoading",n.isSubmitting),T.Ab(1),T.Vc(" ",T.oc(3,3,n.mapTranslate(n.createAndSignLabel))," ")}}function it(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"button",29),T.ic("click",(function(e){return T.Ic(i),T.mc(2).createAndSendForSign()})),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Tb()}if(2&e){var n=T.mc(2);T.Ab(1),T.uc("disabled",n.isSubmitting||(null==n.uploadingFiles?null:n.uploadingFiles.length)>10)("jLoading",n.isSubmitting),T.Ab(1),T.Vc(" ",T.oc(3,3,n.mapTranslate("CREATE_AND_SEND_FOR_SIGN"))," ")}}function nt(e,t){if(1&e&&(T.Wb(0,"div",26),T.Rc(1,qe,4,6,"ng-container",0),T.Rc(2,et,4,6,"ng-container",0),T.Rc(3,tt,4,5,"ng-container",0),T.Rc(4,it,4,5,"ng-container",0),T.Vb()),2&e){var i=T.mc();T.Ab(1),T.uc("ngIf",i.isEditing),T.Ab(1),T.uc("ngIf",!i.isEditing),T.Ab(1),T.uc("ngIf",i.canSendAndSign),T.Ab(1),T.uc("ngIf",i.canSendOnly)}}var rt,st,at=function(e){return e.SAVED_TO_DRAFT="NOTIFICATIONS.SAVED_TO_DRAFT",e.SENT_FOR_SIGN="NOTIFICATIONS.SENT_FOR_SIGN",e.SAVED_EDITING="NOTIFICATIONS.SAVED_EDITING",e.SIGNED="NOTIFICATIONS.SIGNED",e.SAVED_TO_DRAFT_ERROR="NOTIFICATIONS.SAVED_TO_DRAFT_ERROR",e.SENT_FOR_SIGN_ERROR="NOTIFICATIONS.SENT_FOR_SIGN_ERROR",e.SAVED_EDITING_ERROR="NOTIFICATIONS.SAVED_EDITING_ERROR",e.SIGNED_ERROR="NOTIFICATIONS.SIGNED_ERROR",e}({}),ot=((st=function(){function e(t,i,n,r,s,a,o){var c=this;_classCallCheck(this,e),this.route=t,this.router=i,this.lettersService=n,this.companyService=r,this.filesService=s,this.notifierService=a,this.translateService=o,this.acceptedFormats=".doc, .docx, .pdf, .jpg, .jpeg, .png, .xls, .xlsx",this.maxSize=5e6,this.isSubmitted=!1,this.isLoading=!1,this.isSubmitting=!1,this.isEditing=!1,this.uploadingFiles=[],this.bodyMaxLength=1e3,this.bodyLengthMessage$=new k.a("0/".concat(this.bodyMaxLength)),this.subscription=new te.a;var l=Object(le.a)([this.route.paramMap.pipe(Object(Pe.a)((function(){return window.history.state}))),this.route.params]).subscribe((function(e){var t=_slicedToArray(e,2),i=t[0],n=t[1];i.letter?(c.isEditing=!0,c.loadEditLetterByBody(i.letter,i.topics,i.files)):n.id?(c.isEditing=!0,c.loadEditLetterById(n.id)):c.loadNewLetter(i.title)}));this.subscription.add(l),this.createAndSignLabel=this.companyService.isSecondaryAuthority()?"SIGN":"CREATE_AND_SIGN"}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.lettersService.clearFiles(),this.subscription.unsubscribe()}},{key:"loadEditLetter",value:function(e){var t=this;this.originalLetter=e,setTimeout((function(){var i,n=e.id,r=e.title,s=e.body;t.form.setValue({id:n,title:r,body:s,uploadModel:null}),(null===(i=e.files)||void 0===i?void 0:i.length)>0&&(t.uploadingFiles=e.files.map((function(e){return{isLoading:!1,file:e}})))}),0)}},{key:"loadEditLetterByBody",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.uploadingFiles=i,this.topics=t,this.loadEditLetter(e),this.initForm(e);case 1:case"end":return n.stop()}}),n,this)})))}},{key:"loadEditLetterById",value:function(e){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.prev=1,t.next=4,this.lettersService.getById(e);case 4:return i=t.sent,t.next=7,this.loadTopics();case 7:this.loadEditLetter(i),this.initForm(i),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(1);case 13:return t.prev=13,this.isLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[1,11,13,16]])})))}},{key:"loadNewLetter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.prev=1,t.next=4,this.loadTopics();case 4:this.initForm({title:e}),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return t.prev=9,this.isLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[1,7,9,12]])})))}},{key:"loadTopics",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lettersService.getTopicValues();case 2:this.topics=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"initForm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i={id:t.id||null,title:t.title||"",body:t.body||""},n=i.id,r=i.title,s=i.body;this.form=new a.k({id:new a.h(n),title:new a.h(r,a.H.required),body:new a.h(s,[a.H.required,a.H.maxLength(this.bodyMaxLength)]),uploadModel:new a.h("")});var o=this.form.valueChanges.subscribe((function(t){e.isSubmitted=!1})),c=this.f.body.valueChanges.subscribe((function(t){e.bodyLengthMessage$.next("".concat(t.length,"/").concat(e.bodyMaxLength))}));this.subscription.add(c),this.subscription.add(o)}},{key:"prepareCreate",value:function(){return this.isSubmitted=!0,!this.form.invalid&&(this.filesService.hasLoadingFiles(this.uploadingFiles)?(this.notifierService.notify("default",this.translateService.instant("FILES.PLEASE_WAIT")),!1):(this.filesService.hasErroredFiles(this.uploadingFiles)&&this.notifierService.notify("default",this.translateService.instant("FILES.HAS_ERRORED_FILES")),!0))}},{key:"saveToDraft",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSubmitting){e.next=12;break}return this.isSubmitting=!0,e.prev=2,e.next=5,this.createDraft();case 5:t=e.sent,this.showNotification(at.SAVED_TO_DRAFT),this.router.navigate(["/letters/drafts"],{state:{highlighted:t.id}}),this.isSubmitting=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.showNotification(at.SAVED_TO_DRAFT_ERROR,"error"),this.isSubmitting=!1;case 12:case"end":return e.stop()}}),e,this,[[2,9]])})))}},{key:"createAndSendForSign",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSubmitting||!this.prepareCreate()){e.next=12;break}return this.isSubmitting=!0,e.prev=2,e.next=5,this.lettersService.create(Object.assign(Object.assign({},this.mapLetterBody()),{statusCode:Ne.f.ON_SIGN}));case 5:t=e.sent,this.showNotification(at.SENT_FOR_SIGN),this.router.navigate(["/letters/outbox/on-sign"],{state:{highlighted:t.id}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.showNotification(at.SENT_FOR_SIGN_ERROR,"error"),this.isSubmitting=!1;case 12:case"end":return e.stop()}}),e,this,[[2,9]])})))}},{key:"createDraftAndNavigate",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createDraft();case 3:this.originalLetter=e.sent,this.router.navigate(["edit",this.originalLetter.id],{relativeTo:this.route.parent,state:{letter:this.originalLetter,topics:this.topics,files:this.uploadingFiles}}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"createAndSign",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSubmitting||!this.prepareCreate()){e.next=14;break}return this.isSubmitting=!0,e.prev=2,e.next=5,this.createDraftAndNavigate();case 5:return e.next=7,this.lettersService.sign(this.originalLetter.id);case 7:this.showNotification(at.SIGNED),this.companyService.isSecondaryAuthority()?this.router.navigate(["/letters/outbox/on-sign"],{state:{highlighted:this.originalLetter.id}}):this.router.navigate(["/letters/outbox/sent"],{state:{highlighted:this.originalLetter.id}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.showNotification(at.SIGNED_ERROR,"error"),this.isSubmitting=!1;case 14:case"end":return e.stop()}}),e,this,[[2,11]])})))}},{key:"edit",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isSubmitting=!0,e.prev=1,e.next=4,this.lettersService.edit(Object.assign(Object.assign({},this.originalLetter),this.mapLetterBody()));case 4:this.showNotification(at.SAVED_EDITING),this.router.navigate(["/letters/drafts"],{state:{highlighted:this.originalLetter.id}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.showNotification(at.SAVED_EDITING_ERROR,"error"),this.isSubmitting=!1;case 11:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"createDraft",value:function(){return this.lettersService.create(Object.assign(Object.assign({},this.mapLetterBody()),{statusCode:Ne.f.DRAFT}))}},{key:"mapTranslate",value:function(e){return"LETTERS.CREATE.".concat(e)}},{key:"mapBodyErrors",value:function(){return this.f.body.errors?this.f.body.errors.maxlength?"ERRORS.MAX_LENGTH":void 0:null}},{key:"onTitleSelect",value:function(e){this.f.title.setValue(e)}},{key:"onAddFile",value:function(e){var t,i;(null===(i=null===(t=e)||void 0===t?void 0:t.target)||void 0===i?void 0:i.files)&&(this.lettersService.onFileDrop(e.target.files),this.f.uploadModel.setValue(null))}},{key:"onUploadingFilesUpdate",value:function(e){this.uploadingFiles=e}},{key:"showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=this.mapTranslate(e),n=this.translateService.instant(i);this.notifierService.notify(t,n)}},{key:"mapLetterBody",value:function(){return Object.assign(Object.assign({},this.form.getRawValue()),{fileIds:this.uploadingFiles.filter((function(e){var t;return!e.error&&(null===(t=e.file)||void 0===t?void 0:t.id)})).map((function(e){return e.file.id}))})}},{key:"f",get:function(){return this.form.controls}},{key:"canSendAndSign",get:function(){return this.companyService.isSecondaryAuthority()||this.companyService.isPrimaryAuthority()&&this.companyService.isSingleSignScheme()}},{key:"canSendOnly",get:function(){return this.companyService.isNoSignAuthority()||this.companyService.isPrimaryAuthority()&&this.companyService.isMultipleSignScheme()}}]),e}()).\u0275fac=function(e){return new(e||st)(T.Qb(h.a),T.Qb(h.c),T.Qb(I),T.Qb(E.a),T.Qb(A.b),T.Qb(ge.c),T.Qb(V.e))},st.\u0275cmp=T.Kb({type:st,selectors:[["j-letters-create-form"]],decls:10,vars:2,consts:[[4,"ngIf"],["formTemplate",""],["filesTemplate",""],["infoTemplate",""],["submitTemplate",""],[1,"letters-create",3,"formGroup"],[3,"ngTemplateOutlet"],[3,"theme"],[1,"form-footer","form-footer--bordered"],[1,"form-group"],[3,"options","hasError","selectedItem","label","selected"],["titleDropdown",""],["optionTemplate",""],["type","textarea","inputClass","j-input--large-textarea",3,"label","inputExtra","formControl","hasError","errorText","maxLength","isClearable"],[1,"py-2"],[1,"letters-create__files"],[1,"j-input-file"],["id","fileUpload","type","file","multiple","true",3,"formControl","accept","change"],["for","fileUpload",1,"link-blue"],["inlineSVG","/assets/icons/letters/attachment.svg",1,"mr-2"],[1,"text-muted"],[3,"isLoading","acceptedFormats","uploadingFiles","maxSize","updated"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],[1,"form-footer","letters-create__info","form-footer--bordered","text-muted"],["inlineSVG","/assets/icons/letters/info.svg",1,"mr-3"],[1,"form-footer","form-footer--bordered","letter-create__submit"],["type","button",1,"btn","btn-link",3,"jLoadingInverted","disabled","jLoading","click"],["type","button",1,"btn","btn-link",3,"disabled","jLoading","jLoadingInverted","click"],["type","submit",1,"btn","btn-primary",3,"disabled","jLoading","click"]],template:function(e,t){1&e&&(T.Rc(0,Be,6,5,"ng-container",0),T.Rc(1,ze,7,9,"div",0),T.Rc(2,$e,8,13,"ng-template",null,1,T.Sc),T.Rc(4,Ze,13,16,"ng-template",null,2,T.Sc),T.Rc(6,Je,5,3,"ng-template",null,3,T.Sc),T.Rc(8,nt,5,4,"ng-template",null,4,T.Sc)),2&e&&(T.uc("ngIf",t.form&&!t.isLoading),T.Ab(1),T.uc("ngIf",t.isLoading))},directives:[s.u,a.J,a.u,a.l,s.B,o.a,Ve.a,Me.b,a.t,a.i,a.c,F.a,We.a,Ue.a],pipes:[s.b,V.d],styles:[".letter-create__submit[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:reverse;flex-direction:column-reverse}.letter-create__submit[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:1rem;margin-left:0}@media(min-width:1280px){.letter-create__submit[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.letter-create__submit[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-top:0;margin-left:1rem}}.letter-create__submit[_ngcontent-%COMP%]   ngx-skeleton-loader[_ngcontent-%COMP%]{width:50%}.letters-create__info[_ngcontent-%COMP%]{-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center;padding:1.5rem 0}"]}),st),ct=((rt=function(){function e(t,i,n){var r=this;_classCallCheck(this,e),this.route=t,this.router=i,this.lettersService=n,this.subscription=new te.a,this.lettersService.lastLettersListPath$.subscribe((function(e){r.lastLetterListPath=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.route.params.subscribe((function(t){e.title=t.id?"LETTERS.CREATE.EDIT":"LETTERS.CREATE.TITLE"}));this.subscription.add(t)}},{key:"ngOnDestroy",value:function(){this.lettersService.clearFiles(),this.subscription.unsubscribe()}},{key:"onFileDropped",value:function(e){this.lettersService.onFileDrop(e)}},{key:"onClose",value:function(){this.lettersService.clearFiles(),this.router.navigate(["/letters",this.lastLetterListPath])}}]),e}()).\u0275fac=function(e){return new(e||rt)(T.Qb(h.a),T.Qb(h.c),T.Qb(I))},rt.\u0275cmp=T.Kb({type:rt,selectors:[["j-letters-create"]],decls:9,vars:3,consts:[["jDnd","",1,"dnd-wrap",3,"fileDropped"],["closePosition","outside","colsClassList","offset-lg-1 col-lg-10 offset-xl-2 col-xl-8","headerClassList","bg-white",3,"closed"],[1,"account-header"],[1,"f-page-title"]],template:function(e,t){1&e&&(T.Wb(0,"section",0),T.ic("fileDropped",(function(e){return t.onFileDropped(e)})),T.Wb(1,"f-page",1),T.ic("closed",(function(e){return t.onClose()})),T.Wb(2,"f-page-header"),T.Wb(3,"section",2),T.Wb(4,"h1",3),T.Tc(5),T.nc(6,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Wb(7,"f-page-body"),T.Rb(8,"j-letters-create-form"),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(5),T.Vc("",T.oc(6,1,t.title)," "))},directives:[Le.a,Fe.a,De.a,je.a,ot],pipes:[V.d],styles:[".dnd-wrap[_ngcontent-%COMP%]{-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.dnd-wrap.fileover[_ngcontent-%COMP%]{opacity:.5}"]}),rt),lt=i("bsP8"),ut=i("paXB"),dt=i("7/bn"),bt=i("oMXN"),ht=i("EiG8"),pt=i("zdqJ");function gt(e,t){if(1&e&&(T.Wb(0,"span",10),T.Tc(1),T.Vb()),2&e){var i=T.mc(2).$implicit;T.Db(i.badgeClass),T.Ab(1),T.Uc(i.badge)}}function ft(e,t){1&e&&(T.Wb(0,"span",11),T.Rb(1,"span",12),T.Vb()),2&e&&(T.Ab(1),T.uc("jLoading",!0))}function vt(e,t){if(1&e&&(T.Ub(0),T.Rc(1,gt,2,3,"span",8),T.Rc(2,ft,2,1,"span",9),T.Tb()),2&e){var i=T.mc().$implicit;T.Ab(1),T.uc("ngIf",0!=i.badge),T.Ab(1),T.uc("ngIf",null==i.badge)}}function mt(e,t){if(1&e&&(T.Wb(0,"a",6),T.Wb(1,"span"),T.Tc(2),T.nc(3,"translate"),T.Vb(),T.Rc(4,vt,3,2,"ng-container",7),T.Vb()),2&e){var i=t.$implicit,n=T.mc();T.uc("routerLink",i.url),T.Ab(2),T.Uc(T.oc(3,3,i.label)),T.Ab(2),T.uc("ngIf",n.isBadgesShown(i.id))}}var St,Tt=((St=function(){function e(t,i){var n=this;_classCallCheck(this,e),this.navService=t,this.route=i,this.letterTypes=[{id:"outbox",label:"LETTERS.TYPES.OUTBOX",url:"/letters/outbox",badge:null,badgeClass:"badge-primary"},{id:"inbox",label:"LETTERS.TYPES.INBOX",url:"/letters/inbox",badge:null,badgeClass:"badge-primary"},{id:"draft",label:"LETTERS.TYPES.DRAFT",url:"/letters/drafts",badge:null,badgeClass:"badge-light"}],this.createShown=new T.n,this.subscription=new te.a,this.route.data.subscribe((function(e){n.isOutboxRoute=e.isOutbox||!1})),this.subscription.add(this.navService.getLetterBadges().subscribe((function(e){n.setBadge("outbox",e.onSignForMe),n.setBadge("inbox",e.unread),n.setBadge("draft",e.draft)})))}return _createClass(e,[{key:"isBadgesShown",value:function(e){switch(e){case"inbox":case"draft":return!0;case"outbox":return!this.isOutboxRoute}}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"setBadge",value:function(e,t){this.letterTypes.find((function(t){return t.id===e})).badge=t}},{key:"onCreateShown",value:function(){this.createShown.emit()}}]),e}()).\u0275fac=function(e){return new(e||St)(T.Qb(lt.a),T.Qb(h.a))},St.\u0275cmp=T.Kb({type:St,selectors:[["j-letters-nav"]],outputs:{createShown:"createShown"},decls:8,vars:4,consts:[[1,"j-tabs"],[1,"j-tabs__list"],["class","j-tabs__item","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["jTour","LETTERS.NEW","jTourPosition","bottom",1,"ml-auto","btn","btn-link","j-tabs__add",3,"click"],["inlineSVG","/assets/icons/contracts/add.svg",1,"j-tabs__add-icon"],[1,"d-none","d-md-block"],["routerLinkActive","active",1,"j-tabs__item",3,"routerLink"],[4,"ngIf"],["class","j-tabs__badge badge",3,"class",4,"ngIf"],["class","j-tabs__badge badge badge-light",4,"ngIf"],[1,"j-tabs__badge","badge"],[1,"j-tabs__badge","badge","badge-light"],[3,"jLoading"]],template:function(e,t){1&e&&(T.Wb(0,"div",0),T.Wb(1,"nav",1),T.Rc(2,mt,5,5,"a",2),T.Wb(3,"button",3),T.ic("click",(function(e){return t.onCreateShown()})),T.Rb(4,"span",4),T.Wb(5,"span",5),T.Tc(6),T.nc(7,"translate"),T.Vb(),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(2),T.uc("ngForOf",t.letterTypes),T.Ab(4),T.Uc(T.oc(7,2,"LETTERS.ADD_NEW")))},directives:[s.t,pt.a,F.a,h.f,h.e,s.u,Ue.a],pipes:[V.d],styles:[""]}),St),yt=i("I+WJ"),_t=i("LRne"),kt=i("hJI6"),Ot=i("vZvt");function wt(e,t){if(1&e&&(T.Wb(0,"div",9),T.Tc(1),T.nc(2,"translate"),T.Vb()),2&e){var i=T.mc(2);T.Ab(1),T.Uc(T.oc(2,1,i.mapTranslate("FOR_SIGN")))}}var Ct=function(e){return{$implicit:e}};function Et(e,t){if(1&e&&(T.Wb(0,"div",5),T.Wb(1,"div",6),T.Sb(2,7),T.Rc(3,wt,3,3,"div",8),T.Vb(),T.Sb(4,7),T.Vb()),2&e){var i=t.$implicit,n=T.mc(),r=T.Fc(6),s=T.Fc(8);T.Ab(2),T.uc("ngTemplateOutlet",r)("ngTemplateOutletContext",T.zc(5,Ct,i)),T.Ab(1),T.uc("ngIf",n.isSignable),T.Ab(1),T.uc("ngTemplateOutlet",s)("ngTemplateOutletContext",T.zc(7,Ct,i))}}function At(e,t){if(1&e&&(T.Wb(0,"div",5),T.Sb(1,7),T.Sb(2,7),T.Vb()),2&e){var i=t.$implicit;T.mc();var n=T.Fc(6),r=T.Fc(8);T.Ab(1),T.uc("ngTemplateOutlet",n)("ngTemplateOutletContext",T.zc(4,Ct,i)),T.Ab(1),T.uc("ngTemplateOutlet",r)("ngTemplateOutletContext",T.zc(6,Ct,i))}}function xt(e,t){if(1&e&&(T.Wb(0,"div",10),T.Tc(1),T.nc(2,"async"),T.Vb()),2&e){var i=t.$implicit,n=T.mc();T.Ab(1),T.Vc(" ",T.oc(2,1,n.mapDateText(i))," ")}}function Rt(e,t){if(1&e&&T.Rb(0,"div",15),2&e){var i=T.mc().$implicit;T.uc("jClamp",1)("innerText",null==i?null:i.body)}}function It(e,t){if(1&e&&T.Rb(0,"div",16),2&e){var i=T.mc().$implicit;T.uc("jClamp",1)("innerText",null==i?null:i.body)}}function Lt(e,t){if(1&e&&(T.Wb(0,"article",11),T.Rb(1,"strong",12),T.Rc(2,Rt,1,2,"div",13),T.Rc(3,It,1,2,"div",14),T.Vb()),2&e){var i=t.$implicit;T.Ab(1),T.uc("jClamp",1)("innerText",null==i?null:i.title),T.Ab(1),T.uc("ngIf",!i.hasTour),T.Ab(1),T.uc("ngIf",i.hasTour)}}var Ft,Dt=((Ft=function(){function e(t,i,n,r,s,a){_classCallCheck(this,e),this.lettersService=t,this.router=i,this.route=n,this.navService=r,this.companyService=s,this.translateService=a,this.isDeletable=!1,this.isSelectable=!1,this.isSignable=!1,this.detailsShown=new T.n,this.scrolled=new T.n,this.translatePrefix="LETTERS.LIST",this.urlPath="letters",this.modalPartialTitleFn=this.mapModalPartialTitle.bind(this),this.highlightedFn=this.shouldBeHighlighted.bind(this),this.highlightedTemporarilyFn=this.shouldBeHighlightedTemporarily.bind(this)}return _createClass(e,[{key:"onClick",value:function(e){e.read=!0,e.statusCode===Ne.f.DRAFT?this.router.navigate(["edit",e.id],{relativeTo:this.route.parent}):this.detailsShown.emit(e)}},{key:"onScroll",value:function(){this.scrolled.emit()}},{key:"shouldBeHighlighted",value:function(e){return!e.read}},{key:"shouldBeHighlightedTemporarily",value:function(e){return this.highlighted===e.id}},{key:"mapModalPartialTitle",value:function(e){return"\u2116 ".concat(e.letterNumber,":")}},{key:"onClear",value:function(){this.navService.retrieveLetterBadges()}},{key:"onSign",value:function(){(this.companyService.isSingleSignScheme()||this.companyService.isMultipleSignScheme()&&this.companyService.isPrimaryAuthority())&&this.router.navigate(["sent"],{relativeTo:this.route.parent})}},{key:"mapTranslate",value:function(e){return"".concat(this.translatePrefix,".").concat(e)}},{key:"mapDateText",value:function(e){var t=this.lettersService.mapLetterDate(e);return"string"==typeof t?Object(_t.a)(t):this.translateService.stream(t.key,t.params)}}]),e}()).\u0275fac=function(e){return new(e||Ft)(T.Qb(I),T.Qb(h.c),T.Qb(h.a),T.Qb(lt.a),T.Qb(E.a),T.Qb(V.e))},Ft.\u0275cmp=T.Kb({type:Ft,selectors:[["j-letters-group"]],inputs:{title:"title",list:"list",highlighted:"highlighted",isDeletable:"isDeletable",isSelectable:"isSelectable",isSignable:"isSignable"},outputs:{detailsShown:"detailsShown",scrolled:"scrolled"},decls:9,vars:11,consts:[[3,"list","title","urlPath","translatePrefix","isDeletable","isSelectable","isSignable","isHoverable","partialTitleFn","highlightedFn","highlightedTemporarilyFn","scrolled","clicked","cleared","signed"],["selectableTemplate",""],["defaultTemplate",""],["dateTemplate",""],["contentTemplate",""],[1,"p3","letters-item"],[1,"letters-item__status"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","text-blue",4,"ngIf"],[1,"text-blue"],[1,"letters-item__date","text-muted"],[1,"letters-item__content","p3"],[1,"letters-item__title","text-dark",3,"jClamp","innerText"],["class","text-muted letters-item__body",3,"jClamp","innerText",4,"ngIf"],["class","text-muted letters-item__body","jTour","LETTERS.DETAILS","jTourPosition","bottom",3,"jClamp","innerText",4,"ngIf"],[1,"text-muted","letters-item__body",3,"jClamp","innerText"],["jTour","LETTERS.DETAILS","jTourPosition","bottom",1,"text-muted","letters-item__body",3,"jClamp","innerText"]],template:function(e,t){1&e&&(T.Wb(0,"j-list",0),T.ic("scrolled",(function(e){return t.onScroll()}))("clicked",(function(e){return t.onClick(e)}))("cleared",(function(e){return t.onClear()}))("signed",(function(e){return t.onSign()})),T.Rc(1,Et,5,9,"ng-template",null,1,T.Sc),T.Rc(3,At,3,8,"ng-template",null,2,T.Sc),T.Vb(),T.Rc(5,xt,3,3,"ng-template",null,3,T.Sc),T.Rc(7,Lt,4,4,"ng-template",null,4,T.Sc)),2&e&&T.uc("list",t.list)("title",t.title)("urlPath",t.urlPath)("translatePrefix",t.translatePrefix)("isDeletable",t.isDeletable)("isSelectable",t.isSelectable)("isSignable",t.isSignable)("isHoverable",!0)("partialTitleFn",t.modalPartialTitleFn)("highlightedFn",t.highlightedFn)("highlightedTemporarilyFn",t.highlightedTemporarilyFn)},directives:[kt.a,s.B,s.u,Ot.a,pt.a],pipes:[V.d,s.b],styles:["[_nghost-%COMP%]{display:block;background:#fff}.letters-item[_ngcontent-%COMP%]{display:grid;-webkit-column-gap:16px;-moz-column-gap:16px;column-gap:16px;grid-template-columns:148px minmax(0,1fr)}"]}),Ft),jt=i("4cI0"),Pt=i("lABO"),Nt=function(){return{width:"25%",height:"33px","background-color":"#ECEEF1"}};function Vt(e,t){1&e&&T.Rb(0,"ngx-skeleton-loader",3),2&e&&T.uc("theme",T.yc(1,Nt))}var Mt=function(){return{width:"13%","margin-right":"2%",height:"42px","background-color":"#ECEEF1"}},Wt=function(){return{width:"80%",height:"42px","background-color":"#ECEEF1"}};function Ut(e,t){1&e&&(T.Wb(0,"div"),T.Rb(1,"ngx-skeleton-loader",3),T.Rb(2,"ngx-skeleton-loader",3),T.Vb()),2&e&&(T.Ab(1),T.uc("theme",T.yc(2,Mt)),T.Ab(1),T.uc("theme",T.yc(3,Wt)))}var Bt,Gt=((Bt=function(){function e(){_classCallCheck(this,e),this.hasTitle=!1}return _createClass(e,[{key:"loadingCount",get:function(){return Array(5)}}]),e}()).\u0275fac=function(e){return new(e||Bt)},Bt.\u0275cmp=T.Kb({type:Bt,selectors:[["j-letters-loading"]],inputs:{hasTitle:"hasTitle"},decls:3,vars:2,consts:[[1,"bg-white","p-3"],[3,"theme",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"theme"]],template:function(e,t){1&e&&(T.Wb(0,"section",0),T.Rc(1,Vt,1,2,"ngx-skeleton-loader",1),T.Rc(2,Ut,3,4,"div",2),T.Vb()),2&e&&(T.Ab(1),T.uc("ngIf",t.hasTitle),T.Ab(1),T.uc("ngForOf",t.loadingCount))},directives:[s.u,s.t,o.a],styles:[""]}),Bt);function Qt(e,t){1&e&&T.Rb(0,"j-empty-placeholder",5)}function Xt(e,t){if(1&e){var i=T.Xb();T.Wb(0,"j-error-placeholder",6),T.ic("retried",(function(e){return T.Ic(i),T.mc(2).onRetry()})),T.Vb()}}function zt(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"j-letters-group",1),T.ic("detailsShown",(function(e){return T.Ic(i),T.mc().onDetailsShown(e)})),T.Vb(),T.Wb(2,"j-letters-group",2),T.ic("detailsShown",(function(e){return T.Ic(i),T.mc().onDetailsShown(e)})),T.Vb(),T.Rc(3,Qt,1,0,"j-empty-placeholder",3),T.Rc(4,Xt,1,0,"j-error-placeholder",4),T.Tb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("list",n.onSignForMeList)("highlighted",n.highlighted)("isSignable",!0)("isSelectable",!0)("isDeletable",!0),T.Ab(1),T.uc("list",n.onSignForOthersList)("highlighted",n.highlighted)("title",n.mapTranslate("OTHERS_FOR_SIGN"))("isDeletable",!0),T.Ab(1),T.uc("ngIf",0===n.onSignForMeList.length&&0===n.onSignForOthersList.length&&!n.errorText),T.Ab(1),T.uc("ngIf",n.errorText)}}function Ht(e,t){1&e&&(T.Ub(0),T.Rb(1,"j-letters-loading"),T.Rb(2,"j-letters-loading",7),T.Tb()),2&e&&(T.Ab(2),T.uc("hasTitle",!0))}var $t,Yt=(($t=function(){function e(t,i,n){var r=this;_classCallCheck(this,e),this.lettersService=t,this.navService=i,this.companyService=n,this.retrieved=new T.n,this.detailsShown=new T.n,this.isLoading=!0,this.onSignForMeList=[],this.onSignForOthersList=[],this.lettersSearch={incoming:!1,statusCode:[Ne.f.ON_SIGN],pageSize:1e5},this.errorText=null,this.subscription=new te.a,this.subscription.add(this.companyService.refresh$.subscribe((function(e){var t=_slicedToArray(e,3);t[0],t[1],t[2]&&r.retrieveLetters()})))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"mapTranslate",value:function(e){return"LETTERS.LIST.".concat(e)}},{key:"onDetailsShown",value:function(e){this.detailsShown.emit(e)}},{key:"onRetry",value:function(){this.retrieveLetters()}},{key:"retrieveLetters",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorText=null,this.navService.retrieveLetterBadges(),e.prev=1,e.next=4,Promise.all([this.retrieveOnSignForMe(),this.retrieveOnSignForOthers()]);case 4:this.onSignForMeList.length>0?this.onSignForMeList[0].hasTour=!0:this.onSignForOthersList.length>0&&(this.onSignForOthersList[0].hasTour=!0),this.retrieved.emit({onSignForMe:this.onSignForMeList.length,onSignForOthers:this.onSignForOthersList.length}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.errorText=e.t0.description||e.t0;case 11:return e.prev=11,this.isLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})))}},{key:"retrieveOnSignForMe",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lettersService.getList(Object.assign(Object.assign({},this.lettersSearch),{onSignForMe:!0}));case 2:t=e.sent,this.onSignForMeList=t.items;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"retrieveOnSignForOthers",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lettersService.getList(Object.assign(Object.assign({},this.lettersSearch),{onSignForOthers:!0}));case 2:t=e.sent,this.onSignForOthersList=t.items;case 4:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||$t)(T.Qb(I),T.Qb(lt.a),T.Qb(E.a))},$t.\u0275cmp=T.Kb({type:$t,selectors:[["j-letters-on-sign"]],inputs:{highlighted:"highlighted"},outputs:{retrieved:"retrieved",detailsShown:"detailsShown"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"list","highlighted","isSignable","isSelectable","isDeletable","detailsShown"],[1,"d-block","pt-3",3,"list","highlighted","title","isDeletable","detailsShown"],["class","bg-white","label","LETTERS.EMPTY.FOR_SIGN",4,"ngIf"],["class","bg-white",3,"retried",4,"ngIf"],["label","LETTERS.EMPTY.FOR_SIGN",1,"bg-white"],[1,"bg-white",3,"retried"],[3,"hasTitle"]],template:function(e,t){1&e&&(T.Rc(0,zt,5,11,"ng-container",0),T.Rc(1,Ht,3,1,"ng-container",0)),2&e&&(T.uc("ngIf",!t.isLoading),T.Ab(1),T.uc("ngIf",t.isLoading))},directives:[s.u,Dt,jt.a,Pt.a,Gt],styles:[""]}),$t),Kt=i("y5b2"),Zt=i("jZlK"),Jt=i("u+5l");function qt(e,t){if(1&e){var i=T.Xb();T.Wb(0,"button",5),T.ic("click",(function(e){return T.Ic(i),T.mc(2).onClearPeriod()})),T.nc(1,"translate"),T.Vb()}2&e&&T.uc("ngbTooltip",T.oc(1,1,"SHARED.CLEAR"))}function ei(e,t){if(1&e){var i=T.Xb();T.Wb(0,"section",2),T.Wb(1,"j-filter-period-dropdown",3),T.ic("submitted",(function(e){return T.Ic(i),T.mc().onFilter(e)})),T.Vb(),T.Rc(2,qt,2,3,"button",4),T.Vb()}if(2&e){var n=T.mc();T.Ab(2),T.uc("ngIf",n.currentDates)}}function ti(e,t){if(1&e&&(T.Wb(0,"div",10),T.Tc(1),T.nc(2,"translate"),T.Vb()),2&e){var i=T.mc(2);T.Ab(1),T.Vc(" ",T.oc(2,1,i.mapTranslate("ALL_LOADED"))," ")}}function ii(e,t){if(1&e&&T.Rb(0,"j-empty-placeholder",11),2&e){var i=T.mc(2);T.uc("label",i.currentDates?i.emptyNotFound:i.emptyLabel)}}function ni(e,t){if(1&e){var i=T.Xb();T.Wb(0,"j-error-placeholder",12),T.ic("retried",(function(e){return T.Ic(i),T.mc(2).onRetry()})),T.Vb()}}function ri(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"j-letters-group",6),T.ic("scrolled",(function(e){return T.Ic(i),T.mc().onScroll()}))("detailsShown",(function(e){return T.Ic(i),T.mc().onDetailsShown(e)})),T.Vb(),T.Rc(2,ti,3,3,"div",7),T.Rc(3,ii,1,1,"j-empty-placeholder",8),T.Rc(4,ni,1,0,"j-error-placeholder",9),T.Tb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("list",n.list)("isSignable",n.isSignable)("isSelectable",n.isSelectable)("highlighted",n.highlighted)("isDeletable",n.isDeletable),T.Ab(1),T.uc("ngIf",!n.hasMorePages&&n.list.length>0),T.Ab(1),T.uc("ngIf",0===n.list.length&&!n.errorText),T.Ab(1),T.uc("ngIf",n.errorText)}}function si(e,t){1&e&&(T.Ub(0),T.Rb(1,"j-letters-loading"),T.Tb())}var ai,oi=((ai=function(){function e(t,i,n,r){_classCallCheck(this,e),this.lettersService=t,this.companyService=i,this.navService=n,this.filterService=r,this.isLoading=!0,this.hasMorePages=!0,this.list=[],this.emptyNotFound="LETTERS.EMPTY.NOT_FOUND",this.emptyLabel="LETTERS.EMPTY.DEFAULT",this.isSelectable=!1,this.isSignable=!1,this.isDeletable=!1,this.hasDateFilter=!1,this.retrieved=new T.n,this.detailsShown=new T.n,this.page=1,this.pageSize=10,this.currentDates=null,this.errorText=null,this.subscription=new te.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.filterService.updatePeriod(Kt.d.NONE),this.subscription.add(this.companyService.refresh$.subscribe((function(t){var i=_slicedToArray(t,3);i[0],i[1],i[2]&&e.onClearPeriod()})))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onRetry",value:function(){this.retrieveLetters({page:1})}},{key:"onFilter",value:function(e){this.currentDates=e,this.retrieveLetters({page:1,dateFrom:e.from,dateTo:e.to})}},{key:"onClearPeriod",value:function(){this.currentDates=null,this.filterService.updatePeriod(Kt.d.NONE),this.retrieveLetters({page:1})}},{key:"onScroll",value:function(){!this.isLoading&&this.hasMorePages&&this.retrieveLetters({page:++this.page})}},{key:"onDetailsShown",value:function(e){this.detailsShown.emit(e)}},{key:"mapTranslate",value:function(e){return"LETTERS.LIST.".concat(e)}},{key:"retrieveLetters",value:function(e){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,this.errorText=null,t.prev=1,i=Object.assign(Object.assign(Object.assign({},this.listParams),e),{pageSize:this.pageSize}),t.next=5,this.lettersService.getList(i);case 5:n=t.sent,this.hasMorePages=n.totalCount>e.page*this.pageSize,this.page=e.page,this.list=e.page>1?[].concat(_toConsumableArray(this.list),_toConsumableArray(n.items)):n.items,this.list.length>0&&(this.list[0].hasTour=!0),this.retrieved.emit(this.list.length),this.navService.retrieveLetterBadges(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),this.errorText=t.t0.description||t.t0;case 12:return t.prev=12,this.isLoading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[1,9,12,15]])})))}}]),e}()).\u0275fac=function(e){return new(e||ai)(T.Qb(I),T.Qb(E.a),T.Qb(lt.a),T.Qb(Zt.a))},ai.\u0275cmp=T.Kb({type:ai,selectors:[["j-letters-list-base"]],inputs:{emptyNotFound:"emptyNotFound",emptyLabel:"emptyLabel",highlighted:"highlighted",listParams:"listParams",isSelectable:"isSelectable",isSignable:"isSignable",isDeletable:"isDeletable",hasDateFilter:"hasDateFilter"},outputs:{retrieved:"retrieved",detailsShown:"detailsShown"},decls:3,vars:3,consts:[["class","j-list__filter letters__inbox-filter",4,"ngIf"],[4,"ngIf"],[1,"j-list__filter","letters__inbox-filter"],["placement","left-top",3,"submitted"],["class","letters__clear","tooltipClass","tooltip-light","inlineSVG","/assets/icons/tags-remove.svg",3,"ngbTooltip","click",4,"ngIf"],["tooltipClass","tooltip-light","inlineSVG","/assets/icons/tags-remove.svg",1,"letters__clear",3,"ngbTooltip","click"],[3,"list","isSignable","isSelectable","highlighted","isDeletable","scrolled","detailsShown"],["class","bg-white text-center text-muted py-5 p3",4,"ngIf"],["class","bg-white",3,"label",4,"ngIf"],["class","bg-white",3,"retried",4,"ngIf"],[1,"bg-white","text-center","text-muted","py-5","p3"],[1,"bg-white",3,"label"],[1,"bg-white",3,"retried"]],template:function(e,t){1&e&&(T.Rc(0,ei,3,1,"section",0),T.Rc(1,ri,5,8,"ng-container",1),T.Rc(2,si,2,0,"ng-container",1)),2&e&&(T.uc("ngIf",t.hasDateFilter),T.Ab(1),T.uc("ngIf",!t.isLoading||t.page>1),T.Ab(1),T.uc("ngIf",t.isLoading))},directives:[s.u,Jt.a,F.a,de.E,Dt,jt.a,Pt.a,Gt],pipes:[V.d],styles:[".letters__inbox-filter[_ngcontent-%COMP%]{text-align:right;-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;height:83px}.letters__inbox-filter[_ngcontent-%COMP%]   j-filter-period-dropdown[_ngcontent-%COMP%]{display:inline-block}.letters__clear[_ngcontent-%COMP%]{display:inline-block;font-weight:400;color:#1a1c1f;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;width:24px;height:24px;padding:0;margin-left:8px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}"]}),ai);function ci(e,t){if(1&e){var i=T.Xb();T.Wb(0,"div",2),T.Wb(1,"j-statuses",3),T.ic("selected",(function(e){return T.Ic(i),T.mc().onStatusSelect(e)})),T.Vb(),T.Vb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("statuses",n.statuses)}}function li(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"j-letters-on-sign",4),T.ic("retrieved",(function(e){return T.Ic(i),T.mc().onSignableRetrieved(e)}))("detailsShown",(function(e){return T.Ic(i),T.mc().onDetailsShown(e)})),T.Vb(),T.Tb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("highlighted",n.highlighted)}}function ui(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"j-letters-list-base",5),T.ic("retrieved",(function(e){return T.Ic(i),T.mc().onSentRetrieved(e)}))("detailsShown",(function(e){return T.Ic(i),T.mc().onDetailsShown(e)})),T.Vb(),T.Tb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("listParams",n.sentParams)("highlighted",n.highlighted)}}var di,bi=((di=function(){function e(t,i,n,r,s){var a=this;_classCallCheck(this,e),this.router=t,this.route=i,this.lettersService=n,this.navService=r,this.companyService=s,this.detailsShown=new T.n,this.statuses=[{label:this.mapTranslate("ON_SIGN"),value:g.ON_SIGN,count:null,isSelected:!0,isDisabled:!1},{label:this.mapTranslate("SENT"),value:g.SENT,count:0,isSelected:!1,isDisabled:!1}],this.sentParams={incoming:!1,statusCode:[Ne.f.SENT,Ne.f.READY_TO_SEND]},this.outboxStatus=this.statuses[0].value,this.LETTER_OUTBOX_STATUS=g,this.isOnSignHidden=!1,this.subscription=new te.a,this.subscription.add(Object(le.a)([this.route.data,this.companyService.getAuthorizedPersons()]).subscribe((function(e){var t=_slicedToArray(e,2),i=t[0],n=t[1];a.isOnSignHidden=!!n&&a.companyService.hasOnlyPrimaryAuthorities(n)&&a.companyService.isSingleSignScheme(),a.isOnSignHidden&&i.status===g.ON_SIGN?a.router.navigate(["sent"],{relativeTo:a.route.parent}):(a.onInit(i.status),a.lettersService.lastLettersListPath$.next(i.lastPath))})));var o=this.navService.getLetterBadges().subscribe((function(e){var t=e.onSignForMe,i=e.onSignForOthers,n=t>0;Object.assign(a.statuses.find((function(e){return e.value===g.ON_SIGN})),{count:n?t:i,classList:n?"badge-primary":"badge-light"})}));this.subscription.add(o)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSignableRetrieved",value:function(e){}},{key:"onSentRetrieved",value:function(e){}},{key:"onDetailsShown",value:function(e){this.detailsShown.emit(e)}},{key:"onInit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.ON_SIGN;this.outboxStatus=e,this.statuses=this.statuses.map((function(t){return Object.assign(Object.assign({},t),{isSelected:t.value===e})}))}},{key:"onStatusSelect",value:function(e){var t="";switch(e){case g.ON_SIGN:t="on-sign";break;case g.SENT:t="sent"}this.router.navigate([t],{relativeTo:this.route.parent})}},{key:"mapTranslate",value:function(e){return"LETTERS.STATUSES.".concat(e)}}]),e}()).\u0275fac=function(e){return new(e||di)(T.Qb(h.c),T.Qb(h.a),T.Qb(I),T.Qb(lt.a),T.Qb(E.a))},di.\u0275cmp=T.Kb({type:di,selectors:[["j-letters-outbox"]],inputs:{highlighted:"highlighted"},outputs:{detailsShown:"detailsShown"},decls:3,vars:3,consts:[["class","j-list__filter",4,"ngIf"],[4,"ngIf"],[1,"j-list__filter"],["jTour","LETTERS.STATUSES","jTourPosition","bottom",3,"statuses","selected"],[3,"highlighted","retrieved","detailsShown"],["emptyLabel","LETTERS.EMPTY.OUTBOX",3,"listParams","highlighted","retrieved","detailsShown"]],template:function(e,t){1&e&&(T.Rc(0,ci,2,1,"div",0),T.Rc(1,li,2,1,"ng-container",1),T.Rc(2,ui,2,2,"ng-container",1)),2&e&&(T.uc("ngIf",!t.isOnSignHidden),T.Ab(1),T.uc("ngIf",t.outboxStatus===t.LETTER_OUTBOX_STATUS.ON_SIGN&&!t.isOnSignHidden),T.Ab(1),T.uc("ngIf",t.outboxStatus===t.LETTER_OUTBOX_STATUS.SENT))},directives:[s.u,yt.a,pt.a,Yt,oi],styles:[""]}),di),hi=["lettersAside"];function pi(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"j-letters-outbox",12),T.ic("detailsShown",(function(e){return T.Ic(i),T.mc().onDetailsShown(e)})),T.Vb(),T.Tb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("highlighted",n.highlighted)}}function gi(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"j-letters-list-base",13),T.ic("detailsShown",(function(e){return T.Ic(i),T.mc().onDetailsShown(e)})),T.Vb(),T.Tb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("listParams",n.inboxParams)("highlighted",n.highlighted)("hasDateFilter",!0)}}function fi(e,t){if(1&e){var i=T.Xb();T.Ub(0),T.Wb(1,"j-letters-list-base",14),T.ic("detailsShown",(function(e){return T.Ic(i),T.mc().onDetailsShown(e)})),T.Vb(),T.Tb()}if(2&e){var n=T.mc();T.Ab(1),T.uc("listParams",n.draftsParams)("isSelectable",!0)("highlighted",n.highlighted)("isDeletable",!0)}}var vi,mi,Si,Ti=((vi=function(){function e(t,i,n){var r=this;_classCallCheck(this,e),this.route=t,this.navService=i,this.lettersService=n,this.LETTERS_CATEGORY=p,this.subscription=new te.a,this.inboxParams={incoming:!0},this.draftsParams={statusCode:[Ne.f.DRAFT]};var s=Object(le.a)([this.route.paramMap.pipe(Object(Pe.a)((function(){return window.history.state}))),this.route.data]).subscribe((function(e){var t=_slicedToArray(e,2),i=t[0],n=t[1];r.lettersCategory=n.category,r.lettersService.lastLettersListPath$.next(n.lastPath),i.highlighted&&(r.highlighted=i.highlighted)}));this.subscription.add(s)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onDetailsShown",value:function(e){this.lettersAside.showDetails(e)}},{key:"onCreateShown",value:function(){this.lettersAside.showCreate()}},{key:"onAsideClose",value:function(){this.navService.retrieveLetterBadges()}}]),e}()).\u0275fac=function(e){return new(e||vi)(T.Qb(h.a),T.Qb(lt.a),T.Qb(I))},vi.\u0275cmp=T.Kb({type:vi,selectors:[["j-letters-list"]],viewQuery:function(e,t){var i;1&e&&T.Yc(hi,!0),2&e&&T.Ec(i=T.jc())&&(t.lettersAside=i.first)},decls:19,vars:4,consts:[[1,"row"],[1,"col-lg-10","offset-lg-1","col-xl-8","offset-xl-2"],[1,"j-page"],["translate","",1,"d-none","d-lg-block","j-page__title"],[1,"j-page__body"],[1,"j-list"],[1,"j-list__nav"],[3,"createShown"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"closed"],["lettersAside",""],[3,"highlighted","detailsShown"],["emptyLabel","LETTERS.EMPTY.INBOX",3,"listParams","highlighted","hasDateFilter","detailsShown"],["emptyLabel","LETTERS.EMPTY.DRAFTS",3,"listParams","isSelectable","highlighted","isDeletable","detailsShown"]],template:function(e,t){1&e&&(T.Wb(0,"j-layout-home"),T.Wb(1,"j-aside"),T.Rb(2,"j-nav-main"),T.Vb(),T.Wb(3,"j-main"),T.Wb(4,"section",0),T.Wb(5,"section",1),T.Wb(6,"section",2),T.Wb(7,"h2",3),T.Tc(8,"LETTERS.TITLE"),T.Vb(),T.Wb(9,"section",4),T.Wb(10,"section",5),T.Wb(11,"div",6),T.Wb(12,"j-letters-nav",7),T.ic("createShown",(function(e){return t.onCreateShown()})),T.Vb(),T.Vb(),T.Ub(13,8),T.Rc(14,pi,2,1,"ng-container",9),T.Rc(15,gi,2,3,"ng-container",9),T.Rc(16,fi,2,4,"ng-container",9),T.Tb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Vb(),T.Wb(17,"j-letters-aside",10,11),T.ic("closed",(function(e){return t.onAsideClose()})),T.Vb(),T.Vb(),T.Vb()),2&e&&(T.Ab(13),T.uc("ngSwitch",t.lettersCategory),T.Ab(1),T.uc("ngSwitchCase",t.LETTERS_CATEGORY.OUTBOX),T.Ab(1),T.uc("ngSwitchCase",t.LETTERS_CATEGORY.INBOX),T.Ab(1),T.uc("ngSwitchCase",t.LETTERS_CATEGORY.DRAFTS))},directives:[ut.a,dt.a,bt.a,ht.a,V.a,Tt,s.y,s.z,Ie,bi,oi],styles:[".letters__body[_ngcontent-%COMP%]{box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:.5rem}.letters__page-title[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px}.letters__header[_ngcontent-%COMP%]{padding:20px 1rem;display:none}@media(min-width:960px){.letters__header[_ngcontent-%COMP%]{display:grid}}"]}),vi),yi=i("Kd2e"),_i=[{path:"",component:(mi=function(){function e(t){_classCallCheck(this,e),this.featureFlagsService=t,this.subscription=new te.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription.add(this.featureFlagsService.featureFlags$.subscribe((function(t){e.featureFlagsService.checkFeatureRoute(yi.a.LETTER)})))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),e}(),mi.\u0275fac=function(e){return new(e||mi)(T.Qb(yi.b))},mi.\u0275cmp=T.Kb({type:mi,selectors:[["j-letters"]],decls:1,vars:0,template:function(e,t){1&e&&T.Rb(0,"router-outlet")},directives:[h.h],styles:[".letters__body[_ngcontent-%COMP%]{box-shadow:0 0 1px rgba(0,0,0,.04),0 0 2px rgba(0,0,0,.06),0 4px 8px rgba(0,0,0,.04);border-radius:.5rem}.letters__page-title[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px}.letters__header[_ngcontent-%COMP%]{padding:20px 1rem;display:none}@media(min-width:960px){.letters__header[_ngcontent-%COMP%]{display:grid}}"]}),mi),data:{title:"CONTRACTS.TITLE"},children:[{path:"outbox",children:[{path:"on-sign",component:Ti,data:{category:p.OUTBOX,status:g.ON_SIGN,lastPath:"outbox/on-sign",isOutbox:!0}},{path:"sent",component:Ti,data:{category:p.OUTBOX,status:g.SENT,lastPath:"outbox/sent",isOutbox:!0}},{path:"**",redirectTo:"on-sign"}]},{path:"inbox",component:Ti,data:{category:p.INBOX,lastPath:"inbox"}},{path:"drafts",component:Ti,data:{category:p.DRAFTS,lastPath:"drafts"}},{path:"create",component:ct},{path:"edit/:id",component:ct},{path:"**",redirectTo:"outbox"}]},{path:"**",redirectTo:""}],ki=((Si=function e(){_classCallCheck(this,e)}).\u0275mod=T.Ob({type:Si}),Si.\u0275inj=T.Nb({factory:function(e){return new(e||Si)},imports:[[h.g.forChild(_i)],h.g]}),Si);i("LJJp"),i.d(t,"LettersModule",(function(){return Ci}));var Oi,wi=[s.c,a.n,a.D,o.b,l.c,c.b,u.a,d.a,b.a,ki],Ci=((Oi=function e(){_classCallCheck(this,e)}).\u0275mod=T.Ob({type:Oi}),Oi.\u0275inj=T.Nb({factory:function(e){return new(e||Oi)},imports:[[wi]]}),Oi)}}]);